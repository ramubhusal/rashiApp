{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport { extend } from '../../shared/utils';\n\nfunction initTouch() {\n  var app = this;\n  var device = getDevice();\n  var support = getSupport();\n  var window = getWindow();\n  var document = getDocument();\n  var params = app.params.touch;\n  var useRipple = params[app.theme + \"TouchRipple\"];\n\n  if (device.ios && device.webView) {\n    // Strange hack required for iOS 8 webview to work on inputs\n    window.addEventListener('touchstart', function () {});\n  }\n\n  var touchStartX;\n  var touchStartY;\n  var targetElement;\n  var isMoved;\n  var tapHoldFired;\n  var tapHoldTimeout;\n  var preventClick;\n  var activableElement;\n  var activeTimeout;\n  var rippleWave;\n  var rippleTarget;\n  var rippleTimeout;\n\n  function findActivableElement(el) {\n    var target = $(el);\n    var parents = target.parents(params.activeStateElements);\n\n    if (target.closest('.no-active-state').length) {\n      return null;\n    }\n\n    var activable;\n\n    if (target.is(params.activeStateElements)) {\n      activable = target;\n    }\n\n    if (parents.length > 0) {\n      activable = activable ? activable.add(parents) : parents;\n    }\n\n    if (activable && activable.length > 1) {\n      var newActivable = [];\n      var preventPropagation;\n\n      for (var i = 0; i < activable.length; i += 1) {\n        if (!preventPropagation) {\n          newActivable.push(activable[i]);\n\n          if (activable.eq(i).hasClass('prevent-active-state-propagation') || activable.eq(i).hasClass('no-active-state-propagation')) {\n            preventPropagation = true;\n          }\n        }\n      }\n\n      activable = $(newActivable);\n    }\n\n    return activable || target;\n  }\n\n  function isInsideScrollableView(el) {\n    var pageContent = el.parents('.page-content');\n    return pageContent.length > 0;\n  }\n\n  function addActive() {\n    if (!activableElement) return;\n    activableElement.addClass('active-state');\n  }\n\n  function removeActive() {\n    if (!activableElement) return;\n    activableElement.removeClass('active-state');\n    activableElement = null;\n  } // Ripple handlers\n\n\n  function findRippleElement(el) {\n    var rippleElements = params.touchRippleElements;\n    var $el = $(el);\n\n    if ($el.is(rippleElements)) {\n      if ($el.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return $el;\n    }\n\n    if ($el.parents(rippleElements).length > 0) {\n      var rippleParent = $el.parents(rippleElements).eq(0);\n\n      if (rippleParent.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return rippleParent;\n    }\n\n    return false;\n  }\n\n  function createRipple($el, x, y) {\n    if (!$el) return;\n    rippleWave = app.touchRipple.create(app, $el, x, y);\n  }\n\n  function removeRipple() {\n    if (!rippleWave) return;\n    rippleWave.remove();\n    rippleWave = undefined;\n    rippleTarget = undefined;\n  }\n\n  function rippleTouchStart(el) {\n    rippleTarget = findRippleElement(el);\n\n    if (!rippleTarget || rippleTarget.length === 0) {\n      rippleTarget = undefined;\n      return;\n    }\n\n    var inScrollable = isInsideScrollableView(rippleTarget);\n\n    if (!inScrollable) {\n      removeRipple();\n      createRipple(rippleTarget, touchStartX, touchStartY);\n    } else {\n      clearTimeout(rippleTimeout);\n      rippleTimeout = setTimeout(function () {\n        removeRipple();\n        createRipple(rippleTarget, touchStartX, touchStartY);\n      }, 80);\n    }\n  }\n\n  function rippleTouchMove() {\n    clearTimeout(rippleTimeout);\n    removeRipple();\n  }\n\n  function rippleTouchEnd() {\n    if (!rippleWave && rippleTarget && !isMoved) {\n      clearTimeout(rippleTimeout);\n      createRipple(rippleTarget, touchStartX, touchStartY);\n      setTimeout(removeRipple, 0);\n    } else {\n      removeRipple();\n    }\n  } // Mouse Handlers\n\n\n  function handleMouseDown(e) {\n    var $activableEl = findActivableElement(e.target);\n\n    if ($activableEl) {\n      $activableEl.addClass('active-state');\n\n      if ('which' in e && e.which === 3) {\n        setTimeout(function () {\n          $('.active-state').removeClass('active-state');\n        }, 0);\n      }\n    }\n\n    if (useRipple) {\n      touchStartX = e.pageX;\n      touchStartY = e.pageY;\n      rippleTouchStart(e.target, e.pageX, e.pageY);\n    }\n  }\n\n  function handleMouseMove() {\n    if (!params.activeStateOnMouseMove) {\n      $('.active-state').removeClass('active-state');\n    }\n\n    if (useRipple) {\n      rippleTouchMove();\n    }\n  }\n\n  function handleMouseUp() {\n    $('.active-state').removeClass('active-state');\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchCancel() {\n    targetElement = null; // Remove Active State\n\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (params.activeState) {\n      removeActive();\n    } // Remove Ripple\n\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchStart(e) {\n    isMoved = false;\n    tapHoldFired = false;\n    preventClick = false;\n\n    if (e.targetTouches.length > 1) {\n      if (activableElement) removeActive();\n      return true;\n    }\n\n    if (e.touches.length > 1 && activableElement) {\n      removeActive();\n    }\n\n    if (params.tapHold) {\n      if (tapHoldTimeout) clearTimeout(tapHoldTimeout);\n      tapHoldTimeout = setTimeout(function () {\n        if (e && e.touches && e.touches.length > 1) return;\n        tapHoldFired = true;\n        e.preventDefault();\n        preventClick = true;\n        $(e.target).trigger('taphold', e);\n        app.emit('taphold', e);\n      }, params.tapHoldDelay);\n    }\n\n    targetElement = e.target;\n    touchStartX = e.targetTouches[0].pageX;\n    touchStartY = e.targetTouches[0].pageY;\n\n    if (params.activeState) {\n      activableElement = findActivableElement(targetElement);\n\n      if (activableElement && !isInsideScrollableView(activableElement)) {\n        addActive();\n      } else if (activableElement) {\n        activeTimeout = setTimeout(addActive, 80);\n      }\n    }\n\n    if (useRipple) {\n      rippleTouchStart(targetElement, touchStartX, touchStartY);\n    }\n\n    return true;\n  }\n\n  function handleTouchMove(e) {\n    var touch;\n    var distance;\n\n    if (e.type === 'touchmove') {\n      touch = e.targetTouches[0];\n      distance = params.touchClicksDistanceThreshold;\n    }\n\n    if (distance && touch) {\n      var pageX = touch.pageX;\n      var pageY = touch.pageY;\n\n      if (Math.abs(pageX - touchStartX) > distance || Math.abs(pageY - touchStartY) > distance) {\n        isMoved = true;\n      }\n    } else {\n      isMoved = true;\n    }\n\n    if (isMoved) {\n      preventClick = true;\n\n      if (params.tapHold) {\n        clearTimeout(tapHoldTimeout);\n      }\n\n      if (params.activeState) {\n        clearTimeout(activeTimeout);\n        removeActive();\n      }\n\n      if (useRipple) {\n        rippleTouchMove();\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (document.activeElement === e.target) {\n      if (params.activeState) removeActive();\n\n      if (useRipple) {\n        rippleTouchEnd();\n      }\n\n      return true;\n    }\n\n    if (params.activeState) {\n      addActive();\n      setTimeout(removeActive, 0);\n    }\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n\n    if (params.tapHoldPreventClicks && tapHoldFired || preventClick) {\n      if (e.cancelable) e.preventDefault();\n      preventClick = true;\n      return false;\n    }\n\n    return true;\n  }\n\n  function handleClick(e) {\n    var isOverswipe = e && e.detail && e.detail === 'f7Overswipe';\n    var localPreventClick = preventClick;\n\n    if (targetElement && e.target !== targetElement) {\n      if (isOverswipe) {\n        localPreventClick = false;\n      } else {\n        localPreventClick = true;\n      }\n    }\n\n    if (params.tapHold && params.tapHoldPreventClicks && tapHoldFired) {\n      localPreventClick = true;\n    }\n\n    if (localPreventClick) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    if (params.tapHold) {\n      tapHoldTimeout = setTimeout(function () {\n        tapHoldFired = false;\n      }, device.ios || device.androidChrome ? 100 : 400);\n    }\n\n    preventClick = false;\n    targetElement = null;\n    return !localPreventClick;\n  }\n\n  function emitAppTouchEvent(name, e) {\n    app.emit({\n      events: name,\n      data: [e]\n    });\n  }\n\n  function appClick(e) {\n    emitAppTouchEvent('click', e);\n  }\n\n  function appTouchStartActive(e) {\n    emitAppTouchEvent('touchstart touchstart:active', e);\n  }\n\n  function appTouchMoveActive(e) {\n    emitAppTouchEvent('touchmove touchmove:active', e);\n  }\n\n  function appTouchEndActive(e) {\n    emitAppTouchEvent('touchend touchend:active', e);\n  }\n\n  function appTouchStartPassive(e) {\n    emitAppTouchEvent('touchstart:passive', e);\n  }\n\n  function appTouchMovePassive(e) {\n    emitAppTouchEvent('touchmove:passive', e);\n  }\n\n  function appTouchEndPassive(e) {\n    emitAppTouchEvent('touchend:passive', e);\n  }\n\n  var passiveListener = support.passiveListener ? {\n    passive: true\n  } : false;\n  var passiveListenerCapture = support.passiveListener ? {\n    passive: true,\n    capture: true\n  } : true;\n  var activeListener = support.passiveListener ? {\n    passive: false\n  } : false;\n  var activeListenerCapture = support.passiveListener ? {\n    passive: false,\n    capture: true\n  } : true;\n  document.addEventListener('click', appClick, true);\n\n  if (support.passiveListener) {\n    document.addEventListener(app.touchEvents.start, appTouchStartActive, activeListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMoveActive, activeListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndActive, activeListener);\n    document.addEventListener(app.touchEvents.start, appTouchStartPassive, passiveListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMovePassive, passiveListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndPassive, passiveListener);\n  } else {\n    document.addEventListener(app.touchEvents.start, function (e) {\n      appTouchStartActive(e);\n      appTouchStartPassive(e);\n    }, true);\n    document.addEventListener(app.touchEvents.move, function (e) {\n      appTouchMoveActive(e);\n      appTouchMovePassive(e);\n    }, false);\n    document.addEventListener(app.touchEvents.end, function (e) {\n      appTouchEndActive(e);\n      appTouchEndPassive(e);\n    }, false);\n  }\n\n  if (support.touch) {\n    app.on('click', handleClick);\n    app.on('touchstart', handleTouchStart);\n    app.on('touchmove', handleTouchMove);\n    app.on('touchend', handleTouchEnd);\n    document.addEventListener('touchcancel', handleTouchCancel, {\n      passive: true\n    });\n  } else if (params.activeState) {\n    app.on('touchstart', handleMouseDown);\n    app.on('touchmove', handleMouseMove);\n    app.on('touchend', handleMouseUp);\n    document.addEventListener('pointercancel', handleMouseUp, {\n      passive: true\n    });\n  }\n\n  document.addEventListener('contextmenu', function (e) {\n    if (params.disableContextMenu && (device.ios || device.android || device.cordova || window.Capacitor && window.Capacitor.isNative)) {\n      e.preventDefault();\n    }\n\n    if (useRipple) {\n      if (activableElement) removeActive();\n      rippleTouchEnd();\n    }\n  });\n}\n\nexport default {\n  name: 'touch',\n  params: {\n    touch: {\n      // Clicks\n      touchClicksDistanceThreshold: 5,\n      // ContextMenu\n      disableContextMenu: false,\n      // Tap Hold\n      tapHold: false,\n      tapHoldDelay: 750,\n      tapHoldPreventClicks: true,\n      // Active State\n      activeState: true,\n      activeStateElements: 'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle',\n      activeStateOnMouseMove: false,\n      mdTouchRipple: true,\n      iosTouchRipple: false,\n      auroraTouchRipple: false,\n      touchRippleElements: '.ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle',\n      touchRippleInsetElements: '.ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back'\n    }\n  },\n  create: function create() {\n    var app = this;\n    var support = getSupport();\n    extend(app, {\n      touchEvents: {\n        start: support.touch ? 'touchstart' : support.pointerEvents ? 'pointerdown' : 'mousedown',\n        move: support.touch ? 'touchmove' : support.pointerEvents ? 'pointermove' : 'mousemove',\n        end: support.touch ? 'touchend' : support.pointerEvents ? 'pointerup' : 'mouseup'\n      }\n    });\n  },\n  on: {\n    init: initTouch\n  }\n};","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/modules/touch/touch.js"],"names":["getWindow","getDocument","$","getSupport","getDevice","extend","initTouch","app","device","support","window","document","params","touch","useRipple","theme","ios","webView","addEventListener","touchStartX","touchStartY","targetElement","isMoved","tapHoldFired","tapHoldTimeout","preventClick","activableElement","activeTimeout","rippleWave","rippleTarget","rippleTimeout","findActivableElement","el","target","parents","activeStateElements","closest","length","activable","is","add","newActivable","preventPropagation","i","push","eq","hasClass","isInsideScrollableView","pageContent","addActive","addClass","removeActive","removeClass","findRippleElement","rippleElements","touchRippleElements","$el","rippleParent","createRipple","x","y","touchRipple","create","removeRipple","remove","undefined","rippleTouchStart","inScrollable","clearTimeout","setTimeout","rippleTouchMove","rippleTouchEnd","handleMouseDown","e","$activableEl","which","pageX","pageY","handleMouseMove","activeStateOnMouseMove","handleMouseUp","handleTouchCancel","activeState","handleTouchStart","targetTouches","touches","tapHold","preventDefault","trigger","emit","tapHoldDelay","handleTouchMove","distance","type","touchClicksDistanceThreshold","Math","abs","handleTouchEnd","activeElement","tapHoldPreventClicks","cancelable","handleClick","isOverswipe","detail","localPreventClick","stopImmediatePropagation","stopPropagation","androidChrome","emitAppTouchEvent","name","events","data","appClick","appTouchStartActive","appTouchMoveActive","appTouchEndActive","appTouchStartPassive","appTouchMovePassive","appTouchEndPassive","passiveListener","passive","passiveListenerCapture","capture","activeListener","activeListenerCapture","touchEvents","start","move","end","on","disableContextMenu","android","cordova","Capacitor","isNative","mdTouchRipple","iosTouchRipple","auroraTouchRipple","touchRippleInsetElements","pointerEvents","init"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport { extend } from '../../shared/utils';\n\nfunction initTouch() {\n  var app = this;\n  var device = getDevice();\n  var support = getSupport();\n  var window = getWindow();\n  var document = getDocument();\n  var params = app.params.touch;\n  var useRipple = params[app.theme + \"TouchRipple\"];\n\n  if (device.ios && device.webView) {\n    // Strange hack required for iOS 8 webview to work on inputs\n    window.addEventListener('touchstart', function () {});\n  }\n\n  var touchStartX;\n  var touchStartY;\n  var targetElement;\n  var isMoved;\n  var tapHoldFired;\n  var tapHoldTimeout;\n  var preventClick;\n  var activableElement;\n  var activeTimeout;\n  var rippleWave;\n  var rippleTarget;\n  var rippleTimeout;\n\n  function findActivableElement(el) {\n    var target = $(el);\n    var parents = target.parents(params.activeStateElements);\n\n    if (target.closest('.no-active-state').length) {\n      return null;\n    }\n\n    var activable;\n\n    if (target.is(params.activeStateElements)) {\n      activable = target;\n    }\n\n    if (parents.length > 0) {\n      activable = activable ? activable.add(parents) : parents;\n    }\n\n    if (activable && activable.length > 1) {\n      var newActivable = [];\n      var preventPropagation;\n\n      for (var i = 0; i < activable.length; i += 1) {\n        if (!preventPropagation) {\n          newActivable.push(activable[i]);\n\n          if (activable.eq(i).hasClass('prevent-active-state-propagation') || activable.eq(i).hasClass('no-active-state-propagation')) {\n            preventPropagation = true;\n          }\n        }\n      }\n\n      activable = $(newActivable);\n    }\n\n    return activable || target;\n  }\n\n  function isInsideScrollableView(el) {\n    var pageContent = el.parents('.page-content');\n    return pageContent.length > 0;\n  }\n\n  function addActive() {\n    if (!activableElement) return;\n    activableElement.addClass('active-state');\n  }\n\n  function removeActive() {\n    if (!activableElement) return;\n    activableElement.removeClass('active-state');\n    activableElement = null;\n  } // Ripple handlers\n\n\n  function findRippleElement(el) {\n    var rippleElements = params.touchRippleElements;\n    var $el = $(el);\n\n    if ($el.is(rippleElements)) {\n      if ($el.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return $el;\n    }\n\n    if ($el.parents(rippleElements).length > 0) {\n      var rippleParent = $el.parents(rippleElements).eq(0);\n\n      if (rippleParent.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return rippleParent;\n    }\n\n    return false;\n  }\n\n  function createRipple($el, x, y) {\n    if (!$el) return;\n    rippleWave = app.touchRipple.create(app, $el, x, y);\n  }\n\n  function removeRipple() {\n    if (!rippleWave) return;\n    rippleWave.remove();\n    rippleWave = undefined;\n    rippleTarget = undefined;\n  }\n\n  function rippleTouchStart(el) {\n    rippleTarget = findRippleElement(el);\n\n    if (!rippleTarget || rippleTarget.length === 0) {\n      rippleTarget = undefined;\n      return;\n    }\n\n    var inScrollable = isInsideScrollableView(rippleTarget);\n\n    if (!inScrollable) {\n      removeRipple();\n      createRipple(rippleTarget, touchStartX, touchStartY);\n    } else {\n      clearTimeout(rippleTimeout);\n      rippleTimeout = setTimeout(function () {\n        removeRipple();\n        createRipple(rippleTarget, touchStartX, touchStartY);\n      }, 80);\n    }\n  }\n\n  function rippleTouchMove() {\n    clearTimeout(rippleTimeout);\n    removeRipple();\n  }\n\n  function rippleTouchEnd() {\n    if (!rippleWave && rippleTarget && !isMoved) {\n      clearTimeout(rippleTimeout);\n      createRipple(rippleTarget, touchStartX, touchStartY);\n      setTimeout(removeRipple, 0);\n    } else {\n      removeRipple();\n    }\n  } // Mouse Handlers\n\n\n  function handleMouseDown(e) {\n    var $activableEl = findActivableElement(e.target);\n\n    if ($activableEl) {\n      $activableEl.addClass('active-state');\n\n      if ('which' in e && e.which === 3) {\n        setTimeout(function () {\n          $('.active-state').removeClass('active-state');\n        }, 0);\n      }\n    }\n\n    if (useRipple) {\n      touchStartX = e.pageX;\n      touchStartY = e.pageY;\n      rippleTouchStart(e.target, e.pageX, e.pageY);\n    }\n  }\n\n  function handleMouseMove() {\n    if (!params.activeStateOnMouseMove) {\n      $('.active-state').removeClass('active-state');\n    }\n\n    if (useRipple) {\n      rippleTouchMove();\n    }\n  }\n\n  function handleMouseUp() {\n    $('.active-state').removeClass('active-state');\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchCancel() {\n    targetElement = null; // Remove Active State\n\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (params.activeState) {\n      removeActive();\n    } // Remove Ripple\n\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchStart(e) {\n    isMoved = false;\n    tapHoldFired = false;\n    preventClick = false;\n\n    if (e.targetTouches.length > 1) {\n      if (activableElement) removeActive();\n      return true;\n    }\n\n    if (e.touches.length > 1 && activableElement) {\n      removeActive();\n    }\n\n    if (params.tapHold) {\n      if (tapHoldTimeout) clearTimeout(tapHoldTimeout);\n      tapHoldTimeout = setTimeout(function () {\n        if (e && e.touches && e.touches.length > 1) return;\n        tapHoldFired = true;\n        e.preventDefault();\n        preventClick = true;\n        $(e.target).trigger('taphold', e);\n        app.emit('taphold', e);\n      }, params.tapHoldDelay);\n    }\n\n    targetElement = e.target;\n    touchStartX = e.targetTouches[0].pageX;\n    touchStartY = e.targetTouches[0].pageY;\n\n    if (params.activeState) {\n      activableElement = findActivableElement(targetElement);\n\n      if (activableElement && !isInsideScrollableView(activableElement)) {\n        addActive();\n      } else if (activableElement) {\n        activeTimeout = setTimeout(addActive, 80);\n      }\n    }\n\n    if (useRipple) {\n      rippleTouchStart(targetElement, touchStartX, touchStartY);\n    }\n\n    return true;\n  }\n\n  function handleTouchMove(e) {\n    var touch;\n    var distance;\n\n    if (e.type === 'touchmove') {\n      touch = e.targetTouches[0];\n      distance = params.touchClicksDistanceThreshold;\n    }\n\n    if (distance && touch) {\n      var pageX = touch.pageX;\n      var pageY = touch.pageY;\n\n      if (Math.abs(pageX - touchStartX) > distance || Math.abs(pageY - touchStartY) > distance) {\n        isMoved = true;\n      }\n    } else {\n      isMoved = true;\n    }\n\n    if (isMoved) {\n      preventClick = true;\n\n      if (params.tapHold) {\n        clearTimeout(tapHoldTimeout);\n      }\n\n      if (params.activeState) {\n        clearTimeout(activeTimeout);\n        removeActive();\n      }\n\n      if (useRipple) {\n        rippleTouchMove();\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (document.activeElement === e.target) {\n      if (params.activeState) removeActive();\n\n      if (useRipple) {\n        rippleTouchEnd();\n      }\n\n      return true;\n    }\n\n    if (params.activeState) {\n      addActive();\n      setTimeout(removeActive, 0);\n    }\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n\n    if (params.tapHoldPreventClicks && tapHoldFired || preventClick) {\n      if (e.cancelable) e.preventDefault();\n      preventClick = true;\n      return false;\n    }\n\n    return true;\n  }\n\n  function handleClick(e) {\n    var isOverswipe = e && e.detail && e.detail === 'f7Overswipe';\n    var localPreventClick = preventClick;\n\n    if (targetElement && e.target !== targetElement) {\n      if (isOverswipe) {\n        localPreventClick = false;\n      } else {\n        localPreventClick = true;\n      }\n    }\n\n    if (params.tapHold && params.tapHoldPreventClicks && tapHoldFired) {\n      localPreventClick = true;\n    }\n\n    if (localPreventClick) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    if (params.tapHold) {\n      tapHoldTimeout = setTimeout(function () {\n        tapHoldFired = false;\n      }, device.ios || device.androidChrome ? 100 : 400);\n    }\n\n    preventClick = false;\n    targetElement = null;\n    return !localPreventClick;\n  }\n\n  function emitAppTouchEvent(name, e) {\n    app.emit({\n      events: name,\n      data: [e]\n    });\n  }\n\n  function appClick(e) {\n    emitAppTouchEvent('click', e);\n  }\n\n  function appTouchStartActive(e) {\n    emitAppTouchEvent('touchstart touchstart:active', e);\n  }\n\n  function appTouchMoveActive(e) {\n    emitAppTouchEvent('touchmove touchmove:active', e);\n  }\n\n  function appTouchEndActive(e) {\n    emitAppTouchEvent('touchend touchend:active', e);\n  }\n\n  function appTouchStartPassive(e) {\n    emitAppTouchEvent('touchstart:passive', e);\n  }\n\n  function appTouchMovePassive(e) {\n    emitAppTouchEvent('touchmove:passive', e);\n  }\n\n  function appTouchEndPassive(e) {\n    emitAppTouchEvent('touchend:passive', e);\n  }\n\n  var passiveListener = support.passiveListener ? {\n    passive: true\n  } : false;\n  var passiveListenerCapture = support.passiveListener ? {\n    passive: true,\n    capture: true\n  } : true;\n  var activeListener = support.passiveListener ? {\n    passive: false\n  } : false;\n  var activeListenerCapture = support.passiveListener ? {\n    passive: false,\n    capture: true\n  } : true;\n  document.addEventListener('click', appClick, true);\n\n  if (support.passiveListener) {\n    document.addEventListener(app.touchEvents.start, appTouchStartActive, activeListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMoveActive, activeListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndActive, activeListener);\n    document.addEventListener(app.touchEvents.start, appTouchStartPassive, passiveListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMovePassive, passiveListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndPassive, passiveListener);\n  } else {\n    document.addEventListener(app.touchEvents.start, function (e) {\n      appTouchStartActive(e);\n      appTouchStartPassive(e);\n    }, true);\n    document.addEventListener(app.touchEvents.move, function (e) {\n      appTouchMoveActive(e);\n      appTouchMovePassive(e);\n    }, false);\n    document.addEventListener(app.touchEvents.end, function (e) {\n      appTouchEndActive(e);\n      appTouchEndPassive(e);\n    }, false);\n  }\n\n  if (support.touch) {\n    app.on('click', handleClick);\n    app.on('touchstart', handleTouchStart);\n    app.on('touchmove', handleTouchMove);\n    app.on('touchend', handleTouchEnd);\n    document.addEventListener('touchcancel', handleTouchCancel, {\n      passive: true\n    });\n  } else if (params.activeState) {\n    app.on('touchstart', handleMouseDown);\n    app.on('touchmove', handleMouseMove);\n    app.on('touchend', handleMouseUp);\n    document.addEventListener('pointercancel', handleMouseUp, {\n      passive: true\n    });\n  }\n\n  document.addEventListener('contextmenu', function (e) {\n    if (params.disableContextMenu && (device.ios || device.android || device.cordova || window.Capacitor && window.Capacitor.isNative)) {\n      e.preventDefault();\n    }\n\n    if (useRipple) {\n      if (activableElement) removeActive();\n      rippleTouchEnd();\n    }\n  });\n}\n\nexport default {\n  name: 'touch',\n  params: {\n    touch: {\n      // Clicks\n      touchClicksDistanceThreshold: 5,\n      // ContextMenu\n      disableContextMenu: false,\n      // Tap Hold\n      tapHold: false,\n      tapHoldDelay: 750,\n      tapHoldPreventClicks: true,\n      // Active State\n      activeState: true,\n      activeStateElements: 'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle',\n      activeStateOnMouseMove: false,\n      mdTouchRipple: true,\n      iosTouchRipple: false,\n      auroraTouchRipple: false,\n      touchRippleElements: '.ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle',\n      touchRippleInsetElements: '.ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back'\n    }\n  },\n  create: function create() {\n    var app = this;\n    var support = getSupport();\n    extend(app, {\n      touchEvents: {\n        start: support.touch ? 'touchstart' : support.pointerEvents ? 'pointerdown' : 'mousedown',\n        move: support.touch ? 'touchmove' : support.pointerEvents ? 'pointermove' : 'mousemove',\n        end: support.touch ? 'touchend' : support.pointerEvents ? 'pointerup' : 'mouseup'\n      }\n    });\n  },\n  on: {\n    init: initTouch\n  }\n};"]},"metadata":{},"sourceType":"module"}