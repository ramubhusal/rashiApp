{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nvar openedModals = [];\nvar dialogsQueue = [];\n\nfunction clearDialogsQueue() {\n  if (dialogsQueue.length === 0) return;\n  var dialog = dialogsQueue.shift();\n  dialog.open();\n}\n\nvar Modal = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Modal, _Framework7Class);\n\n  function Modal(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var modal = _assertThisInitialized(_this);\n\n    var defaults = {}; // Extend defaults with modules params\n\n    modal.useModulesParams(defaults);\n    modal.params = extend(defaults, params);\n    modal.opened = false;\n    var $containerEl = modal.params.containerEl ? $(modal.params.containerEl).eq(0) : app.$el;\n    if (!$containerEl.length) $containerEl = app.$el;\n    modal.$containerEl = $containerEl;\n    modal.containerEl = $containerEl[0]; // Install Modules\n\n    modal.useModules();\n    return _assertThisInitialized(_this) || _assertThisInitialized(_this);\n  }\n\n  var _proto = Modal.prototype;\n\n  _proto.onOpen = function onOpen() {\n    var modal = this;\n    modal.opened = true;\n    openedModals.push(modal);\n    $('html').addClass(\"with-modal-\" + modal.type.toLowerCase());\n    modal.$el.trigger(\"modal:open \" + modal.type.toLowerCase() + \":open\");\n    modal.emit(\"local::open modalOpen \" + modal.type + \"Open\", modal);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var modal = this;\n    modal.$el.trigger(\"modal:opened \" + modal.type.toLowerCase() + \":opened\");\n    modal.emit(\"local::opened modalOpened \" + modal.type + \"Opened\", modal);\n  };\n\n  _proto.onClose = function onClose() {\n    var modal = this;\n    modal.opened = false;\n    if (!modal.type || !modal.$el) return;\n    openedModals.splice(openedModals.indexOf(modal), 1);\n    $('html').removeClass(\"with-modal-\" + modal.type.toLowerCase());\n    modal.$el.trigger(\"modal:close \" + modal.type.toLowerCase() + \":close\");\n    modal.emit(\"local::close modalClose \" + modal.type + \"Close\", modal);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var modal = this;\n    if (!modal.type || !modal.$el) return;\n    modal.$el.removeClass('modal-out');\n    modal.$el.hide();\n    modal.$el.trigger(\"modal:closed \" + modal.type.toLowerCase() + \":closed\");\n    modal.emit(\"local::closed modalClosed \" + modal.type + \"Closed\", modal);\n  };\n\n  _proto.open = function open(animateModal) {\n    var modal = this;\n    var document = getDocument();\n    var app = modal.app;\n    var $el = modal.$el;\n    var $backdropEl = modal.$backdropEl;\n    var type = modal.type;\n    var animate = true;\n    if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {\n      animate = modal.params.animate;\n    }\n\n    if (!$el || $el.hasClass('modal-in')) {\n      return modal;\n    }\n\n    if (type === 'dialog' && app.params.modal.queueDialogs) {\n      var pushToQueue;\n\n      if ($('.dialog.modal-in').length > 0) {\n        pushToQueue = true;\n      } else if (openedModals.length > 0) {\n        openedModals.forEach(function (openedModal) {\n          if (openedModal.type === 'dialog') pushToQueue = true;\n        });\n      }\n\n      if (pushToQueue) {\n        dialogsQueue.push(modal);\n        return modal;\n      }\n    }\n\n    var $modalParentEl = $el.parent();\n    var wasInDom = $el.parents(document).length > 0;\n\n    if (!$modalParentEl.is(modal.$containerEl)) {\n      modal.$containerEl.append($el);\n      modal.once(type + \"Closed\", function () {\n        if (wasInDom) {\n          $modalParentEl.append($el);\n        } else {\n          $el.remove();\n        }\n      });\n    } // Show Modal\n\n\n    $el.show();\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    modal._clientLeft = $el[0].clientLeft; // Modal\n\n    function transitionEnd() {\n      if ($el.hasClass('modal-out')) {\n        modal.onClosed();\n      } else if ($el.hasClass('modal-in')) {\n        modal.onOpened();\n      }\n    }\n\n    if (animate) {\n      if ($backdropEl) {\n        $backdropEl.removeClass('not-animated');\n        $backdropEl.addClass('backdrop-in');\n      }\n\n      $el.animationEnd(function () {\n        transitionEnd();\n      });\n      $el.transitionEnd(function () {\n        transitionEnd();\n      });\n      $el.removeClass('modal-out not-animated').addClass('modal-in');\n      modal.onOpen();\n    } else {\n      if ($backdropEl) {\n        $backdropEl.addClass('backdrop-in not-animated');\n      }\n\n      $el.removeClass('modal-out').addClass('modal-in not-animated');\n      modal.onOpen();\n      modal.onOpened();\n    }\n\n    return modal;\n  };\n\n  _proto.close = function close(animateModal) {\n    var modal = this;\n    var $el = modal.$el;\n    var $backdropEl = modal.$backdropEl;\n    var animate = true;\n    if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {\n      animate = modal.params.animate;\n    }\n\n    if (!$el || !$el.hasClass('modal-in')) {\n      if (dialogsQueue.indexOf(modal) >= 0) {\n        dialogsQueue.splice(dialogsQueue.indexOf(modal), 1);\n      }\n\n      return modal;\n    } // backdrop\n\n\n    if ($backdropEl) {\n      var needToHideBackdrop = true;\n\n      if (modal.type === 'popup') {\n        modal.$el.prevAll('.popup.modal-in').add(modal.$el.nextAll('.popup.modal-in')).each(function (popupEl) {\n          var popupInstance = popupEl.f7Modal;\n          if (!popupInstance) return;\n\n          if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === modal.backdropEl) {\n            needToHideBackdrop = false;\n          }\n        });\n      }\n\n      if (needToHideBackdrop) {\n        $backdropEl[animate ? 'removeClass' : 'addClass']('not-animated');\n        $backdropEl.removeClass('backdrop-in');\n      }\n    } // Modal\n\n\n    $el[animate ? 'removeClass' : 'addClass']('not-animated');\n\n    function transitionEnd() {\n      if ($el.hasClass('modal-out')) {\n        modal.onClosed();\n      } else if ($el.hasClass('modal-in')) {\n        modal.onOpened();\n      }\n    }\n\n    if (animate) {\n      $el.animationEnd(function () {\n        transitionEnd();\n      });\n      $el.transitionEnd(function () {\n        transitionEnd();\n      });\n      $el.removeClass('modal-in').addClass('modal-out'); // Emit close\n\n      modal.onClose();\n    } else {\n      $el.addClass('not-animated').removeClass('modal-in').addClass('modal-out'); // Emit close\n\n      modal.onClose();\n      modal.onClosed();\n    }\n\n    if (modal.type === 'dialog') {\n      clearDialogsQueue();\n    }\n\n    return modal;\n  };\n\n  _proto.destroy = function destroy() {\n    var modal = this;\n    if (modal.destroyed) return;\n    modal.emit(\"local::beforeDestroy modalBeforeDestroy \" + modal.type + \"BeforeDestroy\", modal);\n\n    if (modal.$el) {\n      modal.$el.trigger(\"modal:beforedestroy \" + modal.type.toLowerCase() + \":beforedestroy\");\n\n      if (modal.$el.length && modal.$el[0].f7Modal) {\n        delete modal.$el[0].f7Modal;\n      }\n    }\n\n    deleteProps(modal);\n    modal.destroyed = true;\n  };\n\n  return Modal;\n}(Framework7Class);\n\nexport default Modal;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/modal/modal-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getDocument","$","extend","deleteProps","Framework7Class","openedModals","dialogsQueue","clearDialogsQueue","length","dialog","shift","open","Modal","_Framework7Class","app","params","_this","call","modal","defaults","useModulesParams","opened","$containerEl","containerEl","eq","$el","useModules","_proto","onOpen","push","addClass","type","toLowerCase","trigger","emit","onOpened","onClose","splice","indexOf","removeClass","onClosed","hide","animateModal","document","$backdropEl","animate","hasClass","queueDialogs","pushToQueue","forEach","openedModal","$modalParentEl","parent","wasInDom","parents","is","append","once","remove","show","_clientLeft","clientLeft","transitionEnd","animationEnd","close","needToHideBackdrop","prevAll","add","nextAll","each","popupEl","popupInstance","f7Modal","closeByBackdropClick","backdrop","backdropEl","destroy","destroyed"],"mappings":"AAAA,SAASA,sBAAT,CAAgCC,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAP;AAAc;;AAEtK,SAASE,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AAAED,EAAAA,QAAQ,CAACE,SAAT,GAAqBC,MAAM,CAACC,MAAP,CAAcH,UAAU,CAACC,SAAzB,CAArB;AAA0DF,EAAAA,QAAQ,CAACE,SAAT,CAAmBG,WAAnB,GAAiCL,QAAjC;AAA2CA,EAAAA,QAAQ,CAACM,SAAT,GAAqBL,UAArB;AAAkC;;AAEvL,SAASM,WAAT,QAA4B,YAA5B;AACA,OAAOC,CAAP,MAAc,mBAAd;AACA,SAASC,MAAT,EAAiBC,WAAjB,QAAoC,oBAApC;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,YAAY,GAAG,EAAnB;;AAEA,SAASC,iBAAT,GAA6B;AAC3B,MAAID,YAAY,CAACE,MAAb,KAAwB,CAA5B,EAA+B;AAC/B,MAAIC,MAAM,GAAGH,YAAY,CAACI,KAAb,EAAb;AACAD,EAAAA,MAAM,CAACE,IAAP;AACD;;AAED,IAAIC,KAAK,GAAG,aAAa,UAAUC,gBAAV,EAA4B;AACnDrB,EAAAA,cAAc,CAACoB,KAAD,EAAQC,gBAAR,CAAd;;AAEA,WAASD,KAAT,CAAeE,GAAf,EAAoBC,MAApB,EAA4B;AAC1B,QAAIC,KAAJ;;AAEAA,IAAAA,KAAK,GAAGH,gBAAgB,CAACI,IAAjB,CAAsB,IAAtB,EAA4BF,MAA5B,EAAoC,CAACD,GAAD,CAApC,KAA8C,IAAtD;;AAEA,QAAII,KAAK,GAAG7B,sBAAsB,CAAC2B,KAAD,CAAlC;;AAEA,QAAIG,QAAQ,GAAG,EAAf,CAP0B,CAOP;;AAEnBD,IAAAA,KAAK,CAACE,gBAAN,CAAuBD,QAAvB;AACAD,IAAAA,KAAK,CAACH,MAAN,GAAeb,MAAM,CAACiB,QAAD,EAAWJ,MAAX,CAArB;AACAG,IAAAA,KAAK,CAACG,MAAN,GAAe,KAAf;AACA,QAAIC,YAAY,GAAGJ,KAAK,CAACH,MAAN,CAAaQ,WAAb,GAA2BtB,CAAC,CAACiB,KAAK,CAACH,MAAN,CAAaQ,WAAd,CAAD,CAA4BC,EAA5B,CAA+B,CAA/B,CAA3B,GAA+DV,GAAG,CAACW,GAAtF;AACA,QAAI,CAACH,YAAY,CAACd,MAAlB,EAA0Bc,YAAY,GAAGR,GAAG,CAACW,GAAnB;AAC1BP,IAAAA,KAAK,CAACI,YAAN,GAAqBA,YAArB;AACAJ,IAAAA,KAAK,CAACK,WAAN,GAAoBD,YAAY,CAAC,CAAD,CAAhC,CAf0B,CAeW;;AAErCJ,IAAAA,KAAK,CAACQ,UAAN;AACA,WAAOrC,sBAAsB,CAAC2B,KAAD,CAAtB,IAAiC3B,sBAAsB,CAAC2B,KAAD,CAA9D;AACD;;AAED,MAAIW,MAAM,GAAGf,KAAK,CAACjB,SAAnB;;AAEAgC,EAAAA,MAAM,CAACC,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIV,KAAK,GAAG,IAAZ;AACAA,IAAAA,KAAK,CAACG,MAAN,GAAe,IAAf;AACAhB,IAAAA,YAAY,CAACwB,IAAb,CAAkBX,KAAlB;AACAjB,IAAAA,CAAC,CAAC,MAAD,CAAD,CAAU6B,QAAV,CAAmB,gBAAgBZ,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAnC;AACAd,IAAAA,KAAK,CAACO,GAAN,CAAUQ,OAAV,CAAkB,gBAAgBf,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAhB,GAA2C,OAA7D;AACAd,IAAAA,KAAK,CAACgB,IAAN,CAAW,2BAA2BhB,KAAK,CAACa,IAAjC,GAAwC,MAAnD,EAA2Db,KAA3D;AACD,GAPD;;AASAS,EAAAA,MAAM,CAACQ,QAAP,GAAkB,SAASA,QAAT,GAAoB;AACpC,QAAIjB,KAAK,GAAG,IAAZ;AACAA,IAAAA,KAAK,CAACO,GAAN,CAAUQ,OAAV,CAAkB,kBAAkBf,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAlB,GAA6C,SAA/D;AACAd,IAAAA,KAAK,CAACgB,IAAN,CAAW,+BAA+BhB,KAAK,CAACa,IAArC,GAA4C,QAAvD,EAAiEb,KAAjE;AACD,GAJD;;AAMAS,EAAAA,MAAM,CAACS,OAAP,GAAiB,SAASA,OAAT,GAAmB;AAClC,QAAIlB,KAAK,GAAG,IAAZ;AACAA,IAAAA,KAAK,CAACG,MAAN,GAAe,KAAf;AACA,QAAI,CAACH,KAAK,CAACa,IAAP,IAAe,CAACb,KAAK,CAACO,GAA1B,EAA+B;AAC/BpB,IAAAA,YAAY,CAACgC,MAAb,CAAoBhC,YAAY,CAACiC,OAAb,CAAqBpB,KAArB,CAApB,EAAiD,CAAjD;AACAjB,IAAAA,CAAC,CAAC,MAAD,CAAD,CAAUsC,WAAV,CAAsB,gBAAgBrB,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAtC;AACAd,IAAAA,KAAK,CAACO,GAAN,CAAUQ,OAAV,CAAkB,iBAAiBf,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAjB,GAA4C,QAA9D;AACAd,IAAAA,KAAK,CAACgB,IAAN,CAAW,6BAA6BhB,KAAK,CAACa,IAAnC,GAA0C,OAArD,EAA8Db,KAA9D;AACD,GARD;;AAUAS,EAAAA,MAAM,CAACa,QAAP,GAAkB,SAASA,QAAT,GAAoB;AACpC,QAAItB,KAAK,GAAG,IAAZ;AACA,QAAI,CAACA,KAAK,CAACa,IAAP,IAAe,CAACb,KAAK,CAACO,GAA1B,EAA+B;AAC/BP,IAAAA,KAAK,CAACO,GAAN,CAAUc,WAAV,CAAsB,WAAtB;AACArB,IAAAA,KAAK,CAACO,GAAN,CAAUgB,IAAV;AACAvB,IAAAA,KAAK,CAACO,GAAN,CAAUQ,OAAV,CAAkB,kBAAkBf,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAlB,GAA6C,SAA/D;AACAd,IAAAA,KAAK,CAACgB,IAAN,CAAW,+BAA+BhB,KAAK,CAACa,IAArC,GAA4C,QAAvD,EAAiEb,KAAjE;AACD,GAPD;;AASAS,EAAAA,MAAM,CAAChB,IAAP,GAAc,SAASA,IAAT,CAAc+B,YAAd,EAA4B;AACxC,QAAIxB,KAAK,GAAG,IAAZ;AACA,QAAIyB,QAAQ,GAAG3C,WAAW,EAA1B;AACA,QAAIc,GAAG,GAAGI,KAAK,CAACJ,GAAhB;AACA,QAAIW,GAAG,GAAGP,KAAK,CAACO,GAAhB;AACA,QAAImB,WAAW,GAAG1B,KAAK,CAAC0B,WAAxB;AACA,QAAIb,IAAI,GAAGb,KAAK,CAACa,IAAjB;AACA,QAAIc,OAAO,GAAG,IAAd;AACA,QAAI,OAAOH,YAAP,KAAwB,WAA5B,EAAyCG,OAAO,GAAGH,YAAV,CAAzC,KAAqE,IAAI,OAAOxB,KAAK,CAACH,MAAN,CAAa8B,OAApB,KAAgC,WAApC,EAAiD;AACpHA,MAAAA,OAAO,GAAG3B,KAAK,CAACH,MAAN,CAAa8B,OAAvB;AACD;;AAED,QAAI,CAACpB,GAAD,IAAQA,GAAG,CAACqB,QAAJ,CAAa,UAAb,CAAZ,EAAsC;AACpC,aAAO5B,KAAP;AACD;;AAED,QAAIa,IAAI,KAAK,QAAT,IAAqBjB,GAAG,CAACC,MAAJ,CAAWG,KAAX,CAAiB6B,YAA1C,EAAwD;AACtD,UAAIC,WAAJ;;AAEA,UAAI/C,CAAC,CAAC,kBAAD,CAAD,CAAsBO,MAAtB,GAA+B,CAAnC,EAAsC;AACpCwC,QAAAA,WAAW,GAAG,IAAd;AACD,OAFD,MAEO,IAAI3C,YAAY,CAACG,MAAb,GAAsB,CAA1B,EAA6B;AAClCH,QAAAA,YAAY,CAAC4C,OAAb,CAAqB,UAAUC,WAAV,EAAuB;AAC1C,cAAIA,WAAW,CAACnB,IAAZ,KAAqB,QAAzB,EAAmCiB,WAAW,GAAG,IAAd;AACpC,SAFD;AAGD;;AAED,UAAIA,WAAJ,EAAiB;AACf1C,QAAAA,YAAY,CAACuB,IAAb,CAAkBX,KAAlB;AACA,eAAOA,KAAP;AACD;AACF;;AAED,QAAIiC,cAAc,GAAG1B,GAAG,CAAC2B,MAAJ,EAArB;AACA,QAAIC,QAAQ,GAAG5B,GAAG,CAAC6B,OAAJ,CAAYX,QAAZ,EAAsBnC,MAAtB,GAA+B,CAA9C;;AAEA,QAAI,CAAC2C,cAAc,CAACI,EAAf,CAAkBrC,KAAK,CAACI,YAAxB,CAAL,EAA4C;AAC1CJ,MAAAA,KAAK,CAACI,YAAN,CAAmBkC,MAAnB,CAA0B/B,GAA1B;AACAP,MAAAA,KAAK,CAACuC,IAAN,CAAW1B,IAAI,GAAG,QAAlB,EAA4B,YAAY;AACtC,YAAIsB,QAAJ,EAAc;AACZF,UAAAA,cAAc,CAACK,MAAf,CAAsB/B,GAAtB;AACD,SAFD,MAEO;AACLA,UAAAA,GAAG,CAACiC,MAAJ;AACD;AACF,OAND;AAOD,KA7CuC,CA6CtC;;;AAGFjC,IAAAA,GAAG,CAACkC,IAAJ;AACA;;AAEAzC,IAAAA,KAAK,CAAC0C,WAAN,GAAoBnC,GAAG,CAAC,CAAD,CAAH,CAAOoC,UAA3B,CAnDwC,CAmDD;;AAEvC,aAASC,aAAT,GAAyB;AACvB,UAAIrC,GAAG,CAACqB,QAAJ,CAAa,WAAb,CAAJ,EAA+B;AAC7B5B,QAAAA,KAAK,CAACsB,QAAN;AACD,OAFD,MAEO,IAAIf,GAAG,CAACqB,QAAJ,CAAa,UAAb,CAAJ,EAA8B;AACnC5B,QAAAA,KAAK,CAACiB,QAAN;AACD;AACF;;AAED,QAAIU,OAAJ,EAAa;AACX,UAAID,WAAJ,EAAiB;AACfA,QAAAA,WAAW,CAACL,WAAZ,CAAwB,cAAxB;AACAK,QAAAA,WAAW,CAACd,QAAZ,CAAqB,aAArB;AACD;;AAEDL,MAAAA,GAAG,CAACsC,YAAJ,CAAiB,YAAY;AAC3BD,QAAAA,aAAa;AACd,OAFD;AAGArC,MAAAA,GAAG,CAACqC,aAAJ,CAAkB,YAAY;AAC5BA,QAAAA,aAAa;AACd,OAFD;AAGArC,MAAAA,GAAG,CAACc,WAAJ,CAAgB,wBAAhB,EAA0CT,QAA1C,CAAmD,UAAnD;AACAZ,MAAAA,KAAK,CAACU,MAAN;AACD,KAdD,MAcO;AACL,UAAIgB,WAAJ,EAAiB;AACfA,QAAAA,WAAW,CAACd,QAAZ,CAAqB,0BAArB;AACD;;AAEDL,MAAAA,GAAG,CAACc,WAAJ,CAAgB,WAAhB,EAA6BT,QAA7B,CAAsC,uBAAtC;AACAZ,MAAAA,KAAK,CAACU,MAAN;AACAV,MAAAA,KAAK,CAACiB,QAAN;AACD;;AAED,WAAOjB,KAAP;AACD,GAtFD;;AAwFAS,EAAAA,MAAM,CAACqC,KAAP,GAAe,SAASA,KAAT,CAAetB,YAAf,EAA6B;AAC1C,QAAIxB,KAAK,GAAG,IAAZ;AACA,QAAIO,GAAG,GAAGP,KAAK,CAACO,GAAhB;AACA,QAAImB,WAAW,GAAG1B,KAAK,CAAC0B,WAAxB;AACA,QAAIC,OAAO,GAAG,IAAd;AACA,QAAI,OAAOH,YAAP,KAAwB,WAA5B,EAAyCG,OAAO,GAAGH,YAAV,CAAzC,KAAqE,IAAI,OAAOxB,KAAK,CAACH,MAAN,CAAa8B,OAApB,KAAgC,WAApC,EAAiD;AACpHA,MAAAA,OAAO,GAAG3B,KAAK,CAACH,MAAN,CAAa8B,OAAvB;AACD;;AAED,QAAI,CAACpB,GAAD,IAAQ,CAACA,GAAG,CAACqB,QAAJ,CAAa,UAAb,CAAb,EAAuC;AACrC,UAAIxC,YAAY,CAACgC,OAAb,CAAqBpB,KAArB,KAA+B,CAAnC,EAAsC;AACpCZ,QAAAA,YAAY,CAAC+B,MAAb,CAAoB/B,YAAY,CAACgC,OAAb,CAAqBpB,KAArB,CAApB,EAAiD,CAAjD;AACD;;AAED,aAAOA,KAAP;AACD,KAfyC,CAexC;;;AAGF,QAAI0B,WAAJ,EAAiB;AACf,UAAIqB,kBAAkB,GAAG,IAAzB;;AAEA,UAAI/C,KAAK,CAACa,IAAN,KAAe,OAAnB,EAA4B;AAC1Bb,QAAAA,KAAK,CAACO,GAAN,CAAUyC,OAAV,CAAkB,iBAAlB,EAAqCC,GAArC,CAAyCjD,KAAK,CAACO,GAAN,CAAU2C,OAAV,CAAkB,iBAAlB,CAAzC,EAA+EC,IAA/E,CAAoF,UAAUC,OAAV,EAAmB;AACrG,cAAIC,aAAa,GAAGD,OAAO,CAACE,OAA5B;AACA,cAAI,CAACD,aAAL,EAAoB;;AAEpB,cAAIA,aAAa,CAACxD,MAAd,CAAqB0D,oBAArB,IAA6CF,aAAa,CAACxD,MAAd,CAAqB2D,QAAlE,IAA8EH,aAAa,CAACI,UAAd,KAA6BzD,KAAK,CAACyD,UAArH,EAAiI;AAC/HV,YAAAA,kBAAkB,GAAG,KAArB;AACD;AACF,SAPD;AAQD;;AAED,UAAIA,kBAAJ,EAAwB;AACtBrB,QAAAA,WAAW,CAACC,OAAO,GAAG,aAAH,GAAmB,UAA3B,CAAX,CAAkD,cAAlD;AACAD,QAAAA,WAAW,CAACL,WAAZ,CAAwB,aAAxB;AACD;AACF,KApCyC,CAoCxC;;;AAGFd,IAAAA,GAAG,CAACoB,OAAO,GAAG,aAAH,GAAmB,UAA3B,CAAH,CAA0C,cAA1C;;AAEA,aAASiB,aAAT,GAAyB;AACvB,UAAIrC,GAAG,CAACqB,QAAJ,CAAa,WAAb,CAAJ,EAA+B;AAC7B5B,QAAAA,KAAK,CAACsB,QAAN;AACD,OAFD,MAEO,IAAIf,GAAG,CAACqB,QAAJ,CAAa,UAAb,CAAJ,EAA8B;AACnC5B,QAAAA,KAAK,CAACiB,QAAN;AACD;AACF;;AAED,QAAIU,OAAJ,EAAa;AACXpB,MAAAA,GAAG,CAACsC,YAAJ,CAAiB,YAAY;AAC3BD,QAAAA,aAAa;AACd,OAFD;AAGArC,MAAAA,GAAG,CAACqC,aAAJ,CAAkB,YAAY;AAC5BA,QAAAA,aAAa;AACd,OAFD;AAGArC,MAAAA,GAAG,CAACc,WAAJ,CAAgB,UAAhB,EAA4BT,QAA5B,CAAqC,WAArC,EAPW,CAOwC;;AAEnDZ,MAAAA,KAAK,CAACkB,OAAN;AACD,KAVD,MAUO;AACLX,MAAAA,GAAG,CAACK,QAAJ,CAAa,cAAb,EAA6BS,WAA7B,CAAyC,UAAzC,EAAqDT,QAArD,CAA8D,WAA9D,EADK,CACuE;;AAE5EZ,MAAAA,KAAK,CAACkB,OAAN;AACAlB,MAAAA,KAAK,CAACsB,QAAN;AACD;;AAED,QAAItB,KAAK,CAACa,IAAN,KAAe,QAAnB,EAA6B;AAC3BxB,MAAAA,iBAAiB;AAClB;;AAED,WAAOW,KAAP;AACD,GAvED;;AAyEAS,EAAAA,MAAM,CAACiD,OAAP,GAAiB,SAASA,OAAT,GAAmB;AAClC,QAAI1D,KAAK,GAAG,IAAZ;AACA,QAAIA,KAAK,CAAC2D,SAAV,EAAqB;AACrB3D,IAAAA,KAAK,CAACgB,IAAN,CAAW,6CAA6ChB,KAAK,CAACa,IAAnD,GAA0D,eAArE,EAAsFb,KAAtF;;AAEA,QAAIA,KAAK,CAACO,GAAV,EAAe;AACbP,MAAAA,KAAK,CAACO,GAAN,CAAUQ,OAAV,CAAkB,yBAAyBf,KAAK,CAACa,IAAN,CAAWC,WAAX,EAAzB,GAAoD,gBAAtE;;AAEA,UAAId,KAAK,CAACO,GAAN,CAAUjB,MAAV,IAAoBU,KAAK,CAACO,GAAN,CAAU,CAAV,EAAa+C,OAArC,EAA8C;AAC5C,eAAOtD,KAAK,CAACO,GAAN,CAAU,CAAV,EAAa+C,OAApB;AACD;AACF;;AAEDrE,IAAAA,WAAW,CAACe,KAAD,CAAX;AACAA,IAAAA,KAAK,CAAC2D,SAAN,GAAkB,IAAlB;AACD,GAfD;;AAiBA,SAAOjE,KAAP;AACD,CA/OwB,CA+OvBR,eA/OuB,CAAzB;;AAiPA,eAAeQ,KAAf","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nvar openedModals = [];\nvar dialogsQueue = [];\n\nfunction clearDialogsQueue() {\n  if (dialogsQueue.length === 0) return;\n  var dialog = dialogsQueue.shift();\n  dialog.open();\n}\n\nvar Modal = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Modal, _Framework7Class);\n\n  function Modal(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var modal = _assertThisInitialized(_this);\n\n    var defaults = {}; // Extend defaults with modules params\n\n    modal.useModulesParams(defaults);\n    modal.params = extend(defaults, params);\n    modal.opened = false;\n    var $containerEl = modal.params.containerEl ? $(modal.params.containerEl).eq(0) : app.$el;\n    if (!$containerEl.length) $containerEl = app.$el;\n    modal.$containerEl = $containerEl;\n    modal.containerEl = $containerEl[0]; // Install Modules\n\n    modal.useModules();\n    return _assertThisInitialized(_this) || _assertThisInitialized(_this);\n  }\n\n  var _proto = Modal.prototype;\n\n  _proto.onOpen = function onOpen() {\n    var modal = this;\n    modal.opened = true;\n    openedModals.push(modal);\n    $('html').addClass(\"with-modal-\" + modal.type.toLowerCase());\n    modal.$el.trigger(\"modal:open \" + modal.type.toLowerCase() + \":open\");\n    modal.emit(\"local::open modalOpen \" + modal.type + \"Open\", modal);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var modal = this;\n    modal.$el.trigger(\"modal:opened \" + modal.type.toLowerCase() + \":opened\");\n    modal.emit(\"local::opened modalOpened \" + modal.type + \"Opened\", modal);\n  };\n\n  _proto.onClose = function onClose() {\n    var modal = this;\n    modal.opened = false;\n    if (!modal.type || !modal.$el) return;\n    openedModals.splice(openedModals.indexOf(modal), 1);\n    $('html').removeClass(\"with-modal-\" + modal.type.toLowerCase());\n    modal.$el.trigger(\"modal:close \" + modal.type.toLowerCase() + \":close\");\n    modal.emit(\"local::close modalClose \" + modal.type + \"Close\", modal);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var modal = this;\n    if (!modal.type || !modal.$el) return;\n    modal.$el.removeClass('modal-out');\n    modal.$el.hide();\n    modal.$el.trigger(\"modal:closed \" + modal.type.toLowerCase() + \":closed\");\n    modal.emit(\"local::closed modalClosed \" + modal.type + \"Closed\", modal);\n  };\n\n  _proto.open = function open(animateModal) {\n    var modal = this;\n    var document = getDocument();\n    var app = modal.app;\n    var $el = modal.$el;\n    var $backdropEl = modal.$backdropEl;\n    var type = modal.type;\n    var animate = true;\n    if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {\n      animate = modal.params.animate;\n    }\n\n    if (!$el || $el.hasClass('modal-in')) {\n      return modal;\n    }\n\n    if (type === 'dialog' && app.params.modal.queueDialogs) {\n      var pushToQueue;\n\n      if ($('.dialog.modal-in').length > 0) {\n        pushToQueue = true;\n      } else if (openedModals.length > 0) {\n        openedModals.forEach(function (openedModal) {\n          if (openedModal.type === 'dialog') pushToQueue = true;\n        });\n      }\n\n      if (pushToQueue) {\n        dialogsQueue.push(modal);\n        return modal;\n      }\n    }\n\n    var $modalParentEl = $el.parent();\n    var wasInDom = $el.parents(document).length > 0;\n\n    if (!$modalParentEl.is(modal.$containerEl)) {\n      modal.$containerEl.append($el);\n      modal.once(type + \"Closed\", function () {\n        if (wasInDom) {\n          $modalParentEl.append($el);\n        } else {\n          $el.remove();\n        }\n      });\n    } // Show Modal\n\n\n    $el.show();\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    modal._clientLeft = $el[0].clientLeft; // Modal\n\n    function transitionEnd() {\n      if ($el.hasClass('modal-out')) {\n        modal.onClosed();\n      } else if ($el.hasClass('modal-in')) {\n        modal.onOpened();\n      }\n    }\n\n    if (animate) {\n      if ($backdropEl) {\n        $backdropEl.removeClass('not-animated');\n        $backdropEl.addClass('backdrop-in');\n      }\n\n      $el.animationEnd(function () {\n        transitionEnd();\n      });\n      $el.transitionEnd(function () {\n        transitionEnd();\n      });\n      $el.removeClass('modal-out not-animated').addClass('modal-in');\n      modal.onOpen();\n    } else {\n      if ($backdropEl) {\n        $backdropEl.addClass('backdrop-in not-animated');\n      }\n\n      $el.removeClass('modal-out').addClass('modal-in not-animated');\n      modal.onOpen();\n      modal.onOpened();\n    }\n\n    return modal;\n  };\n\n  _proto.close = function close(animateModal) {\n    var modal = this;\n    var $el = modal.$el;\n    var $backdropEl = modal.$backdropEl;\n    var animate = true;\n    if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {\n      animate = modal.params.animate;\n    }\n\n    if (!$el || !$el.hasClass('modal-in')) {\n      if (dialogsQueue.indexOf(modal) >= 0) {\n        dialogsQueue.splice(dialogsQueue.indexOf(modal), 1);\n      }\n\n      return modal;\n    } // backdrop\n\n\n    if ($backdropEl) {\n      var needToHideBackdrop = true;\n\n      if (modal.type === 'popup') {\n        modal.$el.prevAll('.popup.modal-in').add(modal.$el.nextAll('.popup.modal-in')).each(function (popupEl) {\n          var popupInstance = popupEl.f7Modal;\n          if (!popupInstance) return;\n\n          if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === modal.backdropEl) {\n            needToHideBackdrop = false;\n          }\n        });\n      }\n\n      if (needToHideBackdrop) {\n        $backdropEl[animate ? 'removeClass' : 'addClass']('not-animated');\n        $backdropEl.removeClass('backdrop-in');\n      }\n    } // Modal\n\n\n    $el[animate ? 'removeClass' : 'addClass']('not-animated');\n\n    function transitionEnd() {\n      if ($el.hasClass('modal-out')) {\n        modal.onClosed();\n      } else if ($el.hasClass('modal-in')) {\n        modal.onOpened();\n      }\n    }\n\n    if (animate) {\n      $el.animationEnd(function () {\n        transitionEnd();\n      });\n      $el.transitionEnd(function () {\n        transitionEnd();\n      });\n      $el.removeClass('modal-in').addClass('modal-out'); // Emit close\n\n      modal.onClose();\n    } else {\n      $el.addClass('not-animated').removeClass('modal-in').addClass('modal-out'); // Emit close\n\n      modal.onClose();\n      modal.onClosed();\n    }\n\n    if (modal.type === 'dialog') {\n      clearDialogsQueue();\n    }\n\n    return modal;\n  };\n\n  _proto.destroy = function destroy() {\n    var modal = this;\n    if (modal.destroyed) return;\n    modal.emit(\"local::beforeDestroy modalBeforeDestroy \" + modal.type + \"BeforeDestroy\", modal);\n\n    if (modal.$el) {\n      modal.$el.trigger(\"modal:beforedestroy \" + modal.type.toLowerCase() + \":beforedestroy\");\n\n      if (modal.$el.length && modal.$el[0].f7Modal) {\n        delete modal.$el[0].f7Modal;\n      }\n    }\n\n    deleteProps(modal);\n    modal.destroyed = true;\n  };\n\n  return Modal;\n}(Framework7Class);\n\nexport default Modal;"]},"metadata":{},"sourceType":"module"}