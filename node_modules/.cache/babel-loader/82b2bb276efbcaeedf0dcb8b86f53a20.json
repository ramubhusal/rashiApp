{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable no-underscore-dangle */\n\n\nimport { extend } from '../../shared/utils';\n\nfunction createStore(storeParams) {\n  if (storeParams === void 0) {\n    storeParams = {};\n  }\n\n  var store = {\n    __store: true\n  };\n\n  var originalState = _extends({}, storeParams.state || {});\n\n  var actions = _extends({}, storeParams.actions || {});\n\n  var getters = _extends({}, storeParams.getters || {});\n\n  var state = extend({}, originalState);\n  var propsQueue = [];\n  var gettersDependencies = {};\n  var gettersCallbacks = {};\n  Object.keys(getters).forEach(function (getterKey) {\n    gettersDependencies[getterKey] = [];\n    gettersCallbacks[getterKey] = [];\n  });\n\n  var getGetterValue = function getGetterValue(getterKey) {\n    return getters[getterKey]({\n      state: store.state\n    });\n  };\n\n  var addGetterDependencies = function addGetterDependencies(getterKey, deps) {\n    if (!gettersDependencies[getterKey]) gettersDependencies[getterKey] = [];\n    deps.forEach(function (dep) {\n      if (gettersDependencies[getterKey].indexOf(dep) < 0) {\n        gettersDependencies[getterKey].push(dep);\n      }\n    });\n  };\n\n  var addGetterCallback = function addGetterCallback(getterKey, callback) {\n    if (!gettersCallbacks[getterKey]) gettersCallbacks[getterKey] = [];\n    gettersCallbacks[getterKey].push(callback);\n  };\n\n  var runGetterCallbacks = function runGetterCallbacks(stateKey) {\n    var keys = Object.keys(gettersDependencies).filter(function (getterKey) {\n      return gettersDependencies[getterKey].indexOf(stateKey) >= 0;\n    });\n    keys.forEach(function (getterKey) {\n      if (!gettersCallbacks[getterKey] || !gettersCallbacks[getterKey].length) return;\n      gettersCallbacks[getterKey].forEach(function (callback) {\n        callback(getGetterValue(getterKey));\n      });\n    });\n  };\n\n  var removeGetterCallback = function removeGetterCallback(callback) {\n    Object.keys(gettersCallbacks).forEach(function (stateKey) {\n      var callbacks = gettersCallbacks[stateKey];\n\n      if (callbacks.indexOf(callback) >= 0) {\n        callbacks.splice(callbacks.indexOf(callback), 1);\n      }\n    });\n  }; // eslint-disable-next-line\n\n\n  store.__removeCallback = function (callback) {\n    removeGetterCallback(callback);\n  };\n\n  var getterValue = function getterValue(getterKey) {\n    if (getterKey === 'constructor') return;\n    propsQueue = [];\n    var value = getGetterValue(getterKey);\n    addGetterDependencies(getterKey, propsQueue);\n\n    var onUpdated = function onUpdated(callback) {\n      addGetterCallback(getterKey, callback);\n    };\n\n    var obj = {\n      value: value,\n      onUpdated: onUpdated\n    };\n\n    var callback = function callback(v) {\n      obj.value = v;\n    };\n\n    obj.__callback = callback;\n    addGetterCallback(getterKey, callback); // eslint-disable-next-line\n\n    return obj;\n  };\n\n  store.state = new Proxy(state, {\n    set: function set(target, prop, value) {\n      target[prop] = value;\n      runGetterCallbacks(prop);\n      return true;\n    },\n    get: function get(target, prop) {\n      propsQueue.push(prop);\n      return target[prop];\n    }\n  });\n  store.getters = new Proxy(getters, {\n    set: function set() {\n      return false;\n    },\n    get: function get(target, prop) {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop);\n    }\n  });\n\n  store.dispatch = function (actionName, data) {\n    return new Promise(function (resolve, reject) {\n      if (!actions[actionName]) {\n        reject();\n        throw new Error(\"Framework7: Store action \\\"\" + actionName + \"\\\" is not found\");\n      }\n\n      var result = actions[actionName]({\n        state: store.state,\n        dispatch: store.dispatch\n      }, data);\n      resolve(result);\n    });\n  };\n\n  return store;\n}\n\nexport default createStore;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/modules/store/create-store.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","extend","createStore","storeParams","store","__store","originalState","state","actions","getters","propsQueue","gettersDependencies","gettersCallbacks","keys","forEach","getterKey","getGetterValue","addGetterDependencies","deps","dep","indexOf","push","addGetterCallback","callback","runGetterCallbacks","stateKey","filter","removeGetterCallback","callbacks","splice","__removeCallback","getterValue","value","onUpdated","obj","v","__callback","Proxy","set","prop","get","undefined","dispatch","actionName","data","Promise","resolve","reject","Error","result"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/* eslint-disable no-underscore-dangle */\nimport { extend } from '../../shared/utils';\n\nfunction createStore(storeParams) {\n  if (storeParams === void 0) {\n    storeParams = {};\n  }\n\n  var store = {\n    __store: true\n  };\n\n  var originalState = _extends({}, storeParams.state || {});\n\n  var actions = _extends({}, storeParams.actions || {});\n\n  var getters = _extends({}, storeParams.getters || {});\n\n  var state = extend({}, originalState);\n  var propsQueue = [];\n  var gettersDependencies = {};\n  var gettersCallbacks = {};\n  Object.keys(getters).forEach(function (getterKey) {\n    gettersDependencies[getterKey] = [];\n    gettersCallbacks[getterKey] = [];\n  });\n\n  var getGetterValue = function getGetterValue(getterKey) {\n    return getters[getterKey]({\n      state: store.state\n    });\n  };\n\n  var addGetterDependencies = function addGetterDependencies(getterKey, deps) {\n    if (!gettersDependencies[getterKey]) gettersDependencies[getterKey] = [];\n    deps.forEach(function (dep) {\n      if (gettersDependencies[getterKey].indexOf(dep) < 0) {\n        gettersDependencies[getterKey].push(dep);\n      }\n    });\n  };\n\n  var addGetterCallback = function addGetterCallback(getterKey, callback) {\n    if (!gettersCallbacks[getterKey]) gettersCallbacks[getterKey] = [];\n    gettersCallbacks[getterKey].push(callback);\n  };\n\n  var runGetterCallbacks = function runGetterCallbacks(stateKey) {\n    var keys = Object.keys(gettersDependencies).filter(function (getterKey) {\n      return gettersDependencies[getterKey].indexOf(stateKey) >= 0;\n    });\n    keys.forEach(function (getterKey) {\n      if (!gettersCallbacks[getterKey] || !gettersCallbacks[getterKey].length) return;\n      gettersCallbacks[getterKey].forEach(function (callback) {\n        callback(getGetterValue(getterKey));\n      });\n    });\n  };\n\n  var removeGetterCallback = function removeGetterCallback(callback) {\n    Object.keys(gettersCallbacks).forEach(function (stateKey) {\n      var callbacks = gettersCallbacks[stateKey];\n\n      if (callbacks.indexOf(callback) >= 0) {\n        callbacks.splice(callbacks.indexOf(callback), 1);\n      }\n    });\n  }; // eslint-disable-next-line\n\n\n  store.__removeCallback = function (callback) {\n    removeGetterCallback(callback);\n  };\n\n  var getterValue = function getterValue(getterKey) {\n    if (getterKey === 'constructor') return;\n    propsQueue = [];\n    var value = getGetterValue(getterKey);\n    addGetterDependencies(getterKey, propsQueue);\n\n    var onUpdated = function onUpdated(callback) {\n      addGetterCallback(getterKey, callback);\n    };\n\n    var obj = {\n      value: value,\n      onUpdated: onUpdated\n    };\n\n    var callback = function callback(v) {\n      obj.value = v;\n    };\n\n    obj.__callback = callback;\n    addGetterCallback(getterKey, callback); // eslint-disable-next-line\n\n    return obj;\n  };\n\n  store.state = new Proxy(state, {\n    set: function set(target, prop, value) {\n      target[prop] = value;\n      runGetterCallbacks(prop);\n      return true;\n    },\n    get: function get(target, prop) {\n      propsQueue.push(prop);\n      return target[prop];\n    }\n  });\n  store.getters = new Proxy(getters, {\n    set: function set() {\n      return false;\n    },\n    get: function get(target, prop) {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop);\n    }\n  });\n\n  store.dispatch = function (actionName, data) {\n    return new Promise(function (resolve, reject) {\n      if (!actions[actionName]) {\n        reject();\n        throw new Error(\"Framework7: Store action \\\"\" + actionName + \"\\\" is not found\");\n      }\n\n      var result = actions[actionName]({\n        state: store.state,\n        dispatch: store.dispatch\n      }, data);\n      resolve(result);\n    });\n  };\n\n  return store;\n}\n\nexport default createStore;"]},"metadata":{},"sourceType":"module"}