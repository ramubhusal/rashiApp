{"ast":null,"code":"import { getWindow, getDocument } from 'ssr-window';\nimport { id } from '../../shared/utils';\nimport $ from '../../shared/dom7';\nvar fetchedModules = [];\n\nfunction loadModule(moduleToLoad) {\n  var Framework7 = this;\n  var window = getWindow();\n  var document = getDocument();\n  return new Promise(function (resolve, reject) {\n    var app = Framework7.instance;\n    var modulePath;\n    var moduleObj;\n    var moduleFunc;\n\n    if (!moduleToLoad) {\n      reject(new Error('Framework7: Lazy module must be specified'));\n      return;\n    }\n\n    function install(module) {\n      Framework7.use(module);\n\n      if (app) {\n        app.useModuleParams(module, app.params);\n        app.useModule(module);\n      }\n    }\n\n    if (typeof moduleToLoad === 'string') {\n      var matchNamePattern = moduleToLoad.match(/([a-z0-9-]*)/i);\n\n      if (moduleToLoad.indexOf('.') < 0 && matchNamePattern && matchNamePattern[0].length === moduleToLoad.length) {\n        if (!app || app && !app.params.lazyModulesPath) {\n          reject(new Error('Framework7: \"lazyModulesPath\" app parameter must be specified to fetch module by name'));\n          return;\n        }\n\n        modulePath = app.params.lazyModulesPath + \"/\" + moduleToLoad + \"/\" + moduleToLoad + \".js\";\n      } else {\n        modulePath = moduleToLoad;\n      }\n    } else if (typeof moduleToLoad === 'function') {\n      moduleFunc = moduleToLoad;\n    } else {\n      // considering F7-Plugin object\n      moduleObj = moduleToLoad;\n    }\n\n    if (moduleFunc) {\n      var module = moduleFunc(Framework7, false);\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component function\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (moduleObj) {\n      var _module = moduleObj;\n\n      if (!_module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[_module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(_module);\n      resolve();\n    }\n\n    if (modulePath) {\n      if (fetchedModules.indexOf(modulePath) >= 0) {\n        resolve();\n        return;\n      }\n\n      fetchedModules.push(modulePath);\n      var scriptLoad = new Promise(function (resolveScript, rejectScript) {\n        Framework7.request.get(modulePath, function (scriptContent) {\n          var callbackId = id();\n          var callbackLoadName = \"f7_component_loader_callback_\" + callbackId;\n          var scriptEl = document.createElement('script');\n          scriptEl.innerHTML = \"window.\" + callbackLoadName + \" = function (Framework7, Framework7AutoInstallComponent) {return \" + scriptContent.trim() + \"}\";\n          $('head').append(scriptEl);\n          var componentLoader = window[callbackLoadName];\n          delete window[callbackLoadName];\n          $(scriptEl).remove();\n          var module = componentLoader(Framework7, false);\n\n          if (!module) {\n            rejectScript(new Error(\"Framework7: Can't find Framework7 component in \" + modulePath + \" file\"));\n            return;\n          } // Check if it was added\n\n\n          if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n            resolveScript();\n            return;\n          } // Install It\n\n\n          install(module);\n          resolveScript();\n        }, function (xhr, status) {\n          rejectScript(xhr, status);\n        });\n      });\n      var styleLoad = new Promise(function (resolveStyle) {\n        Framework7.request.get(modulePath.replace('.js', app.rtl ? '.rtl.css' : '.css'), function (styleContent) {\n          var styleEl = document.createElement('style');\n          styleEl.innerHTML = styleContent;\n          $('head').append(styleEl);\n          resolveStyle();\n        }, function () {\n          resolveStyle();\n        });\n      });\n      Promise.all([scriptLoad, styleLoad]).then(function () {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    }\n  });\n}\n\nexport default loadModule;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/app/load-module.js"],"names":["getWindow","getDocument","id","$","fetchedModules","loadModule","moduleToLoad","Framework7","window","document","Promise","resolve","reject","app","instance","modulePath","moduleObj","moduleFunc","Error","install","module","use","useModuleParams","params","useModule","matchNamePattern","match","indexOf","length","lazyModulesPath","prototype","modules","name","_module","push","scriptLoad","resolveScript","rejectScript","request","get","scriptContent","callbackId","callbackLoadName","scriptEl","createElement","innerHTML","trim","append","componentLoader","remove","xhr","status","styleLoad","resolveStyle","replace","rtl","styleContent","styleEl","all","then","catch","err"],"mappings":"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","sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport { id } from '../../shared/utils';\nimport $ from '../../shared/dom7';\nvar fetchedModules = [];\n\nfunction loadModule(moduleToLoad) {\n  var Framework7 = this;\n  var window = getWindow();\n  var document = getDocument();\n  return new Promise(function (resolve, reject) {\n    var app = Framework7.instance;\n    var modulePath;\n    var moduleObj;\n    var moduleFunc;\n\n    if (!moduleToLoad) {\n      reject(new Error('Framework7: Lazy module must be specified'));\n      return;\n    }\n\n    function install(module) {\n      Framework7.use(module);\n\n      if (app) {\n        app.useModuleParams(module, app.params);\n        app.useModule(module);\n      }\n    }\n\n    if (typeof moduleToLoad === 'string') {\n      var matchNamePattern = moduleToLoad.match(/([a-z0-9-]*)/i);\n\n      if (moduleToLoad.indexOf('.') < 0 && matchNamePattern && matchNamePattern[0].length === moduleToLoad.length) {\n        if (!app || app && !app.params.lazyModulesPath) {\n          reject(new Error('Framework7: \"lazyModulesPath\" app parameter must be specified to fetch module by name'));\n          return;\n        }\n\n        modulePath = app.params.lazyModulesPath + \"/\" + moduleToLoad + \"/\" + moduleToLoad + \".js\";\n      } else {\n        modulePath = moduleToLoad;\n      }\n    } else if (typeof moduleToLoad === 'function') {\n      moduleFunc = moduleToLoad;\n    } else {\n      // considering F7-Plugin object\n      moduleObj = moduleToLoad;\n    }\n\n    if (moduleFunc) {\n      var module = moduleFunc(Framework7, false);\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component function\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (moduleObj) {\n      var _module = moduleObj;\n\n      if (!_module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[_module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(_module);\n      resolve();\n    }\n\n    if (modulePath) {\n      if (fetchedModules.indexOf(modulePath) >= 0) {\n        resolve();\n        return;\n      }\n\n      fetchedModules.push(modulePath);\n      var scriptLoad = new Promise(function (resolveScript, rejectScript) {\n        Framework7.request.get(modulePath, function (scriptContent) {\n          var callbackId = id();\n          var callbackLoadName = \"f7_component_loader_callback_\" + callbackId;\n          var scriptEl = document.createElement('script');\n          scriptEl.innerHTML = \"window.\" + callbackLoadName + \" = function (Framework7, Framework7AutoInstallComponent) {return \" + scriptContent.trim() + \"}\";\n          $('head').append(scriptEl);\n          var componentLoader = window[callbackLoadName];\n          delete window[callbackLoadName];\n          $(scriptEl).remove();\n          var module = componentLoader(Framework7, false);\n\n          if (!module) {\n            rejectScript(new Error(\"Framework7: Can't find Framework7 component in \" + modulePath + \" file\"));\n            return;\n          } // Check if it was added\n\n\n          if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n            resolveScript();\n            return;\n          } // Install It\n\n\n          install(module);\n          resolveScript();\n        }, function (xhr, status) {\n          rejectScript(xhr, status);\n        });\n      });\n      var styleLoad = new Promise(function (resolveStyle) {\n        Framework7.request.get(modulePath.replace('.js', app.rtl ? '.rtl.css' : '.css'), function (styleContent) {\n          var styleEl = document.createElement('style');\n          styleEl.innerHTML = styleContent;\n          $('head').append(styleEl);\n          resolveStyle();\n        }, function () {\n          resolveStyle();\n        });\n      });\n      Promise.all([scriptLoad, styleLoad]).then(function () {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    }\n  });\n}\n\nexport default loadModule;"]},"metadata":{},"sourceType":"module"}