{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n\nvar Stepper = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Stepper, _Framework7Class);\n\n  function Stepper(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var stepper = _assertThisInitialized(_this);\n\n    var defaults = {\n      el: null,\n      inputEl: null,\n      valueEl: null,\n      value: 0,\n      formatValue: null,\n      step: 1,\n      min: 0,\n      max: 100,\n      watchInput: true,\n      autorepeat: false,\n      autorepeatDynamic: false,\n      wraps: false,\n      manualInputMode: false,\n      decimalPoint: 4,\n      buttonsEndInputMode: true\n    }; // Extend defaults with modules params\n\n    stepper.useModulesParams(defaults);\n    stepper.params = extend(defaults, params);\n\n    if (stepper.params.value < stepper.params.min) {\n      stepper.params.value = stepper.params.min;\n    }\n\n    if (stepper.params.value > stepper.params.max) {\n      stepper.params.value = stepper.params.max;\n    }\n\n    var el = stepper.params.el;\n    if (!el) return stepper || _assertThisInitialized(_this);\n    var $el = $(el);\n    if ($el.length === 0) return stepper || _assertThisInitialized(_this);\n    if ($el[0].f7Stepper) return $el[0].f7Stepper || _assertThisInitialized(_this);\n    var $inputEl;\n\n    if (stepper.params.inputEl) {\n      $inputEl = $(stepper.params.inputEl);\n    } else if ($el.find('.stepper-input-wrap').find('input, textarea').length) {\n      $inputEl = $el.find('.stepper-input-wrap').find('input, textarea').eq(0);\n    }\n\n    if ($inputEl && $inputEl.length) {\n      'step min max'.split(' ').forEach(function (paramName) {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          stepper.params[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      var _decimalPoint = parseInt(stepper.params.decimalPoint, 10);\n\n      if (Number.isNaN(_decimalPoint)) {\n        stepper.params.decimalPoint = 0;\n      } else {\n        stepper.params.decimalPoint = _decimalPoint;\n      }\n\n      var inputValue = parseFloat($inputEl.val());\n\n      if (typeof params.value === 'undefined' && !Number.isNaN(inputValue) && (inputValue || inputValue === 0)) {\n        stepper.params.value = inputValue;\n      }\n    }\n\n    var $valueEl;\n\n    if (stepper.params.valueEl) {\n      $valueEl = $(stepper.params.valueEl);\n    } else if ($el.find('.stepper-value').length) {\n      $valueEl = $el.find('.stepper-value').eq(0);\n    }\n\n    var $buttonPlusEl = $el.find('.stepper-button-plus');\n    var $buttonMinusEl = $el.find('.stepper-button-minus');\n    var _stepper$params = stepper.params,\n        step = _stepper$params.step,\n        min = _stepper$params.min,\n        max = _stepper$params.max,\n        value = _stepper$params.value,\n        decimalPoint = _stepper$params.decimalPoint;\n    extend(stepper, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $buttonPlusEl: $buttonPlusEl,\n      buttonPlusEl: $buttonPlusEl[0],\n      $buttonMinusEl: $buttonMinusEl,\n      buttonMinusEl: $buttonMinusEl[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      $valueEl: $valueEl,\n      valueEl: $valueEl ? $valueEl[0] : undefined,\n      step: step,\n      min: min,\n      max: max,\n      value: value,\n      decimalPoint: decimalPoint,\n      typeModeChanged: false\n    });\n    $el[0].f7Stepper = stepper; // Handle Events\n\n    var touchesStart = {};\n    var isTouched;\n    var isScrolling;\n    var preventButtonClick;\n    var intervalId;\n    var timeoutId;\n    var autorepeatAction = null;\n    var autorepeatInAction = false;\n    var manualInput = false;\n\n    function dynamicRepeat(current, progressions, startsIn, progressionStep, repeatEvery, action) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        if (current === 1) {\n          preventButtonClick = true;\n          autorepeatInAction = true;\n        }\n\n        clearInterval(intervalId);\n        action();\n        intervalId = setInterval(function () {\n          action();\n        }, repeatEvery);\n\n        if (current < progressions) {\n          dynamicRepeat(current + 1, progressions, startsIn, progressionStep, repeatEvery / 2, action);\n        }\n      }, current === 1 ? startsIn : progressionStep);\n    }\n\n    function onTouchStart(e) {\n      if (isTouched) return;\n\n      if (manualInput) {\n        return;\n      }\n\n      if ($(e.target).closest($buttonPlusEl).length) {\n        autorepeatAction = 'increment';\n      } else if ($(e.target).closest($buttonMinusEl).length) {\n        autorepeatAction = 'decrement';\n      }\n\n      if (!autorepeatAction) return;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      isTouched = true;\n      isScrolling = undefined;\n      var progressions = stepper.params.autorepeatDynamic ? 4 : 1;\n      dynamicRepeat(1, progressions, 500, 1000, 300, function () {\n        stepper[autorepeatAction]();\n      });\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n\n      if (manualInput) {\n        return;\n      }\n\n      var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (typeof isScrolling === 'undefined' && !autorepeatInAction) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      var distance = Math.pow(Math.pow(pageX - touchesStart.x, 2) + Math.pow(pageY - touchesStart.y, 2), 0.5);\n\n      if (isScrolling || distance > 20) {\n        isTouched = false;\n        clearTimeout(timeoutId);\n        clearInterval(intervalId);\n      }\n    }\n\n    function onTouchEnd() {\n      clearTimeout(timeoutId);\n      clearInterval(intervalId);\n      autorepeatAction = null;\n      autorepeatInAction = false;\n      isTouched = false;\n    }\n\n    function onMinusClick() {\n      if (manualInput) {\n        if (stepper.params.buttonsEndInputMode) {\n          manualInput = false;\n          stepper.endTypeMode(true);\n        }\n\n        return;\n      }\n\n      if (preventButtonClick) {\n        preventButtonClick = false;\n        return;\n      }\n\n      stepper.decrement(true);\n    }\n\n    function onPlusClick() {\n      if (manualInput) {\n        if (stepper.params.buttonsEndInputMode) {\n          manualInput = false;\n          stepper.endTypeMode(true);\n        }\n\n        return;\n      }\n\n      if (preventButtonClick) {\n        preventButtonClick = false;\n        return;\n      }\n\n      stepper.increment(true);\n    }\n\n    function onInputClick(e) {\n      if (!e.target.readOnly && stepper.params.manualInputMode) {\n        manualInput = true;\n\n        if (typeof e.target.selectionStart === 'number') {\n          e.target.selectionStart = e.target.value.length;\n          e.target.selectionEnd = e.target.value.length;\n        }\n      }\n    }\n\n    function onInputKey(e) {\n      if (e.keyCode === 13 || e.which === 13) {\n        e.preventDefault();\n        manualInput = false;\n        stepper.endTypeMode();\n      }\n    }\n\n    function onInputBlur() {\n      manualInput = false;\n      stepper.endTypeMode(true);\n    }\n\n    function onInput(e) {\n      if (manualInput) {\n        stepper.typeValue(e.target.value);\n        return;\n      }\n\n      if (e.detail && e.detail.sentByF7Stepper) return;\n      stepper.setValue(e.target.value, true);\n    }\n\n    stepper.attachEvents = function attachEvents() {\n      $buttonMinusEl.on('click', onMinusClick);\n      $buttonPlusEl.on('click', onPlusClick);\n\n      if (stepper.params.watchInput && $inputEl && $inputEl.length) {\n        $inputEl.on('input', onInput);\n        $inputEl.on('click', onInputClick);\n        $inputEl.on('blur', onInputBlur);\n        $inputEl.on('keyup', onInputKey);\n      }\n\n      if (stepper.params.autorepeat) {\n        app.on('touchstart:passive', onTouchStart);\n        app.on('touchmove:active', onTouchMove);\n        app.on('touchend:passive', onTouchEnd);\n      }\n    };\n\n    stepper.detachEvents = function detachEvents() {\n      $buttonMinusEl.off('click', onMinusClick);\n      $buttonPlusEl.off('click', onPlusClick);\n\n      if (stepper.params.watchInput && $inputEl && $inputEl.length) {\n        $inputEl.off('input', onInput);\n        $inputEl.off('click', onInputClick);\n        $inputEl.off('blur', onInputBlur);\n        $inputEl.off('keyup', onInputKey);\n      }\n    }; // Install Modules\n\n\n    stepper.useModules(); // Init\n\n    stepper.init();\n    return stepper || _assertThisInitialized(_this);\n  }\n\n  var _proto = Stepper.prototype;\n\n  _proto.minus = function minus() {\n    return this.decrement();\n  };\n\n  _proto.plus = function plus() {\n    return this.increment();\n  };\n\n  _proto.decrement = function decrement() {\n    var stepper = this;\n    return stepper.setValue(stepper.value - stepper.step, false, true);\n  };\n\n  _proto.increment = function increment() {\n    var stepper = this;\n    return stepper.setValue(stepper.value + stepper.step, false, true);\n  };\n\n  _proto.setValue = function setValue(newValue, forceUpdate, withWraps) {\n    var stepper = this;\n    var step = stepper.step,\n        min = stepper.min,\n        max = stepper.max;\n    var oldValue = stepper.value;\n    var value = Math.round(newValue / step) * step;\n\n    if (stepper.params.wraps && withWraps) {\n      if (value > max) value = min;\n      if (value < min) value = max;\n    } else {\n      value = Math.max(Math.min(value, max), min);\n    }\n\n    if (Number.isNaN(value)) {\n      value = oldValue;\n    }\n\n    stepper.value = value;\n    var valueChanged = oldValue !== value; // Events\n\n    if (!valueChanged && !forceUpdate) return stepper;\n    stepper.$el.trigger('stepper:change', stepper.value);\n    var formattedValue = stepper.formatValue(stepper.value);\n\n    if (stepper.$inputEl && stepper.$inputEl.length) {\n      stepper.$inputEl.val(formattedValue);\n      stepper.$inputEl.trigger('input change', {\n        sentByF7Stepper: true\n      });\n    }\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    stepper.emit('local::change stepperChange', stepper, stepper.value);\n    return stepper;\n  };\n\n  _proto.endTypeMode = function endTypeMode(noBlur) {\n    var stepper = this;\n    var min = stepper.min,\n        max = stepper.max;\n    var value = parseFloat(stepper.value);\n    if (Number.isNaN(value)) value = 0;\n    value = Math.max(Math.min(value, max), min);\n    stepper.value = value;\n\n    if (!stepper.typeModeChanged) {\n      if (stepper.$inputEl && stepper.$inputEl.length && !noBlur) {\n        stepper.$inputEl.blur();\n      }\n\n      return stepper;\n    }\n\n    stepper.typeModeChanged = false;\n    stepper.$el.trigger('stepper:change', stepper.value);\n    var formattedValue = stepper.formatValue(stepper.value);\n\n    if (stepper.$inputEl && stepper.$inputEl.length) {\n      stepper.$inputEl.val(formattedValue);\n      stepper.$inputEl.trigger('input change', {\n        sentByF7Stepper: true\n      });\n      if (!noBlur) stepper.$inputEl.blur();\n    }\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    stepper.emit('local::change stepperChange', stepper, stepper.value);\n    return stepper;\n  };\n\n  _proto.typeValue = function typeValue(value) {\n    var stepper = this;\n    stepper.typeModeChanged = true;\n    var inputTxt = String(value);\n\n    if (inputTxt.lastIndexOf('.') + 1 === inputTxt.length || inputTxt.lastIndexOf(',') + 1 === inputTxt.length) {\n      if (inputTxt.lastIndexOf('.') !== inputTxt.indexOf('.') || inputTxt.lastIndexOf(',') !== inputTxt.indexOf(',')) {\n        inputTxt = inputTxt.slice(0, -1);\n        stepper.value = inputTxt;\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n    } else {\n      var newValue = parseFloat(inputTxt.replace(',', '.'));\n\n      if (newValue === 0) {\n        stepper.value = inputTxt.replace(',', '.');\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n\n      if (Number.isNaN(newValue)) {\n        stepper.value = 0;\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n\n      var powVal = Math.pow(10, stepper.params.decimalPoint);\n      newValue = Math.round(newValue * powVal).toFixed(stepper.params.decimalPoint + 1) / powVal;\n      stepper.value = parseFloat(String(newValue).replace(',', '.'));\n      stepper.$inputEl.val(stepper.value);\n      return stepper;\n    }\n\n    stepper.value = inputTxt;\n    stepper.$inputEl.val(inputTxt);\n    return stepper;\n  };\n\n  _proto.getValue = function getValue() {\n    return this.value;\n  };\n\n  _proto.formatValue = function formatValue(value) {\n    var stepper = this;\n    if (!stepper.params.formatValue) return value;\n    return stepper.params.formatValue.call(stepper, value);\n  };\n\n  _proto.init = function init() {\n    var stepper = this;\n    stepper.attachEvents();\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      var formattedValue = stepper.formatValue(stepper.value);\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    return stepper;\n  };\n\n  _proto.destroy = function destroy() {\n    var stepper = this;\n    stepper.$el.trigger('stepper:beforedestroy');\n    stepper.emit('local::beforeDestroy stepperBeforeDestroy', stepper);\n    delete stepper.$el[0].f7Stepper;\n    stepper.detachEvents();\n    deleteProps(stepper);\n    stepper = null;\n  };\n\n  return Stepper;\n}(Framework7Class);\n\nexport default Stepper;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/stepper/stepper-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","$","extend","deleteProps","Framework7Class","Stepper","_Framework7Class","app","params","_this","call","stepper","defaults","el","inputEl","valueEl","value","formatValue","step","min","max","watchInput","autorepeat","autorepeatDynamic","wraps","manualInputMode","decimalPoint","buttonsEndInputMode","useModulesParams","$el","length","f7Stepper","$inputEl","find","eq","split","forEach","paramName","attr","parseFloat","_decimalPoint","parseInt","Number","isNaN","inputValue","val","$valueEl","$buttonPlusEl","$buttonMinusEl","_stepper$params","buttonPlusEl","buttonMinusEl","undefined","typeModeChanged","touchesStart","isTouched","isScrolling","preventButtonClick","intervalId","timeoutId","autorepeatAction","autorepeatInAction","manualInput","dynamicRepeat","current","progressions","startsIn","progressionStep","repeatEvery","action","clearTimeout","setTimeout","clearInterval","setInterval","onTouchStart","e","target","closest","x","type","targetTouches","pageX","y","pageY","onTouchMove","Math","abs","distance","pow","onTouchEnd","onMinusClick","endTypeMode","decrement","onPlusClick","increment","onInputClick","readOnly","selectionStart","selectionEnd","onInputKey","keyCode","which","preventDefault","onInputBlur","onInput","typeValue","detail","sentByF7Stepper","setValue","attachEvents","on","detachEvents","off","useModules","init","_proto","minus","plus","newValue","forceUpdate","withWraps","oldValue","round","valueChanged","trigger","formattedValue","html","emit","noBlur","blur","inputTxt","String","lastIndexOf","indexOf","slice","replace","powVal","toFixed","getValue","destroy"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n\nvar Stepper = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Stepper, _Framework7Class);\n\n  function Stepper(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var stepper = _assertThisInitialized(_this);\n\n    var defaults = {\n      el: null,\n      inputEl: null,\n      valueEl: null,\n      value: 0,\n      formatValue: null,\n      step: 1,\n      min: 0,\n      max: 100,\n      watchInput: true,\n      autorepeat: false,\n      autorepeatDynamic: false,\n      wraps: false,\n      manualInputMode: false,\n      decimalPoint: 4,\n      buttonsEndInputMode: true\n    }; // Extend defaults with modules params\n\n    stepper.useModulesParams(defaults);\n    stepper.params = extend(defaults, params);\n\n    if (stepper.params.value < stepper.params.min) {\n      stepper.params.value = stepper.params.min;\n    }\n\n    if (stepper.params.value > stepper.params.max) {\n      stepper.params.value = stepper.params.max;\n    }\n\n    var el = stepper.params.el;\n    if (!el) return stepper || _assertThisInitialized(_this);\n    var $el = $(el);\n    if ($el.length === 0) return stepper || _assertThisInitialized(_this);\n    if ($el[0].f7Stepper) return $el[0].f7Stepper || _assertThisInitialized(_this);\n    var $inputEl;\n\n    if (stepper.params.inputEl) {\n      $inputEl = $(stepper.params.inputEl);\n    } else if ($el.find('.stepper-input-wrap').find('input, textarea').length) {\n      $inputEl = $el.find('.stepper-input-wrap').find('input, textarea').eq(0);\n    }\n\n    if ($inputEl && $inputEl.length) {\n      'step min max'.split(' ').forEach(function (paramName) {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          stepper.params[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      var _decimalPoint = parseInt(stepper.params.decimalPoint, 10);\n\n      if (Number.isNaN(_decimalPoint)) {\n        stepper.params.decimalPoint = 0;\n      } else {\n        stepper.params.decimalPoint = _decimalPoint;\n      }\n\n      var inputValue = parseFloat($inputEl.val());\n\n      if (typeof params.value === 'undefined' && !Number.isNaN(inputValue) && (inputValue || inputValue === 0)) {\n        stepper.params.value = inputValue;\n      }\n    }\n\n    var $valueEl;\n\n    if (stepper.params.valueEl) {\n      $valueEl = $(stepper.params.valueEl);\n    } else if ($el.find('.stepper-value').length) {\n      $valueEl = $el.find('.stepper-value').eq(0);\n    }\n\n    var $buttonPlusEl = $el.find('.stepper-button-plus');\n    var $buttonMinusEl = $el.find('.stepper-button-minus');\n    var _stepper$params = stepper.params,\n        step = _stepper$params.step,\n        min = _stepper$params.min,\n        max = _stepper$params.max,\n        value = _stepper$params.value,\n        decimalPoint = _stepper$params.decimalPoint;\n    extend(stepper, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $buttonPlusEl: $buttonPlusEl,\n      buttonPlusEl: $buttonPlusEl[0],\n      $buttonMinusEl: $buttonMinusEl,\n      buttonMinusEl: $buttonMinusEl[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      $valueEl: $valueEl,\n      valueEl: $valueEl ? $valueEl[0] : undefined,\n      step: step,\n      min: min,\n      max: max,\n      value: value,\n      decimalPoint: decimalPoint,\n      typeModeChanged: false\n    });\n    $el[0].f7Stepper = stepper; // Handle Events\n\n    var touchesStart = {};\n    var isTouched;\n    var isScrolling;\n    var preventButtonClick;\n    var intervalId;\n    var timeoutId;\n    var autorepeatAction = null;\n    var autorepeatInAction = false;\n    var manualInput = false;\n\n    function dynamicRepeat(current, progressions, startsIn, progressionStep, repeatEvery, action) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        if (current === 1) {\n          preventButtonClick = true;\n          autorepeatInAction = true;\n        }\n\n        clearInterval(intervalId);\n        action();\n        intervalId = setInterval(function () {\n          action();\n        }, repeatEvery);\n\n        if (current < progressions) {\n          dynamicRepeat(current + 1, progressions, startsIn, progressionStep, repeatEvery / 2, action);\n        }\n      }, current === 1 ? startsIn : progressionStep);\n    }\n\n    function onTouchStart(e) {\n      if (isTouched) return;\n\n      if (manualInput) {\n        return;\n      }\n\n      if ($(e.target).closest($buttonPlusEl).length) {\n        autorepeatAction = 'increment';\n      } else if ($(e.target).closest($buttonMinusEl).length) {\n        autorepeatAction = 'decrement';\n      }\n\n      if (!autorepeatAction) return;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      isTouched = true;\n      isScrolling = undefined;\n      var progressions = stepper.params.autorepeatDynamic ? 4 : 1;\n      dynamicRepeat(1, progressions, 500, 1000, 300, function () {\n        stepper[autorepeatAction]();\n      });\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n\n      if (manualInput) {\n        return;\n      }\n\n      var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (typeof isScrolling === 'undefined' && !autorepeatInAction) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      var distance = Math.pow(Math.pow(pageX - touchesStart.x, 2) + Math.pow(pageY - touchesStart.y, 2), 0.5);\n\n      if (isScrolling || distance > 20) {\n        isTouched = false;\n        clearTimeout(timeoutId);\n        clearInterval(intervalId);\n      }\n    }\n\n    function onTouchEnd() {\n      clearTimeout(timeoutId);\n      clearInterval(intervalId);\n      autorepeatAction = null;\n      autorepeatInAction = false;\n      isTouched = false;\n    }\n\n    function onMinusClick() {\n      if (manualInput) {\n        if (stepper.params.buttonsEndInputMode) {\n          manualInput = false;\n          stepper.endTypeMode(true);\n        }\n\n        return;\n      }\n\n      if (preventButtonClick) {\n        preventButtonClick = false;\n        return;\n      }\n\n      stepper.decrement(true);\n    }\n\n    function onPlusClick() {\n      if (manualInput) {\n        if (stepper.params.buttonsEndInputMode) {\n          manualInput = false;\n          stepper.endTypeMode(true);\n        }\n\n        return;\n      }\n\n      if (preventButtonClick) {\n        preventButtonClick = false;\n        return;\n      }\n\n      stepper.increment(true);\n    }\n\n    function onInputClick(e) {\n      if (!e.target.readOnly && stepper.params.manualInputMode) {\n        manualInput = true;\n\n        if (typeof e.target.selectionStart === 'number') {\n          e.target.selectionStart = e.target.value.length;\n          e.target.selectionEnd = e.target.value.length;\n        }\n      }\n    }\n\n    function onInputKey(e) {\n      if (e.keyCode === 13 || e.which === 13) {\n        e.preventDefault();\n        manualInput = false;\n        stepper.endTypeMode();\n      }\n    }\n\n    function onInputBlur() {\n      manualInput = false;\n      stepper.endTypeMode(true);\n    }\n\n    function onInput(e) {\n      if (manualInput) {\n        stepper.typeValue(e.target.value);\n        return;\n      }\n\n      if (e.detail && e.detail.sentByF7Stepper) return;\n      stepper.setValue(e.target.value, true);\n    }\n\n    stepper.attachEvents = function attachEvents() {\n      $buttonMinusEl.on('click', onMinusClick);\n      $buttonPlusEl.on('click', onPlusClick);\n\n      if (stepper.params.watchInput && $inputEl && $inputEl.length) {\n        $inputEl.on('input', onInput);\n        $inputEl.on('click', onInputClick);\n        $inputEl.on('blur', onInputBlur);\n        $inputEl.on('keyup', onInputKey);\n      }\n\n      if (stepper.params.autorepeat) {\n        app.on('touchstart:passive', onTouchStart);\n        app.on('touchmove:active', onTouchMove);\n        app.on('touchend:passive', onTouchEnd);\n      }\n    };\n\n    stepper.detachEvents = function detachEvents() {\n      $buttonMinusEl.off('click', onMinusClick);\n      $buttonPlusEl.off('click', onPlusClick);\n\n      if (stepper.params.watchInput && $inputEl && $inputEl.length) {\n        $inputEl.off('input', onInput);\n        $inputEl.off('click', onInputClick);\n        $inputEl.off('blur', onInputBlur);\n        $inputEl.off('keyup', onInputKey);\n      }\n    }; // Install Modules\n\n\n    stepper.useModules(); // Init\n\n    stepper.init();\n    return stepper || _assertThisInitialized(_this);\n  }\n\n  var _proto = Stepper.prototype;\n\n  _proto.minus = function minus() {\n    return this.decrement();\n  };\n\n  _proto.plus = function plus() {\n    return this.increment();\n  };\n\n  _proto.decrement = function decrement() {\n    var stepper = this;\n    return stepper.setValue(stepper.value - stepper.step, false, true);\n  };\n\n  _proto.increment = function increment() {\n    var stepper = this;\n    return stepper.setValue(stepper.value + stepper.step, false, true);\n  };\n\n  _proto.setValue = function setValue(newValue, forceUpdate, withWraps) {\n    var stepper = this;\n    var step = stepper.step,\n        min = stepper.min,\n        max = stepper.max;\n    var oldValue = stepper.value;\n    var value = Math.round(newValue / step) * step;\n\n    if (stepper.params.wraps && withWraps) {\n      if (value > max) value = min;\n      if (value < min) value = max;\n    } else {\n      value = Math.max(Math.min(value, max), min);\n    }\n\n    if (Number.isNaN(value)) {\n      value = oldValue;\n    }\n\n    stepper.value = value;\n    var valueChanged = oldValue !== value; // Events\n\n    if (!valueChanged && !forceUpdate) return stepper;\n    stepper.$el.trigger('stepper:change', stepper.value);\n    var formattedValue = stepper.formatValue(stepper.value);\n\n    if (stepper.$inputEl && stepper.$inputEl.length) {\n      stepper.$inputEl.val(formattedValue);\n      stepper.$inputEl.trigger('input change', {\n        sentByF7Stepper: true\n      });\n    }\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    stepper.emit('local::change stepperChange', stepper, stepper.value);\n    return stepper;\n  };\n\n  _proto.endTypeMode = function endTypeMode(noBlur) {\n    var stepper = this;\n    var min = stepper.min,\n        max = stepper.max;\n    var value = parseFloat(stepper.value);\n    if (Number.isNaN(value)) value = 0;\n    value = Math.max(Math.min(value, max), min);\n    stepper.value = value;\n\n    if (!stepper.typeModeChanged) {\n      if (stepper.$inputEl && stepper.$inputEl.length && !noBlur) {\n        stepper.$inputEl.blur();\n      }\n\n      return stepper;\n    }\n\n    stepper.typeModeChanged = false;\n    stepper.$el.trigger('stepper:change', stepper.value);\n    var formattedValue = stepper.formatValue(stepper.value);\n\n    if (stepper.$inputEl && stepper.$inputEl.length) {\n      stepper.$inputEl.val(formattedValue);\n      stepper.$inputEl.trigger('input change', {\n        sentByF7Stepper: true\n      });\n      if (!noBlur) stepper.$inputEl.blur();\n    }\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    stepper.emit('local::change stepperChange', stepper, stepper.value);\n    return stepper;\n  };\n\n  _proto.typeValue = function typeValue(value) {\n    var stepper = this;\n    stepper.typeModeChanged = true;\n    var inputTxt = String(value);\n\n    if (inputTxt.lastIndexOf('.') + 1 === inputTxt.length || inputTxt.lastIndexOf(',') + 1 === inputTxt.length) {\n      if (inputTxt.lastIndexOf('.') !== inputTxt.indexOf('.') || inputTxt.lastIndexOf(',') !== inputTxt.indexOf(',')) {\n        inputTxt = inputTxt.slice(0, -1);\n        stepper.value = inputTxt;\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n    } else {\n      var newValue = parseFloat(inputTxt.replace(',', '.'));\n\n      if (newValue === 0) {\n        stepper.value = inputTxt.replace(',', '.');\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n\n      if (Number.isNaN(newValue)) {\n        stepper.value = 0;\n        stepper.$inputEl.val(stepper.value);\n        return stepper;\n      }\n\n      var powVal = Math.pow(10, stepper.params.decimalPoint);\n      newValue = Math.round(newValue * powVal).toFixed(stepper.params.decimalPoint + 1) / powVal;\n      stepper.value = parseFloat(String(newValue).replace(',', '.'));\n      stepper.$inputEl.val(stepper.value);\n      return stepper;\n    }\n\n    stepper.value = inputTxt;\n    stepper.$inputEl.val(inputTxt);\n    return stepper;\n  };\n\n  _proto.getValue = function getValue() {\n    return this.value;\n  };\n\n  _proto.formatValue = function formatValue(value) {\n    var stepper = this;\n    if (!stepper.params.formatValue) return value;\n    return stepper.params.formatValue.call(stepper, value);\n  };\n\n  _proto.init = function init() {\n    var stepper = this;\n    stepper.attachEvents();\n\n    if (stepper.$valueEl && stepper.$valueEl.length) {\n      var formattedValue = stepper.formatValue(stepper.value);\n      stepper.$valueEl.html(formattedValue);\n    }\n\n    return stepper;\n  };\n\n  _proto.destroy = function destroy() {\n    var stepper = this;\n    stepper.$el.trigger('stepper:beforedestroy');\n    stepper.emit('local::beforeDestroy stepperBeforeDestroy', stepper);\n    delete stepper.$el[0].f7Stepper;\n    stepper.detachEvents();\n    deleteProps(stepper);\n    stepper = null;\n  };\n\n  return Stepper;\n}(Framework7Class);\n\nexport default Stepper;"]},"metadata":{},"sourceType":"module"}