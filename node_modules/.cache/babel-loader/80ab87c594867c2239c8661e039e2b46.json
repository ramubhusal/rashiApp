{"ast":null,"code":"function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n/* eslint indent: [\"off\"] */\n\n\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar PhotoBrowser = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(PhotoBrowser, _Framework7Class);\n\n  function PhotoBrowser(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var pb = _assertThisInitialized(_this);\n\n    pb.app = app;\n    var defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n    return _this;\n  }\n\n  var _proto = PhotoBrowser.prototype;\n\n  _proto.onSlideChange = function onSlideChange(swiper) {\n    var pb = this;\n    pb.activeIndex = swiper.activeIndex;\n    var current = swiper.activeIndex + 1;\n    var total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n    if (swiper.params.loop) {\n      total -= 2;\n      current -= swiper.loopedSlides;\n      if (current < 1) current = total + current;\n      if (current > total) current -= total;\n    }\n\n    var $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\" + swiper.activeIndex + \"\\\"]\") : swiper.slides.eq(swiper.activeIndex);\n    var $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\" + swiper.previousIndex + \"\\\"]\") : swiper.slides.eq(swiper.previousIndex);\n    var $currentEl = pb.$el.find('.photo-browser-current');\n    var $totalEl = pb.$el.find('.photo-browser-total');\n    var navbarEl;\n\n    if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n      navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n      if (navbarEl) {\n        $currentEl = $(navbarEl).find('.photo-browser-current');\n        $totalEl = $(navbarEl).find('.photo-browser-total');\n      }\n    }\n\n    if ($currentEl.length && $totalEl.length) {\n      $currentEl.text(current);\n      $totalEl.text(total);\n      if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n      if (navbarEl) {\n        pb.app.navbar.size(navbarEl);\n      }\n    } // Update captions\n\n\n    if (pb.captions.length > 0) {\n      var captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n      pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n      pb.$captionsContainerEl.find(\"[data-caption-index=\\\"\" + captionIndex + \"\\\"]\").addClass('photo-browser-caption-active');\n    } // Stop Video\n\n\n    var previousSlideVideo = $previousSlideEl.find('video');\n\n    if (previousSlideVideo.length > 0) {\n      if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n    }\n  };\n\n  _proto.onTouchStart = function onTouchStart() {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.allow) return;\n    swipeToClose.isTouched = true;\n  };\n\n  _proto.onTouchMove = function onTouchMove(e) {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.isTouched) return;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = true;\n      swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (pb.params.virtualSlides) {\n        swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n      } else {\n        swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n      }\n\n      swipeToClose.timeStart = now();\n    }\n\n    e.preventDefault();\n    swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n    swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n    pb.$el.transition(0).transform(\"translate3d(0,\" + -swipeToClose.diff + \"px,0)\");\n  };\n\n  _proto.onTouchEnd = function onTouchEnd() {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    swipeToClose.isTouched = false;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = false;\n      return;\n    }\n\n    swipeToClose.started = false;\n    swipeToClose.allow = false;\n    var diff = Math.abs(swipeToClose.diff);\n    var timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n    if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n      nextTick(function () {\n        if (pb.$el) {\n          if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n        }\n\n        pb.emit('local::swipeToClose', pb);\n        pb.$el.transform('').transition('');\n        pb.close();\n        swipeToClose.allow = true;\n      });\n      return;\n    }\n\n    if (diff !== 0) {\n      pb.$el.addClass('photo-browser-transitioning').transitionEnd(function () {\n        swipeToClose.allow = true;\n        pb.$el.removeClass('photo-browser-transitioning');\n      });\n    } else {\n      swipeToClose.allow = true;\n    }\n\n    nextTick(function () {\n      pb.$el.transform('').transition('');\n    });\n  } // Render Functions\n  ;\n\n  _proto.renderNavbar = function renderNavbar() {\n    var pb = this;\n    if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n    var iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    var pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n    var renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n    var isPopup = pb.params.type !== 'page';\n    return $jsx(\"div\", {\n      class: \"navbar navbar-photo-browser \" + (pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : '')\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner navbar-inner-centered-title sliding\"\n    }, !isPopup && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: \"link \" + (!pageBackLinkText ? 'icon-only' : '') + \" back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back \" + (iconsColor ? \"color-\" + iconsColor : '')\n    }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n      class: \"title\"\n    }, $jsx(\"span\", {\n      class: \"photo-browser-current\"\n    }), $jsx(\"span\", {\n      class: \"photo-browser-of\"\n    }, pb.params.navbarOfText), $jsx(\"span\", {\n      class: \"photo-browser-total\"\n    })), isPopup && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".photo-browser-popup\"\n    }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var pb = this;\n    if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n    var iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-bottom tabbar\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"a\", {\n      class: \"link photo-browser-prev\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back \" + (iconsColor ? \"color-\" + iconsColor : '')\n    })), $jsx(\"a\", {\n      class: \"link photo-browser-next\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-forward \" + (iconsColor ? \"color-\" + iconsColor : '')\n    }))));\n  };\n\n  _proto.renderCaption = function renderCaption(caption, index) {\n    var pb = this;\n    if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-caption\",\n      \"data-caption-index\": index\n    }, caption);\n  };\n\n  _proto.renderObject = function renderObject(photo, index) {\n    var pb = this;\n    if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, photo.html ? photo.html : photo);\n  };\n\n  _proto.renderLazyPhoto = function renderLazyPhoto(photo, index) {\n    var pb = this;\n    if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"div\", {\n      class: \"swiper-lazy-preloader\"\n    }), $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      \"data-src\": photo.url ? photo.url : photo,\n      class: \"swiper-lazy\"\n    })));\n  };\n\n  _proto.renderPhoto = function renderPhoto(photo, index) {\n    var pb = this;\n    if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      src: photo.url ? photo.url : photo\n    })));\n  };\n\n  _proto.render = function render() {\n    var pb = this;\n    if (pb.params.render) return pb.params.render.call(pb, pb.params);\n    return $jsx(\"div\", {\n      class: \"photo-browser photo-browser-\" + pb.params.theme\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, $jsx(\"div\", {\n      class: \"page photo-browser-page photo-browser-page-\" + pb.params.theme + \" no-toolbar \" + (!pb.params.navbar ? 'no-navbar' : ''),\n      \"data-name\": \"photo-browser-page\"\n    }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n      class: \"photo-browser-captions photo-browser-captions-\" + (pb.params.captionsTheme || pb.params.theme)\n    }, pb.params.photos.map(function (photo, index) {\n      if (photo.caption) return pb.renderCaption(photo.caption, index);\n      return '';\n    })), $jsx(\"div\", {\n      class: \"photo-browser-swiper-container swiper-container\"\n    }, $jsx(\"div\", {\n      class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n    }, !pb.params.virtualSlides && pb.params.photos.map(function (photo, index) {\n      if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n        return pb.renderObject(photo, index);\n      }\n\n      if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n        return pb.renderLazyPhoto(photo, index);\n      }\n\n      return pb.renderPhoto(photo, index);\n    }))))));\n  };\n\n  _proto.renderStandalone = function renderStandalone() {\n    var pb = this;\n    if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n    var standaloneHtml = \"<div class=\\\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\\\">\" + pb.render() + \"</div>\";\n    return standaloneHtml;\n  };\n\n  _proto.renderPage = function renderPage() {\n    var pb = this;\n    if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n    var pageHtml = pb.render();\n    return pageHtml;\n  };\n\n  _proto.renderPopup = function renderPopup() {\n    var pb = this;\n    if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n    var popupHtml = \"<div class=\\\"popup photo-browser-popup\\\">\" + pb.render() + \"</div>\";\n    return popupHtml;\n  } // Callbacks\n  ;\n\n  _proto.onOpen = function onOpen(type, el) {\n    var pb = this;\n    var app = pb.app;\n    var $el = $(el);\n    $el[0].f7PhotoBrowser = pb;\n    pb.$el = $el;\n    pb.el = $el[0];\n    pb.openedIn = type;\n    pb.opened = true;\n    pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n    pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n    pb.slides = pb.$el.find('.photo-browser-slide');\n    pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n    pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n    var clickTimeout;\n    var swiperParams = extend({}, pb.params.swiper, {\n      initialSlide: pb.activeIndex,\n      on: {\n        click: function click(e) {\n          clearTimeout(clickTimeout);\n\n          if (pb.params.exposition) {\n            clickTimeout = setTimeout(function () {\n              pb.expositionToggle();\n            }, 350);\n          }\n\n          pb.emit('local::tap', e);\n          pb.emit('local::click', e);\n        },\n        doubleClick: function doubleClick(e) {\n          clearTimeout(clickTimeout);\n          pb.emit('local::doubleTap', e);\n          pb.emit('local::doubleClick', e);\n        },\n        slideChange: function slideChange() {\n          var swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          pb.emit.apply(pb, ['local::slideChange'].concat(args));\n        },\n        transitionStart: function transitionStart() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          pb.emit.apply(pb, ['local::transitionStart'].concat(args));\n        },\n        transitionEnd: function transitionEnd() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          pb.emit.apply(pb, ['local::transitionEnd'].concat(args));\n        },\n        slideChangeTransitionStart: function slideChangeTransitionStart() {\n          var swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          pb.emit.apply(pb, ['local::slideChangeTransitionStart'].concat(args));\n        },\n        slideChangeTransitionEnd: function slideChangeTransitionEnd() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          pb.emit.apply(pb, ['local::slideChangeTransitionEnd'].concat(args));\n        },\n        lazyImageLoad: function lazyImageLoad() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          pb.emit.apply(pb, ['local::lazyImageLoad'].concat(args));\n        },\n        lazyImageReady: function lazyImageReady() {\n          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            args[_key7] = arguments[_key7];\n          }\n\n          var slideEl = args[0];\n          $(slideEl).removeClass('photo-browser-slide-lazy');\n          pb.emit.apply(pb, ['local::lazyImageReady'].concat(args));\n        }\n      }\n    });\n\n    if (pb.params.swipeToClose && pb.params.type !== 'page') {\n      extend(swiperParams.on, {\n        touchStart: function touchStart(swiper, e) {\n          pb.onTouchStart(e);\n          pb.emit('local::touchStart', e);\n        },\n        touchMoveOpposite: function touchMoveOpposite(swiper, e) {\n          pb.onTouchMove(e);\n          pb.emit('local::touchMoveOpposite', e);\n        },\n        touchEnd: function touchEnd(swiper, e) {\n          pb.onTouchEnd(e);\n          pb.emit('local::touchEnd', e);\n        }\n      });\n    }\n\n    if (pb.params.virtualSlides) {\n      extend(swiperParams, {\n        virtual: {\n          slides: pb.params.photos,\n          renderSlide: function renderSlide(photo, index) {\n            if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n              return pb.renderObject(photo, index);\n            }\n\n            if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n              return pb.renderLazyPhoto(photo, index);\n            }\n\n            return pb.renderPhoto(photo, index);\n          }\n        }\n      });\n    }\n\n    var window = getWindow();\n    pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n    if (pb.activeIndex === 0) {\n      pb.onSlideChange(pb.swiper);\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:open');\n    }\n\n    pb.emit('local::open photoBrowserOpen', pb);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var pb = this;\n\n    if (pb.$el && pb.params.type === 'standalone') {\n      pb.$el.css('animation', 'none');\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:opened');\n    }\n\n    pb.emit('local::opened photoBrowserOpened', pb);\n  };\n\n  _proto.onClose = function onClose() {\n    var pb = this;\n    if (pb.destroyed) return; // Destroy Swiper\n\n    if (pb.swiper && pb.swiper.destroy) {\n      pb.swiper.destroy(true, false);\n      pb.swiper = null;\n      delete pb.swiper;\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:close');\n    }\n\n    pb.emit('local::close photoBrowserClose', pb);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var pb = this;\n    if (pb.destroyed) return;\n    pb.opened = false;\n    pb.$el = null;\n    pb.el = null;\n    delete pb.$el;\n    delete pb.el;\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:closed');\n    }\n\n    pb.emit('local::closed photoBrowserClosed', pb);\n  } // Open\n  ;\n\n  _proto.openPage = function openPage() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var pageHtml = pb.renderPage();\n    pb.view.router.navigate({\n      url: pb.url,\n      route: {\n        content: pageHtml,\n        path: pb.url,\n        on: {\n          pageBeforeIn: function pageBeforeIn(e, page) {\n            pb.view.$el.addClass(\"with-photo-browser-page with-photo-browser-page-\" + pb.params.theme);\n            pb.onOpen('page', page.el);\n          },\n          pageAfterIn: function pageAfterIn(e, page) {\n            pb.onOpened('page', page.el);\n          },\n          pageBeforeOut: function pageBeforeOut(e, page) {\n            pb.view.$el.removeClass(\"with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-\" + pb.params.theme);\n            pb.onClose('page', page.el);\n          },\n          pageAfterOut: function pageAfterOut(e, page) {\n            pb.onClosed('page', page.el);\n          }\n        }\n      }\n    });\n    return pb;\n  };\n\n  _proto.openStandalone = function openStandalone() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var standaloneHtml = pb.renderStandalone();\n    var popupParams = {\n      backdrop: false,\n      content: standaloneHtml,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  };\n\n  _proto.openPopup = function openPopup() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var popupHtml = pb.renderPopup();\n    var popupParams = {\n      content: popupHtml,\n      push: pb.params.popupPush,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  } // Exposition\n  ;\n\n  _proto.expositionEnable = function expositionEnable() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.addClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n    pb.exposed = true;\n    return pb;\n  };\n\n  _proto.expositionDisable = function expositionDisable() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.removeClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n    pb.exposed = false;\n    return pb;\n  };\n\n  _proto.expositionToggle = function expositionToggle() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n    pb.exposed = !pb.exposed;\n    return pb;\n  };\n\n  _proto.open = function open(index) {\n    var pb = this;\n    var type = pb.params.type;\n\n    if (pb.opened) {\n      if (pb.swiper && typeof index !== 'undefined') {\n        pb.swiper.slideTo(parseInt(index, 10));\n      }\n\n      return pb;\n    }\n\n    if (typeof index !== 'undefined') {\n      pb.activeIndex = index;\n    }\n\n    if (type === 'standalone') {\n      pb.openStandalone();\n    }\n\n    if (type === 'page') {\n      pb.openPage();\n    }\n\n    if (type === 'popup') {\n      pb.openPopup();\n    }\n\n    return pb;\n  };\n\n  _proto.close = function close() {\n    var pb = this;\n    if (!pb.opened) return pb;\n\n    if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n      pb.view.router.back();\n    } else {\n      pb.modal.once('modalClosed', function () {\n        nextTick(function () {\n          if (pb.destroyed) return;\n          pb.modal.destroy();\n          delete pb.modal;\n        });\n      });\n      pb.modal.close();\n    }\n\n    return pb;\n  } // eslint-disable-next-line\n  ;\n\n  _proto.init = function init() {};\n\n  _proto.destroy = function destroy() {\n    var pb = this;\n    pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:beforedestroy');\n      pb.$el[0].f7PhotoBrowser = null;\n      delete pb.$el[0].f7PhotoBrowser;\n    }\n\n    deleteProps(pb);\n    pb.destroyed = true;\n    pb = null;\n  };\n\n  _createClass(PhotoBrowser, [{\n    key: \"view\",\n    get: function get() {\n      var params = this.params,\n          app = this.app;\n      return params.view || app.views.main;\n    }\n  }]);\n\n  return PhotoBrowser;\n}(Framework7Class);\n\nexport default PhotoBrowser;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/photo-browser/photo-browser-class.js"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","getWindow","$","extend","now","nextTick","deleteProps","Framework7Class","$jsx","PhotoBrowser","_Framework7Class","app","params","_this","call","pb","defaults","on","photoBrowser","useModulesParams","exposed","opened","activeIndex","swiper","initialSlide","url","swipeToClose","allow","isTouched","diff","undefined","start","current","started","activeSlide","timeStart","useModules","init","_proto","onSlideChange","total","virtualSlides","photos","slides","loop","loopedSlides","$activeSlideEl","$wrapperEl","find","eq","$previousSlideEl","previousIndex","$currentEl","$el","$totalEl","navbarEl","type","navbar","theme","getElByPage","text","parents","size","captions","captionIndex","attr","$captionsContainerEl","removeClass","addClass","previousSlideVideo","pause","onTouchStart","onTouchMove","e","targetTouches","pageY","children","preventDefault","transition","transform","onTouchEnd","Math","abs","timeDiff","Date","getTime","emit","close","transitionEnd","renderNavbar","iconsColor","pageBackLinkText","renderNavbarCount","navbarShowCount","isPopup","class","navbarOfText","popupCloseLinkText","renderToolbar","renderCaption","caption","index","renderObject","photo","html","renderLazyPhoto","renderPhoto","src","render","toolbar","captionsTheme","map","String","indexOf","lazy","enabled","renderStandalone","standaloneHtml","renderPage","pageHtml","renderPopup","popupHtml","onOpen","el","f7PhotoBrowser","openedIn","$swiperContainerEl","$swiperWrapperEl","clickTimeout","swiperParams","click","clearTimeout","exposition","setTimeout","expositionToggle","doubleClick","slideChange","_len","arguments","args","Array","_key","apply","concat","transitionStart","_len2","_key2","_len3","_key3","slideChangeTransitionStart","_len4","_key4","slideChangeTransitionEnd","_len5","_key5","lazyImageLoad","_len6","_key6","lazyImageReady","_len7","_key7","slideEl","touchStart","touchMoveOpposite","touchEnd","virtual","renderSlide","window","Swiper","trigger","onOpened","css","onClose","destroyed","destroy","onClosed","openPage","view","router","navigate","route","content","path","pageBeforeIn","page","pageAfterIn","pageBeforeOut","pageAfterOut","openStandalone","popupParams","backdrop","popupOpen","popup","popupOpened","popupClose","popupClosed","routableModals","modal","open","openPopup","push","popupPush","expositionEnable","expositionHideCaptions","expositionDisable","toggleClass","slideTo","parseInt","back","once","get","views","main"],"mappings":"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","sourcesContent":["function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/* eslint indent: [\"off\"] */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar PhotoBrowser = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(PhotoBrowser, _Framework7Class);\n\n  function PhotoBrowser(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var pb = _assertThisInitialized(_this);\n\n    pb.app = app;\n    var defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n    return _this;\n  }\n\n  var _proto = PhotoBrowser.prototype;\n\n  _proto.onSlideChange = function onSlideChange(swiper) {\n    var pb = this;\n    pb.activeIndex = swiper.activeIndex;\n    var current = swiper.activeIndex + 1;\n    var total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n    if (swiper.params.loop) {\n      total -= 2;\n      current -= swiper.loopedSlides;\n      if (current < 1) current = total + current;\n      if (current > total) current -= total;\n    }\n\n    var $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\" + swiper.activeIndex + \"\\\"]\") : swiper.slides.eq(swiper.activeIndex);\n    var $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\" + swiper.previousIndex + \"\\\"]\") : swiper.slides.eq(swiper.previousIndex);\n    var $currentEl = pb.$el.find('.photo-browser-current');\n    var $totalEl = pb.$el.find('.photo-browser-total');\n    var navbarEl;\n\n    if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n      navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n      if (navbarEl) {\n        $currentEl = $(navbarEl).find('.photo-browser-current');\n        $totalEl = $(navbarEl).find('.photo-browser-total');\n      }\n    }\n\n    if ($currentEl.length && $totalEl.length) {\n      $currentEl.text(current);\n      $totalEl.text(total);\n      if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n      if (navbarEl) {\n        pb.app.navbar.size(navbarEl);\n      }\n    } // Update captions\n\n\n    if (pb.captions.length > 0) {\n      var captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n      pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n      pb.$captionsContainerEl.find(\"[data-caption-index=\\\"\" + captionIndex + \"\\\"]\").addClass('photo-browser-caption-active');\n    } // Stop Video\n\n\n    var previousSlideVideo = $previousSlideEl.find('video');\n\n    if (previousSlideVideo.length > 0) {\n      if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n    }\n  };\n\n  _proto.onTouchStart = function onTouchStart() {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.allow) return;\n    swipeToClose.isTouched = true;\n  };\n\n  _proto.onTouchMove = function onTouchMove(e) {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.isTouched) return;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = true;\n      swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (pb.params.virtualSlides) {\n        swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n      } else {\n        swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n      }\n\n      swipeToClose.timeStart = now();\n    }\n\n    e.preventDefault();\n    swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n    swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n    pb.$el.transition(0).transform(\"translate3d(0,\" + -swipeToClose.diff + \"px,0)\");\n  };\n\n  _proto.onTouchEnd = function onTouchEnd() {\n    var pb = this;\n    var swipeToClose = pb.swipeToClose;\n    swipeToClose.isTouched = false;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = false;\n      return;\n    }\n\n    swipeToClose.started = false;\n    swipeToClose.allow = false;\n    var diff = Math.abs(swipeToClose.diff);\n    var timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n    if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n      nextTick(function () {\n        if (pb.$el) {\n          if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n        }\n\n        pb.emit('local::swipeToClose', pb);\n        pb.$el.transform('').transition('');\n        pb.close();\n        swipeToClose.allow = true;\n      });\n      return;\n    }\n\n    if (diff !== 0) {\n      pb.$el.addClass('photo-browser-transitioning').transitionEnd(function () {\n        swipeToClose.allow = true;\n        pb.$el.removeClass('photo-browser-transitioning');\n      });\n    } else {\n      swipeToClose.allow = true;\n    }\n\n    nextTick(function () {\n      pb.$el.transform('').transition('');\n    });\n  } // Render Functions\n  ;\n\n  _proto.renderNavbar = function renderNavbar() {\n    var pb = this;\n    if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n    var iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    var pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n    var renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n    var isPopup = pb.params.type !== 'page';\n    return $jsx(\"div\", {\n      class: \"navbar navbar-photo-browser \" + (pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : '')\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner navbar-inner-centered-title sliding\"\n    }, !isPopup && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: \"link \" + (!pageBackLinkText ? 'icon-only' : '') + \" back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back \" + (iconsColor ? \"color-\" + iconsColor : '')\n    }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n      class: \"title\"\n    }, $jsx(\"span\", {\n      class: \"photo-browser-current\"\n    }), $jsx(\"span\", {\n      class: \"photo-browser-of\"\n    }, pb.params.navbarOfText), $jsx(\"span\", {\n      class: \"photo-browser-total\"\n    })), isPopup && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".photo-browser-popup\"\n    }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var pb = this;\n    if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n    var iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-bottom tabbar\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"a\", {\n      class: \"link photo-browser-prev\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back \" + (iconsColor ? \"color-\" + iconsColor : '')\n    })), $jsx(\"a\", {\n      class: \"link photo-browser-next\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-forward \" + (iconsColor ? \"color-\" + iconsColor : '')\n    }))));\n  };\n\n  _proto.renderCaption = function renderCaption(caption, index) {\n    var pb = this;\n    if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-caption\",\n      \"data-caption-index\": index\n    }, caption);\n  };\n\n  _proto.renderObject = function renderObject(photo, index) {\n    var pb = this;\n    if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, photo.html ? photo.html : photo);\n  };\n\n  _proto.renderLazyPhoto = function renderLazyPhoto(photo, index) {\n    var pb = this;\n    if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"div\", {\n      class: \"swiper-lazy-preloader\"\n    }), $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      \"data-src\": photo.url ? photo.url : photo,\n      class: \"swiper-lazy\"\n    })));\n  };\n\n  _proto.renderPhoto = function renderPhoto(photo, index) {\n    var pb = this;\n    if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      src: photo.url ? photo.url : photo\n    })));\n  };\n\n  _proto.render = function render() {\n    var pb = this;\n    if (pb.params.render) return pb.params.render.call(pb, pb.params);\n    return $jsx(\"div\", {\n      class: \"photo-browser photo-browser-\" + pb.params.theme\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, $jsx(\"div\", {\n      class: \"page photo-browser-page photo-browser-page-\" + pb.params.theme + \" no-toolbar \" + (!pb.params.navbar ? 'no-navbar' : ''),\n      \"data-name\": \"photo-browser-page\"\n    }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n      class: \"photo-browser-captions photo-browser-captions-\" + (pb.params.captionsTheme || pb.params.theme)\n    }, pb.params.photos.map(function (photo, index) {\n      if (photo.caption) return pb.renderCaption(photo.caption, index);\n      return '';\n    })), $jsx(\"div\", {\n      class: \"photo-browser-swiper-container swiper-container\"\n    }, $jsx(\"div\", {\n      class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n    }, !pb.params.virtualSlides && pb.params.photos.map(function (photo, index) {\n      if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n        return pb.renderObject(photo, index);\n      }\n\n      if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n        return pb.renderLazyPhoto(photo, index);\n      }\n\n      return pb.renderPhoto(photo, index);\n    }))))));\n  };\n\n  _proto.renderStandalone = function renderStandalone() {\n    var pb = this;\n    if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n    var standaloneHtml = \"<div class=\\\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\\\">\" + pb.render() + \"</div>\";\n    return standaloneHtml;\n  };\n\n  _proto.renderPage = function renderPage() {\n    var pb = this;\n    if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n    var pageHtml = pb.render();\n    return pageHtml;\n  };\n\n  _proto.renderPopup = function renderPopup() {\n    var pb = this;\n    if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n    var popupHtml = \"<div class=\\\"popup photo-browser-popup\\\">\" + pb.render() + \"</div>\";\n    return popupHtml;\n  } // Callbacks\n  ;\n\n  _proto.onOpen = function onOpen(type, el) {\n    var pb = this;\n    var app = pb.app;\n    var $el = $(el);\n    $el[0].f7PhotoBrowser = pb;\n    pb.$el = $el;\n    pb.el = $el[0];\n    pb.openedIn = type;\n    pb.opened = true;\n    pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n    pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n    pb.slides = pb.$el.find('.photo-browser-slide');\n    pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n    pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n    var clickTimeout;\n    var swiperParams = extend({}, pb.params.swiper, {\n      initialSlide: pb.activeIndex,\n      on: {\n        click: function click(e) {\n          clearTimeout(clickTimeout);\n\n          if (pb.params.exposition) {\n            clickTimeout = setTimeout(function () {\n              pb.expositionToggle();\n            }, 350);\n          }\n\n          pb.emit('local::tap', e);\n          pb.emit('local::click', e);\n        },\n        doubleClick: function doubleClick(e) {\n          clearTimeout(clickTimeout);\n          pb.emit('local::doubleTap', e);\n          pb.emit('local::doubleClick', e);\n        },\n        slideChange: function slideChange() {\n          var swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          pb.emit.apply(pb, ['local::slideChange'].concat(args));\n        },\n        transitionStart: function transitionStart() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          pb.emit.apply(pb, ['local::transitionStart'].concat(args));\n        },\n        transitionEnd: function transitionEnd() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          pb.emit.apply(pb, ['local::transitionEnd'].concat(args));\n        },\n        slideChangeTransitionStart: function slideChangeTransitionStart() {\n          var swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          pb.emit.apply(pb, ['local::slideChangeTransitionStart'].concat(args));\n        },\n        slideChangeTransitionEnd: function slideChangeTransitionEnd() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          pb.emit.apply(pb, ['local::slideChangeTransitionEnd'].concat(args));\n        },\n        lazyImageLoad: function lazyImageLoad() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          pb.emit.apply(pb, ['local::lazyImageLoad'].concat(args));\n        },\n        lazyImageReady: function lazyImageReady() {\n          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            args[_key7] = arguments[_key7];\n          }\n\n          var slideEl = args[0];\n          $(slideEl).removeClass('photo-browser-slide-lazy');\n          pb.emit.apply(pb, ['local::lazyImageReady'].concat(args));\n        }\n      }\n    });\n\n    if (pb.params.swipeToClose && pb.params.type !== 'page') {\n      extend(swiperParams.on, {\n        touchStart: function touchStart(swiper, e) {\n          pb.onTouchStart(e);\n          pb.emit('local::touchStart', e);\n        },\n        touchMoveOpposite: function touchMoveOpposite(swiper, e) {\n          pb.onTouchMove(e);\n          pb.emit('local::touchMoveOpposite', e);\n        },\n        touchEnd: function touchEnd(swiper, e) {\n          pb.onTouchEnd(e);\n          pb.emit('local::touchEnd', e);\n        }\n      });\n    }\n\n    if (pb.params.virtualSlides) {\n      extend(swiperParams, {\n        virtual: {\n          slides: pb.params.photos,\n          renderSlide: function renderSlide(photo, index) {\n            if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n              return pb.renderObject(photo, index);\n            }\n\n            if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n              return pb.renderLazyPhoto(photo, index);\n            }\n\n            return pb.renderPhoto(photo, index);\n          }\n        }\n      });\n    }\n\n    var window = getWindow();\n    pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n    if (pb.activeIndex === 0) {\n      pb.onSlideChange(pb.swiper);\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:open');\n    }\n\n    pb.emit('local::open photoBrowserOpen', pb);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var pb = this;\n\n    if (pb.$el && pb.params.type === 'standalone') {\n      pb.$el.css('animation', 'none');\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:opened');\n    }\n\n    pb.emit('local::opened photoBrowserOpened', pb);\n  };\n\n  _proto.onClose = function onClose() {\n    var pb = this;\n    if (pb.destroyed) return; // Destroy Swiper\n\n    if (pb.swiper && pb.swiper.destroy) {\n      pb.swiper.destroy(true, false);\n      pb.swiper = null;\n      delete pb.swiper;\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:close');\n    }\n\n    pb.emit('local::close photoBrowserClose', pb);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var pb = this;\n    if (pb.destroyed) return;\n    pb.opened = false;\n    pb.$el = null;\n    pb.el = null;\n    delete pb.$el;\n    delete pb.el;\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:closed');\n    }\n\n    pb.emit('local::closed photoBrowserClosed', pb);\n  } // Open\n  ;\n\n  _proto.openPage = function openPage() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var pageHtml = pb.renderPage();\n    pb.view.router.navigate({\n      url: pb.url,\n      route: {\n        content: pageHtml,\n        path: pb.url,\n        on: {\n          pageBeforeIn: function pageBeforeIn(e, page) {\n            pb.view.$el.addClass(\"with-photo-browser-page with-photo-browser-page-\" + pb.params.theme);\n            pb.onOpen('page', page.el);\n          },\n          pageAfterIn: function pageAfterIn(e, page) {\n            pb.onOpened('page', page.el);\n          },\n          pageBeforeOut: function pageBeforeOut(e, page) {\n            pb.view.$el.removeClass(\"with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-\" + pb.params.theme);\n            pb.onClose('page', page.el);\n          },\n          pageAfterOut: function pageAfterOut(e, page) {\n            pb.onClosed('page', page.el);\n          }\n        }\n      }\n    });\n    return pb;\n  };\n\n  _proto.openStandalone = function openStandalone() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var standaloneHtml = pb.renderStandalone();\n    var popupParams = {\n      backdrop: false,\n      content: standaloneHtml,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  };\n\n  _proto.openPopup = function openPopup() {\n    var pb = this;\n    if (pb.opened) return pb;\n    var popupHtml = pb.renderPopup();\n    var popupParams = {\n      content: popupHtml,\n      push: pb.params.popupPush,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  } // Exposition\n  ;\n\n  _proto.expositionEnable = function expositionEnable() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.addClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n    pb.exposed = true;\n    return pb;\n  };\n\n  _proto.expositionDisable = function expositionDisable() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.removeClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n    pb.exposed = false;\n    return pb;\n  };\n\n  _proto.expositionToggle = function expositionToggle() {\n    var pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n    pb.exposed = !pb.exposed;\n    return pb;\n  };\n\n  _proto.open = function open(index) {\n    var pb = this;\n    var type = pb.params.type;\n\n    if (pb.opened) {\n      if (pb.swiper && typeof index !== 'undefined') {\n        pb.swiper.slideTo(parseInt(index, 10));\n      }\n\n      return pb;\n    }\n\n    if (typeof index !== 'undefined') {\n      pb.activeIndex = index;\n    }\n\n    if (type === 'standalone') {\n      pb.openStandalone();\n    }\n\n    if (type === 'page') {\n      pb.openPage();\n    }\n\n    if (type === 'popup') {\n      pb.openPopup();\n    }\n\n    return pb;\n  };\n\n  _proto.close = function close() {\n    var pb = this;\n    if (!pb.opened) return pb;\n\n    if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n      pb.view.router.back();\n    } else {\n      pb.modal.once('modalClosed', function () {\n        nextTick(function () {\n          if (pb.destroyed) return;\n          pb.modal.destroy();\n          delete pb.modal;\n        });\n      });\n      pb.modal.close();\n    }\n\n    return pb;\n  } // eslint-disable-next-line\n  ;\n\n  _proto.init = function init() {};\n\n  _proto.destroy = function destroy() {\n    var pb = this;\n    pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:beforedestroy');\n      pb.$el[0].f7PhotoBrowser = null;\n      delete pb.$el[0].f7PhotoBrowser;\n    }\n\n    deleteProps(pb);\n    pb.destroyed = true;\n    pb = null;\n  };\n\n  _createClass(PhotoBrowser, [{\n    key: \"view\",\n    get: function get() {\n      var params = this.params,\n          app = this.app;\n      return params.view || app.views.main;\n    }\n  }]);\n\n  return PhotoBrowser;\n}(Framework7Class);\n\nexport default PhotoBrowser;"]},"metadata":{},"sourceType":"module"}