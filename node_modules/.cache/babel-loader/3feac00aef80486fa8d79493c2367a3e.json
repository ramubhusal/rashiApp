{"ast":null,"code":"import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { bindMethods } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nvar Input = {\n  ignoreTypes: ['checkbox', 'button', 'submit', 'range', 'radio', 'image'],\n  createTextareaResizableShadow: function createTextareaResizableShadow() {\n    var document = getDocument();\n    var $shadowEl = $(document.createElement('textarea'));\n    $shadowEl.addClass('textarea-resizable-shadow');\n    $shadowEl.prop({\n      disabled: true,\n      readonly: true\n    });\n    Input.textareaResizableShadow = $shadowEl;\n  },\n  textareaResizableShadow: undefined,\n  resizeTextarea: function resizeTextarea(textareaEl) {\n    var app = this;\n    var window = getWindow();\n    var $textareaEl = $(textareaEl);\n\n    if (!Input.textareaResizableShadow) {\n      Input.createTextareaResizableShadow();\n    }\n\n    var $shadowEl = Input.textareaResizableShadow;\n    if (!$textareaEl.length) return;\n    if (!$textareaEl.hasClass('resizable')) return;\n\n    if (Input.textareaResizableShadow.parents().length === 0) {\n      app.$el.append($shadowEl);\n    }\n\n    var styles = window.getComputedStyle($textareaEl[0]);\n    'padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display'.split(' ').forEach(function (style) {\n      var styleValue = styles[style];\n\n      if ('font-size line-height letter-spacing width'.split(' ').indexOf(style) >= 0) {\n        styleValue = styleValue.replace(',', '.');\n      }\n\n      $shadowEl.css(style, styleValue);\n    });\n    var currentHeight = $textareaEl[0].clientHeight;\n    $shadowEl.val('');\n    var initialHeight = $shadowEl[0].scrollHeight;\n    $shadowEl.val($textareaEl.val());\n    $shadowEl.css('height', 0);\n    var scrollHeight = $shadowEl[0].scrollHeight;\n\n    if (currentHeight !== scrollHeight) {\n      if (scrollHeight > initialHeight) {\n        $textareaEl.css('height', scrollHeight + \"px\");\n      } else if (scrollHeight < currentHeight) {\n        $textareaEl.css('height', '');\n      }\n\n      if (scrollHeight > initialHeight || scrollHeight < currentHeight) {\n        $textareaEl.trigger('textarea:resize', {\n          initialHeight: initialHeight,\n          currentHeight: currentHeight,\n          scrollHeight: scrollHeight\n        });\n        app.emit('textareaResize', {\n          initialHeight: initialHeight,\n          currentHeight: currentHeight,\n          scrollHeight: scrollHeight\n        });\n      }\n    }\n  },\n  validate: function validate(inputEl) {\n    var $inputEl = $(inputEl);\n    if (!$inputEl.length) return true;\n    var $itemInputEl = $inputEl.parents('.item-input');\n    var $inputWrapEl = $inputEl.parents('.input');\n\n    function unsetReadonly() {\n      if ($inputEl[0].f7ValidateReadonly) {\n        $inputEl[0].readOnly = false;\n      }\n    }\n\n    function setReadonly() {\n      if ($inputEl[0].f7ValidateReadonly) {\n        $inputEl[0].readOnly = true;\n      }\n    }\n\n    unsetReadonly();\n    var validity = $inputEl[0].validity;\n    var validationMessage = $inputEl.dataset().errorMessage || $inputEl[0].validationMessage || '';\n\n    if (!validity) {\n      setReadonly();\n      return true;\n    }\n\n    if (!validity.valid) {\n      var $errorEl = $inputEl.nextAll('.item-input-error-message, .input-error-message');\n\n      if (validationMessage) {\n        if ($errorEl.length === 0) {\n          $errorEl = $(\"<div class=\\\"\" + ($inputWrapEl.length ? 'input-error-message' : 'item-input-error-message') + \"\\\"></div>\");\n          $errorEl.insertAfter($inputEl);\n        }\n\n        $errorEl.text(validationMessage);\n      }\n\n      if ($errorEl.length > 0) {\n        $itemInputEl.addClass('item-input-with-error-message');\n        $inputWrapEl.addClass('input-with-error-message');\n      }\n\n      $itemInputEl.addClass('item-input-invalid');\n      $inputWrapEl.addClass('input-invalid');\n      $inputEl.addClass('input-invalid');\n      setReadonly();\n      return false;\n    }\n\n    $itemInputEl.removeClass('item-input-invalid item-input-with-error-message');\n    $inputWrapEl.removeClass('input-invalid input-with-error-message');\n    $inputEl.removeClass('input-invalid');\n    setReadonly();\n    return true;\n  },\n  validateInputs: function validateInputs(el) {\n    var app = this;\n    var validates = $(el).find('input, textarea, select').map(function (inputEl) {\n      return app.input.validate(inputEl);\n    });\n    return validates.indexOf(false) < 0;\n  },\n  focus: function focus(inputEl) {\n    var $inputEl = $(inputEl);\n    var type = $inputEl.attr('type');\n    if (Input.ignoreTypes.indexOf(type) >= 0) return;\n    $inputEl.parents('.item-input').addClass('item-input-focused');\n    $inputEl.parents('.input').addClass('input-focused');\n    $inputEl.addClass('input-focused');\n  },\n  blur: function blur(inputEl) {\n    var $inputEl = $(inputEl);\n    $inputEl.parents('.item-input').removeClass('item-input-focused');\n    $inputEl.parents('.input').removeClass('input-focused');\n    $inputEl.removeClass('input-focused');\n  },\n  checkEmptyState: function checkEmptyState(inputEl) {\n    var app = this;\n    var $inputEl = $(inputEl);\n\n    if (!$inputEl.is('input, select, textarea, .item-input [contenteditable]')) {\n      $inputEl = $inputEl.find('input, select, textarea, .item-input [contenteditable]').eq(0);\n    }\n\n    if (!$inputEl.length) return;\n    var isContentEditable = $inputEl[0].hasAttribute('contenteditable');\n    var value;\n\n    if (isContentEditable) {\n      if ($inputEl.find('.text-editor-placeholder').length) value = '';else value = $inputEl.html();\n    } else {\n      value = $inputEl.val();\n    }\n\n    var $itemInputEl = $inputEl.parents('.item-input');\n    var $inputWrapEl = $inputEl.parents('.input');\n\n    if (value && typeof value === 'string' && value.trim() !== '' || Array.isArray(value) && value.length > 0) {\n      $itemInputEl.addClass('item-input-with-value');\n      $inputWrapEl.addClass('input-with-value');\n      $inputEl.addClass('input-with-value');\n      $inputEl.trigger('input:notempty');\n      app.emit('inputNotEmpty', $inputEl[0]);\n    } else {\n      $itemInputEl.removeClass('item-input-with-value');\n      $inputWrapEl.removeClass('input-with-value');\n      $inputEl.removeClass('input-with-value');\n      $inputEl.trigger('input:empty');\n      app.emit('inputEmpty', $inputEl[0]);\n    }\n  },\n  scrollIntoView: function scrollIntoView(inputEl, duration, centered, force) {\n    if (duration === void 0) {\n      duration = 0;\n    }\n\n    var $inputEl = $(inputEl);\n    var $scrollableEl = $inputEl.parents('.page-content, .panel, .card-expandable .card-content').eq(0);\n\n    if (!$scrollableEl.length) {\n      return false;\n    }\n\n    var contentHeight = $scrollableEl[0].offsetHeight;\n    var contentScrollTop = $scrollableEl[0].scrollTop;\n    var contentPaddingTop = parseInt($scrollableEl.css('padding-top'), 10);\n    var contentPaddingBottom = parseInt($scrollableEl.css('padding-bottom'), 10);\n    var contentOffsetTop = $scrollableEl.offset().top - contentScrollTop;\n    var inputOffsetTop = $inputEl.offset().top - contentOffsetTop;\n    var inputHeight = $inputEl[0].offsetHeight;\n    var min = inputOffsetTop + contentScrollTop - contentPaddingTop;\n    var max = inputOffsetTop + contentScrollTop - contentHeight + contentPaddingBottom + inputHeight;\n    var centeredPosition = min + (max - min) / 2;\n\n    if (contentScrollTop > min) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : min, duration);\n      return true;\n    }\n\n    if (contentScrollTop < max) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : max, duration);\n      return true;\n    }\n\n    if (force) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : max, duration);\n    }\n\n    return false;\n  },\n  init: function init() {\n    var app = this;\n    var device = getDevice();\n    var window = getWindow();\n    var document = getDocument();\n    Input.createTextareaResizableShadow();\n\n    function onFocus() {\n      var inputEl = this;\n\n      if (app.params.input.scrollIntoViewOnFocus) {\n        if (device.android) {\n          $(window).once('resize', function () {\n            if (document && document.activeElement === inputEl) {\n              app.input.scrollIntoView(inputEl, app.params.input.scrollIntoViewDuration, app.params.input.scrollIntoViewCentered, app.params.input.scrollIntoViewAlways);\n            }\n          });\n        } else {\n          app.input.scrollIntoView(inputEl, app.params.input.scrollIntoViewDuration, app.params.input.scrollIntoViewCentered, app.params.input.scrollIntoViewAlways);\n        }\n      }\n\n      app.input.focus(inputEl);\n    }\n\n    function onBlur() {\n      var $inputEl = $(this);\n      var tag = $inputEl[0].nodeName.toLowerCase();\n      app.input.blur($inputEl);\n\n      if ($inputEl.dataset().validate || $inputEl.attr('validate') !== null || $inputEl.attr('data-validate-on-blur') !== null) {\n        app.input.validate($inputEl);\n      } // Resize textarea\n\n\n      if (tag === 'textarea' && $inputEl.hasClass('resizable')) {\n        if (Input.textareaResizableShadow) Input.textareaResizableShadow.remove();\n      }\n    }\n\n    function onChange() {\n      var $inputEl = $(this);\n      var type = $inputEl.attr('type');\n      var tag = $inputEl[0].nodeName.toLowerCase();\n      var isContentEditable = $inputEl[0].hasAttribute('contenteditable');\n      if (Input.ignoreTypes.indexOf(type) >= 0) return; // Check Empty State\n\n      app.input.checkEmptyState($inputEl);\n      if (isContentEditable) return; // Check validation\n\n      if ($inputEl.attr('data-validate-on-blur') === null && ($inputEl.dataset().validate || $inputEl.attr('validate') !== null)) {\n        app.input.validate($inputEl);\n      } // Resize textarea\n\n\n      if (tag === 'textarea' && $inputEl.hasClass('resizable')) {\n        app.input.resizeTextarea($inputEl);\n      }\n    }\n\n    function onInvalid(e) {\n      var $inputEl = $(this);\n\n      if ($inputEl.attr('data-validate-on-blur') === null && ($inputEl.dataset().validate || $inputEl.attr('validate') !== null)) {\n        e.preventDefault();\n        app.input.validate($inputEl);\n      }\n    }\n\n    function clearInput() {\n      var $clicked = $(this);\n      var $inputEl = $clicked.siblings('input, textarea').eq(0);\n      var previousValue = $inputEl.val();\n      $inputEl.val('').trigger('input change').focus().trigger('input:clear', previousValue);\n      app.emit('inputClear', previousValue);\n    }\n\n    function preventDefault(e) {\n      e.preventDefault();\n    }\n\n    $(document).on('click', '.input-clear-button', clearInput);\n    $(document).on('mousedown', '.input-clear-button', preventDefault);\n    $(document).on('change input', 'input, textarea, select, .item-input [contenteditable]', onChange, true);\n    $(document).on('focus', 'input, textarea, select, .item-input [contenteditable]', onFocus, true);\n    $(document).on('blur', 'input, textarea, select, .item-input [contenteditable]', onBlur, true);\n    $(document).on('invalid', 'input, textarea, select', onInvalid, true);\n  }\n};\nexport default {\n  name: 'input',\n  params: {\n    input: {\n      scrollIntoViewOnFocus: undefined,\n      scrollIntoViewCentered: false,\n      scrollIntoViewDuration: 0,\n      scrollIntoViewAlways: false\n    }\n  },\n  create: function create() {\n    var app = this;\n\n    if (typeof app.params.input.scrollIntoViewOnFocus === 'undefined') {\n      app.params.input.scrollIntoViewOnFocus = getDevice().android;\n    }\n\n    bindMethods(app, {\n      input: Input\n    });\n  },\n  on: {\n    init: function init() {\n      var app = this;\n      app.input.init();\n    },\n    tabMounted: function tabMounted(tabEl) {\n      var app = this;\n      var $tabEl = $(tabEl);\n      $tabEl.find('.item-input, .input').each(function (itemInputEl) {\n        var $itemInputEl = $(itemInputEl);\n        $itemInputEl.find('input, select, textarea, [contenteditable]').each(function (inputEl) {\n          var $inputEl = $(inputEl);\n          if (Input.ignoreTypes.indexOf($inputEl.attr('type')) >= 0) return;\n          app.input.checkEmptyState($inputEl);\n        });\n      });\n      $tabEl.find('textarea.resizable').each(function (textareaEl) {\n        app.input.resizeTextarea(textareaEl);\n      });\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      var $pageEl = page.$el;\n      $pageEl.find('.item-input, .input').each(function (itemInputEl) {\n        var $itemInputEl = $(itemInputEl);\n        $itemInputEl.find('input, select, textarea, [contenteditable]').each(function (inputEl) {\n          var $inputEl = $(inputEl);\n          if (Input.ignoreTypes.indexOf($inputEl.attr('type')) >= 0) return;\n          app.input.checkEmptyState($inputEl);\n        });\n      });\n      $pageEl.find('textarea.resizable').each(function (textareaEl) {\n        app.input.resizeTextarea(textareaEl);\n      });\n    },\n    'panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint': function onPanelOpen(instance) {\n      var app = this;\n\n      if (instance && instance.$el) {\n        instance.$el.find('textarea.resizable').each(function (textareaEl) {\n          app.input.resizeTextarea(textareaEl);\n        });\n      } else {\n        $('textarea.resizable').each(function (textareaEl) {\n          app.input.resizeTextarea(textareaEl);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/input/input.js"],"names":["getWindow","getDocument","$","bindMethods","getDevice","Input","ignoreTypes","createTextareaResizableShadow","document","$shadowEl","createElement","addClass","prop","disabled","readonly","textareaResizableShadow","undefined","resizeTextarea","textareaEl","app","window","$textareaEl","length","hasClass","parents","$el","append","styles","getComputedStyle","split","forEach","style","styleValue","indexOf","replace","css","currentHeight","clientHeight","val","initialHeight","scrollHeight","trigger","emit","validate","inputEl","$inputEl","$itemInputEl","$inputWrapEl","unsetReadonly","f7ValidateReadonly","readOnly","setReadonly","validity","validationMessage","dataset","errorMessage","valid","$errorEl","nextAll","insertAfter","text","removeClass","validateInputs","el","validates","find","map","input","focus","type","attr","blur","checkEmptyState","is","eq","isContentEditable","hasAttribute","value","html","trim","Array","isArray","scrollIntoView","duration","centered","force","$scrollableEl","contentHeight","offsetHeight","contentScrollTop","scrollTop","contentPaddingTop","parseInt","contentPaddingBottom","contentOffsetTop","offset","top","inputOffsetTop","inputHeight","min","max","centeredPosition","init","device","onFocus","params","scrollIntoViewOnFocus","android","once","activeElement","scrollIntoViewDuration","scrollIntoViewCentered","scrollIntoViewAlways","onBlur","tag","nodeName","toLowerCase","remove","onChange","onInvalid","e","preventDefault","clearInput","$clicked","siblings","previousValue","on","name","create","tabMounted","tabEl","$tabEl","each","itemInputEl","pageInit","page","$pageEl","onPanelOpen","instance"],"mappings":"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","sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { bindMethods } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nvar Input = {\n  ignoreTypes: ['checkbox', 'button', 'submit', 'range', 'radio', 'image'],\n  createTextareaResizableShadow: function createTextareaResizableShadow() {\n    var document = getDocument();\n    var $shadowEl = $(document.createElement('textarea'));\n    $shadowEl.addClass('textarea-resizable-shadow');\n    $shadowEl.prop({\n      disabled: true,\n      readonly: true\n    });\n    Input.textareaResizableShadow = $shadowEl;\n  },\n  textareaResizableShadow: undefined,\n  resizeTextarea: function resizeTextarea(textareaEl) {\n    var app = this;\n    var window = getWindow();\n    var $textareaEl = $(textareaEl);\n\n    if (!Input.textareaResizableShadow) {\n      Input.createTextareaResizableShadow();\n    }\n\n    var $shadowEl = Input.textareaResizableShadow;\n    if (!$textareaEl.length) return;\n    if (!$textareaEl.hasClass('resizable')) return;\n\n    if (Input.textareaResizableShadow.parents().length === 0) {\n      app.$el.append($shadowEl);\n    }\n\n    var styles = window.getComputedStyle($textareaEl[0]);\n    'padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display'.split(' ').forEach(function (style) {\n      var styleValue = styles[style];\n\n      if ('font-size line-height letter-spacing width'.split(' ').indexOf(style) >= 0) {\n        styleValue = styleValue.replace(',', '.');\n      }\n\n      $shadowEl.css(style, styleValue);\n    });\n    var currentHeight = $textareaEl[0].clientHeight;\n    $shadowEl.val('');\n    var initialHeight = $shadowEl[0].scrollHeight;\n    $shadowEl.val($textareaEl.val());\n    $shadowEl.css('height', 0);\n    var scrollHeight = $shadowEl[0].scrollHeight;\n\n    if (currentHeight !== scrollHeight) {\n      if (scrollHeight > initialHeight) {\n        $textareaEl.css('height', scrollHeight + \"px\");\n      } else if (scrollHeight < currentHeight) {\n        $textareaEl.css('height', '');\n      }\n\n      if (scrollHeight > initialHeight || scrollHeight < currentHeight) {\n        $textareaEl.trigger('textarea:resize', {\n          initialHeight: initialHeight,\n          currentHeight: currentHeight,\n          scrollHeight: scrollHeight\n        });\n        app.emit('textareaResize', {\n          initialHeight: initialHeight,\n          currentHeight: currentHeight,\n          scrollHeight: scrollHeight\n        });\n      }\n    }\n  },\n  validate: function validate(inputEl) {\n    var $inputEl = $(inputEl);\n    if (!$inputEl.length) return true;\n    var $itemInputEl = $inputEl.parents('.item-input');\n    var $inputWrapEl = $inputEl.parents('.input');\n\n    function unsetReadonly() {\n      if ($inputEl[0].f7ValidateReadonly) {\n        $inputEl[0].readOnly = false;\n      }\n    }\n\n    function setReadonly() {\n      if ($inputEl[0].f7ValidateReadonly) {\n        $inputEl[0].readOnly = true;\n      }\n    }\n\n    unsetReadonly();\n    var validity = $inputEl[0].validity;\n    var validationMessage = $inputEl.dataset().errorMessage || $inputEl[0].validationMessage || '';\n\n    if (!validity) {\n      setReadonly();\n      return true;\n    }\n\n    if (!validity.valid) {\n      var $errorEl = $inputEl.nextAll('.item-input-error-message, .input-error-message');\n\n      if (validationMessage) {\n        if ($errorEl.length === 0) {\n          $errorEl = $(\"<div class=\\\"\" + ($inputWrapEl.length ? 'input-error-message' : 'item-input-error-message') + \"\\\"></div>\");\n          $errorEl.insertAfter($inputEl);\n        }\n\n        $errorEl.text(validationMessage);\n      }\n\n      if ($errorEl.length > 0) {\n        $itemInputEl.addClass('item-input-with-error-message');\n        $inputWrapEl.addClass('input-with-error-message');\n      }\n\n      $itemInputEl.addClass('item-input-invalid');\n      $inputWrapEl.addClass('input-invalid');\n      $inputEl.addClass('input-invalid');\n      setReadonly();\n      return false;\n    }\n\n    $itemInputEl.removeClass('item-input-invalid item-input-with-error-message');\n    $inputWrapEl.removeClass('input-invalid input-with-error-message');\n    $inputEl.removeClass('input-invalid');\n    setReadonly();\n    return true;\n  },\n  validateInputs: function validateInputs(el) {\n    var app = this;\n    var validates = $(el).find('input, textarea, select').map(function (inputEl) {\n      return app.input.validate(inputEl);\n    });\n    return validates.indexOf(false) < 0;\n  },\n  focus: function focus(inputEl) {\n    var $inputEl = $(inputEl);\n    var type = $inputEl.attr('type');\n    if (Input.ignoreTypes.indexOf(type) >= 0) return;\n    $inputEl.parents('.item-input').addClass('item-input-focused');\n    $inputEl.parents('.input').addClass('input-focused');\n    $inputEl.addClass('input-focused');\n  },\n  blur: function blur(inputEl) {\n    var $inputEl = $(inputEl);\n    $inputEl.parents('.item-input').removeClass('item-input-focused');\n    $inputEl.parents('.input').removeClass('input-focused');\n    $inputEl.removeClass('input-focused');\n  },\n  checkEmptyState: function checkEmptyState(inputEl) {\n    var app = this;\n    var $inputEl = $(inputEl);\n\n    if (!$inputEl.is('input, select, textarea, .item-input [contenteditable]')) {\n      $inputEl = $inputEl.find('input, select, textarea, .item-input [contenteditable]').eq(0);\n    }\n\n    if (!$inputEl.length) return;\n    var isContentEditable = $inputEl[0].hasAttribute('contenteditable');\n    var value;\n\n    if (isContentEditable) {\n      if ($inputEl.find('.text-editor-placeholder').length) value = '';else value = $inputEl.html();\n    } else {\n      value = $inputEl.val();\n    }\n\n    var $itemInputEl = $inputEl.parents('.item-input');\n    var $inputWrapEl = $inputEl.parents('.input');\n\n    if (value && typeof value === 'string' && value.trim() !== '' || Array.isArray(value) && value.length > 0) {\n      $itemInputEl.addClass('item-input-with-value');\n      $inputWrapEl.addClass('input-with-value');\n      $inputEl.addClass('input-with-value');\n      $inputEl.trigger('input:notempty');\n      app.emit('inputNotEmpty', $inputEl[0]);\n    } else {\n      $itemInputEl.removeClass('item-input-with-value');\n      $inputWrapEl.removeClass('input-with-value');\n      $inputEl.removeClass('input-with-value');\n      $inputEl.trigger('input:empty');\n      app.emit('inputEmpty', $inputEl[0]);\n    }\n  },\n  scrollIntoView: function scrollIntoView(inputEl, duration, centered, force) {\n    if (duration === void 0) {\n      duration = 0;\n    }\n\n    var $inputEl = $(inputEl);\n    var $scrollableEl = $inputEl.parents('.page-content, .panel, .card-expandable .card-content').eq(0);\n\n    if (!$scrollableEl.length) {\n      return false;\n    }\n\n    var contentHeight = $scrollableEl[0].offsetHeight;\n    var contentScrollTop = $scrollableEl[0].scrollTop;\n    var contentPaddingTop = parseInt($scrollableEl.css('padding-top'), 10);\n    var contentPaddingBottom = parseInt($scrollableEl.css('padding-bottom'), 10);\n    var contentOffsetTop = $scrollableEl.offset().top - contentScrollTop;\n    var inputOffsetTop = $inputEl.offset().top - contentOffsetTop;\n    var inputHeight = $inputEl[0].offsetHeight;\n    var min = inputOffsetTop + contentScrollTop - contentPaddingTop;\n    var max = inputOffsetTop + contentScrollTop - contentHeight + contentPaddingBottom + inputHeight;\n    var centeredPosition = min + (max - min) / 2;\n\n    if (contentScrollTop > min) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : min, duration);\n      return true;\n    }\n\n    if (contentScrollTop < max) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : max, duration);\n      return true;\n    }\n\n    if (force) {\n      $scrollableEl.scrollTop(centered ? centeredPosition : max, duration);\n    }\n\n    return false;\n  },\n  init: function init() {\n    var app = this;\n    var device = getDevice();\n    var window = getWindow();\n    var document = getDocument();\n    Input.createTextareaResizableShadow();\n\n    function onFocus() {\n      var inputEl = this;\n\n      if (app.params.input.scrollIntoViewOnFocus) {\n        if (device.android) {\n          $(window).once('resize', function () {\n            if (document && document.activeElement === inputEl) {\n              app.input.scrollIntoView(inputEl, app.params.input.scrollIntoViewDuration, app.params.input.scrollIntoViewCentered, app.params.input.scrollIntoViewAlways);\n            }\n          });\n        } else {\n          app.input.scrollIntoView(inputEl, app.params.input.scrollIntoViewDuration, app.params.input.scrollIntoViewCentered, app.params.input.scrollIntoViewAlways);\n        }\n      }\n\n      app.input.focus(inputEl);\n    }\n\n    function onBlur() {\n      var $inputEl = $(this);\n      var tag = $inputEl[0].nodeName.toLowerCase();\n      app.input.blur($inputEl);\n\n      if ($inputEl.dataset().validate || $inputEl.attr('validate') !== null || $inputEl.attr('data-validate-on-blur') !== null) {\n        app.input.validate($inputEl);\n      } // Resize textarea\n\n\n      if (tag === 'textarea' && $inputEl.hasClass('resizable')) {\n        if (Input.textareaResizableShadow) Input.textareaResizableShadow.remove();\n      }\n    }\n\n    function onChange() {\n      var $inputEl = $(this);\n      var type = $inputEl.attr('type');\n      var tag = $inputEl[0].nodeName.toLowerCase();\n      var isContentEditable = $inputEl[0].hasAttribute('contenteditable');\n      if (Input.ignoreTypes.indexOf(type) >= 0) return; // Check Empty State\n\n      app.input.checkEmptyState($inputEl);\n      if (isContentEditable) return; // Check validation\n\n      if ($inputEl.attr('data-validate-on-blur') === null && ($inputEl.dataset().validate || $inputEl.attr('validate') !== null)) {\n        app.input.validate($inputEl);\n      } // Resize textarea\n\n\n      if (tag === 'textarea' && $inputEl.hasClass('resizable')) {\n        app.input.resizeTextarea($inputEl);\n      }\n    }\n\n    function onInvalid(e) {\n      var $inputEl = $(this);\n\n      if ($inputEl.attr('data-validate-on-blur') === null && ($inputEl.dataset().validate || $inputEl.attr('validate') !== null)) {\n        e.preventDefault();\n        app.input.validate($inputEl);\n      }\n    }\n\n    function clearInput() {\n      var $clicked = $(this);\n      var $inputEl = $clicked.siblings('input, textarea').eq(0);\n      var previousValue = $inputEl.val();\n      $inputEl.val('').trigger('input change').focus().trigger('input:clear', previousValue);\n      app.emit('inputClear', previousValue);\n    }\n\n    function preventDefault(e) {\n      e.preventDefault();\n    }\n\n    $(document).on('click', '.input-clear-button', clearInput);\n    $(document).on('mousedown', '.input-clear-button', preventDefault);\n    $(document).on('change input', 'input, textarea, select, .item-input [contenteditable]', onChange, true);\n    $(document).on('focus', 'input, textarea, select, .item-input [contenteditable]', onFocus, true);\n    $(document).on('blur', 'input, textarea, select, .item-input [contenteditable]', onBlur, true);\n    $(document).on('invalid', 'input, textarea, select', onInvalid, true);\n  }\n};\nexport default {\n  name: 'input',\n  params: {\n    input: {\n      scrollIntoViewOnFocus: undefined,\n      scrollIntoViewCentered: false,\n      scrollIntoViewDuration: 0,\n      scrollIntoViewAlways: false\n    }\n  },\n  create: function create() {\n    var app = this;\n\n    if (typeof app.params.input.scrollIntoViewOnFocus === 'undefined') {\n      app.params.input.scrollIntoViewOnFocus = getDevice().android;\n    }\n\n    bindMethods(app, {\n      input: Input\n    });\n  },\n  on: {\n    init: function init() {\n      var app = this;\n      app.input.init();\n    },\n    tabMounted: function tabMounted(tabEl) {\n      var app = this;\n      var $tabEl = $(tabEl);\n      $tabEl.find('.item-input, .input').each(function (itemInputEl) {\n        var $itemInputEl = $(itemInputEl);\n        $itemInputEl.find('input, select, textarea, [contenteditable]').each(function (inputEl) {\n          var $inputEl = $(inputEl);\n          if (Input.ignoreTypes.indexOf($inputEl.attr('type')) >= 0) return;\n          app.input.checkEmptyState($inputEl);\n        });\n      });\n      $tabEl.find('textarea.resizable').each(function (textareaEl) {\n        app.input.resizeTextarea(textareaEl);\n      });\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      var $pageEl = page.$el;\n      $pageEl.find('.item-input, .input').each(function (itemInputEl) {\n        var $itemInputEl = $(itemInputEl);\n        $itemInputEl.find('input, select, textarea, [contenteditable]').each(function (inputEl) {\n          var $inputEl = $(inputEl);\n          if (Input.ignoreTypes.indexOf($inputEl.attr('type')) >= 0) return;\n          app.input.checkEmptyState($inputEl);\n        });\n      });\n      $pageEl.find('textarea.resizable').each(function (textareaEl) {\n        app.input.resizeTextarea(textareaEl);\n      });\n    },\n    'panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint': function onPanelOpen(instance) {\n      var app = this;\n\n      if (instance && instance.$el) {\n        instance.$el.find('textarea.resizable').each(function (textareaEl) {\n          app.input.resizeTextarea(textareaEl);\n        });\n      } else {\n        $('textarea.resizable').each(function (textareaEl) {\n          app.input.resizeTextarea(textareaEl);\n        });\n      }\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}