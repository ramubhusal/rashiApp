{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Dialog = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Dialog, _Modal);\n\n  function Dialog(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      title: app.params.dialog.title,\n      text: undefined,\n      content: '',\n      buttons: [],\n      verticalButtons: false,\n      onClick: undefined,\n      cssClass: undefined,\n      destroyOnClose: false,\n      on: {}\n    }, params);\n\n    if (typeof extendedParams.closeByBackdropClick === 'undefined') {\n      extendedParams.closeByBackdropClick = app.params.dialog.closeByBackdropClick;\n    }\n\n    if (typeof extendedParams.backdrop === 'undefined') {\n      extendedParams.backdrop = app.params.dialog.backdrop;\n    } // Extends with open/close Modal methods;\n\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var dialog = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var document = getDocument();\n    var title = extendedParams.title,\n        text = extendedParams.text,\n        content = extendedParams.content,\n        buttons = extendedParams.buttons,\n        verticalButtons = extendedParams.verticalButtons,\n        cssClass = extendedParams.cssClass,\n        backdrop = extendedParams.backdrop;\n    dialog.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!dialog.params.el) {\n      var dialogClasses = ['dialog'];\n      if (buttons.length === 0) dialogClasses.push('dialog-no-buttons');\n      if (buttons.length > 0) dialogClasses.push(\"dialog-buttons-\" + buttons.length);\n      if (verticalButtons) dialogClasses.push('dialog-buttons-vertical');\n      if (cssClass) dialogClasses.push(cssClass);\n      var buttonsHTML = '';\n\n      if (buttons.length > 0) {\n        buttonsHTML = $jsx(\"div\", {\n          class: \"dialog-buttons\"\n        }, buttons.map(function (button) {\n          return $jsx(\"span\", {\n            class: \"dialog-button\" + (button.bold ? ' dialog-button-bold' : '') + (button.color ? \" color-\" + button.color : '') + (button.cssClass ? \" \" + button.cssClass : '')\n          }, button.text);\n        }));\n      }\n\n      var dialogHtml = $jsx(\"div\", {\n        class: dialogClasses.join(' ')\n      }, $jsx(\"div\", {\n        class: \"dialog-inner\"\n      }, title && $jsx(\"div\", {\n        class: \"dialog-title\"\n      }, title), text && $jsx(\"div\", {\n        class: \"dialog-text\"\n      }, text), content), buttonsHTML);\n      $el = $(dialogHtml);\n    } else {\n      $el = $(dialog.params.el);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    }\n\n    if ($el.length === 0) {\n      return dialog.destroy() || _assertThisInitialized(_this);\n    }\n\n    var $backdropEl;\n\n    if (backdrop) {\n      $backdropEl = app.$el.children('.dialog-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"dialog-backdrop\"></div>');\n        app.$el.append($backdropEl);\n      }\n    } // Assign events\n\n\n    function buttonOnClick(e) {\n      var buttonEl = this;\n      var index = $(buttonEl).index();\n      var button = buttons[index];\n      if (button.onClick) button.onClick(dialog, e);\n      if (dialog.params.onClick) dialog.params.onClick(dialog, index);\n      if (button.close !== false) dialog.close();\n    }\n\n    var addKeyboardHander;\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n      buttons.forEach(function (button, index) {\n        if (button.keyCodes && button.keyCodes.indexOf(keyCode) >= 0) {\n          if (document.activeElement) document.activeElement.blur();\n          if (button.onClick) button.onClick(dialog, e);\n          if (dialog.params.onClick) dialog.params.onClick(dialog, index);\n          if (button.close !== false) dialog.close();\n        }\n      });\n    }\n\n    if (buttons && buttons.length > 0) {\n      dialog.on('open', function () {\n        $el.find('.dialog-button').each(function (buttonEl, index) {\n          var button = buttons[index];\n          if (button.keyCodes) addKeyboardHander = true;\n          $(buttonEl).on('click', buttonOnClick);\n        });\n\n        if (addKeyboardHander && !device.ios && !device.android && !device.cordova && !device.capacitor) {\n          $(document).on('keydown', onKeyDown);\n        }\n      });\n      dialog.on('close', function () {\n        $el.find('.dialog-button').each(function (buttonEl) {\n          $(buttonEl).off('click', buttonOnClick);\n        });\n\n        if (addKeyboardHander && !device.ios && !device.android && !device.cordova && !device.capacitor) {\n          $(document).off('keydown', onKeyDown);\n        }\n\n        addKeyboardHander = false;\n      });\n    }\n\n    extend(dialog, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'dialog',\n      setProgress: function setProgress(progress, duration) {\n        app.progressbar.set($el.find('.progressbar'), progress, duration);\n        return dialog;\n      },\n      setText: function setText(newText) {\n        var $textEl = $el.find('.dialog-text');\n\n        if ($textEl.length === 0) {\n          $textEl = $('<div class=\"dialog-text\"></div>');\n\n          if (typeof title !== 'undefined') {\n            $textEl.insertAfter($el.find('.dialog-title'));\n          } else {\n            $el.find('.dialog-inner').prepend($textEl);\n          }\n        }\n\n        $textEl.html(newText);\n        dialog.params.text = newText;\n        return dialog;\n      },\n      setTitle: function setTitle(newTitle) {\n        var $titleEl = $el.find('.dialog-title');\n\n        if ($titleEl.length === 0) {\n          $titleEl = $('<div class=\"dialog-title\"></div>');\n          $el.find('.dialog-inner').prepend($titleEl);\n        }\n\n        $titleEl.html(newTitle);\n        dialog.params.title = newTitle;\n        return dialog;\n      }\n    });\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n\n      if ($target.closest(dialog.el).length === 0) {\n        if (dialog.params.closeByBackdropClick && dialog.backdropEl && dialog.backdropEl === target) {\n          dialog.close();\n        }\n      }\n    }\n\n    dialog.on('opened', function () {\n      if (dialog.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    dialog.on('close', function () {\n      if (dialog.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n    });\n    $el[0].f7Modal = dialog;\n\n    if (dialog.params.destroyOnClose) {\n      dialog.once('closed', function () {\n        setTimeout(function () {\n          dialog.destroy();\n        }, 0);\n      });\n    }\n\n    return dialog || _assertThisInitialized(_this);\n  }\n\n  return Dialog;\n}(Modal);\n\nexport default Dialog;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/dialog/dialog-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getDocument","$","extend","getDevice","Modal","$jsx","Dialog","_Modal","app","params","_this","extendedParams","title","dialog","text","undefined","content","buttons","verticalButtons","onClick","cssClass","destroyOnClose","on","closeByBackdropClick","backdrop","call","device","document","$el","el","dialogClasses","length","push","buttonsHTML","class","map","button","bold","color","dialogHtml","join","f7Modal","destroy","$backdropEl","children","append","buttonOnClick","e","buttonEl","index","close","addKeyboardHander","onKeyDown","keyCode","forEach","keyCodes","indexOf","activeElement","blur","find","each","ios","android","cordova","capacitor","off","backdropEl","type","setProgress","progress","duration","progressbar","set","setText","newText","$textEl","insertAfter","prepend","html","setTitle","newTitle","$titleEl","handleClick","target","$target","closest","once","setTimeout"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Dialog = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Dialog, _Modal);\n\n  function Dialog(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      title: app.params.dialog.title,\n      text: undefined,\n      content: '',\n      buttons: [],\n      verticalButtons: false,\n      onClick: undefined,\n      cssClass: undefined,\n      destroyOnClose: false,\n      on: {}\n    }, params);\n\n    if (typeof extendedParams.closeByBackdropClick === 'undefined') {\n      extendedParams.closeByBackdropClick = app.params.dialog.closeByBackdropClick;\n    }\n\n    if (typeof extendedParams.backdrop === 'undefined') {\n      extendedParams.backdrop = app.params.dialog.backdrop;\n    } // Extends with open/close Modal methods;\n\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var dialog = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var document = getDocument();\n    var title = extendedParams.title,\n        text = extendedParams.text,\n        content = extendedParams.content,\n        buttons = extendedParams.buttons,\n        verticalButtons = extendedParams.verticalButtons,\n        cssClass = extendedParams.cssClass,\n        backdrop = extendedParams.backdrop;\n    dialog.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!dialog.params.el) {\n      var dialogClasses = ['dialog'];\n      if (buttons.length === 0) dialogClasses.push('dialog-no-buttons');\n      if (buttons.length > 0) dialogClasses.push(\"dialog-buttons-\" + buttons.length);\n      if (verticalButtons) dialogClasses.push('dialog-buttons-vertical');\n      if (cssClass) dialogClasses.push(cssClass);\n      var buttonsHTML = '';\n\n      if (buttons.length > 0) {\n        buttonsHTML = $jsx(\"div\", {\n          class: \"dialog-buttons\"\n        }, buttons.map(function (button) {\n          return $jsx(\"span\", {\n            class: \"dialog-button\" + (button.bold ? ' dialog-button-bold' : '') + (button.color ? \" color-\" + button.color : '') + (button.cssClass ? \" \" + button.cssClass : '')\n          }, button.text);\n        }));\n      }\n\n      var dialogHtml = $jsx(\"div\", {\n        class: dialogClasses.join(' ')\n      }, $jsx(\"div\", {\n        class: \"dialog-inner\"\n      }, title && $jsx(\"div\", {\n        class: \"dialog-title\"\n      }, title), text && $jsx(\"div\", {\n        class: \"dialog-text\"\n      }, text), content), buttonsHTML);\n      $el = $(dialogHtml);\n    } else {\n      $el = $(dialog.params.el);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    }\n\n    if ($el.length === 0) {\n      return dialog.destroy() || _assertThisInitialized(_this);\n    }\n\n    var $backdropEl;\n\n    if (backdrop) {\n      $backdropEl = app.$el.children('.dialog-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"dialog-backdrop\"></div>');\n        app.$el.append($backdropEl);\n      }\n    } // Assign events\n\n\n    function buttonOnClick(e) {\n      var buttonEl = this;\n      var index = $(buttonEl).index();\n      var button = buttons[index];\n      if (button.onClick) button.onClick(dialog, e);\n      if (dialog.params.onClick) dialog.params.onClick(dialog, index);\n      if (button.close !== false) dialog.close();\n    }\n\n    var addKeyboardHander;\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n      buttons.forEach(function (button, index) {\n        if (button.keyCodes && button.keyCodes.indexOf(keyCode) >= 0) {\n          if (document.activeElement) document.activeElement.blur();\n          if (button.onClick) button.onClick(dialog, e);\n          if (dialog.params.onClick) dialog.params.onClick(dialog, index);\n          if (button.close !== false) dialog.close();\n        }\n      });\n    }\n\n    if (buttons && buttons.length > 0) {\n      dialog.on('open', function () {\n        $el.find('.dialog-button').each(function (buttonEl, index) {\n          var button = buttons[index];\n          if (button.keyCodes) addKeyboardHander = true;\n          $(buttonEl).on('click', buttonOnClick);\n        });\n\n        if (addKeyboardHander && !device.ios && !device.android && !device.cordova && !device.capacitor) {\n          $(document).on('keydown', onKeyDown);\n        }\n      });\n      dialog.on('close', function () {\n        $el.find('.dialog-button').each(function (buttonEl) {\n          $(buttonEl).off('click', buttonOnClick);\n        });\n\n        if (addKeyboardHander && !device.ios && !device.android && !device.cordova && !device.capacitor) {\n          $(document).off('keydown', onKeyDown);\n        }\n\n        addKeyboardHander = false;\n      });\n    }\n\n    extend(dialog, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'dialog',\n      setProgress: function setProgress(progress, duration) {\n        app.progressbar.set($el.find('.progressbar'), progress, duration);\n        return dialog;\n      },\n      setText: function setText(newText) {\n        var $textEl = $el.find('.dialog-text');\n\n        if ($textEl.length === 0) {\n          $textEl = $('<div class=\"dialog-text\"></div>');\n\n          if (typeof title !== 'undefined') {\n            $textEl.insertAfter($el.find('.dialog-title'));\n          } else {\n            $el.find('.dialog-inner').prepend($textEl);\n          }\n        }\n\n        $textEl.html(newText);\n        dialog.params.text = newText;\n        return dialog;\n      },\n      setTitle: function setTitle(newTitle) {\n        var $titleEl = $el.find('.dialog-title');\n\n        if ($titleEl.length === 0) {\n          $titleEl = $('<div class=\"dialog-title\"></div>');\n          $el.find('.dialog-inner').prepend($titleEl);\n        }\n\n        $titleEl.html(newTitle);\n        dialog.params.title = newTitle;\n        return dialog;\n      }\n    });\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n\n      if ($target.closest(dialog.el).length === 0) {\n        if (dialog.params.closeByBackdropClick && dialog.backdropEl && dialog.backdropEl === target) {\n          dialog.close();\n        }\n      }\n    }\n\n    dialog.on('opened', function () {\n      if (dialog.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    dialog.on('close', function () {\n      if (dialog.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n    });\n    $el[0].f7Modal = dialog;\n\n    if (dialog.params.destroyOnClose) {\n      dialog.once('closed', function () {\n        setTimeout(function () {\n          dialog.destroy();\n        }, 0);\n      });\n    }\n\n    return dialog || _assertThisInitialized(_this);\n  }\n\n  return Dialog;\n}(Modal);\n\nexport default Dialog;"]},"metadata":{},"sourceType":"module"}