{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport $ from '../../shared/dom7';\nimport { deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\n\nvar PullToRefresh = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(PullToRefresh, _Framework7Class);\n\n  function PullToRefresh(app, el) {\n    var _this;\n\n    _this = _Framework7Class.call(this, {}, [app]) || this;\n\n    var ptr = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var support = getSupport();\n    var $el = $(el);\n    var $preloaderEl = $el.find('.ptr-preloader');\n    ptr.$el = $el;\n    ptr.el = $el[0];\n    ptr.app = app;\n    ptr.bottom = ptr.$el.hasClass('ptr-bottom'); // Extend defaults with modules params\n\n    ptr.useModulesParams({});\n    var isMaterial = app.theme === 'md';\n    var isIos = app.theme === 'ios';\n    var isAurora = app.theme === 'aurora'; // Done\n\n    ptr.done = function done() {\n      var $transitionTarget = isMaterial ? $preloaderEl : $el;\n      $transitionTarget.transitionEnd(function () {\n        $el.removeClass('ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing');\n        $el.trigger('ptr:done');\n        ptr.emit('local::done ptrDone', $el[0]);\n      });\n      $el.removeClass('ptr-refreshing').addClass('ptr-transitioning ptr-closing');\n      return ptr;\n    };\n\n    ptr.refresh = function refresh() {\n      if ($el.hasClass('ptr-refreshing')) return ptr;\n      $el.addClass('ptr-transitioning ptr-refreshing');\n      $el.trigger('ptr:refresh', ptr.done);\n      ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      return ptr;\n    }; // Mousewheel\n\n\n    ptr.mousewheel = $el.attr('data-ptr-mousewheel') === 'true'; // Events handling\n\n    var touchId;\n    var isTouched;\n    var isMoved;\n    var touchesStart = {};\n    var isScrolling;\n    var touchesDiff;\n    var refresh = false;\n    var useTranslate = false;\n    var forceUseTranslate = false;\n    var startTranslate = 0;\n    var translate;\n    var scrollTop;\n    var wasScrolled;\n    var triggerDistance;\n    var dynamicTriggerDistance;\n    var pullStarted;\n    var hasNavbar = false;\n    var scrollHeight;\n    var offsetHeight;\n    var maxScrollTop;\n    var $pageEl = $el.parents('.page');\n    if ($pageEl.find('.navbar').length > 0 || $pageEl.parents('.view').children('.navbars').length > 0) hasNavbar = true;\n    if ($pageEl.hasClass('no-navbar')) hasNavbar = false;\n\n    if (!ptr.bottom) {\n      var pageNavbarEl = app.navbar.getElByPage($pageEl[0]);\n\n      if (pageNavbarEl) {\n        var $pageNavbarEl = $(pageNavbarEl);\n        var isLargeTransparent = $pageNavbarEl.hasClass('navbar-large-transparent') || $pageNavbarEl.hasClass('navbar-large') && $pageNavbarEl.hasClass('navbar-transparent');\n        var isTransparent = $pageNavbarEl.hasClass('navbar-transparent') && !$pageNavbarEl.hasClass('navbar-large');\n\n        if (isLargeTransparent) {\n          $el.addClass('ptr-with-navbar-large-transparent');\n        } else if (isTransparent) {\n          $el.addClass('ptr-with-navbar-transparent');\n        }\n      }\n    }\n\n    if (!hasNavbar && !ptr.bottom) $el.addClass('ptr-no-navbar'); // Define trigger distance\n\n    if ($el.attr('data-ptr-distance')) {\n      dynamicTriggerDistance = true;\n    } else if (isMaterial) {\n      triggerDistance = 66;\n    } else if (isIos) {\n      triggerDistance = 44;\n    } else if (isAurora) {\n      triggerDistance = 38;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) {\n        if (device.os === 'android') {\n          if ('targetTouches' in e && e.targetTouches.length > 1) return;\n        } else return;\n      }\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      isMoved = false;\n      pullStarted = false;\n      isTouched = true;\n      isScrolling = undefined;\n      wasScrolled = undefined;\n      if (e.type === 'touchstart') touchId = e.targetTouches[0].identifier;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      var pageX;\n      var pageY;\n      var touch;\n\n      if (e.type === 'touchmove') {\n        if (touchId && e.touches) {\n          for (var i = 0; i < e.touches.length; i += 1) {\n            if (e.touches[i].identifier === touchId) {\n              touch = e.touches[i];\n            }\n          }\n        }\n\n        if (!touch) touch = e.targetTouches[0];\n        pageX = touch.pageX;\n        pageY = touch.pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (!pageX || !pageY) return;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (!isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      scrollTop = $el[0].scrollTop;\n\n      if (!isMoved) {\n        $el.removeClass('ptr-transitioning');\n        var targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          isTouched = false;\n          return;\n        }\n\n        var $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(function (ptrScrollableEl) {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          isTouched = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n\n        startTranslate = $el.hasClass('ptr-refreshing') ? triggerDistance : 0;\n\n        if (scrollHeight === offsetHeight || device.os !== 'ios' || isMaterial) {\n          useTranslate = true;\n        } else {\n          useTranslate = false;\n        }\n\n        forceUseTranslate = false;\n      }\n\n      isMoved = true;\n      touchesDiff = pageY - touchesStart.y;\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      var ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        // iOS 8 fix\n        if (device.os === 'ios' && parseInt(device.osVersion.split('.')[0], 10) > 7) {\n          if (!ptr.bottom && scrollTop === 0 && !wasScrolled) useTranslate = true;\n          if (ptr.bottom && scrollTop === maxScrollTop && !wasScrolled) useTranslate = true;\n        }\n\n        if (!useTranslate && ptr.bottom && !isMaterial) {\n          $el.css('-webkit-overflow-scrolling', 'auto');\n          $el.scrollTop(maxScrollTop);\n          forceUseTranslate = true;\n        }\n\n        if (useTranslate || forceUseTranslate) {\n          if (e.cancelable) {\n            e.preventDefault();\n          }\n\n          translate = (ptr.bottom ? -1 * Math.pow(Math.abs(touchesDiff), 0.85) : Math.pow(touchesDiff, 0.85)) + startTranslate;\n\n          if (isMaterial) {\n            $preloaderEl.transform(\"translate3d(0,\" + translate + \"px,0)\").find('.ptr-arrow').transform(\"rotate(\" + (180 * (Math.abs(touchesDiff) / 66) + 100) + \"deg)\");\n          } else {\n            // eslint-disable-next-line\n            if (ptr.bottom) {\n              $el.children().transform(\"translate3d(0,\" + translate + \"px,0)\");\n            } else {\n              $el.transform(\"translate3d(0,\" + translate + \"px,0)\");\n            }\n          }\n        }\n\n        if ((useTranslate || forceUseTranslate) && Math.pow(Math.abs(touchesDiff), 0.85) > triggerDistance || !useTranslate && Math.abs(touchesDiff) >= triggerDistance * 2) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend' && e.changedTouches && e.changedTouches.length > 0 && touchId) {\n        if (e.changedTouches[0].identifier !== touchId) {\n          isTouched = false;\n          isScrolling = false;\n          isMoved = false;\n          touchId = null;\n          return;\n        }\n      }\n\n      if (!isTouched || !isMoved) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        // eslint-disable-next-line\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (!useTranslate && ptr.bottom && !isMaterial) {\n        $el.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      isTouched = false;\n      isMoved = false;\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    var mousewheelTimeout;\n    var mousewheelMoved;\n    var mousewheelAllow = true;\n    var mousewheelTranslate = 0;\n\n    function handleMouseWheelRelease() {\n      mousewheelAllow = true;\n      mousewheelMoved = false;\n      mousewheelTranslate = 0;\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        // eslint-disable-next-line\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    function handleMouseWheel(e) {\n      if (!mousewheelAllow) return;\n      var deltaX = e.deltaX,\n          deltaY = e.deltaY;\n      if (Math.abs(deltaX) > Math.abs(deltaY)) return;\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      clearTimeout(mousewheelTimeout);\n      scrollTop = $el[0].scrollTop;\n\n      if (!mousewheelMoved) {\n        $el.removeClass('ptr-transitioning');\n        var targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        var $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(function (ptrScrollableEl) {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n      }\n\n      isMoved = true;\n      mousewheelTranslate -= deltaY;\n      touchesDiff = mousewheelTranslate; // pageY - touchesStart.y;\n\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      var ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n\n        translate = touchesDiff;\n\n        if (Math.abs(translate) > triggerDistance) {\n          translate = triggerDistance + Math.pow(Math.abs(translate) - triggerDistance, 0.7);\n          if (ptr.bottom) translate = -translate;\n        }\n\n        if (isMaterial) {\n          $preloaderEl.transform(\"translate3d(0,\" + translate + \"px,0)\").find('.ptr-arrow').transform(\"rotate(\" + (180 * (Math.abs(touchesDiff) / 66) + 100) + \"deg)\");\n        } else {\n          // eslint-disable-next-line\n          if (ptr.bottom) {\n            $el.children().transform(\"translate3d(0,\" + translate + \"px,0)\");\n          } else {\n            $el.transform(\"translate3d(0,\" + translate + \"px,0)\");\n          }\n        }\n\n        if (Math.abs(translate) > triggerDistance) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n\n      mousewheelTimeout = setTimeout(handleMouseWheelRelease, 300);\n    }\n\n    if (!$pageEl.length || !$el.length) return ptr || _assertThisInitialized(_this);\n    $el[0].f7PullToRefresh = ptr; // Events\n\n    ptr.attachEvents = function attachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove:active', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.on('wheel', handleMouseWheel);\n      }\n    };\n\n    ptr.detachEvents = function detachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.off('wheel', handleMouseWheel);\n      }\n    }; // Install Modules\n\n\n    ptr.useModules(); // Init\n\n    ptr.init();\n    return ptr || _assertThisInitialized(_this);\n  }\n\n  var _proto = PullToRefresh.prototype;\n\n  _proto.init = function init() {\n    var ptr = this;\n    ptr.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var ptr = this;\n    ptr.emit('local::beforeDestroy ptrBeforeDestroy', ptr);\n    ptr.$el.trigger('ptr:beforedestroy');\n    delete ptr.el.f7PullToRefresh;\n    ptr.detachEvents();\n    deleteProps(ptr);\n    ptr = null;\n  };\n\n  return PullToRefresh;\n}(Framework7Class);\n\nexport default PullToRefresh;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/pull-to-refresh/pull-to-refresh-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","$","deleteProps","Framework7Class","getSupport","getDevice","PullToRefresh","_Framework7Class","app","el","_this","call","ptr","device","support","$el","$preloaderEl","find","bottom","hasClass","useModulesParams","isMaterial","theme","isIos","isAurora","done","$transitionTarget","transitionEnd","removeClass","trigger","emit","addClass","refresh","mousewheel","attr","touchId","isTouched","isMoved","touchesStart","isScrolling","touchesDiff","useTranslate","forceUseTranslate","startTranslate","translate","scrollTop","wasScrolled","triggerDistance","dynamicTriggerDistance","pullStarted","hasNavbar","scrollHeight","offsetHeight","maxScrollTop","$pageEl","parents","length","children","pageNavbarEl","navbar","getElByPage","$pageNavbarEl","isLargeTransparent","isTransparent","handleTouchStart","e","os","targetTouches","target","closest","undefined","type","identifier","x","pageX","y","pageY","handleTouchMove","touch","touches","i","Math","abs","targetIsScrollable","$ptrWatchScrollable","each","ptrScrollableEl","css","indexOf","parseInt","ptrStarted","osVersion","split","cancelable","preventDefault","pow","transform","event","handleTouchEnd","changedTouches","mousewheelTimeout","mousewheelMoved","mousewheelAllow","mousewheelTranslate","handleMouseWheelRelease","handleMouseWheel","deltaX","deltaY","clearTimeout","setTimeout","f7PullToRefresh","attachEvents","passive","passiveListener","on","touchEvents","start","detachEvents","off","useModules","init","_proto","destroy"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport $ from '../../shared/dom7';\nimport { deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\n\nvar PullToRefresh = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(PullToRefresh, _Framework7Class);\n\n  function PullToRefresh(app, el) {\n    var _this;\n\n    _this = _Framework7Class.call(this, {}, [app]) || this;\n\n    var ptr = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var support = getSupport();\n    var $el = $(el);\n    var $preloaderEl = $el.find('.ptr-preloader');\n    ptr.$el = $el;\n    ptr.el = $el[0];\n    ptr.app = app;\n    ptr.bottom = ptr.$el.hasClass('ptr-bottom'); // Extend defaults with modules params\n\n    ptr.useModulesParams({});\n    var isMaterial = app.theme === 'md';\n    var isIos = app.theme === 'ios';\n    var isAurora = app.theme === 'aurora'; // Done\n\n    ptr.done = function done() {\n      var $transitionTarget = isMaterial ? $preloaderEl : $el;\n      $transitionTarget.transitionEnd(function () {\n        $el.removeClass('ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing');\n        $el.trigger('ptr:done');\n        ptr.emit('local::done ptrDone', $el[0]);\n      });\n      $el.removeClass('ptr-refreshing').addClass('ptr-transitioning ptr-closing');\n      return ptr;\n    };\n\n    ptr.refresh = function refresh() {\n      if ($el.hasClass('ptr-refreshing')) return ptr;\n      $el.addClass('ptr-transitioning ptr-refreshing');\n      $el.trigger('ptr:refresh', ptr.done);\n      ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      return ptr;\n    }; // Mousewheel\n\n\n    ptr.mousewheel = $el.attr('data-ptr-mousewheel') === 'true'; // Events handling\n\n    var touchId;\n    var isTouched;\n    var isMoved;\n    var touchesStart = {};\n    var isScrolling;\n    var touchesDiff;\n    var refresh = false;\n    var useTranslate = false;\n    var forceUseTranslate = false;\n    var startTranslate = 0;\n    var translate;\n    var scrollTop;\n    var wasScrolled;\n    var triggerDistance;\n    var dynamicTriggerDistance;\n    var pullStarted;\n    var hasNavbar = false;\n    var scrollHeight;\n    var offsetHeight;\n    var maxScrollTop;\n    var $pageEl = $el.parents('.page');\n    if ($pageEl.find('.navbar').length > 0 || $pageEl.parents('.view').children('.navbars').length > 0) hasNavbar = true;\n    if ($pageEl.hasClass('no-navbar')) hasNavbar = false;\n\n    if (!ptr.bottom) {\n      var pageNavbarEl = app.navbar.getElByPage($pageEl[0]);\n\n      if (pageNavbarEl) {\n        var $pageNavbarEl = $(pageNavbarEl);\n        var isLargeTransparent = $pageNavbarEl.hasClass('navbar-large-transparent') || $pageNavbarEl.hasClass('navbar-large') && $pageNavbarEl.hasClass('navbar-transparent');\n        var isTransparent = $pageNavbarEl.hasClass('navbar-transparent') && !$pageNavbarEl.hasClass('navbar-large');\n\n        if (isLargeTransparent) {\n          $el.addClass('ptr-with-navbar-large-transparent');\n        } else if (isTransparent) {\n          $el.addClass('ptr-with-navbar-transparent');\n        }\n      }\n    }\n\n    if (!hasNavbar && !ptr.bottom) $el.addClass('ptr-no-navbar'); // Define trigger distance\n\n    if ($el.attr('data-ptr-distance')) {\n      dynamicTriggerDistance = true;\n    } else if (isMaterial) {\n      triggerDistance = 66;\n    } else if (isIos) {\n      triggerDistance = 44;\n    } else if (isAurora) {\n      triggerDistance = 38;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) {\n        if (device.os === 'android') {\n          if ('targetTouches' in e && e.targetTouches.length > 1) return;\n        } else return;\n      }\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      isMoved = false;\n      pullStarted = false;\n      isTouched = true;\n      isScrolling = undefined;\n      wasScrolled = undefined;\n      if (e.type === 'touchstart') touchId = e.targetTouches[0].identifier;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      var pageX;\n      var pageY;\n      var touch;\n\n      if (e.type === 'touchmove') {\n        if (touchId && e.touches) {\n          for (var i = 0; i < e.touches.length; i += 1) {\n            if (e.touches[i].identifier === touchId) {\n              touch = e.touches[i];\n            }\n          }\n        }\n\n        if (!touch) touch = e.targetTouches[0];\n        pageX = touch.pageX;\n        pageY = touch.pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (!pageX || !pageY) return;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (!isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      scrollTop = $el[0].scrollTop;\n\n      if (!isMoved) {\n        $el.removeClass('ptr-transitioning');\n        var targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          isTouched = false;\n          return;\n        }\n\n        var $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(function (ptrScrollableEl) {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          isTouched = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n\n        startTranslate = $el.hasClass('ptr-refreshing') ? triggerDistance : 0;\n\n        if (scrollHeight === offsetHeight || device.os !== 'ios' || isMaterial) {\n          useTranslate = true;\n        } else {\n          useTranslate = false;\n        }\n\n        forceUseTranslate = false;\n      }\n\n      isMoved = true;\n      touchesDiff = pageY - touchesStart.y;\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      var ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        // iOS 8 fix\n        if (device.os === 'ios' && parseInt(device.osVersion.split('.')[0], 10) > 7) {\n          if (!ptr.bottom && scrollTop === 0 && !wasScrolled) useTranslate = true;\n          if (ptr.bottom && scrollTop === maxScrollTop && !wasScrolled) useTranslate = true;\n        }\n\n        if (!useTranslate && ptr.bottom && !isMaterial) {\n          $el.css('-webkit-overflow-scrolling', 'auto');\n          $el.scrollTop(maxScrollTop);\n          forceUseTranslate = true;\n        }\n\n        if (useTranslate || forceUseTranslate) {\n          if (e.cancelable) {\n            e.preventDefault();\n          }\n\n          translate = (ptr.bottom ? -1 * Math.pow(Math.abs(touchesDiff), 0.85) : Math.pow(touchesDiff, 0.85)) + startTranslate;\n\n          if (isMaterial) {\n            $preloaderEl.transform(\"translate3d(0,\" + translate + \"px,0)\").find('.ptr-arrow').transform(\"rotate(\" + (180 * (Math.abs(touchesDiff) / 66) + 100) + \"deg)\");\n          } else {\n            // eslint-disable-next-line\n            if (ptr.bottom) {\n              $el.children().transform(\"translate3d(0,\" + translate + \"px,0)\");\n            } else {\n              $el.transform(\"translate3d(0,\" + translate + \"px,0)\");\n            }\n          }\n        }\n\n        if ((useTranslate || forceUseTranslate) && Math.pow(Math.abs(touchesDiff), 0.85) > triggerDistance || !useTranslate && Math.abs(touchesDiff) >= triggerDistance * 2) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend' && e.changedTouches && e.changedTouches.length > 0 && touchId) {\n        if (e.changedTouches[0].identifier !== touchId) {\n          isTouched = false;\n          isScrolling = false;\n          isMoved = false;\n          touchId = null;\n          return;\n        }\n      }\n\n      if (!isTouched || !isMoved) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        // eslint-disable-next-line\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (!useTranslate && ptr.bottom && !isMaterial) {\n        $el.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      isTouched = false;\n      isMoved = false;\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    var mousewheelTimeout;\n    var mousewheelMoved;\n    var mousewheelAllow = true;\n    var mousewheelTranslate = 0;\n\n    function handleMouseWheelRelease() {\n      mousewheelAllow = true;\n      mousewheelMoved = false;\n      mousewheelTranslate = 0;\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        // eslint-disable-next-line\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    function handleMouseWheel(e) {\n      if (!mousewheelAllow) return;\n      var deltaX = e.deltaX,\n          deltaY = e.deltaY;\n      if (Math.abs(deltaX) > Math.abs(deltaY)) return;\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      clearTimeout(mousewheelTimeout);\n      scrollTop = $el[0].scrollTop;\n\n      if (!mousewheelMoved) {\n        $el.removeClass('ptr-transitioning');\n        var targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        var $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(function (ptrScrollableEl) {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n      }\n\n      isMoved = true;\n      mousewheelTranslate -= deltaY;\n      touchesDiff = mousewheelTranslate; // pageY - touchesStart.y;\n\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      var ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n\n        translate = touchesDiff;\n\n        if (Math.abs(translate) > triggerDistance) {\n          translate = triggerDistance + Math.pow(Math.abs(translate) - triggerDistance, 0.7);\n          if (ptr.bottom) translate = -translate;\n        }\n\n        if (isMaterial) {\n          $preloaderEl.transform(\"translate3d(0,\" + translate + \"px,0)\").find('.ptr-arrow').transform(\"rotate(\" + (180 * (Math.abs(touchesDiff) / 66) + 100) + \"deg)\");\n        } else {\n          // eslint-disable-next-line\n          if (ptr.bottom) {\n            $el.children().transform(\"translate3d(0,\" + translate + \"px,0)\");\n          } else {\n            $el.transform(\"translate3d(0,\" + translate + \"px,0)\");\n          }\n        }\n\n        if (Math.abs(translate) > triggerDistance) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop: scrollTop,\n          translate: translate,\n          touchesDiff: touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n\n      mousewheelTimeout = setTimeout(handleMouseWheelRelease, 300);\n    }\n\n    if (!$pageEl.length || !$el.length) return ptr || _assertThisInitialized(_this);\n    $el[0].f7PullToRefresh = ptr; // Events\n\n    ptr.attachEvents = function attachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove:active', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.on('wheel', handleMouseWheel);\n      }\n    };\n\n    ptr.detachEvents = function detachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.off('wheel', handleMouseWheel);\n      }\n    }; // Install Modules\n\n\n    ptr.useModules(); // Init\n\n    ptr.init();\n    return ptr || _assertThisInitialized(_this);\n  }\n\n  var _proto = PullToRefresh.prototype;\n\n  _proto.init = function init() {\n    var ptr = this;\n    ptr.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var ptr = this;\n    ptr.emit('local::beforeDestroy ptrBeforeDestroy', ptr);\n    ptr.$el.trigger('ptr:beforedestroy');\n    delete ptr.el.f7PullToRefresh;\n    ptr.detachEvents();\n    deleteProps(ptr);\n    ptr = null;\n  };\n\n  return PullToRefresh;\n}(Framework7Class);\n\nexport default PullToRefresh;"]},"metadata":{},"sourceType":"module"}