{"ast":null,"code":"import $ from '../../../shared/dom7';\nimport { getSupport } from '../../../shared/get-support';\n/** @jsx $jsx */\n\nimport $jsx from '../../../shared/$jsx';\nexport default {\n  render: function render() {\n    return $jsx(\"div\", {\n      class: \"color-picker-module color-picker-module-sb-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-sb-spectrum\",\n      style: \"background-color: hsl(0, 100%, 50%)\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-sb-spectrum-handle\"\n    })));\n  },\n  init: function init(self) {\n    var app = self.app;\n    var isTouched;\n    var isMoved;\n    var touchStartX;\n    var touchStartY;\n    var touchCurrentX;\n    var touchCurrentY;\n    var specterRect;\n    var specterIsTouched;\n    var specterHandleIsTouched;\n    var $el = self.$el;\n\n    function setSBFromSpecterCoords(x, y) {\n      var s = (x - specterRect.left) / specterRect.width;\n      var b = (y - specterRect.top) / specterRect.height;\n      s = Math.max(0, Math.min(1, s));\n      b = 1 - Math.max(0, Math.min(1, b));\n      self.setValue({\n        hsb: [self.value.hue, s, b]\n      });\n    }\n\n    function handleTouchStart(e) {\n      if (isMoved || isTouched) return;\n      touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentX = touchStartX;\n      touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      touchCurrentY = touchStartY;\n      var $targetEl = $(e.target);\n      specterHandleIsTouched = $targetEl.closest('.color-picker-sb-spectrum-handle').length > 0;\n\n      if (!specterHandleIsTouched) {\n        specterIsTouched = $targetEl.closest('.color-picker-sb-spectrum').length > 0;\n      }\n\n      if (specterIsTouched) {\n        specterRect = $el.find('.color-picker-sb-spectrum')[0].getBoundingClientRect();\n        setSBFromSpecterCoords(touchStartX, touchStartY);\n      }\n\n      if (specterHandleIsTouched || specterIsTouched) {\n        $el.find('.color-picker-sb-spectrum-handle').addClass('color-picker-sb-spectrum-handle-pressed');\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!(specterIsTouched || specterHandleIsTouched)) return;\n      touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n      e.preventDefault();\n\n      if (!isMoved) {\n        // First move\n        isMoved = true;\n\n        if (specterHandleIsTouched) {\n          specterRect = $el.find('.color-picker-sb-spectrum')[0].getBoundingClientRect();\n        }\n      }\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        setSBFromSpecterCoords(touchCurrentX, touchCurrentY);\n      }\n    }\n\n    function handleTouchEnd() {\n      isMoved = false;\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        $el.find('.color-picker-sb-spectrum-handle').removeClass('color-picker-sb-spectrum-handle-pressed');\n      }\n\n      specterIsTouched = false;\n      specterHandleIsTouched = false;\n    }\n\n    function handleResize() {\n      self.modules['sb-spectrum'].update(self);\n    }\n\n    var passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n      passive: true,\n      capture: false\n    } : false;\n    self.$el.on(app.touchEvents.start, handleTouchStart, passiveListener);\n    app.on('touchmove:active', handleTouchMove);\n    app.on('touchend:passive', handleTouchEnd);\n    app.on('resize', handleResize);\n\n    self.destroySpectrumEvents = function destroySpectrumEvents() {\n      self.$el.off(app.touchEvents.start, handleTouchStart, passiveListener);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('resize', handleResize);\n    };\n  },\n  update: function update(self) {\n    var value = self.value;\n    var hsl = value.hsl,\n        hsb = value.hsb;\n    var specterWidth = self.$el.find('.color-picker-sb-spectrum')[0].offsetWidth;\n    var specterHeight = self.$el.find('.color-picker-sb-spectrum')[0].offsetHeight;\n    self.$el.find('.color-picker-sb-spectrum').css('background-color', \"hsl(\" + hsl[0] + \", 100%, 50%)\");\n    self.$el.find('.color-picker-sb-spectrum-handle').css('background-color', \"hsl(\" + hsl[0] + \", \" + hsl[1] * 100 + \"%, \" + hsl[2] * 100 + \"%)\").transform(\"translate(\" + specterWidth * hsb[1] + \"px, \" + specterHeight * (1 - hsb[2]) + \"px)\");\n  },\n  destroy: function destroy(self) {\n    if (self.destroySpectrumEvents) self.destroySpectrumEvents();\n    delete self.destroySpectrumEvents;\n  }\n};","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/color-picker/modules/sb-spectrum.js"],"names":["$","getSupport","$jsx","render","class","style","init","self","app","isTouched","isMoved","touchStartX","touchStartY","touchCurrentX","touchCurrentY","specterRect","specterIsTouched","specterHandleIsTouched","$el","setSBFromSpecterCoords","x","y","s","left","width","b","top","height","Math","max","min","setValue","hsb","value","hue","handleTouchStart","e","type","targetTouches","pageX","pageY","$targetEl","target","closest","length","find","getBoundingClientRect","addClass","handleTouchMove","preventDefault","handleTouchEnd","removeClass","handleResize","modules","update","passiveListener","touchEvents","start","passive","capture","on","destroySpectrumEvents","off","hsl","specterWidth","offsetWidth","specterHeight","offsetHeight","css","transform","destroy"],"mappings":"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","sourcesContent":["import $ from '../../../shared/dom7';\nimport { getSupport } from '../../../shared/get-support';\n/** @jsx $jsx */\n\nimport $jsx from '../../../shared/$jsx';\nexport default {\n  render: function render() {\n    return $jsx(\"div\", {\n      class: \"color-picker-module color-picker-module-sb-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-sb-spectrum\",\n      style: \"background-color: hsl(0, 100%, 50%)\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-sb-spectrum-handle\"\n    })));\n  },\n  init: function init(self) {\n    var app = self.app;\n    var isTouched;\n    var isMoved;\n    var touchStartX;\n    var touchStartY;\n    var touchCurrentX;\n    var touchCurrentY;\n    var specterRect;\n    var specterIsTouched;\n    var specterHandleIsTouched;\n    var $el = self.$el;\n\n    function setSBFromSpecterCoords(x, y) {\n      var s = (x - specterRect.left) / specterRect.width;\n      var b = (y - specterRect.top) / specterRect.height;\n      s = Math.max(0, Math.min(1, s));\n      b = 1 - Math.max(0, Math.min(1, b));\n      self.setValue({\n        hsb: [self.value.hue, s, b]\n      });\n    }\n\n    function handleTouchStart(e) {\n      if (isMoved || isTouched) return;\n      touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentX = touchStartX;\n      touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      touchCurrentY = touchStartY;\n      var $targetEl = $(e.target);\n      specterHandleIsTouched = $targetEl.closest('.color-picker-sb-spectrum-handle').length > 0;\n\n      if (!specterHandleIsTouched) {\n        specterIsTouched = $targetEl.closest('.color-picker-sb-spectrum').length > 0;\n      }\n\n      if (specterIsTouched) {\n        specterRect = $el.find('.color-picker-sb-spectrum')[0].getBoundingClientRect();\n        setSBFromSpecterCoords(touchStartX, touchStartY);\n      }\n\n      if (specterHandleIsTouched || specterIsTouched) {\n        $el.find('.color-picker-sb-spectrum-handle').addClass('color-picker-sb-spectrum-handle-pressed');\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!(specterIsTouched || specterHandleIsTouched)) return;\n      touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n      e.preventDefault();\n\n      if (!isMoved) {\n        // First move\n        isMoved = true;\n\n        if (specterHandleIsTouched) {\n          specterRect = $el.find('.color-picker-sb-spectrum')[0].getBoundingClientRect();\n        }\n      }\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        setSBFromSpecterCoords(touchCurrentX, touchCurrentY);\n      }\n    }\n\n    function handleTouchEnd() {\n      isMoved = false;\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        $el.find('.color-picker-sb-spectrum-handle').removeClass('color-picker-sb-spectrum-handle-pressed');\n      }\n\n      specterIsTouched = false;\n      specterHandleIsTouched = false;\n    }\n\n    function handleResize() {\n      self.modules['sb-spectrum'].update(self);\n    }\n\n    var passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n      passive: true,\n      capture: false\n    } : false;\n    self.$el.on(app.touchEvents.start, handleTouchStart, passiveListener);\n    app.on('touchmove:active', handleTouchMove);\n    app.on('touchend:passive', handleTouchEnd);\n    app.on('resize', handleResize);\n\n    self.destroySpectrumEvents = function destroySpectrumEvents() {\n      self.$el.off(app.touchEvents.start, handleTouchStart, passiveListener);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('resize', handleResize);\n    };\n  },\n  update: function update(self) {\n    var value = self.value;\n    var hsl = value.hsl,\n        hsb = value.hsb;\n    var specterWidth = self.$el.find('.color-picker-sb-spectrum')[0].offsetWidth;\n    var specterHeight = self.$el.find('.color-picker-sb-spectrum')[0].offsetHeight;\n    self.$el.find('.color-picker-sb-spectrum').css('background-color', \"hsl(\" + hsl[0] + \", 100%, 50%)\");\n    self.$el.find('.color-picker-sb-spectrum-handle').css('background-color', \"hsl(\" + hsl[0] + \", \" + hsl[1] * 100 + \"%, \" + hsl[2] * 100 + \"%)\").transform(\"translate(\" + specterWidth * hsb[1] + \"px, \" + specterHeight * (1 - hsb[2]) + \"px)\");\n  },\n  destroy: function destroy(self) {\n    if (self.destroySpectrumEvents) self.destroySpectrumEvents();\n    delete self.destroySpectrumEvents;\n  }\n};"]},"metadata":{},"sourceType":"module"}