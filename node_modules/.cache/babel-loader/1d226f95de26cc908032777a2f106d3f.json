{"ast":null,"code":"import $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport History from '../../shared/history';\nimport asyncComponent from './async-component';\n\nfunction tabLoad(tabRoute, loadOptions) {\n  if (loadOptions === void 0) {\n    loadOptions = {};\n  }\n\n  var router = this;\n  var options = extend({\n    animate: router.params.animate,\n    browserHistory: true,\n    history: true,\n    parentPageEl: null,\n    preload: false,\n    on: {}\n  }, loadOptions);\n  var currentRoute;\n  var previousRoute;\n\n  if (options.route) {\n    // Set Route\n    if (!options.preload && options.route !== router.currentRoute) {\n      previousRoute = router.previousRoute;\n      router.currentRoute = options.route;\n    }\n\n    if (options.preload) {\n      currentRoute = options.route;\n      previousRoute = router.currentRoute;\n    } else {\n      currentRoute = router.currentRoute;\n      if (!previousRoute) previousRoute = router.previousRoute;\n    } // Update Browser History\n\n\n    if (router.params.browserHistory && options.browserHistory && !options.reloadPrevious) {\n      History.replace(router.view.id, {\n        url: options.route.url\n      }, (router.params.browserHistoryRoot || '') + router.params.browserHistorySeparator + options.route.url);\n    } // Update Router History\n\n\n    if (options.history) {\n      router.history[Math.max(router.history.length - 1, 0)] = options.route.url;\n      router.saveHistory();\n    }\n  } // Show Tab\n\n\n  var $parentPageEl = $(options.parentPageEl || router.currentPageEl);\n  var tabEl;\n\n  if ($parentPageEl.length && $parentPageEl.find(\"#\" + tabRoute.id).length) {\n    tabEl = $parentPageEl.find(\"#\" + tabRoute.id).eq(0);\n  } else if (router.view.selector) {\n    tabEl = router.view.selector + \" #\" + tabRoute.id;\n  } else {\n    tabEl = \"#\" + tabRoute.id;\n  }\n\n  var tabShowResult = router.app.tab.show({\n    tabEl: tabEl,\n    animate: options.animate,\n    tabRoute: options.route\n  });\n  var $newTabEl = tabShowResult.$newTabEl,\n      $oldTabEl = tabShowResult.$oldTabEl,\n      animated = tabShowResult.animated,\n      onTabsChanged = tabShowResult.onTabsChanged;\n\n  if ($newTabEl && $newTabEl.parents('.page').length > 0 && options.route) {\n    var tabParentPageData = $newTabEl.parents('.page')[0].f7Page;\n\n    if (tabParentPageData && options.route) {\n      tabParentPageData.route = options.route;\n    }\n  } // Tab Content Loaded\n\n\n  function onTabLoaded(contentEl) {\n    // Remove theme elements\n    router.removeThemeElements($newTabEl);\n    var tabEventTarget = $newTabEl;\n    if (typeof contentEl !== 'string') tabEventTarget = $(contentEl);\n    tabEventTarget.trigger('tab:init tab:mounted', tabRoute);\n    router.emit('tabInit tabMounted', $newTabEl[0], tabRoute);\n\n    if ($oldTabEl && $oldTabEl.length) {\n      if (animated) {\n        onTabsChanged(function () {\n          router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n\n          if (router.params.unloadTabContent) {\n            router.tabRemove($oldTabEl, $newTabEl, tabRoute);\n          }\n        });\n      } else {\n        router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n\n        if (router.params.unloadTabContent) {\n          router.tabRemove($oldTabEl, $newTabEl, tabRoute);\n        }\n      }\n    }\n  }\n\n  if ($newTabEl[0].f7RouterTabLoaded) {\n    if (!$oldTabEl || !$oldTabEl.length) return router;\n\n    if (animated) {\n      onTabsChanged(function () {\n        router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n      });\n    } else {\n      router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n    }\n\n    return router;\n  } // Load Tab Content\n\n\n  function loadTab(loadTabParams, loadTabOptions) {\n    // Load Tab Props\n    var url = loadTabParams.url,\n        content = loadTabParams.content,\n        el = loadTabParams.el,\n        component = loadTabParams.component,\n        componentUrl = loadTabParams.componentUrl; // Component/Template Callbacks\n\n    function resolve(contentEl) {\n      router.allowPageChange = true;\n      if (!contentEl) return;\n\n      if (typeof contentEl === 'string') {\n        $newTabEl.html(contentEl);\n      } else {\n        $newTabEl.html('');\n\n        if (contentEl.f7Component) {\n          contentEl.f7Component.mount(function (componentEl) {\n            $newTabEl.append(componentEl);\n          });\n        } else {\n          $newTabEl.append(contentEl);\n        }\n      }\n\n      $newTabEl[0].f7RouterTabLoaded = true;\n      onTabLoaded(contentEl);\n    }\n\n    function reject() {\n      router.allowPageChange = true;\n      return router;\n    }\n\n    if (content) {\n      resolve(content);\n    } else if (el) {\n      resolve(el);\n    } else if (component || componentUrl) {\n      // Load from component (F7/Vue/React/...)\n      try {\n        router.tabComponentLoader({\n          tabEl: $newTabEl[0],\n          component: component,\n          componentUrl: componentUrl,\n          options: loadTabOptions,\n          resolve: resolve,\n          reject: reject\n        });\n      } catch (err) {\n        router.allowPageChange = true;\n        throw err;\n      }\n    } else if (url) {\n      // Load using XHR\n      if (router.xhrAbortController) {\n        router.xhrAbortController.abort();\n        router.xhrAbortController = false;\n      }\n\n      router.xhrRequest(url, loadTabOptions).then(function (tabContent) {\n        resolve(tabContent);\n      }).catch(function () {\n        router.allowPageChange = true;\n      });\n    }\n  }\n\n  var hasContentLoadProp;\n  'url content component el componentUrl'.split(' ').forEach(function (tabLoadProp) {\n    if (tabRoute[tabLoadProp]) {\n      var _loadTab;\n\n      hasContentLoadProp = true;\n      loadTab((_loadTab = {}, _loadTab[tabLoadProp] = tabRoute[tabLoadProp], _loadTab), options);\n    }\n  }); // Async\n\n  function asyncResolve(resolveParams, resolveOptions) {\n    loadTab(resolveParams, extend(options, resolveOptions));\n  }\n\n  function asyncReject() {\n    router.allowPageChange = true;\n  }\n\n  if (tabRoute.async) {\n    tabRoute.async.call(router, {\n      router: router,\n      to: currentRoute,\n      from: previousRoute,\n      resolve: asyncResolve,\n      reject: asyncReject,\n      app: router.app\n    });\n  } else if (tabRoute.asyncComponent) {\n    asyncComponent(router, tabRoute.asyncComponent, asyncResolve, asyncReject);\n  } else if (!hasContentLoadProp) {\n    router.allowPageChange = true;\n  }\n\n  return router;\n}\n\nfunction tabRemove($oldTabEl, $newTabEl, tabRoute) {\n  var router = this;\n  var hasTabComponentChild;\n\n  if ($oldTabEl[0]) {\n    $oldTabEl[0].f7RouterTabLoaded = false;\n    delete $oldTabEl[0].f7RouterTabLoaded;\n  }\n\n  $oldTabEl.children().each(function (tabChild) {\n    if (tabChild.f7Component) {\n      hasTabComponentChild = true;\n      $(tabChild).trigger('tab:beforeremove', tabRoute);\n      tabChild.f7Component.destroy();\n    }\n  });\n\n  if (!hasTabComponentChild) {\n    $oldTabEl.trigger('tab:beforeremove', tabRoute);\n  }\n\n  router.emit('tabBeforeRemove', $oldTabEl[0], $newTabEl[0], tabRoute);\n  router.removeTabContent($oldTabEl[0], tabRoute);\n}\n\nexport { tabLoad, tabRemove };","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/modules/router/tab.js"],"names":["$","extend","History","asyncComponent","tabLoad","tabRoute","loadOptions","router","options","animate","params","browserHistory","history","parentPageEl","preload","on","currentRoute","previousRoute","route","reloadPrevious","replace","view","id","url","browserHistoryRoot","browserHistorySeparator","Math","max","length","saveHistory","$parentPageEl","currentPageEl","tabEl","find","eq","selector","tabShowResult","app","tab","show","$newTabEl","$oldTabEl","animated","onTabsChanged","parents","tabParentPageData","f7Page","onTabLoaded","contentEl","removeThemeElements","tabEventTarget","trigger","emit","unloadTabContent","tabRemove","f7RouterTabLoaded","loadTab","loadTabParams","loadTabOptions","content","el","component","componentUrl","resolve","allowPageChange","html","f7Component","mount","componentEl","append","reject","tabComponentLoader","err","xhrAbortController","abort","xhrRequest","then","tabContent","catch","hasContentLoadProp","split","forEach","tabLoadProp","_loadTab","asyncResolve","resolveParams","resolveOptions","asyncReject","async","call","to","from","hasTabComponentChild","children","each","tabChild","destroy","removeTabContent"],"mappings":"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","sourcesContent":["import $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport History from '../../shared/history';\nimport asyncComponent from './async-component';\n\nfunction tabLoad(tabRoute, loadOptions) {\n  if (loadOptions === void 0) {\n    loadOptions = {};\n  }\n\n  var router = this;\n  var options = extend({\n    animate: router.params.animate,\n    browserHistory: true,\n    history: true,\n    parentPageEl: null,\n    preload: false,\n    on: {}\n  }, loadOptions);\n  var currentRoute;\n  var previousRoute;\n\n  if (options.route) {\n    // Set Route\n    if (!options.preload && options.route !== router.currentRoute) {\n      previousRoute = router.previousRoute;\n      router.currentRoute = options.route;\n    }\n\n    if (options.preload) {\n      currentRoute = options.route;\n      previousRoute = router.currentRoute;\n    } else {\n      currentRoute = router.currentRoute;\n      if (!previousRoute) previousRoute = router.previousRoute;\n    } // Update Browser History\n\n\n    if (router.params.browserHistory && options.browserHistory && !options.reloadPrevious) {\n      History.replace(router.view.id, {\n        url: options.route.url\n      }, (router.params.browserHistoryRoot || '') + router.params.browserHistorySeparator + options.route.url);\n    } // Update Router History\n\n\n    if (options.history) {\n      router.history[Math.max(router.history.length - 1, 0)] = options.route.url;\n      router.saveHistory();\n    }\n  } // Show Tab\n\n\n  var $parentPageEl = $(options.parentPageEl || router.currentPageEl);\n  var tabEl;\n\n  if ($parentPageEl.length && $parentPageEl.find(\"#\" + tabRoute.id).length) {\n    tabEl = $parentPageEl.find(\"#\" + tabRoute.id).eq(0);\n  } else if (router.view.selector) {\n    tabEl = router.view.selector + \" #\" + tabRoute.id;\n  } else {\n    tabEl = \"#\" + tabRoute.id;\n  }\n\n  var tabShowResult = router.app.tab.show({\n    tabEl: tabEl,\n    animate: options.animate,\n    tabRoute: options.route\n  });\n  var $newTabEl = tabShowResult.$newTabEl,\n      $oldTabEl = tabShowResult.$oldTabEl,\n      animated = tabShowResult.animated,\n      onTabsChanged = tabShowResult.onTabsChanged;\n\n  if ($newTabEl && $newTabEl.parents('.page').length > 0 && options.route) {\n    var tabParentPageData = $newTabEl.parents('.page')[0].f7Page;\n\n    if (tabParentPageData && options.route) {\n      tabParentPageData.route = options.route;\n    }\n  } // Tab Content Loaded\n\n\n  function onTabLoaded(contentEl) {\n    // Remove theme elements\n    router.removeThemeElements($newTabEl);\n    var tabEventTarget = $newTabEl;\n    if (typeof contentEl !== 'string') tabEventTarget = $(contentEl);\n    tabEventTarget.trigger('tab:init tab:mounted', tabRoute);\n    router.emit('tabInit tabMounted', $newTabEl[0], tabRoute);\n\n    if ($oldTabEl && $oldTabEl.length) {\n      if (animated) {\n        onTabsChanged(function () {\n          router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n\n          if (router.params.unloadTabContent) {\n            router.tabRemove($oldTabEl, $newTabEl, tabRoute);\n          }\n        });\n      } else {\n        router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n\n        if (router.params.unloadTabContent) {\n          router.tabRemove($oldTabEl, $newTabEl, tabRoute);\n        }\n      }\n    }\n  }\n\n  if ($newTabEl[0].f7RouterTabLoaded) {\n    if (!$oldTabEl || !$oldTabEl.length) return router;\n\n    if (animated) {\n      onTabsChanged(function () {\n        router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n      });\n    } else {\n      router.emit('routeChanged', router.currentRoute, router.previousRoute, router);\n    }\n\n    return router;\n  } // Load Tab Content\n\n\n  function loadTab(loadTabParams, loadTabOptions) {\n    // Load Tab Props\n    var url = loadTabParams.url,\n        content = loadTabParams.content,\n        el = loadTabParams.el,\n        component = loadTabParams.component,\n        componentUrl = loadTabParams.componentUrl; // Component/Template Callbacks\n\n    function resolve(contentEl) {\n      router.allowPageChange = true;\n      if (!contentEl) return;\n\n      if (typeof contentEl === 'string') {\n        $newTabEl.html(contentEl);\n      } else {\n        $newTabEl.html('');\n\n        if (contentEl.f7Component) {\n          contentEl.f7Component.mount(function (componentEl) {\n            $newTabEl.append(componentEl);\n          });\n        } else {\n          $newTabEl.append(contentEl);\n        }\n      }\n\n      $newTabEl[0].f7RouterTabLoaded = true;\n      onTabLoaded(contentEl);\n    }\n\n    function reject() {\n      router.allowPageChange = true;\n      return router;\n    }\n\n    if (content) {\n      resolve(content);\n    } else if (el) {\n      resolve(el);\n    } else if (component || componentUrl) {\n      // Load from component (F7/Vue/React/...)\n      try {\n        router.tabComponentLoader({\n          tabEl: $newTabEl[0],\n          component: component,\n          componentUrl: componentUrl,\n          options: loadTabOptions,\n          resolve: resolve,\n          reject: reject\n        });\n      } catch (err) {\n        router.allowPageChange = true;\n        throw err;\n      }\n    } else if (url) {\n      // Load using XHR\n      if (router.xhrAbortController) {\n        router.xhrAbortController.abort();\n        router.xhrAbortController = false;\n      }\n\n      router.xhrRequest(url, loadTabOptions).then(function (tabContent) {\n        resolve(tabContent);\n      }).catch(function () {\n        router.allowPageChange = true;\n      });\n    }\n  }\n\n  var hasContentLoadProp;\n  'url content component el componentUrl'.split(' ').forEach(function (tabLoadProp) {\n    if (tabRoute[tabLoadProp]) {\n      var _loadTab;\n\n      hasContentLoadProp = true;\n      loadTab((_loadTab = {}, _loadTab[tabLoadProp] = tabRoute[tabLoadProp], _loadTab), options);\n    }\n  }); // Async\n\n  function asyncResolve(resolveParams, resolveOptions) {\n    loadTab(resolveParams, extend(options, resolveOptions));\n  }\n\n  function asyncReject() {\n    router.allowPageChange = true;\n  }\n\n  if (tabRoute.async) {\n    tabRoute.async.call(router, {\n      router: router,\n      to: currentRoute,\n      from: previousRoute,\n      resolve: asyncResolve,\n      reject: asyncReject,\n      app: router.app\n    });\n  } else if (tabRoute.asyncComponent) {\n    asyncComponent(router, tabRoute.asyncComponent, asyncResolve, asyncReject);\n  } else if (!hasContentLoadProp) {\n    router.allowPageChange = true;\n  }\n\n  return router;\n}\n\nfunction tabRemove($oldTabEl, $newTabEl, tabRoute) {\n  var router = this;\n  var hasTabComponentChild;\n\n  if ($oldTabEl[0]) {\n    $oldTabEl[0].f7RouterTabLoaded = false;\n    delete $oldTabEl[0].f7RouterTabLoaded;\n  }\n\n  $oldTabEl.children().each(function (tabChild) {\n    if (tabChild.f7Component) {\n      hasTabComponentChild = true;\n      $(tabChild).trigger('tab:beforeremove', tabRoute);\n      tabChild.f7Component.destroy();\n    }\n  });\n\n  if (!hasTabComponentChild) {\n    $oldTabEl.trigger('tab:beforeremove', tabRoute);\n  }\n\n  router.emit('tabBeforeRemove', $oldTabEl[0], $newTabEl[0], tabRoute);\n  router.removeTabContent($oldTabEl[0], tabRoute);\n}\n\nexport { tabLoad, tabRemove };"]},"metadata":{},"sourceType":"module"}