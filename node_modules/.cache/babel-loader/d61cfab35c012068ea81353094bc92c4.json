{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Messages = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Messages, _Framework7Class);\n\n  function Messages(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var m = _assertThisInitialized(_this);\n\n    var defaults = {\n      autoLayout: true,\n      messages: [],\n      newMessagesFirst: false,\n      scrollMessages: true,\n      scrollMessagesOnEdge: true,\n      firstMessageRule: undefined,\n      lastMessageRule: undefined,\n      tailMessageRule: undefined,\n      sameNameMessageRule: undefined,\n      sameHeaderMessageRule: undefined,\n      sameFooterMessageRule: undefined,\n      sameAvatarMessageRule: undefined,\n      customClassMessageRule: undefined,\n      renderMessage: undefined\n    }; // Extend defaults with modules params\n\n    m.useModulesParams(defaults);\n    m.params = extend(defaults, params);\n    var $el = $(params.el).eq(0);\n    if ($el.length === 0) return m || _assertThisInitialized(_this);\n    if ($el[0].f7Messages) return $el[0].f7Messages || _assertThisInitialized(_this);\n    $el[0].f7Messages = m;\n    var $pageContentEl = $el.closest('.page-content').eq(0);\n    extend(m, {\n      messages: m.params.messages,\n      $el: $el,\n      el: $el[0],\n      $pageContentEl: $pageContentEl,\n      pageContentEl: $pageContentEl[0]\n    }); // Install Modules\n\n    m.useModules(); // Init\n\n    m.init();\n    return m || _assertThisInitialized(_this);\n  } // eslint-disable-next-line\n\n\n  var _proto = Messages.prototype;\n\n  _proto.getMessageData = function getMessageData(messageEl) {\n    var $messageEl = $(messageEl);\n    var data = {\n      name: $messageEl.find('.message-name').html(),\n      header: $messageEl.find('.message-header').html(),\n      textHeader: $messageEl.find('.message-text-header').html(),\n      textFooter: $messageEl.find('.message-text-footer').html(),\n      footer: $messageEl.find('.message-footer').html(),\n      isTitle: $messageEl.hasClass('messages-title'),\n      type: $messageEl.hasClass('message-sent') ? 'sent' : 'received',\n      text: $messageEl.find('.message-text').html(),\n      image: $messageEl.find('.message-image').html(),\n      imageSrc: $messageEl.find('.message-image img').attr('src'),\n      typing: $messageEl.hasClass('message-typing')\n    };\n\n    if (data.isTitle) {\n      data.text = $messageEl.html();\n    }\n\n    if (data.text && data.textHeader) {\n      data.text = data.text.replace(\"<div class=\\\"message-text-header\\\">\" + data.textHeader + \"</div>\", '');\n    }\n\n    if (data.text && data.textFooter) {\n      data.text = data.text.replace(\"<div class=\\\"message-text-footer\\\">\" + data.textFooter + \"</div>\", '');\n    }\n\n    var avatar = $messageEl.find('.message-avatar').css('background-image');\n    if (avatar === 'none' || avatar === '') avatar = undefined;\n\n    if (avatar && typeof avatar === 'string') {\n      avatar = avatar.replace('url(', '').replace(')', '').replace(/\"/g, '').replace(/'/g, '');\n    } else {\n      avatar = undefined;\n    }\n\n    data.avatar = avatar;\n    return data;\n  };\n\n  _proto.getMessagesData = function getMessagesData() {\n    var m = this;\n    var data = [];\n    m.$el.find('.message, .messages-title').each(function (messageEl) {\n      data.push(m.getMessageData(messageEl));\n    });\n    return data;\n  };\n\n  _proto.renderMessage = function renderMessage(messageToRender) {\n    var m = this;\n    var message = extend({\n      type: 'sent',\n      attrs: {}\n    }, messageToRender);\n\n    if (m.params.renderMessage) {\n      return m.params.renderMessage.call(m, message);\n    }\n\n    if (message.isTitle) {\n      return \"<div class=\\\"messages-title\\\">\" + message.text + \"</div>\";\n    }\n\n    return $jsx(\"div\", _extends({\n      class: \"message message-\" + message.type + \" \" + (message.isTyping ? 'message-typing' : '') + \" \" + (message.cssClass || '')\n    }, message.attrs), message.avatar && $jsx(\"div\", {\n      class: \"message-avatar\",\n      style: \"background-image:url(\" + message.avatar + \")\"\n    }), $jsx(\"div\", {\n      class: \"message-content\"\n    }, message.name && $jsx(\"div\", {\n      class: \"message-name\"\n    }, message.name), message.header && $jsx(\"div\", {\n      class: \"message-header\"\n    }, message.header), $jsx(\"div\", {\n      class: \"message-bubble\"\n    }, message.textHeader && $jsx(\"div\", {\n      class: \"message-text-header\"\n    }, message.textHeader), message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, message.image), message.imageSrc && !message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, $jsx(\"img\", {\n      src: message.imageSrc\n    })), (message.text || message.isTyping) && $jsx(\"div\", {\n      class: \"message-text\"\n    }, message.text || '', message.isTyping && $jsx(\"div\", {\n      class: \"message-typing-indicator\"\n    }, $jsx(\"div\", null), $jsx(\"div\", null), $jsx(\"div\", null))), message.textFooter && $jsx(\"div\", {\n      class: \"message-text-footer\"\n    }, message.textFooter)), message.footer && $jsx(\"div\", {\n      class: \"message-footer\"\n    }, message.footer)));\n  };\n\n  _proto.renderMessages = function renderMessages(messagesToRender, method) {\n    if (messagesToRender === void 0) {\n      messagesToRender = this.messages;\n    }\n\n    if (method === void 0) {\n      method = this.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    var m = this;\n    var html = messagesToRender.map(function (message) {\n      return m.renderMessage(message);\n    }).join('');\n    m.$el[method](html);\n  };\n\n  _proto.isFirstMessage = function isFirstMessage() {\n    var _m$params;\n\n    var m = this;\n    if (m.params.firstMessageRule) return (_m$params = m.params).firstMessageRule.apply(_m$params, arguments);\n    return false;\n  };\n\n  _proto.isLastMessage = function isLastMessage() {\n    var _m$params2;\n\n    var m = this;\n    if (m.params.lastMessageRule) return (_m$params2 = m.params).lastMessageRule.apply(_m$params2, arguments);\n    return false;\n  };\n\n  _proto.isTailMessage = function isTailMessage() {\n    var _m$params3;\n\n    var m = this;\n    if (m.params.tailMessageRule) return (_m$params3 = m.params).tailMessageRule.apply(_m$params3, arguments);\n    return false;\n  };\n\n  _proto.isSameNameMessage = function isSameNameMessage() {\n    var _m$params4;\n\n    var m = this;\n    if (m.params.sameNameMessageRule) return (_m$params4 = m.params).sameNameMessageRule.apply(_m$params4, arguments);\n    return false;\n  };\n\n  _proto.isSameHeaderMessage = function isSameHeaderMessage() {\n    var _m$params5;\n\n    var m = this;\n    if (m.params.sameHeaderMessageRule) return (_m$params5 = m.params).sameHeaderMessageRule.apply(_m$params5, arguments);\n    return false;\n  };\n\n  _proto.isSameFooterMessage = function isSameFooterMessage() {\n    var _m$params6;\n\n    var m = this;\n    if (m.params.sameFooterMessageRule) return (_m$params6 = m.params).sameFooterMessageRule.apply(_m$params6, arguments);\n    return false;\n  };\n\n  _proto.isSameAvatarMessage = function isSameAvatarMessage() {\n    var _m$params7;\n\n    var m = this;\n    if (m.params.sameAvatarMessageRule) return (_m$params7 = m.params).sameAvatarMessageRule.apply(_m$params7, arguments);\n    return false;\n  };\n\n  _proto.isCustomClassMessage = function isCustomClassMessage() {\n    var _m$params8;\n\n    var m = this;\n    if (m.params.customClassMessageRule) return (_m$params8 = m.params).customClassMessageRule.apply(_m$params8, arguments);\n    return undefined;\n  };\n\n  _proto.layout = function layout() {\n    var m = this;\n    m.$el.find('.message, .messages-title').each(function (messageEl, index) {\n      var $messageEl = $(messageEl);\n\n      if (!m.messages) {\n        m.messages = m.getMessagesData();\n      }\n\n      var classes = [];\n      var message = m.messages[index];\n      var previousMessage = m.messages[index - 1];\n      var nextMessage = m.messages[index + 1];\n\n      if (m.isFirstMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-first');\n      }\n\n      if (m.isLastMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-last');\n      }\n\n      if (m.isTailMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-tail');\n      }\n\n      if (m.isSameNameMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-name');\n      }\n\n      if (m.isSameHeaderMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-header');\n      }\n\n      if (m.isSameFooterMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-footer');\n      }\n\n      if (m.isSameAvatarMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-avatar');\n      }\n\n      var customMessageClasses = m.isCustomClassMessage(message, previousMessage, nextMessage);\n\n      if (customMessageClasses && customMessageClasses.length) {\n        if (typeof customMessageClasses === 'string') {\n          customMessageClasses = customMessageClasses.split(' ');\n        }\n\n        customMessageClasses.forEach(function (customClass) {\n          classes.push(customClass);\n        });\n      }\n\n      $messageEl.removeClass('message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar');\n      classes.forEach(function (className) {\n        $messageEl.addClass(className);\n      });\n    });\n  };\n\n  _proto.clear = function clear() {\n    var m = this;\n    m.messages = [];\n    m.$el.html('');\n  };\n\n  _proto.removeMessage = function removeMessage(messageToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    var m = this; // Index or El\n\n    var index;\n    var $el;\n\n    if (typeof messageToRemove === 'number') {\n      index = messageToRemove;\n      $el = m.$el.find('.message, .messages-title').eq(index);\n    } else if (m.messages && m.messages.indexOf(messageToRemove) >= 0) {\n      index = m.messages.indexOf(messageToRemove);\n      $el = m.$el.children().eq(index);\n    } else {\n      $el = $(messageToRemove);\n      index = $el.index();\n    }\n\n    if ($el.length === 0) {\n      return m;\n    }\n\n    $el.remove();\n    m.messages.splice(index, 1);\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  };\n\n  _proto.removeMessages = function removeMessages(messagesToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    var m = this;\n\n    if (Array.isArray(messagesToRemove)) {\n      var messagesToRemoveEls = [];\n      messagesToRemove.forEach(function (messageToRemoveIndex) {\n        messagesToRemoveEls.push(m.$el.find('.message, .messages-title').eq(messageToRemoveIndex));\n      });\n      messagesToRemoveEls.forEach(function (messageToRemove) {\n        m.removeMessage(messageToRemove, false);\n      });\n    } else {\n      $(messagesToRemove).each(function (messageToRemove) {\n        m.removeMessage(messageToRemove, false);\n      });\n    }\n\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  };\n\n  _proto.addMessage = function addMessage() {\n    var m = this;\n    var messageToAdd;\n    var animate;\n    var method;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      messageToAdd = args[0];\n      animate = args[1];\n      method = args[2];\n    } else {\n      messageToAdd = args[0];\n      method = args[1];\n      animate = args[2];\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    return m.addMessages([messageToAdd], animate, method);\n  };\n\n  _proto.addMessages = function addMessages() {\n    var m = this;\n    var messagesToAdd;\n    var animate;\n    var method;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      messagesToAdd = args[0];\n      animate = args[1];\n      method = args[2];\n    } else {\n      messagesToAdd = args[0];\n      method = args[1];\n      animate = args[2];\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    } // Define scroll positions before new messages added\n\n\n    var scrollHeightBefore = m.pageContentEl.scrollHeight;\n    var heightBefore = m.pageContentEl.offsetHeight;\n    var scrollBefore = m.pageContentEl.scrollTop; // Add message to DOM and data\n\n    var messagesHTML = '';\n    var typingMessage = m.messages.filter(function (el) {\n      return el.isTyping;\n    })[0];\n    messagesToAdd.forEach(function (messageToAdd) {\n      if (typingMessage) {\n        if (method === 'append') {\n          m.messages.splice(m.messages.indexOf(typingMessage), 0, messageToAdd);\n        } else {\n          m.messages.splice(m.messages.indexOf(typingMessage) + 1, 0, messageToAdd);\n        }\n      } else {\n        m.messages[method === 'append' ? 'push' : 'unshift'](messageToAdd);\n      }\n\n      messagesHTML += m.renderMessage(messageToAdd);\n    });\n    var $messagesEls = $(messagesHTML);\n\n    if (animate) {\n      if (method === 'append' && !m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-bottom');\n      }\n\n      if (method === 'prepend' && m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-top');\n      }\n    }\n\n    if (typingMessage) {\n      if (method === 'append') {\n        $messagesEls.insertBefore(m.$el.find('.message-typing'));\n      } else {\n        $messagesEls.insertAfter(m.$el.find('.message-typing'));\n      }\n    } else {\n      m.$el[method]($messagesEls);\n    } // Layout\n\n\n    if (m.params.autoLayout) m.layout();\n\n    if (method === 'prepend' && !typingMessage) {\n      m.pageContentEl.scrollTop = scrollBefore + (m.pageContentEl.scrollHeight - scrollHeightBefore);\n    }\n\n    if (m.params.scrollMessages && (method === 'append' && !m.params.newMessagesFirst || method === 'prepend' && m.params.newMessagesFirst && !typingMessage)) {\n      if (m.params.scrollMessagesOnEdge) {\n        var onEdge = false;\n\n        if (m.params.newMessagesFirst && scrollBefore === 0) {\n          onEdge = true;\n        }\n\n        if (!m.params.newMessagesFirst && scrollBefore - (scrollHeightBefore - heightBefore) >= -10) {\n          onEdge = true;\n        }\n\n        if (onEdge) m.scroll(animate ? undefined : 0);\n      } else {\n        m.scroll(animate ? undefined : 0);\n      }\n    }\n\n    return m;\n  };\n\n  _proto.showTyping = function showTyping(message) {\n    if (message === void 0) {\n      message = {};\n    }\n\n    var m = this;\n    var typingMessage = m.messages.filter(function (el) {\n      return el.isTyping;\n    })[0];\n\n    if (typingMessage) {\n      m.removeMessage(m.messages.indexOf(typingMessage));\n    }\n\n    m.addMessage(extend({\n      type: 'received',\n      isTyping: true\n    }, message));\n    return m;\n  };\n\n  _proto.hideTyping = function hideTyping() {\n    var m = this;\n    var typingMessageIndex;\n    var typingFound;\n    m.messages.forEach(function (message, index) {\n      if (message.isTyping) typingMessageIndex = index;\n    });\n\n    if (typeof typingMessageIndex !== 'undefined') {\n      if (m.$el.find('.message').eq(typingMessageIndex).hasClass('message-typing')) {\n        typingFound = true;\n        m.removeMessage(typingMessageIndex);\n      }\n    }\n\n    if (!typingFound) {\n      var $typingMessageEl = m.$el.find('.message-typing');\n\n      if ($typingMessageEl.length) {\n        m.removeMessage($typingMessageEl);\n      }\n    }\n\n    return m;\n  };\n\n  _proto.scroll = function scroll(duration, scrollTop) {\n    if (duration === void 0) {\n      duration = 300;\n    }\n\n    var m = this;\n    var currentScroll = m.pageContentEl.scrollTop;\n    var newScrollTop;\n    if (typeof scrollTop !== 'undefined') newScrollTop = scrollTop;else {\n      newScrollTop = m.params.newMessagesFirst ? 0 : m.pageContentEl.scrollHeight - m.pageContentEl.offsetHeight;\n      if (newScrollTop === currentScroll) return m;\n    }\n    m.$pageContentEl.scrollTop(newScrollTop, duration);\n    return m;\n  };\n\n  _proto.init = function init() {\n    var m = this;\n\n    if (!m.messages || m.messages.length === 0) {\n      m.messages = m.getMessagesData();\n    }\n\n    if (m.params.messages && m.params.messages.length) {\n      m.renderMessages();\n    }\n\n    if (m.params.autoLayout) m.layout();\n    if (m.params.scrollMessages) m.scroll(0);\n  };\n\n  _proto.destroy = function destroy() {\n    var m = this;\n    m.emit('local::beforeDestroy messagesBeforeDestroy', m);\n    m.$el.trigger('messages:beforedestroy');\n\n    if (m.$el[0]) {\n      m.$el[0].f7Messages = null;\n      delete m.$el[0].f7Messages;\n    }\n\n    deleteProps(m);\n  };\n\n  return Messages;\n}(Framework7Class);\n\nexport default Messages;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/messages/messages-class.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","$","extend","deleteProps","Framework7Class","$jsx","Messages","_Framework7Class","app","params","_this","m","defaults","autoLayout","messages","newMessagesFirst","scrollMessages","scrollMessagesOnEdge","firstMessageRule","undefined","lastMessageRule","tailMessageRule","sameNameMessageRule","sameHeaderMessageRule","sameFooterMessageRule","sameAvatarMessageRule","customClassMessageRule","renderMessage","useModulesParams","$el","el","eq","f7Messages","$pageContentEl","closest","pageContentEl","useModules","init","_proto","getMessageData","messageEl","$messageEl","data","name","find","html","header","textHeader","textFooter","footer","isTitle","hasClass","type","text","image","imageSrc","attr","typing","replace","avatar","css","getMessagesData","each","push","messageToRender","message","attrs","class","isTyping","cssClass","style","src","renderMessages","messagesToRender","method","map","join","isFirstMessage","_m$params","isLastMessage","_m$params2","isTailMessage","_m$params3","isSameNameMessage","_m$params4","isSameHeaderMessage","_m$params5","isSameFooterMessage","_m$params6","isSameAvatarMessage","_m$params7","isCustomClassMessage","_m$params8","layout","index","classes","previousMessage","nextMessage","customMessageClasses","split","forEach","customClass","removeClass","className","addClass","clear","removeMessage","messageToRemove","indexOf","children","remove","splice","removeMessages","messagesToRemove","Array","isArray","messagesToRemoveEls","messageToRemoveIndex","addMessage","messageToAdd","animate","_len","args","_key","addMessages","messagesToAdd","_len2","_key2","scrollHeightBefore","scrollHeight","heightBefore","offsetHeight","scrollBefore","scrollTop","messagesHTML","typingMessage","filter","$messagesEls","insertBefore","insertAfter","onEdge","scroll","showTyping","hideTyping","typingMessageIndex","typingFound","$typingMessageEl","duration","currentScroll","newScrollTop","destroy","emit","trigger"],"mappings":"AAAA,SAASA,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,sBAAT,CAAgCC,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAP;AAAc;;AAEtK,SAASE,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AAAED,EAAAA,QAAQ,CAACR,SAAT,GAAqBR,MAAM,CAACkB,MAAP,CAAcD,UAAU,CAACT,SAAzB,CAArB;AAA0DQ,EAAAA,QAAQ,CAACR,SAAT,CAAmBW,WAAnB,GAAiCH,QAAjC;AAA2CA,EAAAA,QAAQ,CAACI,SAAT,GAAqBH,UAArB;AAAkC;;AAEvL,OAAOI,CAAP,MAAc,mBAAd;AACA,SAASC,MAAT,EAAiBC,WAAjB,QAAoC,oBAApC;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AACA;;AAEA,OAAOC,IAAP,MAAiB,mBAAjB;;AAEA,IAAIC,QAAQ,GAAG,aAAa,UAAUC,gBAAV,EAA4B;AACtDZ,EAAAA,cAAc,CAACW,QAAD,EAAWC,gBAAX,CAAd;;AAEA,WAASD,QAAT,CAAkBE,GAAlB,EAAuBC,MAAvB,EAA+B;AAC7B,QAAIC,KAAJ;;AAEA,QAAID,MAAM,KAAK,KAAK,CAApB,EAAuB;AACrBA,MAAAA,MAAM,GAAG,EAAT;AACD;;AAEDC,IAAAA,KAAK,GAAGH,gBAAgB,CAACjB,IAAjB,CAAsB,IAAtB,EAA4BmB,MAA5B,EAAoC,CAACD,GAAD,CAApC,KAA8C,IAAtD;;AAEA,QAAIG,CAAC,GAAGnB,sBAAsB,CAACkB,KAAD,CAA9B;;AAEA,QAAIE,QAAQ,GAAG;AACbC,MAAAA,UAAU,EAAE,IADC;AAEbC,MAAAA,QAAQ,EAAE,EAFG;AAGbC,MAAAA,gBAAgB,EAAE,KAHL;AAIbC,MAAAA,cAAc,EAAE,IAJH;AAKbC,MAAAA,oBAAoB,EAAE,IALT;AAMbC,MAAAA,gBAAgB,EAAEC,SANL;AAObC,MAAAA,eAAe,EAAED,SAPJ;AAQbE,MAAAA,eAAe,EAAEF,SARJ;AASbG,MAAAA,mBAAmB,EAAEH,SATR;AAUbI,MAAAA,qBAAqB,EAAEJ,SAVV;AAWbK,MAAAA,qBAAqB,EAAEL,SAXV;AAYbM,MAAAA,qBAAqB,EAAEN,SAZV;AAabO,MAAAA,sBAAsB,EAAEP,SAbX;AAcbQ,MAAAA,aAAa,EAAER;AAdF,KAAf,CAX6B,CA0B1B;;AAEHR,IAAAA,CAAC,CAACiB,gBAAF,CAAmBhB,QAAnB;AACAD,IAAAA,CAAC,CAACF,MAAF,GAAWP,MAAM,CAACU,QAAD,EAAWH,MAAX,CAAjB;AACA,QAAIoB,GAAG,GAAG5B,CAAC,CAACQ,MAAM,CAACqB,EAAR,CAAD,CAAaC,EAAb,CAAgB,CAAhB,CAAV;AACA,QAAIF,GAAG,CAAC5C,MAAJ,KAAe,CAAnB,EAAsB,OAAO0B,CAAC,IAAInB,sBAAsB,CAACkB,KAAD,CAAlC;AACtB,QAAImB,GAAG,CAAC,CAAD,CAAH,CAAOG,UAAX,EAAuB,OAAOH,GAAG,CAAC,CAAD,CAAH,CAAOG,UAAP,IAAqBxC,sBAAsB,CAACkB,KAAD,CAAlD;AACvBmB,IAAAA,GAAG,CAAC,CAAD,CAAH,CAAOG,UAAP,GAAoBrB,CAApB;AACA,QAAIsB,cAAc,GAAGJ,GAAG,CAACK,OAAJ,CAAY,eAAZ,EAA6BH,EAA7B,CAAgC,CAAhC,CAArB;AACA7B,IAAAA,MAAM,CAACS,CAAD,EAAI;AACRG,MAAAA,QAAQ,EAAEH,CAAC,CAACF,MAAF,CAASK,QADX;AAERe,MAAAA,GAAG,EAAEA,GAFG;AAGRC,MAAAA,EAAE,EAAED,GAAG,CAAC,CAAD,CAHC;AAIRI,MAAAA,cAAc,EAAEA,cAJR;AAKRE,MAAAA,aAAa,EAAEF,cAAc,CAAC,CAAD;AALrB,KAAJ,CAAN,CAnC6B,CAyCzB;;AAEJtB,IAAAA,CAAC,CAACyB,UAAF,GA3C6B,CA2Cb;;AAEhBzB,IAAAA,CAAC,CAAC0B,IAAF;AACA,WAAO1B,CAAC,IAAInB,sBAAsB,CAACkB,KAAD,CAAlC;AACD,GAlDqD,CAkDpD;;;AAGF,MAAI4B,MAAM,GAAGhC,QAAQ,CAAClB,SAAtB;;AAEAkD,EAAAA,MAAM,CAACC,cAAP,GAAwB,SAASA,cAAT,CAAwBC,SAAxB,EAAmC;AACzD,QAAIC,UAAU,GAAGxC,CAAC,CAACuC,SAAD,CAAlB;AACA,QAAIE,IAAI,GAAG;AACTC,MAAAA,IAAI,EAAEF,UAAU,CAACG,IAAX,CAAgB,eAAhB,EAAiCC,IAAjC,EADG;AAETC,MAAAA,MAAM,EAAEL,UAAU,CAACG,IAAX,CAAgB,iBAAhB,EAAmCC,IAAnC,EAFC;AAGTE,MAAAA,UAAU,EAAEN,UAAU,CAACG,IAAX,CAAgB,sBAAhB,EAAwCC,IAAxC,EAHH;AAITG,MAAAA,UAAU,EAAEP,UAAU,CAACG,IAAX,CAAgB,sBAAhB,EAAwCC,IAAxC,EAJH;AAKTI,MAAAA,MAAM,EAAER,UAAU,CAACG,IAAX,CAAgB,iBAAhB,EAAmCC,IAAnC,EALC;AAMTK,MAAAA,OAAO,EAAET,UAAU,CAACU,QAAX,CAAoB,gBAApB,CANA;AAOTC,MAAAA,IAAI,EAAEX,UAAU,CAACU,QAAX,CAAoB,cAApB,IAAsC,MAAtC,GAA+C,UAP5C;AAQTE,MAAAA,IAAI,EAAEZ,UAAU,CAACG,IAAX,CAAgB,eAAhB,EAAiCC,IAAjC,EARG;AASTS,MAAAA,KAAK,EAAEb,UAAU,CAACG,IAAX,CAAgB,gBAAhB,EAAkCC,IAAlC,EATE;AAUTU,MAAAA,QAAQ,EAAEd,UAAU,CAACG,IAAX,CAAgB,oBAAhB,EAAsCY,IAAtC,CAA2C,KAA3C,CAVD;AAWTC,MAAAA,MAAM,EAAEhB,UAAU,CAACU,QAAX,CAAoB,gBAApB;AAXC,KAAX;;AAcA,QAAIT,IAAI,CAACQ,OAAT,EAAkB;AAChBR,MAAAA,IAAI,CAACW,IAAL,GAAYZ,UAAU,CAACI,IAAX,EAAZ;AACD;;AAED,QAAIH,IAAI,CAACW,IAAL,IAAaX,IAAI,CAACK,UAAtB,EAAkC;AAChCL,MAAAA,IAAI,CAACW,IAAL,GAAYX,IAAI,CAACW,IAAL,CAAUK,OAAV,CAAkB,wCAAwChB,IAAI,CAACK,UAA7C,GAA0D,QAA5E,EAAsF,EAAtF,CAAZ;AACD;;AAED,QAAIL,IAAI,CAACW,IAAL,IAAaX,IAAI,CAACM,UAAtB,EAAkC;AAChCN,MAAAA,IAAI,CAACW,IAAL,GAAYX,IAAI,CAACW,IAAL,CAAUK,OAAV,CAAkB,wCAAwChB,IAAI,CAACM,UAA7C,GAA0D,QAA5E,EAAsF,EAAtF,CAAZ;AACD;;AAED,QAAIW,MAAM,GAAGlB,UAAU,CAACG,IAAX,CAAgB,iBAAhB,EAAmCgB,GAAnC,CAAuC,kBAAvC,CAAb;AACA,QAAID,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,EAApC,EAAwCA,MAAM,GAAGxC,SAAT;;AAExC,QAAIwC,MAAM,IAAI,OAAOA,MAAP,KAAkB,QAAhC,EAA0C;AACxCA,MAAAA,MAAM,GAAGA,MAAM,CAACD,OAAP,CAAe,MAAf,EAAuB,EAAvB,EAA2BA,OAA3B,CAAmC,GAAnC,EAAwC,EAAxC,EAA4CA,OAA5C,CAAoD,IAApD,EAA0D,EAA1D,EAA8DA,OAA9D,CAAsE,IAAtE,EAA4E,EAA5E,CAAT;AACD,KAFD,MAEO;AACLC,MAAAA,MAAM,GAAGxC,SAAT;AACD;;AAEDuB,IAAAA,IAAI,CAACiB,MAAL,GAAcA,MAAd;AACA,WAAOjB,IAAP;AACD,GAvCD;;AAyCAJ,EAAAA,MAAM,CAACuB,eAAP,GAAyB,SAASA,eAAT,GAA2B;AAClD,QAAIlD,CAAC,GAAG,IAAR;AACA,QAAI+B,IAAI,GAAG,EAAX;AACA/B,IAAAA,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,2BAAX,EAAwCkB,IAAxC,CAA6C,UAAUtB,SAAV,EAAqB;AAChEE,MAAAA,IAAI,CAACqB,IAAL,CAAUpD,CAAC,CAAC4B,cAAF,CAAiBC,SAAjB,CAAV;AACD,KAFD;AAGA,WAAOE,IAAP;AACD,GAPD;;AASAJ,EAAAA,MAAM,CAACX,aAAP,GAAuB,SAASA,aAAT,CAAuBqC,eAAvB,EAAwC;AAC7D,QAAIrD,CAAC,GAAG,IAAR;AACA,QAAIsD,OAAO,GAAG/D,MAAM,CAAC;AACnBkD,MAAAA,IAAI,EAAE,MADa;AAEnBc,MAAAA,KAAK,EAAE;AAFY,KAAD,EAGjBF,eAHiB,CAApB;;AAKA,QAAIrD,CAAC,CAACF,MAAF,CAASkB,aAAb,EAA4B;AAC1B,aAAOhB,CAAC,CAACF,MAAF,CAASkB,aAAT,CAAuBrC,IAAvB,CAA4BqB,CAA5B,EAA+BsD,OAA/B,CAAP;AACD;;AAED,QAAIA,OAAO,CAACf,OAAZ,EAAqB;AACnB,aAAO,mCAAmCe,OAAO,CAACZ,IAA3C,GAAkD,QAAzD;AACD;;AAED,WAAOhD,IAAI,CAAC,KAAD,EAAQ1B,QAAQ,CAAC;AAC1BwF,MAAAA,KAAK,EAAE,qBAAqBF,OAAO,CAACb,IAA7B,GAAoC,GAApC,IAA2Ca,OAAO,CAACG,QAAR,GAAmB,gBAAnB,GAAsC,EAAjF,IAAuF,GAAvF,IAA8FH,OAAO,CAACI,QAAR,IAAoB,EAAlH;AADmB,KAAD,EAExBJ,OAAO,CAACC,KAFgB,CAAhB,EAEQD,OAAO,CAACN,MAAR,IAAkBtD,IAAI,CAAC,KAAD,EAAQ;AAC/C8D,MAAAA,KAAK,EAAE,gBADwC;AAE/CG,MAAAA,KAAK,EAAE,0BAA0BL,OAAO,CAACN,MAAlC,GAA2C;AAFH,KAAR,CAF9B,EAKPtD,IAAI,CAAC,KAAD,EAAQ;AACd8D,MAAAA,KAAK,EAAE;AADO,KAAR,EAELF,OAAO,CAACtB,IAAR,IAAgBtC,IAAI,CAAC,KAAD,EAAQ;AAC7B8D,MAAAA,KAAK,EAAE;AADsB,KAAR,EAEpBF,OAAO,CAACtB,IAFY,CAFf,EAIUsB,OAAO,CAACnB,MAAR,IAAkBzC,IAAI,CAAC,KAAD,EAAQ;AAC9C8D,MAAAA,KAAK,EAAE;AADuC,KAAR,EAErCF,OAAO,CAACnB,MAF6B,CAJhC,EAMYzC,IAAI,CAAC,KAAD,EAAQ;AAC9B8D,MAAAA,KAAK,EAAE;AADuB,KAAR,EAErBF,OAAO,CAAClB,UAAR,IAAsB1C,IAAI,CAAC,KAAD,EAAQ;AACnC8D,MAAAA,KAAK,EAAE;AAD4B,KAAR,EAE1BF,OAAO,CAAClB,UAFkB,CAFL,EAIAkB,OAAO,CAACX,KAAR,IAAiBjD,IAAI,CAAC,KAAD,EAAQ;AACnD8D,MAAAA,KAAK,EAAE;AAD4C,KAAR,EAE1CF,OAAO,CAACX,KAFkC,CAJrB,EAMLW,OAAO,CAACV,QAAR,IAAoB,CAACU,OAAO,CAACX,KAA7B,IAAsCjD,IAAI,CAAC,KAAD,EAAQ;AACnE8D,MAAAA,KAAK,EAAE;AAD4D,KAAR,EAE1D9D,IAAI,CAAC,KAAD,EAAQ;AACbkE,MAAAA,GAAG,EAAEN,OAAO,CAACV;AADA,KAAR,CAFsD,CANrC,EAUnB,CAACU,OAAO,CAACZ,IAAR,IAAgBY,OAAO,CAACG,QAAzB,KAAsC/D,IAAI,CAAC,KAAD,EAAQ;AACrD8D,MAAAA,KAAK,EAAE;AAD8C,KAAR,EAE5CF,OAAO,CAACZ,IAAR,IAAgB,EAF4B,EAExBY,OAAO,CAACG,QAAR,IAAoB/D,IAAI,CAAC,KAAD,EAAQ;AACrD8D,MAAAA,KAAK,EAAE;AAD8C,KAAR,EAE5C9D,IAAI,CAAC,KAAD,EAAQ,IAAR,CAFwC,EAEzBA,IAAI,CAAC,KAAD,EAAQ,IAAR,CAFqB,EAENA,IAAI,CAAC,KAAD,EAAQ,IAAR,CAFE,CAFA,CAVvB,EAcsC4D,OAAO,CAACjB,UAAR,IAAsB3C,IAAI,CAAC,KAAD,EAAQ;AAC9F8D,MAAAA,KAAK,EAAE;AADuF,KAAR,EAErFF,OAAO,CAACjB,UAF6E,CAdhE,CANhB,EAsBiBiB,OAAO,CAAChB,MAAR,IAAkB5C,IAAI,CAAC,KAAD,EAAQ;AACrD8D,MAAAA,KAAK,EAAE;AAD8C,KAAR,EAE5CF,OAAO,CAAChB,MAFoC,CAtBvC,CALG,CAAX;AA8BD,GA7CD;;AA+CAX,EAAAA,MAAM,CAACkC,cAAP,GAAwB,SAASA,cAAT,CAAwBC,gBAAxB,EAA0CC,MAA1C,EAAkD;AACxE,QAAID,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;AAC/BA,MAAAA,gBAAgB,GAAG,KAAK3D,QAAxB;AACD;;AAED,QAAI4D,MAAM,KAAK,KAAK,CAApB,EAAuB;AACrBA,MAAAA,MAAM,GAAG,KAAKjE,MAAL,CAAYM,gBAAZ,GAA+B,SAA/B,GAA2C,QAApD;AACD;;AAED,QAAIJ,CAAC,GAAG,IAAR;AACA,QAAIkC,IAAI,GAAG4B,gBAAgB,CAACE,GAAjB,CAAqB,UAAUV,OAAV,EAAmB;AACjD,aAAOtD,CAAC,CAACgB,aAAF,CAAgBsC,OAAhB,CAAP;AACD,KAFU,EAERW,IAFQ,CAEH,EAFG,CAAX;AAGAjE,IAAAA,CAAC,CAACkB,GAAF,CAAM6C,MAAN,EAAc7B,IAAd;AACD,GAdD;;AAgBAP,EAAAA,MAAM,CAACuC,cAAP,GAAwB,SAASA,cAAT,GAA0B;AAChD,QAAIC,SAAJ;;AAEA,QAAInE,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASS,gBAAb,EAA+B,OAAO,CAAC4D,SAAS,GAAGnE,CAAC,CAACF,MAAf,EAAuBS,gBAAvB,CAAwC3B,KAAxC,CAA8CuF,SAA9C,EAAyD9F,SAAzD,CAAP;AAC/B,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAACyC,aAAP,GAAuB,SAASA,aAAT,GAAyB;AAC9C,QAAIC,UAAJ;;AAEA,QAAIrE,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASW,eAAb,EAA8B,OAAO,CAAC4D,UAAU,GAAGrE,CAAC,CAACF,MAAhB,EAAwBW,eAAxB,CAAwC7B,KAAxC,CAA8CyF,UAA9C,EAA0DhG,SAA1D,CAAP;AAC9B,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAAC2C,aAAP,GAAuB,SAASA,aAAT,GAAyB;AAC9C,QAAIC,UAAJ;;AAEA,QAAIvE,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASY,eAAb,EAA8B,OAAO,CAAC6D,UAAU,GAAGvE,CAAC,CAACF,MAAhB,EAAwBY,eAAxB,CAAwC9B,KAAxC,CAA8C2F,UAA9C,EAA0DlG,SAA1D,CAAP;AAC9B,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAAC6C,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,QAAIC,UAAJ;;AAEA,QAAIzE,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASa,mBAAb,EAAkC,OAAO,CAAC8D,UAAU,GAAGzE,CAAC,CAACF,MAAhB,EAAwBa,mBAAxB,CAA4C/B,KAA5C,CAAkD6F,UAAlD,EAA8DpG,SAA9D,CAAP;AAClC,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAAC+C,mBAAP,GAA6B,SAASA,mBAAT,GAA+B;AAC1D,QAAIC,UAAJ;;AAEA,QAAI3E,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASc,qBAAb,EAAoC,OAAO,CAAC+D,UAAU,GAAG3E,CAAC,CAACF,MAAhB,EAAwBc,qBAAxB,CAA8ChC,KAA9C,CAAoD+F,UAApD,EAAgEtG,SAAhE,CAAP;AACpC,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAACiD,mBAAP,GAA6B,SAASA,mBAAT,GAA+B;AAC1D,QAAIC,UAAJ;;AAEA,QAAI7E,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASe,qBAAb,EAAoC,OAAO,CAACgE,UAAU,GAAG7E,CAAC,CAACF,MAAhB,EAAwBe,qBAAxB,CAA8CjC,KAA9C,CAAoDiG,UAApD,EAAgExG,SAAhE,CAAP;AACpC,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAACmD,mBAAP,GAA6B,SAASA,mBAAT,GAA+B;AAC1D,QAAIC,UAAJ;;AAEA,QAAI/E,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASgB,qBAAb,EAAoC,OAAO,CAACiE,UAAU,GAAG/E,CAAC,CAACF,MAAhB,EAAwBgB,qBAAxB,CAA8ClC,KAA9C,CAAoDmG,UAApD,EAAgE1G,SAAhE,CAAP;AACpC,WAAO,KAAP;AACD,GAND;;AAQAsD,EAAAA,MAAM,CAACqD,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,QAAIC,UAAJ;;AAEA,QAAIjF,CAAC,GAAG,IAAR;AACA,QAAIA,CAAC,CAACF,MAAF,CAASiB,sBAAb,EAAqC,OAAO,CAACkE,UAAU,GAAGjF,CAAC,CAACF,MAAhB,EAAwBiB,sBAAxB,CAA+CnC,KAA/C,CAAqDqG,UAArD,EAAiE5G,SAAjE,CAAP;AACrC,WAAOmC,SAAP;AACD,GAND;;AAQAmB,EAAAA,MAAM,CAACuD,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIlF,CAAC,GAAG,IAAR;AACAA,IAAAA,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,2BAAX,EAAwCkB,IAAxC,CAA6C,UAAUtB,SAAV,EAAqBsD,KAArB,EAA4B;AACvE,UAAIrD,UAAU,GAAGxC,CAAC,CAACuC,SAAD,CAAlB;;AAEA,UAAI,CAAC7B,CAAC,CAACG,QAAP,EAAiB;AACfH,QAAAA,CAAC,CAACG,QAAF,GAAaH,CAAC,CAACkD,eAAF,EAAb;AACD;;AAED,UAAIkC,OAAO,GAAG,EAAd;AACA,UAAI9B,OAAO,GAAGtD,CAAC,CAACG,QAAF,CAAWgF,KAAX,CAAd;AACA,UAAIE,eAAe,GAAGrF,CAAC,CAACG,QAAF,CAAWgF,KAAK,GAAG,CAAnB,CAAtB;AACA,UAAIG,WAAW,GAAGtF,CAAC,CAACG,QAAF,CAAWgF,KAAK,GAAG,CAAnB,CAAlB;;AAEA,UAAInF,CAAC,CAACkE,cAAF,CAAiBZ,OAAjB,EAA0B+B,eAA1B,EAA2CC,WAA3C,CAAJ,EAA6D;AAC3DF,QAAAA,OAAO,CAAChC,IAAR,CAAa,eAAb;AACD;;AAED,UAAIpD,CAAC,CAACoE,aAAF,CAAgBd,OAAhB,EAAyB+B,eAAzB,EAA0CC,WAA1C,CAAJ,EAA4D;AAC1DF,QAAAA,OAAO,CAAChC,IAAR,CAAa,cAAb;AACD;;AAED,UAAIpD,CAAC,CAACsE,aAAF,CAAgBhB,OAAhB,EAAyB+B,eAAzB,EAA0CC,WAA1C,CAAJ,EAA4D;AAC1DF,QAAAA,OAAO,CAAChC,IAAR,CAAa,cAAb;AACD;;AAED,UAAIpD,CAAC,CAACwE,iBAAF,CAAoBlB,OAApB,EAA6B+B,eAA7B,EAA8CC,WAA9C,CAAJ,EAAgE;AAC9DF,QAAAA,OAAO,CAAChC,IAAR,CAAa,mBAAb;AACD;;AAED,UAAIpD,CAAC,CAAC0E,mBAAF,CAAsBpB,OAAtB,EAA+B+B,eAA/B,EAAgDC,WAAhD,CAAJ,EAAkE;AAChEF,QAAAA,OAAO,CAAChC,IAAR,CAAa,qBAAb;AACD;;AAED,UAAIpD,CAAC,CAAC4E,mBAAF,CAAsBtB,OAAtB,EAA+B+B,eAA/B,EAAgDC,WAAhD,CAAJ,EAAkE;AAChEF,QAAAA,OAAO,CAAChC,IAAR,CAAa,qBAAb;AACD;;AAED,UAAIpD,CAAC,CAAC8E,mBAAF,CAAsBxB,OAAtB,EAA+B+B,eAA/B,EAAgDC,WAAhD,CAAJ,EAAkE;AAChEF,QAAAA,OAAO,CAAChC,IAAR,CAAa,qBAAb;AACD;;AAED,UAAImC,oBAAoB,GAAGvF,CAAC,CAACgF,oBAAF,CAAuB1B,OAAvB,EAAgC+B,eAAhC,EAAiDC,WAAjD,CAA3B;;AAEA,UAAIC,oBAAoB,IAAIA,oBAAoB,CAACjH,MAAjD,EAAyD;AACvD,YAAI,OAAOiH,oBAAP,KAAgC,QAApC,EAA8C;AAC5CA,UAAAA,oBAAoB,GAAGA,oBAAoB,CAACC,KAArB,CAA2B,GAA3B,CAAvB;AACD;;AAEDD,QAAAA,oBAAoB,CAACE,OAArB,CAA6B,UAAUC,WAAV,EAAuB;AAClDN,UAAAA,OAAO,CAAChC,IAAR,CAAasC,WAAb;AACD,SAFD;AAGD;;AAED5D,MAAAA,UAAU,CAAC6D,WAAX,CAAuB,uHAAvB;AACAP,MAAAA,OAAO,CAACK,OAAR,CAAgB,UAAUG,SAAV,EAAqB;AACnC9D,QAAAA,UAAU,CAAC+D,QAAX,CAAoBD,SAApB;AACD,OAFD;AAGD,KAxDD;AAyDD,GA3DD;;AA6DAjE,EAAAA,MAAM,CAACmE,KAAP,GAAe,SAASA,KAAT,GAAiB;AAC9B,QAAI9F,CAAC,GAAG,IAAR;AACAA,IAAAA,CAAC,CAACG,QAAF,GAAa,EAAb;AACAH,IAAAA,CAAC,CAACkB,GAAF,CAAMgB,IAAN,CAAW,EAAX;AACD,GAJD;;AAMAP,EAAAA,MAAM,CAACoE,aAAP,GAAuB,SAASA,aAAT,CAAuBC,eAAvB,EAAwCd,MAAxC,EAAgD;AACrE,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AACrBA,MAAAA,MAAM,GAAG,IAAT;AACD;;AAED,QAAIlF,CAAC,GAAG,IAAR,CALqE,CAKvD;;AAEd,QAAImF,KAAJ;AACA,QAAIjE,GAAJ;;AAEA,QAAI,OAAO8E,eAAP,KAA2B,QAA/B,EAAyC;AACvCb,MAAAA,KAAK,GAAGa,eAAR;AACA9E,MAAAA,GAAG,GAAGlB,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,2BAAX,EAAwCb,EAAxC,CAA2C+D,KAA3C,CAAN;AACD,KAHD,MAGO,IAAInF,CAAC,CAACG,QAAF,IAAcH,CAAC,CAACG,QAAF,CAAW8F,OAAX,CAAmBD,eAAnB,KAAuC,CAAzD,EAA4D;AACjEb,MAAAA,KAAK,GAAGnF,CAAC,CAACG,QAAF,CAAW8F,OAAX,CAAmBD,eAAnB,CAAR;AACA9E,MAAAA,GAAG,GAAGlB,CAAC,CAACkB,GAAF,CAAMgF,QAAN,GAAiB9E,EAAjB,CAAoB+D,KAApB,CAAN;AACD,KAHM,MAGA;AACLjE,MAAAA,GAAG,GAAG5B,CAAC,CAAC0G,eAAD,CAAP;AACAb,MAAAA,KAAK,GAAGjE,GAAG,CAACiE,KAAJ,EAAR;AACD;;AAED,QAAIjE,GAAG,CAAC5C,MAAJ,KAAe,CAAnB,EAAsB;AACpB,aAAO0B,CAAP;AACD;;AAEDkB,IAAAA,GAAG,CAACiF,MAAJ;AACAnG,IAAAA,CAAC,CAACG,QAAF,CAAWiG,MAAX,CAAkBjB,KAAlB,EAAyB,CAAzB;AACA,QAAInF,CAAC,CAACF,MAAF,CAASI,UAAT,IAAuBgF,MAA3B,EAAmClF,CAAC,CAACkF,MAAF;AACnC,WAAOlF,CAAP;AACD,GA7BD;;AA+BA2B,EAAAA,MAAM,CAAC0E,cAAP,GAAwB,SAASA,cAAT,CAAwBC,gBAAxB,EAA0CpB,MAA1C,EAAkD;AACxE,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AACrBA,MAAAA,MAAM,GAAG,IAAT;AACD;;AAED,QAAIlF,CAAC,GAAG,IAAR;;AAEA,QAAIuG,KAAK,CAACC,OAAN,CAAcF,gBAAd,CAAJ,EAAqC;AACnC,UAAIG,mBAAmB,GAAG,EAA1B;AACAH,MAAAA,gBAAgB,CAACb,OAAjB,CAAyB,UAAUiB,oBAAV,EAAgC;AACvDD,QAAAA,mBAAmB,CAACrD,IAApB,CAAyBpD,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,2BAAX,EAAwCb,EAAxC,CAA2CsF,oBAA3C,CAAzB;AACD,OAFD;AAGAD,MAAAA,mBAAmB,CAAChB,OAApB,CAA4B,UAAUO,eAAV,EAA2B;AACrDhG,QAAAA,CAAC,CAAC+F,aAAF,CAAgBC,eAAhB,EAAiC,KAAjC;AACD,OAFD;AAGD,KARD,MAQO;AACL1G,MAAAA,CAAC,CAACgH,gBAAD,CAAD,CAAoBnD,IAApB,CAAyB,UAAU6C,eAAV,EAA2B;AAClDhG,QAAAA,CAAC,CAAC+F,aAAF,CAAgBC,eAAhB,EAAiC,KAAjC;AACD,OAFD;AAGD;;AAED,QAAIhG,CAAC,CAACF,MAAF,CAASI,UAAT,IAAuBgF,MAA3B,EAAmClF,CAAC,CAACkF,MAAF;AACnC,WAAOlF,CAAP;AACD,GAvBD;;AAyBA2B,EAAAA,MAAM,CAACgF,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAI3G,CAAC,GAAG,IAAR;AACA,QAAI4G,YAAJ;AACA,QAAIC,OAAJ;AACA,QAAI9C,MAAJ;;AAEA,SAAK,IAAI+C,IAAI,GAAGzI,SAAS,CAACC,MAArB,EAA6ByI,IAAI,GAAG,IAAIR,KAAJ,CAAUO,IAAV,CAApC,EAAqDE,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGF,IAA3E,EAAiFE,IAAI,EAArF,EAAyF;AACvFD,MAAAA,IAAI,CAACC,IAAD,CAAJ,GAAa3I,SAAS,CAAC2I,IAAD,CAAtB;AACD;;AAED,QAAI,OAAOD,IAAI,CAAC,CAAD,CAAX,KAAmB,SAAvB,EAAkC;AAChCH,MAAAA,YAAY,GAAGG,IAAI,CAAC,CAAD,CAAnB;AACAF,MAAAA,OAAO,GAAGE,IAAI,CAAC,CAAD,CAAd;AACAhD,MAAAA,MAAM,GAAGgD,IAAI,CAAC,CAAD,CAAb;AACD,KAJD,MAIO;AACLH,MAAAA,YAAY,GAAGG,IAAI,CAAC,CAAD,CAAnB;AACAhD,MAAAA,MAAM,GAAGgD,IAAI,CAAC,CAAD,CAAb;AACAF,MAAAA,OAAO,GAAGE,IAAI,CAAC,CAAD,CAAd;AACD;;AAED,QAAI,OAAOF,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,MAAAA,OAAO,GAAG,IAAV;AACD;;AAED,QAAI,OAAO9C,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,MAAAA,MAAM,GAAG/D,CAAC,CAACF,MAAF,CAASM,gBAAT,GAA4B,SAA5B,GAAwC,QAAjD;AACD;;AAED,WAAOJ,CAAC,CAACiH,WAAF,CAAc,CAACL,YAAD,CAAd,EAA8BC,OAA9B,EAAuC9C,MAAvC,CAAP;AACD,GA7BD;;AA+BApC,EAAAA,MAAM,CAACsF,WAAP,GAAqB,SAASA,WAAT,GAAuB;AAC1C,QAAIjH,CAAC,GAAG,IAAR;AACA,QAAIkH,aAAJ;AACA,QAAIL,OAAJ;AACA,QAAI9C,MAAJ;;AAEA,SAAK,IAAIoD,KAAK,GAAG9I,SAAS,CAACC,MAAtB,EAA8ByI,IAAI,GAAG,IAAIR,KAAJ,CAAUY,KAAV,CAArC,EAAuDC,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGD,KAA/E,EAAsFC,KAAK,EAA3F,EAA+F;AAC7FL,MAAAA,IAAI,CAACK,KAAD,CAAJ,GAAc/I,SAAS,CAAC+I,KAAD,CAAvB;AACD;;AAED,QAAI,OAAOL,IAAI,CAAC,CAAD,CAAX,KAAmB,SAAvB,EAAkC;AAChCG,MAAAA,aAAa,GAAGH,IAAI,CAAC,CAAD,CAApB;AACAF,MAAAA,OAAO,GAAGE,IAAI,CAAC,CAAD,CAAd;AACAhD,MAAAA,MAAM,GAAGgD,IAAI,CAAC,CAAD,CAAb;AACD,KAJD,MAIO;AACLG,MAAAA,aAAa,GAAGH,IAAI,CAAC,CAAD,CAApB;AACAhD,MAAAA,MAAM,GAAGgD,IAAI,CAAC,CAAD,CAAb;AACAF,MAAAA,OAAO,GAAGE,IAAI,CAAC,CAAD,CAAd;AACD;;AAED,QAAI,OAAOF,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,MAAAA,OAAO,GAAG,IAAV;AACD;;AAED,QAAI,OAAO9C,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,MAAAA,MAAM,GAAG/D,CAAC,CAACF,MAAF,CAASM,gBAAT,GAA4B,SAA5B,GAAwC,QAAjD;AACD,KA1ByC,CA0BxC;;;AAGF,QAAIiH,kBAAkB,GAAGrH,CAAC,CAACwB,aAAF,CAAgB8F,YAAzC;AACA,QAAIC,YAAY,GAAGvH,CAAC,CAACwB,aAAF,CAAgBgG,YAAnC;AACA,QAAIC,YAAY,GAAGzH,CAAC,CAACwB,aAAF,CAAgBkG,SAAnC,CA/B0C,CA+BI;;AAE9C,QAAIC,YAAY,GAAG,EAAnB;AACA,QAAIC,aAAa,GAAG5H,CAAC,CAACG,QAAF,CAAW0H,MAAX,CAAkB,UAAU1G,EAAV,EAAc;AAClD,aAAOA,EAAE,CAACsC,QAAV;AACD,KAFmB,EAEjB,CAFiB,CAApB;AAGAyD,IAAAA,aAAa,CAACzB,OAAd,CAAsB,UAAUmB,YAAV,EAAwB;AAC5C,UAAIgB,aAAJ,EAAmB;AACjB,YAAI7D,MAAM,KAAK,QAAf,EAAyB;AACvB/D,UAAAA,CAAC,CAACG,QAAF,CAAWiG,MAAX,CAAkBpG,CAAC,CAACG,QAAF,CAAW8F,OAAX,CAAmB2B,aAAnB,CAAlB,EAAqD,CAArD,EAAwDhB,YAAxD;AACD,SAFD,MAEO;AACL5G,UAAAA,CAAC,CAACG,QAAF,CAAWiG,MAAX,CAAkBpG,CAAC,CAACG,QAAF,CAAW8F,OAAX,CAAmB2B,aAAnB,IAAoC,CAAtD,EAAyD,CAAzD,EAA4DhB,YAA5D;AACD;AACF,OAND,MAMO;AACL5G,QAAAA,CAAC,CAACG,QAAF,CAAW4D,MAAM,KAAK,QAAX,GAAsB,MAAtB,GAA+B,SAA1C,EAAqD6C,YAArD;AACD;;AAEDe,MAAAA,YAAY,IAAI3H,CAAC,CAACgB,aAAF,CAAgB4F,YAAhB,CAAhB;AACD,KAZD;AAaA,QAAIkB,YAAY,GAAGxI,CAAC,CAACqI,YAAD,CAApB;;AAEA,QAAId,OAAJ,EAAa;AACX,UAAI9C,MAAM,KAAK,QAAX,IAAuB,CAAC/D,CAAC,CAACF,MAAF,CAASM,gBAArC,EAAuD;AACrD0H,QAAAA,YAAY,CAACjC,QAAb,CAAsB,4BAAtB;AACD;;AAED,UAAI9B,MAAM,KAAK,SAAX,IAAwB/D,CAAC,CAACF,MAAF,CAASM,gBAArC,EAAuD;AACrD0H,QAAAA,YAAY,CAACjC,QAAb,CAAsB,yBAAtB;AACD;AACF;;AAED,QAAI+B,aAAJ,EAAmB;AACjB,UAAI7D,MAAM,KAAK,QAAf,EAAyB;AACvB+D,QAAAA,YAAY,CAACC,YAAb,CAA0B/H,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,iBAAX,CAA1B;AACD,OAFD,MAEO;AACL6F,QAAAA,YAAY,CAACE,WAAb,CAAyBhI,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,iBAAX,CAAzB;AACD;AACF,KAND,MAMO;AACLjC,MAAAA,CAAC,CAACkB,GAAF,CAAM6C,MAAN,EAAc+D,YAAd;AACD,KAtEyC,CAsExC;;;AAGF,QAAI9H,CAAC,CAACF,MAAF,CAASI,UAAb,EAAyBF,CAAC,CAACkF,MAAF;;AAEzB,QAAInB,MAAM,KAAK,SAAX,IAAwB,CAAC6D,aAA7B,EAA4C;AAC1C5H,MAAAA,CAAC,CAACwB,aAAF,CAAgBkG,SAAhB,GAA4BD,YAAY,IAAIzH,CAAC,CAACwB,aAAF,CAAgB8F,YAAhB,GAA+BD,kBAAnC,CAAxC;AACD;;AAED,QAAIrH,CAAC,CAACF,MAAF,CAASO,cAAT,KAA4B0D,MAAM,KAAK,QAAX,IAAuB,CAAC/D,CAAC,CAACF,MAAF,CAASM,gBAAjC,IAAqD2D,MAAM,KAAK,SAAX,IAAwB/D,CAAC,CAACF,MAAF,CAASM,gBAAjC,IAAqD,CAACwH,aAAvI,CAAJ,EAA2J;AACzJ,UAAI5H,CAAC,CAACF,MAAF,CAASQ,oBAAb,EAAmC;AACjC,YAAI2H,MAAM,GAAG,KAAb;;AAEA,YAAIjI,CAAC,CAACF,MAAF,CAASM,gBAAT,IAA6BqH,YAAY,KAAK,CAAlD,EAAqD;AACnDQ,UAAAA,MAAM,GAAG,IAAT;AACD;;AAED,YAAI,CAACjI,CAAC,CAACF,MAAF,CAASM,gBAAV,IAA8BqH,YAAY,IAAIJ,kBAAkB,GAAGE,YAAzB,CAAZ,IAAsD,CAAC,EAAzF,EAA6F;AAC3FU,UAAAA,MAAM,GAAG,IAAT;AACD;;AAED,YAAIA,MAAJ,EAAYjI,CAAC,CAACkI,MAAF,CAASrB,OAAO,GAAGrG,SAAH,GAAe,CAA/B;AACb,OAZD,MAYO;AACLR,QAAAA,CAAC,CAACkI,MAAF,CAASrB,OAAO,GAAGrG,SAAH,GAAe,CAA/B;AACD;AACF;;AAED,WAAOR,CAAP;AACD,GAlGD;;AAoGA2B,EAAAA,MAAM,CAACwG,UAAP,GAAoB,SAASA,UAAT,CAAoB7E,OAApB,EAA6B;AAC/C,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AACtBA,MAAAA,OAAO,GAAG,EAAV;AACD;;AAED,QAAItD,CAAC,GAAG,IAAR;AACA,QAAI4H,aAAa,GAAG5H,CAAC,CAACG,QAAF,CAAW0H,MAAX,CAAkB,UAAU1G,EAAV,EAAc;AAClD,aAAOA,EAAE,CAACsC,QAAV;AACD,KAFmB,EAEjB,CAFiB,CAApB;;AAIA,QAAImE,aAAJ,EAAmB;AACjB5H,MAAAA,CAAC,CAAC+F,aAAF,CAAgB/F,CAAC,CAACG,QAAF,CAAW8F,OAAX,CAAmB2B,aAAnB,CAAhB;AACD;;AAED5H,IAAAA,CAAC,CAAC2G,UAAF,CAAapH,MAAM,CAAC;AAClBkD,MAAAA,IAAI,EAAE,UADY;AAElBgB,MAAAA,QAAQ,EAAE;AAFQ,KAAD,EAGhBH,OAHgB,CAAnB;AAIA,WAAOtD,CAAP;AACD,GAnBD;;AAqBA2B,EAAAA,MAAM,CAACyG,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAIpI,CAAC,GAAG,IAAR;AACA,QAAIqI,kBAAJ;AACA,QAAIC,WAAJ;AACAtI,IAAAA,CAAC,CAACG,QAAF,CAAWsF,OAAX,CAAmB,UAAUnC,OAAV,EAAmB6B,KAAnB,EAA0B;AAC3C,UAAI7B,OAAO,CAACG,QAAZ,EAAsB4E,kBAAkB,GAAGlD,KAArB;AACvB,KAFD;;AAIA,QAAI,OAAOkD,kBAAP,KAA8B,WAAlC,EAA+C;AAC7C,UAAIrI,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,UAAX,EAAuBb,EAAvB,CAA0BiH,kBAA1B,EAA8C7F,QAA9C,CAAuD,gBAAvD,CAAJ,EAA8E;AAC5E8F,QAAAA,WAAW,GAAG,IAAd;AACAtI,QAAAA,CAAC,CAAC+F,aAAF,CAAgBsC,kBAAhB;AACD;AACF;;AAED,QAAI,CAACC,WAAL,EAAkB;AAChB,UAAIC,gBAAgB,GAAGvI,CAAC,CAACkB,GAAF,CAAMe,IAAN,CAAW,iBAAX,CAAvB;;AAEA,UAAIsG,gBAAgB,CAACjK,MAArB,EAA6B;AAC3B0B,QAAAA,CAAC,CAAC+F,aAAF,CAAgBwC,gBAAhB;AACD;AACF;;AAED,WAAOvI,CAAP;AACD,GAxBD;;AA0BA2B,EAAAA,MAAM,CAACuG,MAAP,GAAgB,SAASA,MAAT,CAAgBM,QAAhB,EAA0Bd,SAA1B,EAAqC;AACnD,QAAIc,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AACvBA,MAAAA,QAAQ,GAAG,GAAX;AACD;;AAED,QAAIxI,CAAC,GAAG,IAAR;AACA,QAAIyI,aAAa,GAAGzI,CAAC,CAACwB,aAAF,CAAgBkG,SAApC;AACA,QAAIgB,YAAJ;AACA,QAAI,OAAOhB,SAAP,KAAqB,WAAzB,EAAsCgB,YAAY,GAAGhB,SAAf,CAAtC,KAAoE;AAClEgB,MAAAA,YAAY,GAAG1I,CAAC,CAACF,MAAF,CAASM,gBAAT,GAA4B,CAA5B,GAAgCJ,CAAC,CAACwB,aAAF,CAAgB8F,YAAhB,GAA+BtH,CAAC,CAACwB,aAAF,CAAgBgG,YAA9F;AACA,UAAIkB,YAAY,KAAKD,aAArB,EAAoC,OAAOzI,CAAP;AACrC;AACDA,IAAAA,CAAC,CAACsB,cAAF,CAAiBoG,SAAjB,CAA2BgB,YAA3B,EAAyCF,QAAzC;AACA,WAAOxI,CAAP;AACD,GAdD;;AAgBA2B,EAAAA,MAAM,CAACD,IAAP,GAAc,SAASA,IAAT,GAAgB;AAC5B,QAAI1B,CAAC,GAAG,IAAR;;AAEA,QAAI,CAACA,CAAC,CAACG,QAAH,IAAeH,CAAC,CAACG,QAAF,CAAW7B,MAAX,KAAsB,CAAzC,EAA4C;AAC1C0B,MAAAA,CAAC,CAACG,QAAF,GAAaH,CAAC,CAACkD,eAAF,EAAb;AACD;;AAED,QAAIlD,CAAC,CAACF,MAAF,CAASK,QAAT,IAAqBH,CAAC,CAACF,MAAF,CAASK,QAAT,CAAkB7B,MAA3C,EAAmD;AACjD0B,MAAAA,CAAC,CAAC6D,cAAF;AACD;;AAED,QAAI7D,CAAC,CAACF,MAAF,CAASI,UAAb,EAAyBF,CAAC,CAACkF,MAAF;AACzB,QAAIlF,CAAC,CAACF,MAAF,CAASO,cAAb,EAA6BL,CAAC,CAACkI,MAAF,CAAS,CAAT;AAC9B,GAbD;;AAeAvG,EAAAA,MAAM,CAACgH,OAAP,GAAiB,SAASA,OAAT,GAAmB;AAClC,QAAI3I,CAAC,GAAG,IAAR;AACAA,IAAAA,CAAC,CAAC4I,IAAF,CAAO,4CAAP,EAAqD5I,CAArD;AACAA,IAAAA,CAAC,CAACkB,GAAF,CAAM2H,OAAN,CAAc,wBAAd;;AAEA,QAAI7I,CAAC,CAACkB,GAAF,CAAM,CAAN,CAAJ,EAAc;AACZlB,MAAAA,CAAC,CAACkB,GAAF,CAAM,CAAN,EAASG,UAAT,GAAsB,IAAtB;AACA,aAAOrB,CAAC,CAACkB,GAAF,CAAM,CAAN,EAASG,UAAhB;AACD;;AAED7B,IAAAA,WAAW,CAACQ,CAAD,CAAX;AACD,GAXD;;AAaA,SAAOL,QAAP;AACD,CAlkB2B,CAkkB1BF,eAlkB0B,CAA5B;;AAokBA,eAAeE,QAAf","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Messages = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Messages, _Framework7Class);\n\n  function Messages(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var m = _assertThisInitialized(_this);\n\n    var defaults = {\n      autoLayout: true,\n      messages: [],\n      newMessagesFirst: false,\n      scrollMessages: true,\n      scrollMessagesOnEdge: true,\n      firstMessageRule: undefined,\n      lastMessageRule: undefined,\n      tailMessageRule: undefined,\n      sameNameMessageRule: undefined,\n      sameHeaderMessageRule: undefined,\n      sameFooterMessageRule: undefined,\n      sameAvatarMessageRule: undefined,\n      customClassMessageRule: undefined,\n      renderMessage: undefined\n    }; // Extend defaults with modules params\n\n    m.useModulesParams(defaults);\n    m.params = extend(defaults, params);\n    var $el = $(params.el).eq(0);\n    if ($el.length === 0) return m || _assertThisInitialized(_this);\n    if ($el[0].f7Messages) return $el[0].f7Messages || _assertThisInitialized(_this);\n    $el[0].f7Messages = m;\n    var $pageContentEl = $el.closest('.page-content').eq(0);\n    extend(m, {\n      messages: m.params.messages,\n      $el: $el,\n      el: $el[0],\n      $pageContentEl: $pageContentEl,\n      pageContentEl: $pageContentEl[0]\n    }); // Install Modules\n\n    m.useModules(); // Init\n\n    m.init();\n    return m || _assertThisInitialized(_this);\n  } // eslint-disable-next-line\n\n\n  var _proto = Messages.prototype;\n\n  _proto.getMessageData = function getMessageData(messageEl) {\n    var $messageEl = $(messageEl);\n    var data = {\n      name: $messageEl.find('.message-name').html(),\n      header: $messageEl.find('.message-header').html(),\n      textHeader: $messageEl.find('.message-text-header').html(),\n      textFooter: $messageEl.find('.message-text-footer').html(),\n      footer: $messageEl.find('.message-footer').html(),\n      isTitle: $messageEl.hasClass('messages-title'),\n      type: $messageEl.hasClass('message-sent') ? 'sent' : 'received',\n      text: $messageEl.find('.message-text').html(),\n      image: $messageEl.find('.message-image').html(),\n      imageSrc: $messageEl.find('.message-image img').attr('src'),\n      typing: $messageEl.hasClass('message-typing')\n    };\n\n    if (data.isTitle) {\n      data.text = $messageEl.html();\n    }\n\n    if (data.text && data.textHeader) {\n      data.text = data.text.replace(\"<div class=\\\"message-text-header\\\">\" + data.textHeader + \"</div>\", '');\n    }\n\n    if (data.text && data.textFooter) {\n      data.text = data.text.replace(\"<div class=\\\"message-text-footer\\\">\" + data.textFooter + \"</div>\", '');\n    }\n\n    var avatar = $messageEl.find('.message-avatar').css('background-image');\n    if (avatar === 'none' || avatar === '') avatar = undefined;\n\n    if (avatar && typeof avatar === 'string') {\n      avatar = avatar.replace('url(', '').replace(')', '').replace(/\"/g, '').replace(/'/g, '');\n    } else {\n      avatar = undefined;\n    }\n\n    data.avatar = avatar;\n    return data;\n  };\n\n  _proto.getMessagesData = function getMessagesData() {\n    var m = this;\n    var data = [];\n    m.$el.find('.message, .messages-title').each(function (messageEl) {\n      data.push(m.getMessageData(messageEl));\n    });\n    return data;\n  };\n\n  _proto.renderMessage = function renderMessage(messageToRender) {\n    var m = this;\n    var message = extend({\n      type: 'sent',\n      attrs: {}\n    }, messageToRender);\n\n    if (m.params.renderMessage) {\n      return m.params.renderMessage.call(m, message);\n    }\n\n    if (message.isTitle) {\n      return \"<div class=\\\"messages-title\\\">\" + message.text + \"</div>\";\n    }\n\n    return $jsx(\"div\", _extends({\n      class: \"message message-\" + message.type + \" \" + (message.isTyping ? 'message-typing' : '') + \" \" + (message.cssClass || '')\n    }, message.attrs), message.avatar && $jsx(\"div\", {\n      class: \"message-avatar\",\n      style: \"background-image:url(\" + message.avatar + \")\"\n    }), $jsx(\"div\", {\n      class: \"message-content\"\n    }, message.name && $jsx(\"div\", {\n      class: \"message-name\"\n    }, message.name), message.header && $jsx(\"div\", {\n      class: \"message-header\"\n    }, message.header), $jsx(\"div\", {\n      class: \"message-bubble\"\n    }, message.textHeader && $jsx(\"div\", {\n      class: \"message-text-header\"\n    }, message.textHeader), message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, message.image), message.imageSrc && !message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, $jsx(\"img\", {\n      src: message.imageSrc\n    })), (message.text || message.isTyping) && $jsx(\"div\", {\n      class: \"message-text\"\n    }, message.text || '', message.isTyping && $jsx(\"div\", {\n      class: \"message-typing-indicator\"\n    }, $jsx(\"div\", null), $jsx(\"div\", null), $jsx(\"div\", null))), message.textFooter && $jsx(\"div\", {\n      class: \"message-text-footer\"\n    }, message.textFooter)), message.footer && $jsx(\"div\", {\n      class: \"message-footer\"\n    }, message.footer)));\n  };\n\n  _proto.renderMessages = function renderMessages(messagesToRender, method) {\n    if (messagesToRender === void 0) {\n      messagesToRender = this.messages;\n    }\n\n    if (method === void 0) {\n      method = this.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    var m = this;\n    var html = messagesToRender.map(function (message) {\n      return m.renderMessage(message);\n    }).join('');\n    m.$el[method](html);\n  };\n\n  _proto.isFirstMessage = function isFirstMessage() {\n    var _m$params;\n\n    var m = this;\n    if (m.params.firstMessageRule) return (_m$params = m.params).firstMessageRule.apply(_m$params, arguments);\n    return false;\n  };\n\n  _proto.isLastMessage = function isLastMessage() {\n    var _m$params2;\n\n    var m = this;\n    if (m.params.lastMessageRule) return (_m$params2 = m.params).lastMessageRule.apply(_m$params2, arguments);\n    return false;\n  };\n\n  _proto.isTailMessage = function isTailMessage() {\n    var _m$params3;\n\n    var m = this;\n    if (m.params.tailMessageRule) return (_m$params3 = m.params).tailMessageRule.apply(_m$params3, arguments);\n    return false;\n  };\n\n  _proto.isSameNameMessage = function isSameNameMessage() {\n    var _m$params4;\n\n    var m = this;\n    if (m.params.sameNameMessageRule) return (_m$params4 = m.params).sameNameMessageRule.apply(_m$params4, arguments);\n    return false;\n  };\n\n  _proto.isSameHeaderMessage = function isSameHeaderMessage() {\n    var _m$params5;\n\n    var m = this;\n    if (m.params.sameHeaderMessageRule) return (_m$params5 = m.params).sameHeaderMessageRule.apply(_m$params5, arguments);\n    return false;\n  };\n\n  _proto.isSameFooterMessage = function isSameFooterMessage() {\n    var _m$params6;\n\n    var m = this;\n    if (m.params.sameFooterMessageRule) return (_m$params6 = m.params).sameFooterMessageRule.apply(_m$params6, arguments);\n    return false;\n  };\n\n  _proto.isSameAvatarMessage = function isSameAvatarMessage() {\n    var _m$params7;\n\n    var m = this;\n    if (m.params.sameAvatarMessageRule) return (_m$params7 = m.params).sameAvatarMessageRule.apply(_m$params7, arguments);\n    return false;\n  };\n\n  _proto.isCustomClassMessage = function isCustomClassMessage() {\n    var _m$params8;\n\n    var m = this;\n    if (m.params.customClassMessageRule) return (_m$params8 = m.params).customClassMessageRule.apply(_m$params8, arguments);\n    return undefined;\n  };\n\n  _proto.layout = function layout() {\n    var m = this;\n    m.$el.find('.message, .messages-title').each(function (messageEl, index) {\n      var $messageEl = $(messageEl);\n\n      if (!m.messages) {\n        m.messages = m.getMessagesData();\n      }\n\n      var classes = [];\n      var message = m.messages[index];\n      var previousMessage = m.messages[index - 1];\n      var nextMessage = m.messages[index + 1];\n\n      if (m.isFirstMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-first');\n      }\n\n      if (m.isLastMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-last');\n      }\n\n      if (m.isTailMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-tail');\n      }\n\n      if (m.isSameNameMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-name');\n      }\n\n      if (m.isSameHeaderMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-header');\n      }\n\n      if (m.isSameFooterMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-footer');\n      }\n\n      if (m.isSameAvatarMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-avatar');\n      }\n\n      var customMessageClasses = m.isCustomClassMessage(message, previousMessage, nextMessage);\n\n      if (customMessageClasses && customMessageClasses.length) {\n        if (typeof customMessageClasses === 'string') {\n          customMessageClasses = customMessageClasses.split(' ');\n        }\n\n        customMessageClasses.forEach(function (customClass) {\n          classes.push(customClass);\n        });\n      }\n\n      $messageEl.removeClass('message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar');\n      classes.forEach(function (className) {\n        $messageEl.addClass(className);\n      });\n    });\n  };\n\n  _proto.clear = function clear() {\n    var m = this;\n    m.messages = [];\n    m.$el.html('');\n  };\n\n  _proto.removeMessage = function removeMessage(messageToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    var m = this; // Index or El\n\n    var index;\n    var $el;\n\n    if (typeof messageToRemove === 'number') {\n      index = messageToRemove;\n      $el = m.$el.find('.message, .messages-title').eq(index);\n    } else if (m.messages && m.messages.indexOf(messageToRemove) >= 0) {\n      index = m.messages.indexOf(messageToRemove);\n      $el = m.$el.children().eq(index);\n    } else {\n      $el = $(messageToRemove);\n      index = $el.index();\n    }\n\n    if ($el.length === 0) {\n      return m;\n    }\n\n    $el.remove();\n    m.messages.splice(index, 1);\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  };\n\n  _proto.removeMessages = function removeMessages(messagesToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    var m = this;\n\n    if (Array.isArray(messagesToRemove)) {\n      var messagesToRemoveEls = [];\n      messagesToRemove.forEach(function (messageToRemoveIndex) {\n        messagesToRemoveEls.push(m.$el.find('.message, .messages-title').eq(messageToRemoveIndex));\n      });\n      messagesToRemoveEls.forEach(function (messageToRemove) {\n        m.removeMessage(messageToRemove, false);\n      });\n    } else {\n      $(messagesToRemove).each(function (messageToRemove) {\n        m.removeMessage(messageToRemove, false);\n      });\n    }\n\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  };\n\n  _proto.addMessage = function addMessage() {\n    var m = this;\n    var messageToAdd;\n    var animate;\n    var method;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      messageToAdd = args[0];\n      animate = args[1];\n      method = args[2];\n    } else {\n      messageToAdd = args[0];\n      method = args[1];\n      animate = args[2];\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    return m.addMessages([messageToAdd], animate, method);\n  };\n\n  _proto.addMessages = function addMessages() {\n    var m = this;\n    var messagesToAdd;\n    var animate;\n    var method;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      messagesToAdd = args[0];\n      animate = args[1];\n      method = args[2];\n    } else {\n      messagesToAdd = args[0];\n      method = args[1];\n      animate = args[2];\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    } // Define scroll positions before new messages added\n\n\n    var scrollHeightBefore = m.pageContentEl.scrollHeight;\n    var heightBefore = m.pageContentEl.offsetHeight;\n    var scrollBefore = m.pageContentEl.scrollTop; // Add message to DOM and data\n\n    var messagesHTML = '';\n    var typingMessage = m.messages.filter(function (el) {\n      return el.isTyping;\n    })[0];\n    messagesToAdd.forEach(function (messageToAdd) {\n      if (typingMessage) {\n        if (method === 'append') {\n          m.messages.splice(m.messages.indexOf(typingMessage), 0, messageToAdd);\n        } else {\n          m.messages.splice(m.messages.indexOf(typingMessage) + 1, 0, messageToAdd);\n        }\n      } else {\n        m.messages[method === 'append' ? 'push' : 'unshift'](messageToAdd);\n      }\n\n      messagesHTML += m.renderMessage(messageToAdd);\n    });\n    var $messagesEls = $(messagesHTML);\n\n    if (animate) {\n      if (method === 'append' && !m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-bottom');\n      }\n\n      if (method === 'prepend' && m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-top');\n      }\n    }\n\n    if (typingMessage) {\n      if (method === 'append') {\n        $messagesEls.insertBefore(m.$el.find('.message-typing'));\n      } else {\n        $messagesEls.insertAfter(m.$el.find('.message-typing'));\n      }\n    } else {\n      m.$el[method]($messagesEls);\n    } // Layout\n\n\n    if (m.params.autoLayout) m.layout();\n\n    if (method === 'prepend' && !typingMessage) {\n      m.pageContentEl.scrollTop = scrollBefore + (m.pageContentEl.scrollHeight - scrollHeightBefore);\n    }\n\n    if (m.params.scrollMessages && (method === 'append' && !m.params.newMessagesFirst || method === 'prepend' && m.params.newMessagesFirst && !typingMessage)) {\n      if (m.params.scrollMessagesOnEdge) {\n        var onEdge = false;\n\n        if (m.params.newMessagesFirst && scrollBefore === 0) {\n          onEdge = true;\n        }\n\n        if (!m.params.newMessagesFirst && scrollBefore - (scrollHeightBefore - heightBefore) >= -10) {\n          onEdge = true;\n        }\n\n        if (onEdge) m.scroll(animate ? undefined : 0);\n      } else {\n        m.scroll(animate ? undefined : 0);\n      }\n    }\n\n    return m;\n  };\n\n  _proto.showTyping = function showTyping(message) {\n    if (message === void 0) {\n      message = {};\n    }\n\n    var m = this;\n    var typingMessage = m.messages.filter(function (el) {\n      return el.isTyping;\n    })[0];\n\n    if (typingMessage) {\n      m.removeMessage(m.messages.indexOf(typingMessage));\n    }\n\n    m.addMessage(extend({\n      type: 'received',\n      isTyping: true\n    }, message));\n    return m;\n  };\n\n  _proto.hideTyping = function hideTyping() {\n    var m = this;\n    var typingMessageIndex;\n    var typingFound;\n    m.messages.forEach(function (message, index) {\n      if (message.isTyping) typingMessageIndex = index;\n    });\n\n    if (typeof typingMessageIndex !== 'undefined') {\n      if (m.$el.find('.message').eq(typingMessageIndex).hasClass('message-typing')) {\n        typingFound = true;\n        m.removeMessage(typingMessageIndex);\n      }\n    }\n\n    if (!typingFound) {\n      var $typingMessageEl = m.$el.find('.message-typing');\n\n      if ($typingMessageEl.length) {\n        m.removeMessage($typingMessageEl);\n      }\n    }\n\n    return m;\n  };\n\n  _proto.scroll = function scroll(duration, scrollTop) {\n    if (duration === void 0) {\n      duration = 300;\n    }\n\n    var m = this;\n    var currentScroll = m.pageContentEl.scrollTop;\n    var newScrollTop;\n    if (typeof scrollTop !== 'undefined') newScrollTop = scrollTop;else {\n      newScrollTop = m.params.newMessagesFirst ? 0 : m.pageContentEl.scrollHeight - m.pageContentEl.offsetHeight;\n      if (newScrollTop === currentScroll) return m;\n    }\n    m.$pageContentEl.scrollTop(newScrollTop, duration);\n    return m;\n  };\n\n  _proto.init = function init() {\n    var m = this;\n\n    if (!m.messages || m.messages.length === 0) {\n      m.messages = m.getMessagesData();\n    }\n\n    if (m.params.messages && m.params.messages.length) {\n      m.renderMessages();\n    }\n\n    if (m.params.autoLayout) m.layout();\n    if (m.params.scrollMessages) m.scroll(0);\n  };\n\n  _proto.destroy = function destroy() {\n    var m = this;\n    m.emit('local::beforeDestroy messagesBeforeDestroy', m);\n    m.$el.trigger('messages:beforedestroy');\n\n    if (m.$el[0]) {\n      m.$el[0].f7Messages = null;\n      delete m.$el[0].f7Messages;\n    }\n\n    deleteProps(m);\n  };\n\n  return Messages;\n}(Framework7Class);\n\nexport default Messages;"]},"metadata":{},"sourceType":"module"}