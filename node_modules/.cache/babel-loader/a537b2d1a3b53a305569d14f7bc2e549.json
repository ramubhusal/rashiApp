{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n\nvar Popover = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Popover, _Modal);\n\n  function Popover(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.popover, params); // Extends with open/close Modal methods;\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var popover = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var window = getWindow();\n    var document = getDocument();\n    popover.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!popover.params.el) {\n      $el = $(popover.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(popover.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    } // Find Target\n\n\n    var $targetEl = $(popover.params.targetEl).eq(0);\n\n    if ($el.length === 0) {\n      return popover.destroy() || _assertThisInitialized(_this);\n    } // Backdrop\n\n\n    var $backdropEl;\n\n    if (popover.params.backdrop && popover.params.backdropEl) {\n      $backdropEl = $(popover.params.backdropEl);\n    } else if (popover.params.backdrop) {\n      $backdropEl = popover.$containerEl.children('.popover-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popover-backdrop\"></div>');\n        popover.$containerEl.append($backdropEl);\n      }\n    } // Find Angle\n\n\n    var $angleEl;\n\n    if ($el.find('.popover-angle').length === 0) {\n      $angleEl = $('<div class=\"popover-angle\"></div>');\n      $el.prepend($angleEl);\n    } else {\n      $angleEl = $el.find('.popover-angle');\n    } // Open\n\n\n    var originalOpen = popover.open;\n    extend(popover, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $targetEl: $targetEl,\n      targetEl: $targetEl[0],\n      $angleEl: $angleEl,\n      angleEl: $angleEl[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popover',\n      open: function open() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var targetEl = args[0],\n            animate = args[1];\n\n        if (typeof args[0] === 'boolean') {\n          animate = args[0];\n          targetEl = args[1];\n        }\n\n        if (targetEl) {\n          popover.$targetEl = $(targetEl);\n          popover.targetEl = popover.$targetEl[0];\n        }\n\n        return originalOpen.call(popover, animate);\n      }\n    });\n\n    function handleResize() {\n      popover.resize();\n    }\n\n    popover.on('popoverOpen', function () {\n      popover.resize();\n      app.on('resize', handleResize);\n      $(window).on('keyboardDidShow keyboardDidHide', handleResize);\n      popover.on('popoverClose popoverBeforeDestroy', function () {\n        app.off('resize', handleResize);\n        $(window).off('keyboardDidShow keyboardDidHide', handleResize);\n      });\n    });\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popover.el).length === 0) {\n        if (popover.params.closeByBackdropClick && popover.params.backdrop && popover.backdropEl && popover.backdropEl === target) {\n          popover.close();\n        } else if (popover.params.closeByOutsideClick) {\n          popover.close();\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && popover.params.closeOnEscape) {\n        popover.close();\n      }\n    }\n\n    if (popover.params.closeOnEscape) {\n      popover.on('popoverOpen', function () {\n        $(document).on('keydown', onKeyDown);\n      });\n      popover.on('popoverClose', function () {\n        $(document).off('keydown', onKeyDown);\n      });\n    }\n\n    popover.on('popoverOpened', function () {\n      if (popover.params.closeByOutsideClick || popover.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popover.on('popoverClose', function () {\n      if (popover.params.closeByOutsideClick || popover.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n    });\n    $el[0].f7Modal = popover;\n    return popover || _assertThisInitialized(_this);\n  }\n\n  var _proto = Popover.prototype;\n\n  _proto.resize = function resize() {\n    var popover = this;\n    var app = popover.app,\n        $el = popover.$el,\n        $targetEl = popover.$targetEl,\n        $angleEl = popover.$angleEl;\n    var _popover$params = popover.params,\n        targetX = _popover$params.targetX,\n        targetY = _popover$params.targetY;\n    $el.css({\n      left: '',\n      top: ''\n    });\n    var _ref = [$el.width(), $el.height()],\n        width = _ref[0],\n        height = _ref[1];\n    var angleSize = 0;\n    var angleLeft;\n    var angleTop;\n\n    if (app.theme === 'ios' || app.theme === 'aurora') {\n      $angleEl.removeClass('on-left on-right on-top on-bottom').css({\n        left: '',\n        top: ''\n      });\n      angleSize = $angleEl.width() / 2;\n    } else {\n      $el.removeClass('popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle').css({\n        left: '',\n        top: ''\n      });\n    }\n\n    var targetWidth;\n    var targetHeight;\n    var targetOffsetLeft;\n    var targetOffsetTop;\n    var safeAreaTop = parseInt($('html').css('--f7-safe-area-top'), 10);\n    var safeAreaLeft = parseInt($('html').css('--f7-safe-area-left'), 10);\n    var safeAreaRight = parseInt($('html').css('--f7-safe-area-right'), 10);\n    if (Number.isNaN(safeAreaTop)) safeAreaTop = 0;\n    if (Number.isNaN(safeAreaLeft)) safeAreaLeft = 0;\n    if (Number.isNaN(safeAreaRight)) safeAreaRight = 0;\n\n    if ($targetEl && $targetEl.length > 0) {\n      targetWidth = $targetEl.outerWidth();\n      targetHeight = $targetEl.outerHeight();\n      var targetOffset = $targetEl.offset();\n      targetOffsetLeft = targetOffset.left - app.left;\n      targetOffsetTop = targetOffset.top - app.top;\n      var targetParentPage = $targetEl.parents('.page');\n\n      if (targetParentPage.length > 0) {\n        targetOffsetTop -= targetParentPage[0].scrollTop;\n      }\n    } else if (typeof targetX !== 'undefined' && targetY !== 'undefined') {\n      targetOffsetLeft = targetX;\n      targetOffsetTop = targetY;\n      targetWidth = popover.params.targetWidth || 0;\n      targetHeight = popover.params.targetHeight || 0;\n    }\n\n    var left = 0,\n        top = 0,\n        diff = 0; // Top Position\n\n    var position = app.theme === 'md' ? 'bottom' : 'top';\n\n    if (app.theme === 'md') {\n      if (height < app.height - targetOffsetTop - targetHeight) {\n        // On bottom\n        position = 'bottom';\n        top = targetOffsetTop + targetHeight;\n      } else if (height < targetOffsetTop - safeAreaTop) {\n        // On top\n        top = targetOffsetTop - height;\n        position = 'top';\n      } else {\n        // On middle\n        position = 'middle';\n        top = targetHeight / 2 + targetOffsetTop - height / 2;\n      }\n\n      top = Math.max(8, Math.min(top, app.height - height - 8)); // Horizontal Position\n\n      var hPosition;\n\n      if (targetOffsetLeft < app.width / 2) {\n        hPosition = 'right';\n        left = position === 'middle' ? targetOffsetLeft + targetWidth : targetOffsetLeft;\n      } else {\n        hPosition = 'left';\n        left = position === 'middle' ? targetOffsetLeft - width : targetOffsetLeft + targetWidth - width;\n      }\n\n      left = Math.max(8, Math.min(left, app.width - width - 8 - safeAreaRight), safeAreaLeft);\n      $el.addClass(\"popover-on-\" + position + \" popover-on-\" + hPosition);\n    } else {\n      // ios and aurora\n      if (height + angleSize < targetOffsetTop - safeAreaTop) {\n        // On top\n        top = targetOffsetTop - height - angleSize;\n      } else if (height + angleSize < app.height - targetOffsetTop - targetHeight) {\n        // On bottom\n        position = 'bottom';\n        top = targetOffsetTop + targetHeight + angleSize;\n      } else {\n        // On middle\n        position = 'middle';\n        top = targetHeight / 2 + targetOffsetTop - height / 2;\n        diff = top;\n        top = Math.max(5, Math.min(top, app.height - height - 5));\n        diff -= top;\n      } // Horizontal Position\n\n\n      if (position === 'top' || position === 'bottom') {\n        left = targetWidth / 2 + targetOffsetLeft - width / 2;\n        diff = left;\n        left = Math.max(5, Math.min(left, app.width - width - 5));\n\n        if (safeAreaLeft) {\n          left = Math.max(left, safeAreaLeft);\n        }\n\n        if (safeAreaRight && left + width > app.width - 5 - safeAreaRight) {\n          left = app.width - 5 - safeAreaRight - width;\n        }\n\n        if (position === 'top') {\n          $angleEl.addClass('on-bottom');\n        }\n\n        if (position === 'bottom') {\n          $angleEl.addClass('on-top');\n        }\n\n        diff -= left;\n        angleLeft = width / 2 - angleSize + diff;\n        angleLeft = Math.max(Math.min(angleLeft, width - angleSize * 2 - 13), 13);\n        $angleEl.css({\n          left: angleLeft + \"px\"\n        });\n      } else if (position === 'middle') {\n        left = targetOffsetLeft - width - angleSize;\n        $angleEl.addClass('on-right');\n\n        if (left < 5 || left + width + safeAreaRight > app.width || left < safeAreaLeft) {\n          if (left < 5) left = targetOffsetLeft + targetWidth + angleSize;\n          if (left + width + safeAreaRight > app.width) left = app.width - width - 5 - safeAreaRight;\n          if (left < safeAreaLeft) left = safeAreaLeft;\n          $angleEl.removeClass('on-right').addClass('on-left');\n        }\n\n        angleTop = height / 2 - angleSize + diff;\n        angleTop = Math.max(Math.min(angleTop, height - angleSize * 2 - 13), 13);\n        $angleEl.css({\n          top: angleTop + \"px\"\n        });\n      }\n    } // Apply Styles\n\n\n    $el.css({\n      top: top + \"px\",\n      left: left + \"px\"\n    });\n  };\n\n  return Popover;\n}(Modal);\n\nexport default Popover;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/popover/popover-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getWindow","getDocument","$","extend","getDevice","Modal","Popover","_Modal","app","params","_this","extendedParams","on","popover","call","device","window","document","$el","el","content","filter","node","nodeType","eq","length","f7Modal","$targetEl","targetEl","destroy","$backdropEl","backdrop","backdropEl","$containerEl","children","append","$angleEl","find","prepend","originalOpen","open","angleEl","type","_len","arguments","args","Array","_key","animate","handleResize","resize","off","handleClick","e","target","$target","keyboardOpened","desktop","cordova","Keyboard","isVisible","plugins","closest","closeByBackdropClick","close","closeByOutsideClick","onKeyDown","keyCode","closeOnEscape","_proto","_popover$params","targetX","targetY","css","left","top","_ref","width","height","angleSize","angleLeft","angleTop","theme","removeClass","targetWidth","targetHeight","targetOffsetLeft","targetOffsetTop","safeAreaTop","parseInt","safeAreaLeft","safeAreaRight","Number","isNaN","outerWidth","outerHeight","targetOffset","offset","targetParentPage","parents","scrollTop","diff","position","Math","max","min","hPosition","addClass"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n\nvar Popover = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Popover, _Modal);\n\n  function Popover(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.popover, params); // Extends with open/close Modal methods;\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var popover = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var window = getWindow();\n    var document = getDocument();\n    popover.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!popover.params.el) {\n      $el = $(popover.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(popover.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    } // Find Target\n\n\n    var $targetEl = $(popover.params.targetEl).eq(0);\n\n    if ($el.length === 0) {\n      return popover.destroy() || _assertThisInitialized(_this);\n    } // Backdrop\n\n\n    var $backdropEl;\n\n    if (popover.params.backdrop && popover.params.backdropEl) {\n      $backdropEl = $(popover.params.backdropEl);\n    } else if (popover.params.backdrop) {\n      $backdropEl = popover.$containerEl.children('.popover-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popover-backdrop\"></div>');\n        popover.$containerEl.append($backdropEl);\n      }\n    } // Find Angle\n\n\n    var $angleEl;\n\n    if ($el.find('.popover-angle').length === 0) {\n      $angleEl = $('<div class=\"popover-angle\"></div>');\n      $el.prepend($angleEl);\n    } else {\n      $angleEl = $el.find('.popover-angle');\n    } // Open\n\n\n    var originalOpen = popover.open;\n    extend(popover, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $targetEl: $targetEl,\n      targetEl: $targetEl[0],\n      $angleEl: $angleEl,\n      angleEl: $angleEl[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popover',\n      open: function open() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var targetEl = args[0],\n            animate = args[1];\n\n        if (typeof args[0] === 'boolean') {\n          animate = args[0];\n          targetEl = args[1];\n        }\n\n        if (targetEl) {\n          popover.$targetEl = $(targetEl);\n          popover.targetEl = popover.$targetEl[0];\n        }\n\n        return originalOpen.call(popover, animate);\n      }\n    });\n\n    function handleResize() {\n      popover.resize();\n    }\n\n    popover.on('popoverOpen', function () {\n      popover.resize();\n      app.on('resize', handleResize);\n      $(window).on('keyboardDidShow keyboardDidHide', handleResize);\n      popover.on('popoverClose popoverBeforeDestroy', function () {\n        app.off('resize', handleResize);\n        $(window).off('keyboardDidShow keyboardDidHide', handleResize);\n      });\n    });\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popover.el).length === 0) {\n        if (popover.params.closeByBackdropClick && popover.params.backdrop && popover.backdropEl && popover.backdropEl === target) {\n          popover.close();\n        } else if (popover.params.closeByOutsideClick) {\n          popover.close();\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && popover.params.closeOnEscape) {\n        popover.close();\n      }\n    }\n\n    if (popover.params.closeOnEscape) {\n      popover.on('popoverOpen', function () {\n        $(document).on('keydown', onKeyDown);\n      });\n      popover.on('popoverClose', function () {\n        $(document).off('keydown', onKeyDown);\n      });\n    }\n\n    popover.on('popoverOpened', function () {\n      if (popover.params.closeByOutsideClick || popover.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popover.on('popoverClose', function () {\n      if (popover.params.closeByOutsideClick || popover.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n    });\n    $el[0].f7Modal = popover;\n    return popover || _assertThisInitialized(_this);\n  }\n\n  var _proto = Popover.prototype;\n\n  _proto.resize = function resize() {\n    var popover = this;\n    var app = popover.app,\n        $el = popover.$el,\n        $targetEl = popover.$targetEl,\n        $angleEl = popover.$angleEl;\n    var _popover$params = popover.params,\n        targetX = _popover$params.targetX,\n        targetY = _popover$params.targetY;\n    $el.css({\n      left: '',\n      top: ''\n    });\n    var _ref = [$el.width(), $el.height()],\n        width = _ref[0],\n        height = _ref[1];\n    var angleSize = 0;\n    var angleLeft;\n    var angleTop;\n\n    if (app.theme === 'ios' || app.theme === 'aurora') {\n      $angleEl.removeClass('on-left on-right on-top on-bottom').css({\n        left: '',\n        top: ''\n      });\n      angleSize = $angleEl.width() / 2;\n    } else {\n      $el.removeClass('popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle').css({\n        left: '',\n        top: ''\n      });\n    }\n\n    var targetWidth;\n    var targetHeight;\n    var targetOffsetLeft;\n    var targetOffsetTop;\n    var safeAreaTop = parseInt($('html').css('--f7-safe-area-top'), 10);\n    var safeAreaLeft = parseInt($('html').css('--f7-safe-area-left'), 10);\n    var safeAreaRight = parseInt($('html').css('--f7-safe-area-right'), 10);\n    if (Number.isNaN(safeAreaTop)) safeAreaTop = 0;\n    if (Number.isNaN(safeAreaLeft)) safeAreaLeft = 0;\n    if (Number.isNaN(safeAreaRight)) safeAreaRight = 0;\n\n    if ($targetEl && $targetEl.length > 0) {\n      targetWidth = $targetEl.outerWidth();\n      targetHeight = $targetEl.outerHeight();\n      var targetOffset = $targetEl.offset();\n      targetOffsetLeft = targetOffset.left - app.left;\n      targetOffsetTop = targetOffset.top - app.top;\n      var targetParentPage = $targetEl.parents('.page');\n\n      if (targetParentPage.length > 0) {\n        targetOffsetTop -= targetParentPage[0].scrollTop;\n      }\n    } else if (typeof targetX !== 'undefined' && targetY !== 'undefined') {\n      targetOffsetLeft = targetX;\n      targetOffsetTop = targetY;\n      targetWidth = popover.params.targetWidth || 0;\n      targetHeight = popover.params.targetHeight || 0;\n    }\n\n    var left = 0,\n        top = 0,\n        diff = 0; // Top Position\n\n    var position = app.theme === 'md' ? 'bottom' : 'top';\n\n    if (app.theme === 'md') {\n      if (height < app.height - targetOffsetTop - targetHeight) {\n        // On bottom\n        position = 'bottom';\n        top = targetOffsetTop + targetHeight;\n      } else if (height < targetOffsetTop - safeAreaTop) {\n        // On top\n        top = targetOffsetTop - height;\n        position = 'top';\n      } else {\n        // On middle\n        position = 'middle';\n        top = targetHeight / 2 + targetOffsetTop - height / 2;\n      }\n\n      top = Math.max(8, Math.min(top, app.height - height - 8)); // Horizontal Position\n\n      var hPosition;\n\n      if (targetOffsetLeft < app.width / 2) {\n        hPosition = 'right';\n        left = position === 'middle' ? targetOffsetLeft + targetWidth : targetOffsetLeft;\n      } else {\n        hPosition = 'left';\n        left = position === 'middle' ? targetOffsetLeft - width : targetOffsetLeft + targetWidth - width;\n      }\n\n      left = Math.max(8, Math.min(left, app.width - width - 8 - safeAreaRight), safeAreaLeft);\n      $el.addClass(\"popover-on-\" + position + \" popover-on-\" + hPosition);\n    } else {\n      // ios and aurora\n      if (height + angleSize < targetOffsetTop - safeAreaTop) {\n        // On top\n        top = targetOffsetTop - height - angleSize;\n      } else if (height + angleSize < app.height - targetOffsetTop - targetHeight) {\n        // On bottom\n        position = 'bottom';\n        top = targetOffsetTop + targetHeight + angleSize;\n      } else {\n        // On middle\n        position = 'middle';\n        top = targetHeight / 2 + targetOffsetTop - height / 2;\n        diff = top;\n        top = Math.max(5, Math.min(top, app.height - height - 5));\n        diff -= top;\n      } // Horizontal Position\n\n\n      if (position === 'top' || position === 'bottom') {\n        left = targetWidth / 2 + targetOffsetLeft - width / 2;\n        diff = left;\n        left = Math.max(5, Math.min(left, app.width - width - 5));\n\n        if (safeAreaLeft) {\n          left = Math.max(left, safeAreaLeft);\n        }\n\n        if (safeAreaRight && left + width > app.width - 5 - safeAreaRight) {\n          left = app.width - 5 - safeAreaRight - width;\n        }\n\n        if (position === 'top') {\n          $angleEl.addClass('on-bottom');\n        }\n\n        if (position === 'bottom') {\n          $angleEl.addClass('on-top');\n        }\n\n        diff -= left;\n        angleLeft = width / 2 - angleSize + diff;\n        angleLeft = Math.max(Math.min(angleLeft, width - angleSize * 2 - 13), 13);\n        $angleEl.css({\n          left: angleLeft + \"px\"\n        });\n      } else if (position === 'middle') {\n        left = targetOffsetLeft - width - angleSize;\n        $angleEl.addClass('on-right');\n\n        if (left < 5 || left + width + safeAreaRight > app.width || left < safeAreaLeft) {\n          if (left < 5) left = targetOffsetLeft + targetWidth + angleSize;\n          if (left + width + safeAreaRight > app.width) left = app.width - width - 5 - safeAreaRight;\n          if (left < safeAreaLeft) left = safeAreaLeft;\n          $angleEl.removeClass('on-right').addClass('on-left');\n        }\n\n        angleTop = height / 2 - angleSize + diff;\n        angleTop = Math.max(Math.min(angleTop, height - angleSize * 2 - 13), 13);\n        $angleEl.css({\n          top: angleTop + \"px\"\n        });\n      }\n    } // Apply Styles\n\n\n    $el.css({\n      top: top + \"px\",\n      left: left + \"px\"\n    });\n  };\n\n  return Popover;\n}(Modal);\n\nexport default Popover;"]},"metadata":{},"sourceType":"module"}