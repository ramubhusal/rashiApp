{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, now, nextTick } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n\nvar Popup = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Popup, _Modal);\n\n  function Popup(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.popup, params); // Extends with open/close Modal methods;\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var popup = _assertThisInitialized(_this);\n\n    var window = getWindow();\n    var document = getDocument();\n    var support = getSupport();\n    var device = getDevice();\n    popup.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!popup.params.el) {\n      $el = $(popup.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(popup.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    }\n\n    if ($el.length === 0) {\n      return popup.destroy() || _assertThisInitialized(_this);\n    }\n\n    var $backdropEl;\n\n    if (popup.params.backdrop && popup.params.backdropEl) {\n      $backdropEl = $(popup.params.backdropEl);\n    } else if (popup.params.backdrop) {\n      $backdropEl = popup.$containerEl.children('.popup-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popup-backdrop\"></div>');\n        popup.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(popup, {\n      app: app,\n      push: $el.hasClass('popup-push') || popup.params.push,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popup',\n      $htmlEl: $('html')\n    });\n\n    if (popup.params.push) {\n      $el.addClass('popup-push');\n    }\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popup.el).length === 0) {\n        if (popup.params && popup.params.closeByBackdropClick && popup.params.backdrop && popup.backdropEl && popup.backdropEl === target) {\n          var needToClose = true;\n          popup.$el.nextAll('.popup.modal-in').each(function (popupEl) {\n            var popupInstance = popupEl.f7Modal;\n            if (!popupInstance) return;\n\n            if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === popup.backdropEl) {\n              needToClose = false;\n            }\n          });\n\n          if (needToClose) {\n            popup.close();\n          }\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && popup.params.closeOnEscape) {\n        popup.close();\n      }\n    }\n\n    var pushOffset;\n    var isPush;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    var allowSwipeToClose = true;\n    var isTouched = false;\n    var startTouch;\n    var currentTouch;\n    var isScrolling;\n    var touchStartTime;\n    var touchesDiff;\n    var isMoved = false;\n    var pageContentEl;\n    var pageContentScrollTop;\n    var pageContentOffsetHeight;\n    var pageContentScrollHeight;\n    var popupHeight;\n    var $pushEl;\n\n    function handleTouchStart(e) {\n      if (isTouched || !allowSwipeToClose || !popup.params.swipeToClose) return;\n\n      if (popup.params.swipeHandler && $(e.target).closest(popup.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n\n      if (!popup.params.swipeHandler && e.type === 'touchstart') {\n        pageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n\n      if (isPush && pushOffset && touchesDiff > 0) {\n        touchesDiff = 0;\n      }\n\n      var direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      $el.transition(0);\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        $el.transition('');\n        return;\n      }\n\n      if (!isMoved) {\n        if (isPush && pushOffset) {\n          popupHeight = $el[0].offsetHeight;\n          $pushEl = $el.prevAll('.popup.modal-in').eq(0);\n\n          if ($pushEl.length === 0) {\n            $pushEl = app.$el.children('.view, .views');\n          }\n        }\n\n        if (pageContentEl) {\n          pageContentScrollTop = pageContentEl.scrollTop;\n          pageContentScrollHeight = pageContentEl.scrollHeight;\n          pageContentOffsetHeight = pageContentEl.offsetHeight;\n\n          if (!(pageContentScrollHeight === pageContentOffsetHeight) && !(direction === 'to-bottom' && pageContentScrollTop === 0) && !(direction === 'to-top' && pageContentScrollTop === pageContentScrollHeight - pageContentOffsetHeight)) {\n            $el.transform('');\n            $el.transition('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        isMoved = true;\n        popup.emit('local::swipeStart popupSwipeStart', popup);\n        popup.$el.trigger('popup:swipestart');\n      } else {\n        popup.emit('local::swipeMove popupSwipeMove', popup);\n        popup.$el.trigger('popup:swipemove');\n      }\n\n      e.preventDefault();\n\n      if (isPush && pushOffset) {\n        var pushProgress = 1 - Math.abs(touchesDiff / popupHeight);\n        var scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n\n        if ($pushEl.hasClass('popup')) {\n          if ($pushEl.hasClass('popup-push')) {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, calc(-1 * \" + pushProgress + \" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale(\" + scale + \")\", 'important');\n            });\n          } else {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, 0px , 0px) scale(\" + scale + \")\", 'important');\n            });\n          }\n        } else {\n          $pushEl.transition(0).forEach(function (el) {\n            el.style.setProperty('transform', \"translate3d(0,0,0) scale(\" + scale + \")\", 'important');\n          });\n        }\n      }\n\n      $el.transition(0).transform(\"translate3d(0,\" + -touchesDiff + \"px,0)\");\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      popup.emit('local::swipeEnd popupSwipeEnd', popup);\n      popup.$el.trigger('popup:swipeend');\n      isMoved = false;\n      allowSwipeToClose = false;\n      $el.transition('');\n\n      if (isPush && pushOffset) {\n        $pushEl.transition('').transform('');\n      }\n\n      var direction = touchesDiff <= 0 ? 'to-bottom' : 'to-top';\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        allowSwipeToClose = true;\n        return;\n      }\n\n      var diff = Math.abs(touchesDiff);\n      var timeDiff = new Date().getTime() - touchStartTime;\n\n      if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n        nextTick(function () {\n          if (direction === 'to-bottom') {\n            $el.addClass('swipe-close-to-bottom');\n          } else {\n            $el.addClass('swipe-close-to-top');\n          }\n\n          $el.transform('');\n          popup.emit('local::swipeclose popupSwipeClose', popup);\n          popup.$el.trigger('popup:swipeclose');\n          popup.close();\n          allowSwipeToClose = true;\n        });\n        return;\n      }\n\n      allowSwipeToClose = true;\n      $el.transform('');\n    }\n\n    var passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (popup.params.swipeToClose) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      popup.once('popupDestroy', function () {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    var hasPreviousPushPopup;\n\n    var updatePushOffset = function updatePushOffset() {\n      var wasPush = isPush;\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush && !wasPush) {\n        // eslint-disable-next-line\n        setPushOffset();\n      } else if (isPush && wasPush) {\n        popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n      } else if (!isPush && wasPush) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    };\n\n    var setPushOffset = function setPushOffset() {\n      app.off('resize', updatePushOffset);\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush) {\n        pushOffset = parseInt($el.css('--f7-popup-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('popup-push');\n          popup.$htmlEl.addClass('with-modal-popup-push');\n          popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n        }\n      }\n\n      app.on('resize', updatePushOffset);\n    };\n\n    popup.on('open', function () {\n      hasPreviousPushPopup = false;\n\n      if (popup.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n      setPushOffset();\n    });\n    popup.on('opened', function () {\n      $el.removeClass('swipe-close-to-bottom swipe-close-to-top');\n\n      if (popup.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popup.on('close', function () {\n      hasPreviousPushPopup = popup.$el.prevAll('.popup-push.modal-in').length > 0;\n\n      if (popup.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (popup.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl.addClass('with-modal-popup-push-closing');\n      }\n\n      app.off('resize', updatePushOffset);\n    });\n    popup.on('closed', function () {\n      $el.removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push-closing');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    });\n    $el[0].f7Modal = popup;\n    return popup || _assertThisInitialized(_this);\n  }\n\n  return Popup;\n}(Modal);\n\nexport default Popup;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/popup/popup-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getWindow","getDocument","$","extend","now","nextTick","getSupport","getDevice","Modal","Popup","_Modal","app","params","_this","extendedParams","on","popup","call","window","document","support","device","$el","el","content","filter","node","nodeType","eq","length","f7Modal","destroy","$backdropEl","backdrop","backdropEl","$containerEl","children","append","push","hasClass","type","$htmlEl","addClass","handleClick","e","target","$target","keyboardOpened","desktop","cordova","Keyboard","isVisible","plugins","closest","closeByBackdropClick","needToClose","nextAll","each","popupEl","popupInstance","close","onKeyDown","keyCode","closeOnEscape","pushOffset","isPush","pushViewScale","offset","height","allowSwipeToClose","isTouched","startTouch","currentTouch","isScrolling","touchStartTime","touchesDiff","isMoved","pageContentEl","pageContentScrollTop","pageContentOffsetHeight","pageContentScrollHeight","popupHeight","$pushEl","handleTouchStart","swipeToClose","swipeHandler","x","targetTouches","pageX","y","pageY","undefined","handleTouchMove","Math","abs","direction","transition","transform","offsetHeight","prevAll","scrollTop","scrollHeight","emit","trigger","preventDefault","pushProgress","scale","forEach","style","setProperty","handleTouchEnd","diff","timeDiff","Date","getTime","passive","passiveListener","touchEvents","start","once","off","hasPreviousPushPopup","updatePushOffset","wasPush","width","setPushOffset","removeClass","removeProperty","parseInt","css","Number","isNaN"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, now, nextTick } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport Modal from '../modal/modal-class';\n\nvar Popup = /*#__PURE__*/function (_Modal) {\n  _inheritsLoose(Popup, _Modal);\n\n  function Popup(app, params) {\n    var _this;\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.popup, params); // Extends with open/close Modal methods;\n\n    _this = _Modal.call(this, app, extendedParams) || this;\n\n    var popup = _assertThisInitialized(_this);\n\n    var window = getWindow();\n    var document = getDocument();\n    var support = getSupport();\n    var device = getDevice();\n    popup.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!popup.params.el) {\n      $el = $(popup.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(popup.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal || _assertThisInitialized(_this);\n    }\n\n    if ($el.length === 0) {\n      return popup.destroy() || _assertThisInitialized(_this);\n    }\n\n    var $backdropEl;\n\n    if (popup.params.backdrop && popup.params.backdropEl) {\n      $backdropEl = $(popup.params.backdropEl);\n    } else if (popup.params.backdrop) {\n      $backdropEl = popup.$containerEl.children('.popup-backdrop');\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popup-backdrop\"></div>');\n        popup.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(popup, {\n      app: app,\n      push: $el.hasClass('popup-push') || popup.params.push,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popup',\n      $htmlEl: $('html')\n    });\n\n    if (popup.params.push) {\n      $el.addClass('popup-push');\n    }\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popup.el).length === 0) {\n        if (popup.params && popup.params.closeByBackdropClick && popup.params.backdrop && popup.backdropEl && popup.backdropEl === target) {\n          var needToClose = true;\n          popup.$el.nextAll('.popup.modal-in').each(function (popupEl) {\n            var popupInstance = popupEl.f7Modal;\n            if (!popupInstance) return;\n\n            if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === popup.backdropEl) {\n              needToClose = false;\n            }\n          });\n\n          if (needToClose) {\n            popup.close();\n          }\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && popup.params.closeOnEscape) {\n        popup.close();\n      }\n    }\n\n    var pushOffset;\n    var isPush;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    var allowSwipeToClose = true;\n    var isTouched = false;\n    var startTouch;\n    var currentTouch;\n    var isScrolling;\n    var touchStartTime;\n    var touchesDiff;\n    var isMoved = false;\n    var pageContentEl;\n    var pageContentScrollTop;\n    var pageContentOffsetHeight;\n    var pageContentScrollHeight;\n    var popupHeight;\n    var $pushEl;\n\n    function handleTouchStart(e) {\n      if (isTouched || !allowSwipeToClose || !popup.params.swipeToClose) return;\n\n      if (popup.params.swipeHandler && $(e.target).closest(popup.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n\n      if (!popup.params.swipeHandler && e.type === 'touchstart') {\n        pageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n\n      if (isPush && pushOffset && touchesDiff > 0) {\n        touchesDiff = 0;\n      }\n\n      var direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      $el.transition(0);\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        $el.transition('');\n        return;\n      }\n\n      if (!isMoved) {\n        if (isPush && pushOffset) {\n          popupHeight = $el[0].offsetHeight;\n          $pushEl = $el.prevAll('.popup.modal-in').eq(0);\n\n          if ($pushEl.length === 0) {\n            $pushEl = app.$el.children('.view, .views');\n          }\n        }\n\n        if (pageContentEl) {\n          pageContentScrollTop = pageContentEl.scrollTop;\n          pageContentScrollHeight = pageContentEl.scrollHeight;\n          pageContentOffsetHeight = pageContentEl.offsetHeight;\n\n          if (!(pageContentScrollHeight === pageContentOffsetHeight) && !(direction === 'to-bottom' && pageContentScrollTop === 0) && !(direction === 'to-top' && pageContentScrollTop === pageContentScrollHeight - pageContentOffsetHeight)) {\n            $el.transform('');\n            $el.transition('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        isMoved = true;\n        popup.emit('local::swipeStart popupSwipeStart', popup);\n        popup.$el.trigger('popup:swipestart');\n      } else {\n        popup.emit('local::swipeMove popupSwipeMove', popup);\n        popup.$el.trigger('popup:swipemove');\n      }\n\n      e.preventDefault();\n\n      if (isPush && pushOffset) {\n        var pushProgress = 1 - Math.abs(touchesDiff / popupHeight);\n        var scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n\n        if ($pushEl.hasClass('popup')) {\n          if ($pushEl.hasClass('popup-push')) {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, calc(-1 * \" + pushProgress + \" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale(\" + scale + \")\", 'important');\n            });\n          } else {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, 0px , 0px) scale(\" + scale + \")\", 'important');\n            });\n          }\n        } else {\n          $pushEl.transition(0).forEach(function (el) {\n            el.style.setProperty('transform', \"translate3d(0,0,0) scale(\" + scale + \")\", 'important');\n          });\n        }\n      }\n\n      $el.transition(0).transform(\"translate3d(0,\" + -touchesDiff + \"px,0)\");\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      popup.emit('local::swipeEnd popupSwipeEnd', popup);\n      popup.$el.trigger('popup:swipeend');\n      isMoved = false;\n      allowSwipeToClose = false;\n      $el.transition('');\n\n      if (isPush && pushOffset) {\n        $pushEl.transition('').transform('');\n      }\n\n      var direction = touchesDiff <= 0 ? 'to-bottom' : 'to-top';\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        allowSwipeToClose = true;\n        return;\n      }\n\n      var diff = Math.abs(touchesDiff);\n      var timeDiff = new Date().getTime() - touchStartTime;\n\n      if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n        nextTick(function () {\n          if (direction === 'to-bottom') {\n            $el.addClass('swipe-close-to-bottom');\n          } else {\n            $el.addClass('swipe-close-to-top');\n          }\n\n          $el.transform('');\n          popup.emit('local::swipeclose popupSwipeClose', popup);\n          popup.$el.trigger('popup:swipeclose');\n          popup.close();\n          allowSwipeToClose = true;\n        });\n        return;\n      }\n\n      allowSwipeToClose = true;\n      $el.transform('');\n    }\n\n    var passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (popup.params.swipeToClose) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      popup.once('popupDestroy', function () {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    var hasPreviousPushPopup;\n\n    var updatePushOffset = function updatePushOffset() {\n      var wasPush = isPush;\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush && !wasPush) {\n        // eslint-disable-next-line\n        setPushOffset();\n      } else if (isPush && wasPush) {\n        popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n      } else if (!isPush && wasPush) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    };\n\n    var setPushOffset = function setPushOffset() {\n      app.off('resize', updatePushOffset);\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush) {\n        pushOffset = parseInt($el.css('--f7-popup-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('popup-push');\n          popup.$htmlEl.addClass('with-modal-popup-push');\n          popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n        }\n      }\n\n      app.on('resize', updatePushOffset);\n    };\n\n    popup.on('open', function () {\n      hasPreviousPushPopup = false;\n\n      if (popup.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n      setPushOffset();\n    });\n    popup.on('opened', function () {\n      $el.removeClass('swipe-close-to-bottom swipe-close-to-top');\n\n      if (popup.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popup.on('close', function () {\n      hasPreviousPushPopup = popup.$el.prevAll('.popup-push.modal-in').length > 0;\n\n      if (popup.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (popup.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl.addClass('with-modal-popup-push-closing');\n      }\n\n      app.off('resize', updatePushOffset);\n    });\n    popup.on('closed', function () {\n      $el.removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push-closing');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    });\n    $el[0].f7Modal = popup;\n    return popup || _assertThisInitialized(_this);\n  }\n\n  return Popup;\n}(Modal);\n\nexport default Popup;"]},"metadata":{},"sourceType":"module"}