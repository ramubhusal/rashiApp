{"ast":null,"code":"function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport $ from '../../shared/dom7';\nimport { getDevice } from '../../shared/get-device';\nimport { getSupport } from '../../shared/get-support';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Calendar = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Calendar, _Framework7Class);\n\n  function Calendar(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var calendar = _assertThisInitialized(_this);\n\n    calendar.params = extend({}, app.params.calendar, params);\n    var $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return calendar || _assertThisInitialized(_this);\n    }\n\n    var $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    var isHorizontal = calendar.params.direction === 'horizontal';\n    var inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app: app,\n      $containerEl: $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal: isHorizontal,\n      inverter: inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n    calendar.dayFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      day: 'numeric'\n    });\n    calendar.monthFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      month: 'long'\n    });\n    calendar.yearFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      year: 'numeric'\n    });\n    calendar.timeSelectorFormatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n    var timeFormatCheckDate = calendar.timeSelectorFormatter.format(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    var _calendar$params = calendar.params,\n        monthNames = _calendar$params.monthNames,\n        monthNamesShort = _calendar$params.monthNamesShort,\n        dayNames = _calendar$params.dayNames,\n        dayNamesShort = _calendar$params.dayNamesShort;\n\n    var _calendar$getIntlName = calendar.getIntlNames(),\n        monthNamesIntl = _calendar$getIntlName.monthNamesIntl,\n        monthNamesShortIntl = _calendar$getIntlName.monthNamesShortIntl,\n        dayNamesIntl = _calendar$getIntlName.dayNamesIntl,\n        dayNamesShortIntl = _calendar$getIntlName.dayNamesShortIntl;\n\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames: monthNames,\n      monthNamesShort: monthNamesShort,\n      dayNames: dayNames,\n      dayNamesShort: dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      var $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents: function attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n      detachInputEvents: function detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n      attachHtmlEvents: function attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n      detachHtmlEvents: function detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      var allowItemClick = true;\n      var isTouched;\n      var isMoved;\n      var touchStartX;\n      var touchStartY;\n      var touchCurrentX;\n      var touchCurrentY;\n      var touchStartTime;\n      var touchEndTime;\n      var currentTranslate;\n      var wrapperWidth;\n      var wrapperHeight;\n      var percentage;\n      var touchesDiff;\n      var isScrolling;\n      var $el = calendar.$el,\n          $wrapperEl = calendar.$wrapperEl;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        var isH = calendar.isHorizontal;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(\"translate3d(\" + (isH ? currentTranslate : 0) + \"%, \" + (isH ? 0 : currentTranslate) + \"%, 0)\");\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(function () {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        var $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        var dateYear = parseInt($dayEl.attr('data-year'), 10);\n        var dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        var dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          var valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        $el.append(calendar.renderMonthPicker());\n      }\n\n      function onMonthSelectorItemClick() {\n        var $clickedEl = $(this);\n\n        if ($clickedEl.hasClass('calendar-month-picker-item-current')) {\n          $el.find('.calendar-month-picker').remove();\n          return;\n        }\n\n        $el.find('.calendar-month-picker-item-current').add($clickedEl).toggleClass('calendar-month-picker-item-current');\n        var index = $clickedEl.index();\n        var localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n        var monthIndex = calendar.currentMonth;\n        var diff = localeMonthIndex - monthIndex;\n        var diffIndex = index - diff;\n        calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n        setTimeout(function () {\n          $el.find('.calendar-month-picker').remove();\n        }, 200);\n      }\n\n      function onYearSelectorClick() {\n        $el.append(calendar.renderYearPicker());\n        var $currentEl = $el.find('.calendar-year-picker-item-current');\n        var $yearPickerEl = $el.find('.calendar-year-picker');\n        if (!$currentEl || !$currentEl.length) return;\n        $yearPickerEl.scrollTop($currentEl[0].offsetTop - $yearPickerEl[0].offsetHeight / 2 + $currentEl[0].offsetHeight / 2);\n      }\n\n      function onYearSelectorItemClick() {\n        var $clickedEl = $(this);\n\n        if ($clickedEl.hasClass('calendar-year-picker-item-current')) {\n          $el.find('.calendar-year-picker').remove();\n          return;\n        }\n\n        $el.find('.calendar-year-picker-item-current').add($clickedEl).toggleClass('calendar-year-picker-item-current');\n        var year = parseInt($clickedEl.attr('data-year'), 10);\n        calendar.setYearMonth(year, undefined, 0);\n        setTimeout(function () {\n          $el.find('.calendar-year-picker').remove();\n        }, 200);\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      function onTimePickerCloseClick() {\n        calendar.closeTimePicker();\n      }\n\n      var passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n        $el.on('click', '.calendar-month-picker-item', onMonthSelectorItemClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n        $el.on('click', '.calendar-year-picker-item', onYearSelectorItemClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n        $el.on('click', '.calendar-time-picker-close', onTimePickerCloseClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n          $el.off('click', '.calendar-month-picker-item', onMonthSelectorItemClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n          $el.off('click', '.calendar-year-picker-item', onYearSelectorItemClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n          $el.off('click', '.calendar-time-picker-close', onTimePickerCloseClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return calendar || _assertThisInitialized(_this);\n  }\n\n  var _proto = Calendar.prototype;\n\n  _proto.getIntlNames = function getIntlNames() {\n    var calendar = this;\n    var locale = calendar.params.locale;\n    var monthNamesIntl = [];\n    var monthNamesShortIntl = [];\n    var dayNamesIntl = [];\n    var dayNamesShortIntl = [];\n    var formatterMonthNames = new Intl.DateTimeFormat(locale, {\n      month: 'long'\n    });\n    var formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n      month: 'short'\n    });\n    var formatterDayNames = new Intl.DateTimeFormat(locale, {\n      weekday: 'long'\n    });\n    var formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n      weekday: 'short'\n    });\n    var year;\n    var yearStarted;\n    var yearEnded;\n\n    for (var i = 0; i < 24; i += 1) {\n      var date = new Date().setMonth(i, 1);\n      var currentYear = calendar.yearFormatter.format(date);\n\n      if (year && currentYear !== year) {\n        if (yearStarted) yearEnded = true;\n        yearStarted = true;\n        year = currentYear;\n      }\n\n      if (!year) {\n        year = currentYear;\n      }\n\n      if (yearStarted && year === currentYear && !yearEnded) {\n        monthNamesIntl.push(formatterMonthNames.format(date));\n        monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n      }\n    }\n\n    var weekDay = new Date().getDay();\n\n    for (var _i = 0; _i < 7; _i += 1) {\n      var _date = new Date().getTime() + (_i - weekDay) * 24 * 60 * 60 * 1000;\n\n      dayNamesIntl.push(formatterDayNames.format(_date));\n      dayNamesShortIntl.push(formatterDayNamesShort.format(_date));\n    }\n\n    return {\n      monthNamesIntl: monthNamesIntl,\n      monthNamesShortIntl: monthNamesShortIntl,\n      dayNamesIntl: dayNamesIntl,\n      dayNamesShortIntl: dayNamesShortIntl\n    };\n  };\n\n  _proto.normalizeDate = function normalizeDate(date) {\n    var calendar = this;\n    var d = new Date(date);\n\n    if (calendar.hasTimePicker) {\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n    }\n\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  };\n\n  _proto.normalizeValues = function normalizeValues(values) {\n    var calendar = this;\n    var newValues = [];\n\n    if (values && Array.isArray(values)) {\n      newValues = values.map(function (val) {\n        return calendar.normalizeDate(val);\n      });\n    }\n\n    return newValues;\n  };\n\n  _proto.initInput = function initInput() {\n    var calendar = this;\n    if (!calendar.$inputEl) return;\n    if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n  };\n\n  _proto.isPopover = function isPopover() {\n    var calendar = this;\n    var app = calendar.app,\n        modal = calendar.modal,\n        params = calendar.params;\n    var device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!calendar.inline && calendar.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.formatDate = function formatDate(d) {\n    var calendar = this;\n    var date = new Date(d);\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var month1 = month + 1;\n    var day = date.getDate();\n    var weekDay = date.getDay();\n    var monthNames = calendar.monthNames,\n        monthNamesShort = calendar.monthNamesShort,\n        dayNames = calendar.dayNames,\n        dayNamesShort = calendar.dayNamesShort;\n    var _calendar$params2 = calendar.params,\n        dateFormat = _calendar$params2.dateFormat,\n        locale = _calendar$params2.locale;\n\n    function twoDigits(number) {\n      return number < 10 ? \"0\" + number : number;\n    }\n\n    if (typeof dateFormat === 'string') {\n      var tokens = {\n        yyyy: year,\n        yy: String(year).substring(2),\n        mm: twoDigits(month1),\n        m: month1,\n        MM: monthNames[month],\n        M: monthNamesShort[month],\n        dd: twoDigits(day),\n        d: day,\n        DD: dayNames[weekDay],\n        D: dayNamesShort[weekDay]\n      };\n\n      if (calendar.params.timePicker) {\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var seconds = date.getSeconds();\n        var hours12 = hours;\n        if (hours > 12) hours12 = hours - 12;\n        if (hours === 0) hours12 = 12;\n        var a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n        Object.assign(tokens, {\n          HH: twoDigits(hours),\n          H: hours,\n          hh: twoDigits(hours12),\n          h: hours12,\n          ss: twoDigits(seconds),\n          s: seconds,\n          ':mm': twoDigits(minutes),\n          ':m': minutes,\n          a: a,\n          A: a.toUpperCase()\n        });\n      }\n\n      var regexp = new RegExp(Object.keys(tokens).map(function (t) {\n        return \"(\" + t + \")\";\n      }).join('|'), 'g');\n      return dateFormat.replace(regexp, function (token) {\n        if (token in tokens) return tokens[token];\n        return token;\n      });\n    }\n\n    if (typeof dateFormat === 'function') {\n      return dateFormat(date);\n    } // Intl Object\n\n\n    var formatter = new Intl.DateTimeFormat(locale, dateFormat);\n    return formatter.format(date);\n  };\n\n  _proto.formatValue = function formatValue() {\n    var calendar = this;\n    var value = calendar.value;\n\n    if (calendar.params.formatValue) {\n      return calendar.params.formatValue.call(calendar, value);\n    }\n\n    return value.map(function (v) {\n      return calendar.formatDate(v);\n    }).join(calendar.params.rangePicker ? ' - ' : ', ');\n  };\n\n  _proto.addValue = function addValue(newValue) {\n    var calendar = this;\n    var _calendar$params3 = calendar.params,\n        multiple = _calendar$params3.multiple,\n        rangePicker = _calendar$params3.rangePicker,\n        rangePickerMinDays = _calendar$params3.rangePickerMinDays,\n        rangePickerMaxDays = _calendar$params3.rangePickerMaxDays;\n\n    if (multiple) {\n      if (!calendar.value) calendar.value = [];\n      var inValuesIndex;\n\n      for (var i = 0; i < calendar.value.length; i += 1) {\n        if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n          inValuesIndex = i;\n        }\n      }\n\n      if (typeof inValuesIndex === 'undefined') {\n        calendar.value.push(newValue);\n      } else {\n        calendar.value.splice(inValuesIndex, 1);\n      }\n\n      calendar.updateValue();\n    } else if (rangePicker) {\n      if (!calendar.value) calendar.value = [];\n\n      if (calendar.value.length === 2 || calendar.value.length === 0) {\n        calendar.value = [];\n      }\n\n      if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n      calendar.value.sort(function (a, b) {\n        return a - b;\n      });\n      calendar.updateValue();\n    } else {\n      calendar.value = [newValue];\n      calendar.updateValue();\n    }\n  };\n\n  _proto.setValue = function setValue(values) {\n    var calendar = this;\n    var currentValue = calendar.value;\n\n    if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n      var equal = true;\n      currentValue.forEach(function (v, index) {\n        if (v !== values[index]) equal = false;\n      });\n      if (equal) return;\n    }\n\n    calendar.value = values;\n    calendar.updateValue();\n  };\n\n  _proto.getValue = function getValue() {\n    var calendar = this;\n    return calendar.value;\n  };\n\n  _proto.updateValue = function updateValue(onlyHeader) {\n    var calendar = this;\n    var $el = calendar.$el,\n        $wrapperEl = calendar.$wrapperEl,\n        $inputEl = calendar.$inputEl,\n        value = calendar.value,\n        params = calendar.params;\n    var i;\n\n    if ($el && $el.length > 0) {\n      $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n      var valueDate;\n\n      if (params.rangePicker && value.length === 2) {\n        var leftDate = new Date(value[0]).getTime();\n        var rightDate = new Date(value[1]).getTime();\n\n        for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n          valueDate = new Date(i);\n          var addClass = 'calendar-day-selected';\n\n          if (leftDate !== rightDate) {\n            if (i !== leftDate && i !== rightDate) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (i === leftDate) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (i === rightDate) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").addClass(addClass);\n        }\n\n        valueDate = new Date(leftDate);\n        $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n        valueDate = new Date(rightDate);\n        $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n      } else {\n        for (i = 0; i < calendar.value.length; i += 1) {\n          valueDate = new Date(value[i]);\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").addClass('calendar-day-selected');\n        }\n      }\n    }\n\n    if (!onlyHeader) {\n      calendar.emit('local::change calendarChange', calendar, value);\n    }\n\n    if ($el && $el.length > 0 && calendar.hasTimePicker) {\n      $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter.format(value[0]) : calendar.params.timePickerPlaceholder);\n    }\n\n    if ($inputEl && $inputEl.length || params.header) {\n      var inputValue = calendar.formatValue(value);\n\n      if (params.header && $el && $el.length) {\n        $el.find('.calendar-selected-date').text(inputValue);\n      }\n\n      if ($inputEl && $inputEl.length && !onlyHeader) {\n        $inputEl.val(inputValue);\n        $inputEl.trigger('change');\n      }\n    }\n  };\n\n  _proto.updateCurrentMonthYear = function updateCurrentMonthYear(dir) {\n    var calendar = this;\n    var $months = calendar.$months,\n        $el = calendar.$el,\n        monthNames = calendar.monthNames;\n    var currentLocaleMonth;\n    var currentLocaleYear;\n\n    if (typeof dir === 'undefined') {\n      calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n      currentLocaleYear = $months.eq(1).attr('data-locale-year');\n    } else {\n      calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n      currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n    }\n\n    $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n    $el.find('.current-year-value').text(currentLocaleYear);\n  };\n\n  _proto.update = function update() {\n    var calendar = this;\n    var currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth,\n        $wrapperEl = calendar.$wrapperEl;\n    var currentDate = new Date(currentYear, currentMonth);\n    var prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n    var currentMonthHtml = calendar.renderMonth(currentDate);\n    var nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n    $wrapperEl.transition(0).html(\"\" + prevMonthHtml + currentMonthHtml + nextMonthHtml).transform('translate3d(0,0,0)');\n    calendar.$months = $wrapperEl.find('.calendar-month');\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate();\n    calendar.$months.each(function (monthEl) {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    });\n  };\n\n  _proto.onMonthChangeStart = function onMonthChangeStart(dir) {\n    var calendar = this;\n    var $months = calendar.$months,\n        currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth;\n    calendar.updateCurrentMonthYear(dir);\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    var currentIndex = dir === 'next' ? $months.length - 1 : 0;\n    $months.eq(currentIndex).addClass('calendar-month-current');\n    $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n    calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n  };\n\n  _proto.onMonthChangeEnd = function onMonthChangeEnd(dir, rebuildBoth) {\n    var calendar = this;\n    var currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth,\n        $wrapperEl = calendar.$wrapperEl,\n        monthsTranslate = calendar.monthsTranslate;\n    calendar.animating = false;\n    var nextMonthHtml;\n    var prevMonthHtml;\n    var currentMonthHtml;\n    $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n    if (typeof dir === 'undefined') {\n      dir = 'next'; // eslint-disable-line\n\n      rebuildBoth = true; // eslint-disable-line\n    }\n\n    if (!rebuildBoth) {\n      currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n    } else {\n      $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n      prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n      nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n    }\n\n    if (dir === 'next' || rebuildBoth) {\n      $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n    }\n\n    if (dir === 'prev' || rebuildBoth) {\n      $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n    }\n\n    var $months = $wrapperEl.find('.calendar-month');\n    calendar.$months = $months;\n    calendar.setMonthsTranslate(monthsTranslate);\n    calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n    calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n  };\n\n  _proto.setMonthsTranslate = function setMonthsTranslate(translate) {\n    var calendar = this;\n    var $months = calendar.$months,\n        isH = calendar.isHorizontal,\n        inverter = calendar.inverter; // eslint-disable-next-line\n\n    translate = translate || calendar.monthsTranslate || 0;\n\n    if (typeof calendar.monthsTranslate === 'undefined') {\n      calendar.monthsTranslate = translate;\n    }\n\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n    var currentMonthTranslate = -translate * 100 * inverter;\n    var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n    $months.eq(0).transform(\"translate3d(\" + (isH ? prevMonthTranslate : 0) + \"%, \" + (isH ? 0 : prevMonthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n    $months.eq(1).transform(\"translate3d(\" + (isH ? currentMonthTranslate : 0) + \"%, \" + (isH ? 0 : currentMonthTranslate) + \"%, 0)\").addClass('calendar-month-current');\n    $months.eq(2).transform(\"translate3d(\" + (isH ? nextMonthTranslate : 0) + \"%, \" + (isH ? 0 : nextMonthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n  };\n\n  _proto.nextMonth = function nextMonth(transition) {\n    var calendar = this;\n    var params = calendar.params,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    var nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n    var nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n    var nextDate = new Date(nextYear, nextMonth);\n    var nextDateTime = nextDate.getTime();\n    var transitionEndCallback = !calendar.animating;\n\n    if (params.maxDate) {\n      if (nextDateTime > new Date(params.maxDate).getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate -= 1;\n\n    if (nextMonth === calendar.currentMonth) {\n      var nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      var nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(\"translate3d(\" + (isH ? nextMonthTranslate : 0) + \"%, \" + (isH ? 0 : nextMonthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n      $wrapperEl.append(nextMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('next');\n    var translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd('next');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('next');\n    }\n  };\n\n  _proto.prevMonth = function prevMonth(transition) {\n    var calendar = this;\n    var params = calendar.params,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    var prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n    var prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n    var prevDate = new Date(prevYear, prevMonth + 1, -1);\n    var prevDateTime = prevDate.getTime();\n    var transitionEndCallback = !calendar.animating;\n\n    if (params.minDate) {\n      var minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (prevDateTime < minDate.getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate += 1;\n\n    if (prevMonth === calendar.currentMonth) {\n      var prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      var prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(\"translate3d(\" + (isH ? prevMonthTranslate : 0) + \"%, \" + (isH ? 0 : prevMonthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n      $wrapperEl.prepend(prevMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('prev');\n    var translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd('prev');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('prev');\n    }\n  };\n\n  _proto.resetMonth = function resetMonth(transition) {\n    if (transition === void 0) {\n      transition = '';\n    }\n\n    var calendar = this;\n    var $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal,\n        monthsTranslate = calendar.monthsTranslate;\n    var translate = monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n  } // eslint-disable-next-line\n  ;\n\n  _proto.setYearMonth = function setYearMonth(year, month, transition) {\n    var calendar = this;\n    var params = calendar.params,\n        isH = calendar.isHorizontal,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter; // eslint-disable-next-line\n\n    if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n    if (typeof month === 'undefined') month = calendar.currentMonth;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      // eslint-disable-next-line\n      transition = ''; // eslint-disable-next-line\n\n      if (!params.animate) transition = 0;\n    }\n\n    var targetDate;\n\n    if (year < calendar.currentYear) {\n      targetDate = new Date(year, month + 1, -1).getTime();\n    } else {\n      targetDate = new Date(year, month).getTime();\n    }\n\n    if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n      return false;\n    }\n\n    if (params.minDate) {\n      var minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (targetDate < minDate.getTime()) {\n        return false;\n      }\n    }\n\n    var currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n    var dir = targetDate > currentDate ? 'next' : 'prev';\n    var newMonthHTML = calendar.renderMonth(new Date(year, month));\n    calendar.monthsTranslate = calendar.monthsTranslate || 0;\n    var prevTranslate = calendar.monthsTranslate;\n    var monthTranslate;\n    var transitionEndCallback = !calendar.animating && transition !== 0;\n\n    if (targetDate > currentDate) {\n      // To next\n      calendar.monthsTranslate -= 1;\n      if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n      $wrapperEl.append(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n      calendar.$months.eq(calendar.$months.length - 1).transform(\"translate3d(\" + (isH ? monthTranslate : 0) + \"%, \" + (isH ? 0 : monthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n    } else {\n      // To prev\n      calendar.monthsTranslate += 1;\n      if (!calendar.animating) calendar.$months.eq(0).remove();\n      $wrapperEl.prepend(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n      calendar.$months.eq(0).transform(\"translate3d(\" + (isH ? monthTranslate : 0) + \"%, \" + (isH ? 0 : monthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n    }\n\n    calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n    calendar.animating = true;\n    calendar.onMonthChangeStart(dir);\n    var wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? wrapperTranslate : 0) + \"%, \" + (isH ? 0 : wrapperTranslate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd(dir, true);\n      });\n    }\n\n    if (!params.animate || transition === 0) {\n      calendar.onMonthChangeEnd(dir, true);\n    }\n  };\n\n  _proto.nextYear = function nextYear() {\n    var calendar = this;\n    calendar.setYearMonth(calendar.currentYear + 1);\n  };\n\n  _proto.prevYear = function prevYear() {\n    var calendar = this;\n    calendar.setYearMonth(calendar.currentYear - 1);\n  } // eslint-disable-next-line\n  ;\n\n  _proto.dateInRange = function dateInRange(dayDate, range) {\n    var match = false;\n    var i;\n    if (!range) return false;\n\n    if (Array.isArray(range)) {\n      for (i = 0; i < range.length; i += 1) {\n        if (range[i].from || range[i].to) {\n          if (range[i].from && range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].from) {\n            if (dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime()) {\n              match = true;\n            }\n          }\n        } else if (range[i].date) {\n          if (dayDate === new Date(range[i].date).getTime()) {\n            match = true;\n          }\n        } else if (dayDate === new Date(range[i]).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.from || range.to) {\n      if (range.from && range.to) {\n        if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.from) {\n        if (dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.to) {\n        if (dayDate <= new Date(range.to).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.date) {\n      match = dayDate === new Date(range.date).getTime();\n    } else if (typeof range === 'function') {\n      match = range(new Date(dayDate));\n    }\n\n    return match;\n  } // eslint-disable-next-line\n  ;\n\n  _proto.daysInMonth = function daysInMonth(date) {\n    var d = new Date(date);\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n  };\n\n  _proto.renderMonths = function renderMonths(date) {\n    var calendar = this;\n\n    if (calendar.params.renderMonths) {\n      return calendar.params.renderMonths.call(calendar, date);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-months-wrapper\"\n    }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n  };\n\n  _proto.renderMonth = function renderMonth(d, offset) {\n    var calendar = this;\n    var params = calendar.params,\n        value = calendar.value;\n\n    if (params.renderMonth) {\n      return params.renderMonth.call(calendar, d, offset);\n    }\n\n    var date = new Date(d);\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter.format(date));\n    if (localeMonth < 0) localeMonth = month;\n    var localeYear = calendar.yearFormatter.format(date);\n\n    if (offset === 'next') {\n      if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n    }\n\n    if (offset === 'prev') {\n      if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n    }\n\n    if (offset === 'next' || offset === 'prev') {\n      month = date.getMonth();\n      year = date.getFullYear();\n      localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter.format(date));\n      if (localeMonth < 0) localeMonth = month;\n      localeYear = calendar.yearFormatter.format(date);\n    }\n\n    var currentValues = [];\n    var today = new Date().setHours(0, 0, 0, 0);\n    var minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n    var maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n    var rows = 6;\n    var cols = 7;\n    var daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n    var daysInMonth = calendar.daysInMonth(date);\n    var minDayNumber = params.firstDay === 6 ? 0 : 1;\n    var monthHtml = '';\n    var dayIndex = 0 + (params.firstDay - 1);\n    var disabled;\n    var hasEvents;\n    var firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n    if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n    if (value && value.length) {\n      for (var i = 0; i < value.length; i += 1) {\n        currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n      }\n    }\n\n    for (var row = 1; row <= rows; row += 1) {\n      var rowHtml = '';\n\n      var _loop = function _loop(col) {\n        dayIndex += 1;\n        var dayDate = void 0;\n        var dayNumber = dayIndex - firstDayOfMonthIndex;\n        var addClass = '';\n\n        if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n          dayIndex -= 7;\n          dayNumber = dayIndex - firstDayOfMonthIndex;\n        }\n\n        var weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n        if (dayNumber < 0) {\n          dayNumber = daysInPrevMonth + dayNumber + 1;\n          addClass += ' calendar-day-prev';\n          dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n        } else {\n          dayNumber += 1;\n\n          if (dayNumber > daysInMonth) {\n            dayNumber -= daysInMonth;\n            addClass += ' calendar-day-next';\n            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n          } else {\n            dayDate = new Date(year, month, dayNumber).getTime();\n          }\n        } // Today\n\n\n        if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n        if (params.rangePicker && currentValues.length === 2) {\n          if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n            addClass += ' calendar-day-selected';\n          }\n\n          if (currentValues[0] !== currentValues[1]) {\n            if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (dayDate === currentValues[0]) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (dayDate === currentValues[1]) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n        } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n        if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n          addClass += ' calendar-day-weekend';\n        } // Events\n\n\n        var eventsHtml = '';\n        hasEvents = false;\n\n        if (params.events) {\n          if (calendar.dateInRange(dayDate, params.events)) {\n            hasEvents = true;\n          }\n        }\n\n        if (hasEvents) {\n          addClass += ' calendar-day-has-events'; // prettier-ignore\n\n          eventsHtml = \"\\n            <span class=\\\"calendar-day-events\\\">\\n              <span class=\\\"calendar-day-event\\\"></span>\\n            </span>\\n          \";\n\n          if (Array.isArray(params.events)) {\n            var eventDots = [];\n            params.events.forEach(function (ev) {\n              var color = ev.color || '';\n\n              if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                eventDots.push(color);\n              }\n            }); // prettier-ignore\n\n            eventsHtml = \"\\n              <span class=\\\"calendar-day-events\\\">\\n                \" + eventDots.map(function (color) {\n              return (\"\\n                  <span class=\\\"calendar-day-event\\\" style=\\\"\" + (color ? \"background-color: \" + color : '') + \"\\\"></span>\\n                \").trim();\n            }).join('') + \"\\n              </span>\\n            \";\n          }\n        } // Custom Ranges\n\n\n        if (params.rangesClasses) {\n          for (var k = 0; k < params.rangesClasses.length; k += 1) {\n            if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n              addClass += \" \" + params.rangesClasses[k].cssClass;\n            }\n          }\n        } // Disabled\n\n\n        disabled = false;\n\n        if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n          disabled = true;\n        }\n\n        if (params.disabled) {\n          if (calendar.dateInRange(dayDate, params.disabled)) {\n            disabled = true;\n          }\n        }\n\n        if (disabled) {\n          addClass += ' calendar-day-disabled';\n        }\n\n        dayDate = new Date(dayDate);\n        var dayYear = dayDate.getFullYear();\n        var dayMonth = dayDate.getMonth();\n        var dayNumberDisplay = calendar.dayFormatter.format(dayDate); // prettier-ignore\n\n        rowHtml += (\"\\n          <div data-year=\\\"\" + dayYear + \"\\\" data-month=\\\"\" + dayMonth + \"\\\" data-day=\\\"\" + dayNumber + \"\\\" class=\\\"calendar-day\" + addClass + \"\\\" data-date=\\\"\" + dayYear + \"-\" + dayMonth + \"-\" + dayNumber + \"\\\">\\n            <span class=\\\"calendar-day-number\\\">\" + dayNumberDisplay + eventsHtml + \"</span>\\n          </div>\").trim();\n      };\n\n      for (var col = 1; col <= cols; col += 1) {\n        _loop(col);\n      }\n\n      monthHtml += \"<div class=\\\"calendar-row\\\">\" + rowHtml + \"</div>\";\n    }\n\n    monthHtml = \"<div class=\\\"calendar-month\\\" data-year=\\\"\" + year + \"\\\" data-month=\\\"\" + month + \"\\\" data-locale-year=\\\"\" + localeYear + \"\\\" data-locale-month=\\\"\" + localeMonth + \"\\\">\" + monthHtml + \"</div>\";\n    return monthHtml;\n  };\n\n  _proto.renderWeekHeader = function renderWeekHeader() {\n    var calendar = this;\n\n    if (calendar.params.renderWeekHeader) {\n      return calendar.params.renderWeekHeader.call(calendar);\n    }\n\n    var params = calendar.params;\n    var weekDaysHtml = '';\n\n    for (var i = 0; i < 7; i += 1) {\n      var dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n      var dayName = calendar.dayNamesShort[dayIndex];\n      weekDaysHtml += \"<div class=\\\"calendar-week-day\\\">\" + dayName + \"</div>\";\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-week-header\"\n    }, weekDaysHtml);\n  };\n\n  _proto.renderMonthSelector = function renderMonthSelector() {\n    var calendar = this;\n\n    if (calendar.params.renderMonthSelector) {\n      return calendar.params.renderMonthSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-month-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.monthPicker ? $jsx(\"a\", {\n      class: \"current-month-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-month-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  };\n\n  _proto.renderMonthPicker = function renderMonthPicker() {\n    var calendar = this;\n    var localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    return $jsx(\"div\", {\n      class: \"calendar-month-picker\"\n    }, calendar.monthNames.map(function (m, index) {\n      return $jsx(\"div\", {\n        class: \"calendar-month-picker-item \" + (localeMonth === index ? 'calendar-month-picker-item-current' : '')\n      }, $jsx(\"span\", null, m));\n    }));\n  };\n\n  _proto.renderYearSelector = function renderYearSelector() {\n    var calendar = this;\n\n    if (calendar.params.renderYearSelector) {\n      return calendar.params.renderYearSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.yearPicker ? $jsx(\"a\", {\n      class: \"current-year-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-year-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  };\n\n  _proto.renderYearPicker = function renderYearPicker() {\n    var calendar = this;\n    var currentYear = calendar.currentYear;\n    var yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n    if (calendar.params.minDate) {\n      yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n    }\n\n    var yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n    if (calendar.params.maxDate) {\n      yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n    }\n\n    var years = [];\n\n    for (var i = yearMin; i <= yearMax; i += 1) {\n      years.push(i);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-picker\"\n    }, years.map(function (year) {\n      return $jsx(\"div\", {\n        \"data-year\": year,\n        class: \"calendar-year-picker-item \" + (year === currentYear ? 'calendar-year-picker-item-current' : '')\n      }, $jsx(\"span\", null, calendar.yearFormatter.format(new Date().setFullYear(year))));\n    }));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderTimeSelector = function renderTimeSelector() {\n    var calendar = this;\n    var value = calendar.value && calendar.value[0];\n    var timeString;\n    if (value) timeString = calendar.timeSelectorFormatter.format(value);\n    return $jsx(\"div\", {\n      class: \"calendar-time-selector\"\n    }, $jsx(\"a\", {\n      class: \"link\"\n    }, timeString || calendar.params.timePickerPlaceholder));\n  };\n\n  _proto.renderHeader = function renderHeader() {\n    var calendar = this;\n\n    if (calendar.params.renderHeader) {\n      return calendar.params.renderHeader.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-header\"\n    }, $jsx(\"div\", {\n      class: \"calendar-selected-date\"\n    }, calendar.params.headerPlaceholder));\n  };\n\n  _proto.renderFooter = function renderFooter() {\n    var calendar = this;\n    var app = calendar.app;\n\n    if (calendar.params.renderFooter) {\n      return calendar.params.renderFooter.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-footer\"\n    }, $jsx(\"a\", {\n      class: (app.theme === 'md' ? 'button' : 'link') + \" calendar-close sheet-close popover-close\"\n    }, calendar.params.toolbarCloseText));\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var calendar = this;\n\n    if (calendar.params.renderToolbar) {\n      return calendar.params.renderToolbar.call(calendar, calendar);\n    } // prettier-ignore\n\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderInline = function renderInline() {\n    var calendar = this;\n    var _calendar$params4 = calendar.params,\n        cssClass = _calendar$params4.cssClass,\n        toolbar = _calendar$params4.toolbar,\n        header = _calendar$params4.header,\n        footer = _calendar$params4.footer,\n        rangePicker = _calendar$params4.rangePicker,\n        weekHeader = _calendar$params4.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"calendar calendar-inline \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderCustomModal = function renderCustomModal() {\n    var calendar = this;\n    var _calendar$params5 = calendar.params,\n        cssClass = _calendar$params5.cssClass,\n        toolbar = _calendar$params5.toolbar,\n        header = _calendar$params5.header,\n        footer = _calendar$params5.footer,\n        rangePicker = _calendar$params5.rangePicker,\n        weekHeader = _calendar$params5.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"calendar calendar-modal \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderSheet = function renderSheet() {\n    var calendar = this;\n    var _calendar$params6 = calendar.params,\n        cssClass = _calendar$params6.cssClass,\n        toolbar = _calendar$params6.toolbar,\n        header = _calendar$params6.header,\n        footer = _calendar$params6.footer,\n        rangePicker = _calendar$params6.rangePicker,\n        weekHeader = _calendar$params6.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"sheet-modal calendar calendar-sheet \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"sheet-modal-inner calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderPopover = function renderPopover() {\n    var calendar = this;\n    var _calendar$params7 = calendar.params,\n        cssClass = _calendar$params7.cssClass,\n        toolbar = _calendar$params7.toolbar,\n        header = _calendar$params7.header,\n        footer = _calendar$params7.footer,\n        rangePicker = _calendar$params7.rangePicker,\n        weekHeader = _calendar$params7.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"popover calendar-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: \"calendar \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n  };\n\n  _proto.render = function render() {\n    var calendar = this;\n    var params = calendar.params;\n    if (params.render) return params.render.call(calendar);\n\n    if (!calendar.inline) {\n      var modalType = params.openIn;\n      if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      if (modalType === 'popover') return calendar.renderPopover();\n      if (modalType === 'sheet') return calendar.renderSheet();\n      return calendar.renderCustomModal();\n    }\n\n    return calendar.renderInline();\n  };\n\n  _proto.openTimePicker = function openTimePicker() {\n    var calendar = this;\n    var $el = calendar.$el,\n        app = calendar.app,\n        is12HoursFormat = calendar.is12HoursFormat;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"calendar-time-picker\"></div>');\n    var hoursArr = [];\n    var minutesArr = [];\n    var hoursMin = is12HoursFormat ? 1 : 0;\n    var hoursMax = is12HoursFormat ? 12 : 23;\n\n    for (var i = hoursMin; i <= hoursMax; i += 1) {\n      hoursArr.push(i);\n    }\n\n    for (var _i2 = 0; _i2 <= 59; _i2 += 1) {\n      minutesArr.push(_i2);\n    }\n\n    var value;\n\n    if (calendar.value && calendar.value.length) {\n      value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n    } else {\n      value = [new Date().getHours(), new Date().getMinutes()];\n    }\n\n    if (is12HoursFormat) {\n      value.push(value[0] < 12 ? 'AM' : 'PM');\n      if (value[0] > 12) value[0] -= 12;\n      if (value[0] === 0) value[0] = 12;\n    }\n\n    calendar.timePickerInstance = app.picker.create({\n      containerEl: $el.find('.calendar-time-picker'),\n      value: value,\n      toolbar: true,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: hoursArr\n      }, {\n        divider: true,\n        content: ':'\n      }, {\n        values: minutesArr,\n        displayValues: minutesArr.map(function (m) {\n          return m < 10 ? \"0\" + m : m;\n        })\n      }].concat(is12HoursFormat ? [{\n        values: ['AM', 'PM']\n      }] : [])\n    });\n    calendar.timePickerInstance.$el.find('.toolbar a').removeClass('sheet-close popover-close').addClass('calendar-time-picker-close');\n  };\n\n  _proto.closeTimePicker = function closeTimePicker() {\n    var calendar = this;\n    var is12HoursFormat = calendar.is12HoursFormat;\n\n    if (calendar.timePickerInstance) {\n      var timePickerValue = calendar.timePickerInstance.value;\n      var hours = parseInt(timePickerValue[0], 10);\n      var minutes = parseInt(timePickerValue[1], 10);\n      var period = calendar.timePickerInstance.value[2];\n\n      if (is12HoursFormat) {\n        if (period === 'AM' && hours === 12) {\n          hours = 0;\n        } else if (period === 'PM' && hours !== 12) {\n          hours += 12;\n        }\n      }\n\n      var value = calendar.value && calendar.value.length && calendar.value[0];\n\n      if (!value) {\n        value = new Date();\n        value.setHours(hours, minutes, 0, 0);\n      } else {\n        value = new Date(value);\n        value.setHours(hours, minutes);\n      }\n\n      calendar.setValue([value]);\n      calendar.timePickerInstance.close();\n      calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el && calendar.$el.length) {\n      calendar.$el.find('.calendar-time-picker').remove();\n    }\n  };\n\n  _proto.onOpen = function onOpen() {\n    var calendar = this;\n    var initialized = calendar.initialized,\n        $el = calendar.$el,\n        app = calendar.app,\n        $inputEl = calendar.$inputEl,\n        inline = calendar.inline,\n        value = calendar.value,\n        params = calendar.params;\n    calendar.closing = false;\n    calendar.opened = true;\n    calendar.opening = true; // Init main events\n\n    calendar.attachCalendarEvents();\n    var updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) calendar.setValue(value, 0);else if (params.value) {\n        calendar.setValue(calendar.normalizeValues(params.value), 0);\n      }\n    } else if (value) {\n      calendar.setValue(value, 0);\n    } // Update current month and year\n\n\n    calendar.updateCurrentMonthYear(); // Set initial translate\n\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate(); // Update input value\n\n    if (updateValue) calendar.updateValue();else if (params.header && value) {\n      calendar.updateValue(true);\n    } // Extra focus\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    calendar.initialized = true;\n    calendar.$months.each(function (monthEl) {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    }); // Trigger events\n\n    if ($el) {\n      $el.trigger('calendar:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('calendar:open');\n    }\n\n    calendar.emit('local::open calendarOpen', calendar);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var calendar = this;\n    calendar.opening = false;\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:opened');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:opened');\n    }\n\n    calendar.emit('local::opened calendarOpened', calendar);\n  };\n\n  _proto.onClose = function onClose() {\n    var calendar = this;\n    var app = calendar.app;\n    calendar.opening = false;\n    calendar.closing = true;\n\n    if (calendar.$inputEl) {\n      if (app.theme === 'md') {\n        calendar.$inputEl.trigger('blur');\n      } else {\n        var validate = calendar.$inputEl.attr('validate');\n        var required = calendar.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(calendar.$inputEl);\n        }\n      }\n    }\n\n    if (calendar.detachCalendarEvents) {\n      calendar.detachCalendarEvents();\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:close');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:close');\n    }\n\n    calendar.emit('local::close calendarClose', calendar);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var calendar = this;\n    calendar.opened = false;\n    calendar.closing = false;\n\n    if (!calendar.inline) {\n      nextTick(function () {\n        if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n          if (!calendar.params.routableModals) {\n            calendar.modal.destroy();\n          }\n        }\n\n        delete calendar.modal;\n      });\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:closed');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:closed');\n    }\n\n    calendar.emit('local::closed calendarClosed', calendar);\n  };\n\n  _proto.open = function open() {\n    var calendar = this;\n    var app = calendar.app,\n        opened = calendar.opened,\n        inline = calendar.inline,\n        $inputEl = calendar.$inputEl,\n        params = calendar.params;\n    if (opened) return;\n\n    if (inline) {\n      calendar.$el = $(calendar.render());\n      calendar.$el[0].f7Calendar = calendar;\n      calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n      calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n      calendar.$containerEl.append(calendar.$el);\n      calendar.onOpen();\n      calendar.onOpened();\n      return;\n    }\n\n    var modalType = params.openIn;\n\n    if (modalType === 'auto') {\n      modalType = calendar.isPopover() ? 'popover' : 'sheet';\n    }\n\n    var modalContent = calendar.render();\n    var modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: params.scrollToInput ? $inputEl : undefined,\n      content: modalContent,\n      backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n      closeByBackdropClick: params.closeByBackdropClick,\n      on: {\n        open: function open() {\n          var modal = this;\n          calendar.modal = modal;\n          calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n          calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n          calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n          calendar.$el[0].f7Calendar = calendar;\n\n          if (modalType === 'customModal') {\n            $(calendar.$el).find('.calendar-close').once('click', function () {\n              calendar.close();\n            });\n          }\n\n          calendar.onOpen();\n        },\n        opened: function opened() {\n          calendar.onOpened();\n        },\n        close: function close() {\n          calendar.onClose();\n        },\n        closed: function closed() {\n          calendar.onClosed();\n        }\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && calendar.view) {\n      var _route;\n\n      calendar.view.router.navigate({\n        url: calendar.url,\n        route: (_route = {\n          path: calendar.url\n        }, _route[modalType] = modalParams, _route)\n      });\n    } else {\n      calendar.modal = app[modalType].create(modalParams);\n      calendar.modal.open();\n    }\n  };\n\n  _proto.close = function close() {\n    var calendar = this;\n    var opened = calendar.opened,\n        inline = calendar.inline;\n    if (!opened) return;\n\n    if (inline) {\n      calendar.onClose();\n      calendar.onClosed();\n      return;\n    }\n\n    if (calendar.params.routableModals && calendar.view) {\n      calendar.view.router.back();\n    } else {\n      calendar.modal.close();\n    }\n  };\n\n  _proto.init = function init() {\n    var calendar = this;\n    calendar.initInput();\n\n    if (calendar.inline) {\n      calendar.open();\n      calendar.emit('local::init calendarInit', calendar);\n      return;\n    }\n\n    if (!calendar.initialized && calendar.params.value) {\n      calendar.setValue(calendar.normalizeValues(calendar.params.value));\n    } // Attach input Events\n\n\n    if (calendar.$inputEl) {\n      calendar.attachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.attachHtmlEvents();\n    }\n\n    calendar.emit('local::init calendarInit', calendar);\n  };\n\n  _proto.destroy = function destroy() {\n    var calendar = this;\n    if (calendar.destroyed) return;\n    var $el = calendar.$el;\n    calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n    if ($el) $el.trigger('calendar:beforedestroy');\n    calendar.close(); // Detach Events\n\n    if (calendar.$inputEl) {\n      calendar.detachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.detachHtmlEvents();\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n    deleteProps(calendar);\n    calendar.destroyed = true;\n  };\n\n  _createClass(Calendar, [{\n    key: \"view\",\n    get: function get() {\n      var $inputEl = this.$inputEl,\n          app = this.app,\n          params = this.params;\n      var view;\n\n      if (params.view) {\n        view = params.view;\n      } else if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Calendar;\n}(Framework7Class);\n\nexport default Calendar;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/calendar/calendar-class.js"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","extend","nextTick","deleteProps","Framework7Class","$","getDevice","getSupport","$jsx","Calendar","_Framework7Class","app","params","_this","call","calendar","$containerEl","containerEl","$inputEl","inputEl","isHorizontal","direction","inverter","rtl","inline","initialized","opened","url","animating","allowTouchMove","hasTimePicker","timePicker","rangePicker","multiple","dayFormatter","Intl","DateTimeFormat","locale","day","monthFormatter","month","yearFormatter","year","timeSelectorFormatter","timePickerFormat","timeFormatCheckDate","format","Date","toLowerCase","is12HoursFormat","indexOf","_calendar$params","monthNames","monthNamesShort","dayNames","dayNamesShort","_calendar$getIntlName","getIntlNames","monthNamesIntl","monthNamesShortIntl","dayNamesIntl","dayNamesShortIntl","onInputClick","open","onInputFocus","e","preventDefault","onInputClear","setValue","update","onHtmlClick","$targetEl","destroyed","isPopover","closing","closest","close","attachInputEvents","on","inputReadOnly","f7ValidateReadonly","detachInputEvents","off","attachHtmlEvents","detachHtmlEvents","attachCalendarEvents","allowItemClick","isTouched","isMoved","touchStartX","touchStartY","touchCurrentX","touchCurrentY","touchStartTime","touchEndTime","currentTranslate","wrapperWidth","wrapperHeight","percentage","touchesDiff","isScrolling","$el","$wrapperEl","handleTouchStart","type","targetTouches","pageX","pageY","getTime","undefined","monthsTranslate","handleTouchMove","isH","Math","abs","offsetWidth","offsetHeight","transition","transform","handleTouchEnd","resetMonth","nextMonth","prevMonth","setTimeout","handleDayClick","$dayEl","parents","hasClass","dateYear","parseInt","attr","dateMonth","dateDay","emit","valueToAdd","value","setHours","getHours","getMinutes","addValue","closeOnSelect","onNextMonthClick","onPrevMonthClick","onNextYearClick","nextYear","onPrevYearClick","prevYear","onMonthSelectorClick","append","renderMonthPicker","onMonthSelectorItemClick","$clickedEl","find","remove","add","toggleClass","index","localeMonthIndex","monthIndex","currentMonth","diff","diffIndex","setYearMonth","currentYear","onYearSelectorClick","renderYearPicker","$currentEl","$yearPickerEl","scrollTop","offsetTop","onYearSelectorItemClick","onTimeSelectorClick","openTimePicker","onTimePickerCloseClick","closeTimePicker","passiveListener","touchEvents","start","passive","capture","monthPicker","yearPicker","touchMove","detachCalendarEvents","init","_proto","formatterMonthNames","formatterMonthNamesShort","formatterDayNames","weekday","formatterDayNamesShort","yearStarted","yearEnded","date","setMonth","push","weekDay","getDay","_i","_date","normalizeDate","d","getFullYear","getMonth","getDate","normalizeValues","values","newValues","Array","isArray","map","val","initInput","prop","modal","device","openIn","ios","ipad","width","desktop","theme","formatDate","month1","_calendar$params2","dateFormat","twoDigits","number","tokens","yyyy","yy","String","substring","mm","m","MM","M","dd","DD","D","hours","minutes","seconds","getSeconds","hours12","a","assign","HH","H","hh","h","ss","s","A","toUpperCase","regexp","RegExp","keys","t","join","replace","token","formatter","formatValue","v","newValue","_calendar$params3","rangePickerMinDays","rangePickerMaxDays","inValuesIndex","splice","updateValue","sort","b","currentValue","equal","forEach","getValue","onlyHeader","removeClass","valueDate","leftDate","rightDate","addClass","text","timePickerPlaceholder","header","inputValue","trigger","updateCurrentMonthYear","dir","$months","currentLocaleMonth","currentLocaleYear","eq","currentDate","prevMonthHtml","renderMonth","currentMonthHtml","nextMonthHtml","html","setMonthsTranslate","each","monthEl","onMonthChangeStart","currentIndex","onMonthChangeEnd","rebuildBoth","prepend","translate","prevMonthTranslate","currentMonthTranslate","nextMonthTranslate","animate","nextDate","nextDateTime","transitionEndCallback","maxDate","transitionEnd","prevDate","prevDateTime","minDate","targetDate","newMonthHTML","prevTranslate","monthTranslate","wrapperTranslate","dateInRange","dayDate","range","match","from","to","daysInMonth","renderMonths","class","offset","localeMonth","localeYear","currentValues","today","rows","cols","daysInPrevMonth","minDayNumber","firstDay","monthHtml","dayIndex","disabled","hasEvents","firstDayOfMonthIndex","row","rowHtml","_loop","col","dayNumber","weekDayIndex","weekendDays","eventsHtml","events","eventDots","ev","color","trim","rangesClasses","k","cssClass","dayYear","dayMonth","dayNumberDisplay","renderWeekHeader","weekDaysHtml","dayName","renderMonthSelector","renderYearSelector","yearMin","yearPickerMin","max","yearMax","yearPickerMax","min","years","setFullYear","renderTimeSelector","timeString","renderHeader","headerPlaceholder","renderFooter","toolbarCloseText","renderToolbar","monthSelector","yearSelector","renderInline","_calendar$params4","toolbar","footer","weekHeader","renderCustomModal","_calendar$params5","renderSheet","_calendar$params6","renderPopover","_calendar$params7","render","modalType","hoursArr","minutesArr","hoursMin","hoursMax","_i2","timePickerInstance","picker","rotateEffect","divider","content","displayValues","concat","timePickerValue","period","destroy","onOpen","opening","onOpened","onClose","validate","required","input","onClosed","el","routableModals","f7Calendar","modalContent","modalParams","targetEl","scrollToEl","scrollToInput","backdrop","popover","closeByBackdropClick","once","closed","sheetPush","swipeToClose","sheetSwipeToClose","view","_route","router","navigate","route","path","back","closeByOutsideClick","get","f7View","views","main"],"mappings":"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","sourcesContent":["function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport $ from '../../shared/dom7';\nimport { getDevice } from '../../shared/get-device';\nimport { getSupport } from '../../shared/get-support';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Calendar = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Calendar, _Framework7Class);\n\n  function Calendar(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var calendar = _assertThisInitialized(_this);\n\n    calendar.params = extend({}, app.params.calendar, params);\n    var $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return calendar || _assertThisInitialized(_this);\n    }\n\n    var $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    var isHorizontal = calendar.params.direction === 'horizontal';\n    var inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app: app,\n      $containerEl: $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal: isHorizontal,\n      inverter: inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n    calendar.dayFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      day: 'numeric'\n    });\n    calendar.monthFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      month: 'long'\n    });\n    calendar.yearFormatter = new Intl.DateTimeFormat(calendar.params.locale, {\n      year: 'numeric'\n    });\n    calendar.timeSelectorFormatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n    var timeFormatCheckDate = calendar.timeSelectorFormatter.format(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    var _calendar$params = calendar.params,\n        monthNames = _calendar$params.monthNames,\n        monthNamesShort = _calendar$params.monthNamesShort,\n        dayNames = _calendar$params.dayNames,\n        dayNamesShort = _calendar$params.dayNamesShort;\n\n    var _calendar$getIntlName = calendar.getIntlNames(),\n        monthNamesIntl = _calendar$getIntlName.monthNamesIntl,\n        monthNamesShortIntl = _calendar$getIntlName.monthNamesShortIntl,\n        dayNamesIntl = _calendar$getIntlName.dayNamesIntl,\n        dayNamesShortIntl = _calendar$getIntlName.dayNamesShortIntl;\n\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames: monthNames,\n      monthNamesShort: monthNamesShort,\n      dayNames: dayNames,\n      dayNamesShort: dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      var $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents: function attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n      detachInputEvents: function detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n      attachHtmlEvents: function attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n      detachHtmlEvents: function detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      var allowItemClick = true;\n      var isTouched;\n      var isMoved;\n      var touchStartX;\n      var touchStartY;\n      var touchCurrentX;\n      var touchCurrentY;\n      var touchStartTime;\n      var touchEndTime;\n      var currentTranslate;\n      var wrapperWidth;\n      var wrapperHeight;\n      var percentage;\n      var touchesDiff;\n      var isScrolling;\n      var $el = calendar.$el,\n          $wrapperEl = calendar.$wrapperEl;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        var isH = calendar.isHorizontal;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(\"translate3d(\" + (isH ? currentTranslate : 0) + \"%, \" + (isH ? 0 : currentTranslate) + \"%, 0)\");\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(function () {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        var $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        var dateYear = parseInt($dayEl.attr('data-year'), 10);\n        var dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        var dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          var valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        $el.append(calendar.renderMonthPicker());\n      }\n\n      function onMonthSelectorItemClick() {\n        var $clickedEl = $(this);\n\n        if ($clickedEl.hasClass('calendar-month-picker-item-current')) {\n          $el.find('.calendar-month-picker').remove();\n          return;\n        }\n\n        $el.find('.calendar-month-picker-item-current').add($clickedEl).toggleClass('calendar-month-picker-item-current');\n        var index = $clickedEl.index();\n        var localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n        var monthIndex = calendar.currentMonth;\n        var diff = localeMonthIndex - monthIndex;\n        var diffIndex = index - diff;\n        calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n        setTimeout(function () {\n          $el.find('.calendar-month-picker').remove();\n        }, 200);\n      }\n\n      function onYearSelectorClick() {\n        $el.append(calendar.renderYearPicker());\n        var $currentEl = $el.find('.calendar-year-picker-item-current');\n        var $yearPickerEl = $el.find('.calendar-year-picker');\n        if (!$currentEl || !$currentEl.length) return;\n        $yearPickerEl.scrollTop($currentEl[0].offsetTop - $yearPickerEl[0].offsetHeight / 2 + $currentEl[0].offsetHeight / 2);\n      }\n\n      function onYearSelectorItemClick() {\n        var $clickedEl = $(this);\n\n        if ($clickedEl.hasClass('calendar-year-picker-item-current')) {\n          $el.find('.calendar-year-picker').remove();\n          return;\n        }\n\n        $el.find('.calendar-year-picker-item-current').add($clickedEl).toggleClass('calendar-year-picker-item-current');\n        var year = parseInt($clickedEl.attr('data-year'), 10);\n        calendar.setYearMonth(year, undefined, 0);\n        setTimeout(function () {\n          $el.find('.calendar-year-picker').remove();\n        }, 200);\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      function onTimePickerCloseClick() {\n        calendar.closeTimePicker();\n      }\n\n      var passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n        $el.on('click', '.calendar-month-picker-item', onMonthSelectorItemClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n        $el.on('click', '.calendar-year-picker-item', onYearSelectorItemClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n        $el.on('click', '.calendar-time-picker-close', onTimePickerCloseClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n          $el.off('click', '.calendar-month-picker-item', onMonthSelectorItemClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n          $el.off('click', '.calendar-year-picker-item', onYearSelectorItemClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n          $el.off('click', '.calendar-time-picker-close', onTimePickerCloseClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return calendar || _assertThisInitialized(_this);\n  }\n\n  var _proto = Calendar.prototype;\n\n  _proto.getIntlNames = function getIntlNames() {\n    var calendar = this;\n    var locale = calendar.params.locale;\n    var monthNamesIntl = [];\n    var monthNamesShortIntl = [];\n    var dayNamesIntl = [];\n    var dayNamesShortIntl = [];\n    var formatterMonthNames = new Intl.DateTimeFormat(locale, {\n      month: 'long'\n    });\n    var formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n      month: 'short'\n    });\n    var formatterDayNames = new Intl.DateTimeFormat(locale, {\n      weekday: 'long'\n    });\n    var formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n      weekday: 'short'\n    });\n    var year;\n    var yearStarted;\n    var yearEnded;\n\n    for (var i = 0; i < 24; i += 1) {\n      var date = new Date().setMonth(i, 1);\n      var currentYear = calendar.yearFormatter.format(date);\n\n      if (year && currentYear !== year) {\n        if (yearStarted) yearEnded = true;\n        yearStarted = true;\n        year = currentYear;\n      }\n\n      if (!year) {\n        year = currentYear;\n      }\n\n      if (yearStarted && year === currentYear && !yearEnded) {\n        monthNamesIntl.push(formatterMonthNames.format(date));\n        monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n      }\n    }\n\n    var weekDay = new Date().getDay();\n\n    for (var _i = 0; _i < 7; _i += 1) {\n      var _date = new Date().getTime() + (_i - weekDay) * 24 * 60 * 60 * 1000;\n\n      dayNamesIntl.push(formatterDayNames.format(_date));\n      dayNamesShortIntl.push(formatterDayNamesShort.format(_date));\n    }\n\n    return {\n      monthNamesIntl: monthNamesIntl,\n      monthNamesShortIntl: monthNamesShortIntl,\n      dayNamesIntl: dayNamesIntl,\n      dayNamesShortIntl: dayNamesShortIntl\n    };\n  };\n\n  _proto.normalizeDate = function normalizeDate(date) {\n    var calendar = this;\n    var d = new Date(date);\n\n    if (calendar.hasTimePicker) {\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n    }\n\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  };\n\n  _proto.normalizeValues = function normalizeValues(values) {\n    var calendar = this;\n    var newValues = [];\n\n    if (values && Array.isArray(values)) {\n      newValues = values.map(function (val) {\n        return calendar.normalizeDate(val);\n      });\n    }\n\n    return newValues;\n  };\n\n  _proto.initInput = function initInput() {\n    var calendar = this;\n    if (!calendar.$inputEl) return;\n    if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n  };\n\n  _proto.isPopover = function isPopover() {\n    var calendar = this;\n    var app = calendar.app,\n        modal = calendar.modal,\n        params = calendar.params;\n    var device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!calendar.inline && calendar.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.formatDate = function formatDate(d) {\n    var calendar = this;\n    var date = new Date(d);\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var month1 = month + 1;\n    var day = date.getDate();\n    var weekDay = date.getDay();\n    var monthNames = calendar.monthNames,\n        monthNamesShort = calendar.monthNamesShort,\n        dayNames = calendar.dayNames,\n        dayNamesShort = calendar.dayNamesShort;\n    var _calendar$params2 = calendar.params,\n        dateFormat = _calendar$params2.dateFormat,\n        locale = _calendar$params2.locale;\n\n    function twoDigits(number) {\n      return number < 10 ? \"0\" + number : number;\n    }\n\n    if (typeof dateFormat === 'string') {\n      var tokens = {\n        yyyy: year,\n        yy: String(year).substring(2),\n        mm: twoDigits(month1),\n        m: month1,\n        MM: monthNames[month],\n        M: monthNamesShort[month],\n        dd: twoDigits(day),\n        d: day,\n        DD: dayNames[weekDay],\n        D: dayNamesShort[weekDay]\n      };\n\n      if (calendar.params.timePicker) {\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var seconds = date.getSeconds();\n        var hours12 = hours;\n        if (hours > 12) hours12 = hours - 12;\n        if (hours === 0) hours12 = 12;\n        var a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n        Object.assign(tokens, {\n          HH: twoDigits(hours),\n          H: hours,\n          hh: twoDigits(hours12),\n          h: hours12,\n          ss: twoDigits(seconds),\n          s: seconds,\n          ':mm': twoDigits(minutes),\n          ':m': minutes,\n          a: a,\n          A: a.toUpperCase()\n        });\n      }\n\n      var regexp = new RegExp(Object.keys(tokens).map(function (t) {\n        return \"(\" + t + \")\";\n      }).join('|'), 'g');\n      return dateFormat.replace(regexp, function (token) {\n        if (token in tokens) return tokens[token];\n        return token;\n      });\n    }\n\n    if (typeof dateFormat === 'function') {\n      return dateFormat(date);\n    } // Intl Object\n\n\n    var formatter = new Intl.DateTimeFormat(locale, dateFormat);\n    return formatter.format(date);\n  };\n\n  _proto.formatValue = function formatValue() {\n    var calendar = this;\n    var value = calendar.value;\n\n    if (calendar.params.formatValue) {\n      return calendar.params.formatValue.call(calendar, value);\n    }\n\n    return value.map(function (v) {\n      return calendar.formatDate(v);\n    }).join(calendar.params.rangePicker ? ' - ' : ', ');\n  };\n\n  _proto.addValue = function addValue(newValue) {\n    var calendar = this;\n    var _calendar$params3 = calendar.params,\n        multiple = _calendar$params3.multiple,\n        rangePicker = _calendar$params3.rangePicker,\n        rangePickerMinDays = _calendar$params3.rangePickerMinDays,\n        rangePickerMaxDays = _calendar$params3.rangePickerMaxDays;\n\n    if (multiple) {\n      if (!calendar.value) calendar.value = [];\n      var inValuesIndex;\n\n      for (var i = 0; i < calendar.value.length; i += 1) {\n        if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n          inValuesIndex = i;\n        }\n      }\n\n      if (typeof inValuesIndex === 'undefined') {\n        calendar.value.push(newValue);\n      } else {\n        calendar.value.splice(inValuesIndex, 1);\n      }\n\n      calendar.updateValue();\n    } else if (rangePicker) {\n      if (!calendar.value) calendar.value = [];\n\n      if (calendar.value.length === 2 || calendar.value.length === 0) {\n        calendar.value = [];\n      }\n\n      if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n      calendar.value.sort(function (a, b) {\n        return a - b;\n      });\n      calendar.updateValue();\n    } else {\n      calendar.value = [newValue];\n      calendar.updateValue();\n    }\n  };\n\n  _proto.setValue = function setValue(values) {\n    var calendar = this;\n    var currentValue = calendar.value;\n\n    if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n      var equal = true;\n      currentValue.forEach(function (v, index) {\n        if (v !== values[index]) equal = false;\n      });\n      if (equal) return;\n    }\n\n    calendar.value = values;\n    calendar.updateValue();\n  };\n\n  _proto.getValue = function getValue() {\n    var calendar = this;\n    return calendar.value;\n  };\n\n  _proto.updateValue = function updateValue(onlyHeader) {\n    var calendar = this;\n    var $el = calendar.$el,\n        $wrapperEl = calendar.$wrapperEl,\n        $inputEl = calendar.$inputEl,\n        value = calendar.value,\n        params = calendar.params;\n    var i;\n\n    if ($el && $el.length > 0) {\n      $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n      var valueDate;\n\n      if (params.rangePicker && value.length === 2) {\n        var leftDate = new Date(value[0]).getTime();\n        var rightDate = new Date(value[1]).getTime();\n\n        for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n          valueDate = new Date(i);\n          var addClass = 'calendar-day-selected';\n\n          if (leftDate !== rightDate) {\n            if (i !== leftDate && i !== rightDate) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (i === leftDate) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (i === rightDate) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").addClass(addClass);\n        }\n\n        valueDate = new Date(leftDate);\n        $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n        valueDate = new Date(rightDate);\n        $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n      } else {\n        for (i = 0; i < calendar.value.length; i += 1) {\n          valueDate = new Date(value[i]);\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\" + valueDate.getFullYear() + \"-\" + valueDate.getMonth() + \"-\" + valueDate.getDate() + \"\\\"]\").addClass('calendar-day-selected');\n        }\n      }\n    }\n\n    if (!onlyHeader) {\n      calendar.emit('local::change calendarChange', calendar, value);\n    }\n\n    if ($el && $el.length > 0 && calendar.hasTimePicker) {\n      $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter.format(value[0]) : calendar.params.timePickerPlaceholder);\n    }\n\n    if ($inputEl && $inputEl.length || params.header) {\n      var inputValue = calendar.formatValue(value);\n\n      if (params.header && $el && $el.length) {\n        $el.find('.calendar-selected-date').text(inputValue);\n      }\n\n      if ($inputEl && $inputEl.length && !onlyHeader) {\n        $inputEl.val(inputValue);\n        $inputEl.trigger('change');\n      }\n    }\n  };\n\n  _proto.updateCurrentMonthYear = function updateCurrentMonthYear(dir) {\n    var calendar = this;\n    var $months = calendar.$months,\n        $el = calendar.$el,\n        monthNames = calendar.monthNames;\n    var currentLocaleMonth;\n    var currentLocaleYear;\n\n    if (typeof dir === 'undefined') {\n      calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n      currentLocaleYear = $months.eq(1).attr('data-locale-year');\n    } else {\n      calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n      currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n    }\n\n    $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n    $el.find('.current-year-value').text(currentLocaleYear);\n  };\n\n  _proto.update = function update() {\n    var calendar = this;\n    var currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth,\n        $wrapperEl = calendar.$wrapperEl;\n    var currentDate = new Date(currentYear, currentMonth);\n    var prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n    var currentMonthHtml = calendar.renderMonth(currentDate);\n    var nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n    $wrapperEl.transition(0).html(\"\" + prevMonthHtml + currentMonthHtml + nextMonthHtml).transform('translate3d(0,0,0)');\n    calendar.$months = $wrapperEl.find('.calendar-month');\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate();\n    calendar.$months.each(function (monthEl) {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    });\n  };\n\n  _proto.onMonthChangeStart = function onMonthChangeStart(dir) {\n    var calendar = this;\n    var $months = calendar.$months,\n        currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth;\n    calendar.updateCurrentMonthYear(dir);\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    var currentIndex = dir === 'next' ? $months.length - 1 : 0;\n    $months.eq(currentIndex).addClass('calendar-month-current');\n    $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n    calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n  };\n\n  _proto.onMonthChangeEnd = function onMonthChangeEnd(dir, rebuildBoth) {\n    var calendar = this;\n    var currentYear = calendar.currentYear,\n        currentMonth = calendar.currentMonth,\n        $wrapperEl = calendar.$wrapperEl,\n        monthsTranslate = calendar.monthsTranslate;\n    calendar.animating = false;\n    var nextMonthHtml;\n    var prevMonthHtml;\n    var currentMonthHtml;\n    $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n    if (typeof dir === 'undefined') {\n      dir = 'next'; // eslint-disable-line\n\n      rebuildBoth = true; // eslint-disable-line\n    }\n\n    if (!rebuildBoth) {\n      currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n    } else {\n      $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n      prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n      nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n    }\n\n    if (dir === 'next' || rebuildBoth) {\n      $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n    }\n\n    if (dir === 'prev' || rebuildBoth) {\n      $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n    }\n\n    var $months = $wrapperEl.find('.calendar-month');\n    calendar.$months = $months;\n    calendar.setMonthsTranslate(monthsTranslate);\n    calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n    calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n  };\n\n  _proto.setMonthsTranslate = function setMonthsTranslate(translate) {\n    var calendar = this;\n    var $months = calendar.$months,\n        isH = calendar.isHorizontal,\n        inverter = calendar.inverter; // eslint-disable-next-line\n\n    translate = translate || calendar.monthsTranslate || 0;\n\n    if (typeof calendar.monthsTranslate === 'undefined') {\n      calendar.monthsTranslate = translate;\n    }\n\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n    var currentMonthTranslate = -translate * 100 * inverter;\n    var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n    $months.eq(0).transform(\"translate3d(\" + (isH ? prevMonthTranslate : 0) + \"%, \" + (isH ? 0 : prevMonthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n    $months.eq(1).transform(\"translate3d(\" + (isH ? currentMonthTranslate : 0) + \"%, \" + (isH ? 0 : currentMonthTranslate) + \"%, 0)\").addClass('calendar-month-current');\n    $months.eq(2).transform(\"translate3d(\" + (isH ? nextMonthTranslate : 0) + \"%, \" + (isH ? 0 : nextMonthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n  };\n\n  _proto.nextMonth = function nextMonth(transition) {\n    var calendar = this;\n    var params = calendar.params,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    var nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n    var nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n    var nextDate = new Date(nextYear, nextMonth);\n    var nextDateTime = nextDate.getTime();\n    var transitionEndCallback = !calendar.animating;\n\n    if (params.maxDate) {\n      if (nextDateTime > new Date(params.maxDate).getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate -= 1;\n\n    if (nextMonth === calendar.currentMonth) {\n      var nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      var nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(\"translate3d(\" + (isH ? nextMonthTranslate : 0) + \"%, \" + (isH ? 0 : nextMonthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n      $wrapperEl.append(nextMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('next');\n    var translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd('next');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('next');\n    }\n  };\n\n  _proto.prevMonth = function prevMonth(transition) {\n    var calendar = this;\n    var params = calendar.params,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    var prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n    var prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n    var prevDate = new Date(prevYear, prevMonth + 1, -1);\n    var prevDateTime = prevDate.getTime();\n    var transitionEndCallback = !calendar.animating;\n\n    if (params.minDate) {\n      var minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (prevDateTime < minDate.getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate += 1;\n\n    if (prevMonth === calendar.currentMonth) {\n      var prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      var prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(\"translate3d(\" + (isH ? prevMonthTranslate : 0) + \"%, \" + (isH ? 0 : prevMonthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n      $wrapperEl.prepend(prevMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('prev');\n    var translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd('prev');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('prev');\n    }\n  };\n\n  _proto.resetMonth = function resetMonth(transition) {\n    if (transition === void 0) {\n      transition = '';\n    }\n\n    var calendar = this;\n    var $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter,\n        isH = calendar.isHorizontal,\n        monthsTranslate = calendar.monthsTranslate;\n    var translate = monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? translate : 0) + \"%, \" + (isH ? 0 : translate) + \"%, 0)\");\n  } // eslint-disable-next-line\n  ;\n\n  _proto.setYearMonth = function setYearMonth(year, month, transition) {\n    var calendar = this;\n    var params = calendar.params,\n        isH = calendar.isHorizontal,\n        $wrapperEl = calendar.$wrapperEl,\n        inverter = calendar.inverter; // eslint-disable-next-line\n\n    if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n    if (typeof month === 'undefined') month = calendar.currentMonth;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      // eslint-disable-next-line\n      transition = ''; // eslint-disable-next-line\n\n      if (!params.animate) transition = 0;\n    }\n\n    var targetDate;\n\n    if (year < calendar.currentYear) {\n      targetDate = new Date(year, month + 1, -1).getTime();\n    } else {\n      targetDate = new Date(year, month).getTime();\n    }\n\n    if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n      return false;\n    }\n\n    if (params.minDate) {\n      var minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (targetDate < minDate.getTime()) {\n        return false;\n      }\n    }\n\n    var currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n    var dir = targetDate > currentDate ? 'next' : 'prev';\n    var newMonthHTML = calendar.renderMonth(new Date(year, month));\n    calendar.monthsTranslate = calendar.monthsTranslate || 0;\n    var prevTranslate = calendar.monthsTranslate;\n    var monthTranslate;\n    var transitionEndCallback = !calendar.animating && transition !== 0;\n\n    if (targetDate > currentDate) {\n      // To next\n      calendar.monthsTranslate -= 1;\n      if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n      $wrapperEl.append(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n      calendar.$months.eq(calendar.$months.length - 1).transform(\"translate3d(\" + (isH ? monthTranslate : 0) + \"%, \" + (isH ? 0 : monthTranslate) + \"%, 0)\").addClass('calendar-month-next');\n    } else {\n      // To prev\n      calendar.monthsTranslate += 1;\n      if (!calendar.animating) calendar.$months.eq(0).remove();\n      $wrapperEl.prepend(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n      calendar.$months.eq(0).transform(\"translate3d(\" + (isH ? monthTranslate : 0) + \"%, \" + (isH ? 0 : monthTranslate) + \"%, 0)\").addClass('calendar-month-prev');\n    }\n\n    calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n    calendar.animating = true;\n    calendar.onMonthChangeStart(dir);\n    var wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(\"translate3d(\" + (isH ? wrapperTranslate : 0) + \"%, \" + (isH ? 0 : wrapperTranslate) + \"%, 0)\");\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(function () {\n        calendar.onMonthChangeEnd(dir, true);\n      });\n    }\n\n    if (!params.animate || transition === 0) {\n      calendar.onMonthChangeEnd(dir, true);\n    }\n  };\n\n  _proto.nextYear = function nextYear() {\n    var calendar = this;\n    calendar.setYearMonth(calendar.currentYear + 1);\n  };\n\n  _proto.prevYear = function prevYear() {\n    var calendar = this;\n    calendar.setYearMonth(calendar.currentYear - 1);\n  } // eslint-disable-next-line\n  ;\n\n  _proto.dateInRange = function dateInRange(dayDate, range) {\n    var match = false;\n    var i;\n    if (!range) return false;\n\n    if (Array.isArray(range)) {\n      for (i = 0; i < range.length; i += 1) {\n        if (range[i].from || range[i].to) {\n          if (range[i].from && range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].from) {\n            if (dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime()) {\n              match = true;\n            }\n          }\n        } else if (range[i].date) {\n          if (dayDate === new Date(range[i].date).getTime()) {\n            match = true;\n          }\n        } else if (dayDate === new Date(range[i]).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.from || range.to) {\n      if (range.from && range.to) {\n        if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.from) {\n        if (dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.to) {\n        if (dayDate <= new Date(range.to).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.date) {\n      match = dayDate === new Date(range.date).getTime();\n    } else if (typeof range === 'function') {\n      match = range(new Date(dayDate));\n    }\n\n    return match;\n  } // eslint-disable-next-line\n  ;\n\n  _proto.daysInMonth = function daysInMonth(date) {\n    var d = new Date(date);\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n  };\n\n  _proto.renderMonths = function renderMonths(date) {\n    var calendar = this;\n\n    if (calendar.params.renderMonths) {\n      return calendar.params.renderMonths.call(calendar, date);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-months-wrapper\"\n    }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n  };\n\n  _proto.renderMonth = function renderMonth(d, offset) {\n    var calendar = this;\n    var params = calendar.params,\n        value = calendar.value;\n\n    if (params.renderMonth) {\n      return params.renderMonth.call(calendar, d, offset);\n    }\n\n    var date = new Date(d);\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter.format(date));\n    if (localeMonth < 0) localeMonth = month;\n    var localeYear = calendar.yearFormatter.format(date);\n\n    if (offset === 'next') {\n      if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n    }\n\n    if (offset === 'prev') {\n      if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n    }\n\n    if (offset === 'next' || offset === 'prev') {\n      month = date.getMonth();\n      year = date.getFullYear();\n      localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter.format(date));\n      if (localeMonth < 0) localeMonth = month;\n      localeYear = calendar.yearFormatter.format(date);\n    }\n\n    var currentValues = [];\n    var today = new Date().setHours(0, 0, 0, 0);\n    var minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n    var maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n    var rows = 6;\n    var cols = 7;\n    var daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n    var daysInMonth = calendar.daysInMonth(date);\n    var minDayNumber = params.firstDay === 6 ? 0 : 1;\n    var monthHtml = '';\n    var dayIndex = 0 + (params.firstDay - 1);\n    var disabled;\n    var hasEvents;\n    var firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n    if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n    if (value && value.length) {\n      for (var i = 0; i < value.length; i += 1) {\n        currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n      }\n    }\n\n    for (var row = 1; row <= rows; row += 1) {\n      var rowHtml = '';\n\n      var _loop = function _loop(col) {\n        dayIndex += 1;\n        var dayDate = void 0;\n        var dayNumber = dayIndex - firstDayOfMonthIndex;\n        var addClass = '';\n\n        if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n          dayIndex -= 7;\n          dayNumber = dayIndex - firstDayOfMonthIndex;\n        }\n\n        var weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n        if (dayNumber < 0) {\n          dayNumber = daysInPrevMonth + dayNumber + 1;\n          addClass += ' calendar-day-prev';\n          dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n        } else {\n          dayNumber += 1;\n\n          if (dayNumber > daysInMonth) {\n            dayNumber -= daysInMonth;\n            addClass += ' calendar-day-next';\n            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n          } else {\n            dayDate = new Date(year, month, dayNumber).getTime();\n          }\n        } // Today\n\n\n        if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n        if (params.rangePicker && currentValues.length === 2) {\n          if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n            addClass += ' calendar-day-selected';\n          }\n\n          if (currentValues[0] !== currentValues[1]) {\n            if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (dayDate === currentValues[0]) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (dayDate === currentValues[1]) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n        } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n        if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n          addClass += ' calendar-day-weekend';\n        } // Events\n\n\n        var eventsHtml = '';\n        hasEvents = false;\n\n        if (params.events) {\n          if (calendar.dateInRange(dayDate, params.events)) {\n            hasEvents = true;\n          }\n        }\n\n        if (hasEvents) {\n          addClass += ' calendar-day-has-events'; // prettier-ignore\n\n          eventsHtml = \"\\n            <span class=\\\"calendar-day-events\\\">\\n              <span class=\\\"calendar-day-event\\\"></span>\\n            </span>\\n          \";\n\n          if (Array.isArray(params.events)) {\n            var eventDots = [];\n            params.events.forEach(function (ev) {\n              var color = ev.color || '';\n\n              if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                eventDots.push(color);\n              }\n            }); // prettier-ignore\n\n            eventsHtml = \"\\n              <span class=\\\"calendar-day-events\\\">\\n                \" + eventDots.map(function (color) {\n              return (\"\\n                  <span class=\\\"calendar-day-event\\\" style=\\\"\" + (color ? \"background-color: \" + color : '') + \"\\\"></span>\\n                \").trim();\n            }).join('') + \"\\n              </span>\\n            \";\n          }\n        } // Custom Ranges\n\n\n        if (params.rangesClasses) {\n          for (var k = 0; k < params.rangesClasses.length; k += 1) {\n            if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n              addClass += \" \" + params.rangesClasses[k].cssClass;\n            }\n          }\n        } // Disabled\n\n\n        disabled = false;\n\n        if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n          disabled = true;\n        }\n\n        if (params.disabled) {\n          if (calendar.dateInRange(dayDate, params.disabled)) {\n            disabled = true;\n          }\n        }\n\n        if (disabled) {\n          addClass += ' calendar-day-disabled';\n        }\n\n        dayDate = new Date(dayDate);\n        var dayYear = dayDate.getFullYear();\n        var dayMonth = dayDate.getMonth();\n        var dayNumberDisplay = calendar.dayFormatter.format(dayDate); // prettier-ignore\n\n        rowHtml += (\"\\n          <div data-year=\\\"\" + dayYear + \"\\\" data-month=\\\"\" + dayMonth + \"\\\" data-day=\\\"\" + dayNumber + \"\\\" class=\\\"calendar-day\" + addClass + \"\\\" data-date=\\\"\" + dayYear + \"-\" + dayMonth + \"-\" + dayNumber + \"\\\">\\n            <span class=\\\"calendar-day-number\\\">\" + dayNumberDisplay + eventsHtml + \"</span>\\n          </div>\").trim();\n      };\n\n      for (var col = 1; col <= cols; col += 1) {\n        _loop(col);\n      }\n\n      monthHtml += \"<div class=\\\"calendar-row\\\">\" + rowHtml + \"</div>\";\n    }\n\n    monthHtml = \"<div class=\\\"calendar-month\\\" data-year=\\\"\" + year + \"\\\" data-month=\\\"\" + month + \"\\\" data-locale-year=\\\"\" + localeYear + \"\\\" data-locale-month=\\\"\" + localeMonth + \"\\\">\" + monthHtml + \"</div>\";\n    return monthHtml;\n  };\n\n  _proto.renderWeekHeader = function renderWeekHeader() {\n    var calendar = this;\n\n    if (calendar.params.renderWeekHeader) {\n      return calendar.params.renderWeekHeader.call(calendar);\n    }\n\n    var params = calendar.params;\n    var weekDaysHtml = '';\n\n    for (var i = 0; i < 7; i += 1) {\n      var dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n      var dayName = calendar.dayNamesShort[dayIndex];\n      weekDaysHtml += \"<div class=\\\"calendar-week-day\\\">\" + dayName + \"</div>\";\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-week-header\"\n    }, weekDaysHtml);\n  };\n\n  _proto.renderMonthSelector = function renderMonthSelector() {\n    var calendar = this;\n\n    if (calendar.params.renderMonthSelector) {\n      return calendar.params.renderMonthSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-month-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.monthPicker ? $jsx(\"a\", {\n      class: \"current-month-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-month-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  };\n\n  _proto.renderMonthPicker = function renderMonthPicker() {\n    var calendar = this;\n    var localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    return $jsx(\"div\", {\n      class: \"calendar-month-picker\"\n    }, calendar.monthNames.map(function (m, index) {\n      return $jsx(\"div\", {\n        class: \"calendar-month-picker-item \" + (localeMonth === index ? 'calendar-month-picker-item-current' : '')\n      }, $jsx(\"span\", null, m));\n    }));\n  };\n\n  _proto.renderYearSelector = function renderYearSelector() {\n    var calendar = this;\n\n    if (calendar.params.renderYearSelector) {\n      return calendar.params.renderYearSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.yearPicker ? $jsx(\"a\", {\n      class: \"current-year-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-year-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  };\n\n  _proto.renderYearPicker = function renderYearPicker() {\n    var calendar = this;\n    var currentYear = calendar.currentYear;\n    var yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n    if (calendar.params.minDate) {\n      yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n    }\n\n    var yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n    if (calendar.params.maxDate) {\n      yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n    }\n\n    var years = [];\n\n    for (var i = yearMin; i <= yearMax; i += 1) {\n      years.push(i);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-picker\"\n    }, years.map(function (year) {\n      return $jsx(\"div\", {\n        \"data-year\": year,\n        class: \"calendar-year-picker-item \" + (year === currentYear ? 'calendar-year-picker-item-current' : '')\n      }, $jsx(\"span\", null, calendar.yearFormatter.format(new Date().setFullYear(year))));\n    }));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderTimeSelector = function renderTimeSelector() {\n    var calendar = this;\n    var value = calendar.value && calendar.value[0];\n    var timeString;\n    if (value) timeString = calendar.timeSelectorFormatter.format(value);\n    return $jsx(\"div\", {\n      class: \"calendar-time-selector\"\n    }, $jsx(\"a\", {\n      class: \"link\"\n    }, timeString || calendar.params.timePickerPlaceholder));\n  };\n\n  _proto.renderHeader = function renderHeader() {\n    var calendar = this;\n\n    if (calendar.params.renderHeader) {\n      return calendar.params.renderHeader.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-header\"\n    }, $jsx(\"div\", {\n      class: \"calendar-selected-date\"\n    }, calendar.params.headerPlaceholder));\n  };\n\n  _proto.renderFooter = function renderFooter() {\n    var calendar = this;\n    var app = calendar.app;\n\n    if (calendar.params.renderFooter) {\n      return calendar.params.renderFooter.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-footer\"\n    }, $jsx(\"a\", {\n      class: (app.theme === 'md' ? 'button' : 'link') + \" calendar-close sheet-close popover-close\"\n    }, calendar.params.toolbarCloseText));\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var calendar = this;\n\n    if (calendar.params.renderToolbar) {\n      return calendar.params.renderToolbar.call(calendar, calendar);\n    } // prettier-ignore\n\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderInline = function renderInline() {\n    var calendar = this;\n    var _calendar$params4 = calendar.params,\n        cssClass = _calendar$params4.cssClass,\n        toolbar = _calendar$params4.toolbar,\n        header = _calendar$params4.header,\n        footer = _calendar$params4.footer,\n        rangePicker = _calendar$params4.rangePicker,\n        weekHeader = _calendar$params4.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"calendar calendar-inline \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderCustomModal = function renderCustomModal() {\n    var calendar = this;\n    var _calendar$params5 = calendar.params,\n        cssClass = _calendar$params5.cssClass,\n        toolbar = _calendar$params5.toolbar,\n        header = _calendar$params5.header,\n        footer = _calendar$params5.footer,\n        rangePicker = _calendar$params5.rangePicker,\n        weekHeader = _calendar$params5.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"calendar calendar-modal \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderSheet = function renderSheet() {\n    var calendar = this;\n    var _calendar$params6 = calendar.params,\n        cssClass = _calendar$params6.cssClass,\n        toolbar = _calendar$params6.toolbar,\n        header = _calendar$params6.header,\n        footer = _calendar$params6.footer,\n        rangePicker = _calendar$params6.rangePicker,\n        weekHeader = _calendar$params6.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"sheet-modal calendar calendar-sheet \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"sheet-modal-inner calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  };\n\n  _proto.renderPopover = function renderPopover() {\n    var calendar = this;\n    var _calendar$params7 = calendar.params,\n        cssClass = _calendar$params7.cssClass,\n        toolbar = _calendar$params7.toolbar,\n        header = _calendar$params7.header,\n        footer = _calendar$params7.footer,\n        rangePicker = _calendar$params7.rangePicker,\n        weekHeader = _calendar$params7.weekHeader;\n    var value = calendar.value,\n        hasTimePicker = calendar.hasTimePicker;\n    var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"popover calendar-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: \"calendar \" + (rangePicker ? 'calendar-range' : '') + \" \" + (cssClass || '')\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n  };\n\n  _proto.render = function render() {\n    var calendar = this;\n    var params = calendar.params;\n    if (params.render) return params.render.call(calendar);\n\n    if (!calendar.inline) {\n      var modalType = params.openIn;\n      if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      if (modalType === 'popover') return calendar.renderPopover();\n      if (modalType === 'sheet') return calendar.renderSheet();\n      return calendar.renderCustomModal();\n    }\n\n    return calendar.renderInline();\n  };\n\n  _proto.openTimePicker = function openTimePicker() {\n    var calendar = this;\n    var $el = calendar.$el,\n        app = calendar.app,\n        is12HoursFormat = calendar.is12HoursFormat;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"calendar-time-picker\"></div>');\n    var hoursArr = [];\n    var minutesArr = [];\n    var hoursMin = is12HoursFormat ? 1 : 0;\n    var hoursMax = is12HoursFormat ? 12 : 23;\n\n    for (var i = hoursMin; i <= hoursMax; i += 1) {\n      hoursArr.push(i);\n    }\n\n    for (var _i2 = 0; _i2 <= 59; _i2 += 1) {\n      minutesArr.push(_i2);\n    }\n\n    var value;\n\n    if (calendar.value && calendar.value.length) {\n      value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n    } else {\n      value = [new Date().getHours(), new Date().getMinutes()];\n    }\n\n    if (is12HoursFormat) {\n      value.push(value[0] < 12 ? 'AM' : 'PM');\n      if (value[0] > 12) value[0] -= 12;\n      if (value[0] === 0) value[0] = 12;\n    }\n\n    calendar.timePickerInstance = app.picker.create({\n      containerEl: $el.find('.calendar-time-picker'),\n      value: value,\n      toolbar: true,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: hoursArr\n      }, {\n        divider: true,\n        content: ':'\n      }, {\n        values: minutesArr,\n        displayValues: minutesArr.map(function (m) {\n          return m < 10 ? \"0\" + m : m;\n        })\n      }].concat(is12HoursFormat ? [{\n        values: ['AM', 'PM']\n      }] : [])\n    });\n    calendar.timePickerInstance.$el.find('.toolbar a').removeClass('sheet-close popover-close').addClass('calendar-time-picker-close');\n  };\n\n  _proto.closeTimePicker = function closeTimePicker() {\n    var calendar = this;\n    var is12HoursFormat = calendar.is12HoursFormat;\n\n    if (calendar.timePickerInstance) {\n      var timePickerValue = calendar.timePickerInstance.value;\n      var hours = parseInt(timePickerValue[0], 10);\n      var minutes = parseInt(timePickerValue[1], 10);\n      var period = calendar.timePickerInstance.value[2];\n\n      if (is12HoursFormat) {\n        if (period === 'AM' && hours === 12) {\n          hours = 0;\n        } else if (period === 'PM' && hours !== 12) {\n          hours += 12;\n        }\n      }\n\n      var value = calendar.value && calendar.value.length && calendar.value[0];\n\n      if (!value) {\n        value = new Date();\n        value.setHours(hours, minutes, 0, 0);\n      } else {\n        value = new Date(value);\n        value.setHours(hours, minutes);\n      }\n\n      calendar.setValue([value]);\n      calendar.timePickerInstance.close();\n      calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el && calendar.$el.length) {\n      calendar.$el.find('.calendar-time-picker').remove();\n    }\n  };\n\n  _proto.onOpen = function onOpen() {\n    var calendar = this;\n    var initialized = calendar.initialized,\n        $el = calendar.$el,\n        app = calendar.app,\n        $inputEl = calendar.$inputEl,\n        inline = calendar.inline,\n        value = calendar.value,\n        params = calendar.params;\n    calendar.closing = false;\n    calendar.opened = true;\n    calendar.opening = true; // Init main events\n\n    calendar.attachCalendarEvents();\n    var updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) calendar.setValue(value, 0);else if (params.value) {\n        calendar.setValue(calendar.normalizeValues(params.value), 0);\n      }\n    } else if (value) {\n      calendar.setValue(value, 0);\n    } // Update current month and year\n\n\n    calendar.updateCurrentMonthYear(); // Set initial translate\n\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate(); // Update input value\n\n    if (updateValue) calendar.updateValue();else if (params.header && value) {\n      calendar.updateValue(true);\n    } // Extra focus\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    calendar.initialized = true;\n    calendar.$months.each(function (monthEl) {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    }); // Trigger events\n\n    if ($el) {\n      $el.trigger('calendar:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('calendar:open');\n    }\n\n    calendar.emit('local::open calendarOpen', calendar);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var calendar = this;\n    calendar.opening = false;\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:opened');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:opened');\n    }\n\n    calendar.emit('local::opened calendarOpened', calendar);\n  };\n\n  _proto.onClose = function onClose() {\n    var calendar = this;\n    var app = calendar.app;\n    calendar.opening = false;\n    calendar.closing = true;\n\n    if (calendar.$inputEl) {\n      if (app.theme === 'md') {\n        calendar.$inputEl.trigger('blur');\n      } else {\n        var validate = calendar.$inputEl.attr('validate');\n        var required = calendar.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(calendar.$inputEl);\n        }\n      }\n    }\n\n    if (calendar.detachCalendarEvents) {\n      calendar.detachCalendarEvents();\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:close');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:close');\n    }\n\n    calendar.emit('local::close calendarClose', calendar);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var calendar = this;\n    calendar.opened = false;\n    calendar.closing = false;\n\n    if (!calendar.inline) {\n      nextTick(function () {\n        if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n          if (!calendar.params.routableModals) {\n            calendar.modal.destroy();\n          }\n        }\n\n        delete calendar.modal;\n      });\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:closed');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:closed');\n    }\n\n    calendar.emit('local::closed calendarClosed', calendar);\n  };\n\n  _proto.open = function open() {\n    var calendar = this;\n    var app = calendar.app,\n        opened = calendar.opened,\n        inline = calendar.inline,\n        $inputEl = calendar.$inputEl,\n        params = calendar.params;\n    if (opened) return;\n\n    if (inline) {\n      calendar.$el = $(calendar.render());\n      calendar.$el[0].f7Calendar = calendar;\n      calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n      calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n      calendar.$containerEl.append(calendar.$el);\n      calendar.onOpen();\n      calendar.onOpened();\n      return;\n    }\n\n    var modalType = params.openIn;\n\n    if (modalType === 'auto') {\n      modalType = calendar.isPopover() ? 'popover' : 'sheet';\n    }\n\n    var modalContent = calendar.render();\n    var modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: params.scrollToInput ? $inputEl : undefined,\n      content: modalContent,\n      backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n      closeByBackdropClick: params.closeByBackdropClick,\n      on: {\n        open: function open() {\n          var modal = this;\n          calendar.modal = modal;\n          calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n          calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n          calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n          calendar.$el[0].f7Calendar = calendar;\n\n          if (modalType === 'customModal') {\n            $(calendar.$el).find('.calendar-close').once('click', function () {\n              calendar.close();\n            });\n          }\n\n          calendar.onOpen();\n        },\n        opened: function opened() {\n          calendar.onOpened();\n        },\n        close: function close() {\n          calendar.onClose();\n        },\n        closed: function closed() {\n          calendar.onClosed();\n        }\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && calendar.view) {\n      var _route;\n\n      calendar.view.router.navigate({\n        url: calendar.url,\n        route: (_route = {\n          path: calendar.url\n        }, _route[modalType] = modalParams, _route)\n      });\n    } else {\n      calendar.modal = app[modalType].create(modalParams);\n      calendar.modal.open();\n    }\n  };\n\n  _proto.close = function close() {\n    var calendar = this;\n    var opened = calendar.opened,\n        inline = calendar.inline;\n    if (!opened) return;\n\n    if (inline) {\n      calendar.onClose();\n      calendar.onClosed();\n      return;\n    }\n\n    if (calendar.params.routableModals && calendar.view) {\n      calendar.view.router.back();\n    } else {\n      calendar.modal.close();\n    }\n  };\n\n  _proto.init = function init() {\n    var calendar = this;\n    calendar.initInput();\n\n    if (calendar.inline) {\n      calendar.open();\n      calendar.emit('local::init calendarInit', calendar);\n      return;\n    }\n\n    if (!calendar.initialized && calendar.params.value) {\n      calendar.setValue(calendar.normalizeValues(calendar.params.value));\n    } // Attach input Events\n\n\n    if (calendar.$inputEl) {\n      calendar.attachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.attachHtmlEvents();\n    }\n\n    calendar.emit('local::init calendarInit', calendar);\n  };\n\n  _proto.destroy = function destroy() {\n    var calendar = this;\n    if (calendar.destroyed) return;\n    var $el = calendar.$el;\n    calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n    if ($el) $el.trigger('calendar:beforedestroy');\n    calendar.close(); // Detach Events\n\n    if (calendar.$inputEl) {\n      calendar.detachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.detachHtmlEvents();\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n    deleteProps(calendar);\n    calendar.destroyed = true;\n  };\n\n  _createClass(Calendar, [{\n    key: \"view\",\n    get: function get() {\n      var $inputEl = this.$inputEl,\n          app = this.app,\n          params = this.params;\n      var view;\n\n      if (params.view) {\n        view = params.view;\n      } else if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Calendar;\n}(Framework7Class);\n\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}