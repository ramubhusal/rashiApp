{"ast":null,"code":"import $ from '../../shared/dom7';\nimport { nextFrame, bindMethods } from '../../shared/utils';\nvar Toolbar = {\n  setHighlight: function setHighlight(tabbarEl) {\n    var app = this;\n    if (app.theme === 'ios') return;\n    var $tabbarEl = $(tabbarEl);\n    if ($tabbarEl.length === 0 || !($tabbarEl.hasClass('tabbar') || $tabbarEl.hasClass('tabbar-labels'))) return;\n    var $highlightEl = $tabbarEl.find('.tab-link-highlight');\n    var tabLinksCount = $tabbarEl.find('.tab-link').length;\n\n    if (tabLinksCount === 0) {\n      $highlightEl.remove();\n      return;\n    }\n\n    if ($highlightEl.length === 0) {\n      $tabbarEl.children('.toolbar-inner').append('<span class=\"tab-link-highlight\"></span>');\n      $highlightEl = $tabbarEl.find('.tab-link-highlight');\n    } else if ($highlightEl.next().length) {\n      $tabbarEl.children('.toolbar-inner').append($highlightEl);\n    }\n\n    var $activeLink = $tabbarEl.find('.tab-link-active');\n    var highlightWidth;\n    var highlightTranslate;\n\n    if ($tabbarEl.hasClass('tabbar-scrollable') && $activeLink && $activeLink[0]) {\n      highlightWidth = $activeLink[0].offsetWidth + \"px\";\n      highlightTranslate = $activeLink[0].offsetLeft + \"px\";\n    } else {\n      var activeIndex = $activeLink.index();\n      highlightWidth = 100 / tabLinksCount + \"%\";\n      highlightTranslate = (app.rtl ? -activeIndex : activeIndex) * 100 + \"%\";\n    }\n\n    nextFrame(function () {\n      $highlightEl.css('width', highlightWidth).transform(\"translate3d(\" + highlightTranslate + \",0,0)\");\n    });\n  },\n  init: function init(tabbarEl) {\n    var app = this;\n    app.toolbar.setHighlight(tabbarEl);\n  },\n  hide: function hide(el, animate) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var $el = $(el);\n    if ($el.hasClass('toolbar-hidden')) return;\n    var className = \"toolbar-hidden\" + (animate ? ' toolbar-transitioning' : '');\n    $el.transitionEnd(function () {\n      $el.removeClass('toolbar-transitioning');\n    });\n    $el.addClass(className);\n    $el.trigger('toolbar:hide');\n    app.emit('toolbarHide', $el[0]);\n  },\n  show: function show(el, animate) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var $el = $(el);\n    if (!$el.hasClass('toolbar-hidden')) return;\n\n    if (animate) {\n      $el.addClass('toolbar-transitioning');\n      $el.transitionEnd(function () {\n        $el.removeClass('toolbar-transitioning');\n      });\n    }\n\n    $el.removeClass('toolbar-hidden');\n    $el.trigger('toolbar:show');\n    app.emit('toolbarShow', $el[0]);\n  },\n  initToolbarOnScroll: function initToolbarOnScroll(pageEl) {\n    var app = this;\n    var $pageEl = $(pageEl);\n    var $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n\n    if ($toolbarEl.length === 0) {\n      $toolbarEl = $pageEl.find('.toolbar');\n    }\n\n    if ($toolbarEl.length === 0) {\n      $toolbarEl = $pageEl.parents('.views').children('.tabbar, .tabbar-labels');\n    }\n\n    if ($toolbarEl.length === 0) {\n      return;\n    }\n\n    var previousScrollTop;\n    var currentScrollTop;\n    var scrollHeight;\n    var offsetHeight;\n    var reachEnd;\n    var action;\n    var toolbarHidden;\n\n    function handleScroll(e) {\n      if ($pageEl.hasClass('page-with-card-opened')) return;\n      if ($pageEl.hasClass('page-previous')) return;\n      var scrollContent = this;\n\n      if (e && e.target && e.target !== scrollContent) {\n        return;\n      }\n\n      currentScrollTop = scrollContent.scrollTop;\n      scrollHeight = scrollContent.scrollHeight;\n      offsetHeight = scrollContent.offsetHeight;\n      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;\n      toolbarHidden = $toolbarEl.hasClass('toolbar-hidden');\n\n      if (reachEnd) {\n        if (app.params.toolbar.showOnPageScrollEnd) {\n          action = 'show';\n        }\n      } else if (previousScrollTop > currentScrollTop) {\n        if (app.params.toolbar.showOnPageScrollTop || currentScrollTop <= 44) {\n          action = 'show';\n        } else {\n          action = 'hide';\n        }\n      } else if (currentScrollTop > 44) {\n        action = 'hide';\n      } else {\n        action = 'show';\n      }\n\n      if (action === 'show' && toolbarHidden) {\n        app.toolbar.show($toolbarEl);\n        toolbarHidden = false;\n      } else if (action === 'hide' && !toolbarHidden) {\n        app.toolbar.hide($toolbarEl);\n        toolbarHidden = true;\n      }\n\n      previousScrollTop = currentScrollTop;\n    }\n\n    $pageEl.on('scroll', '.page-content', handleScroll, true);\n    $pageEl[0].f7ScrollToolbarHandler = handleScroll;\n  }\n};\nexport default {\n  name: 'toolbar',\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      toolbar: Toolbar\n    });\n  },\n  params: {\n    toolbar: {\n      hideOnPageScroll: false,\n      showOnPageScrollEnd: true,\n      showOnPageScrollTop: true\n    }\n  },\n  on: {\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      if (page.$el[0].f7ScrollToolbarHandler) {\n        page.$el.off('scroll', '.page-content', page.$el[0].f7ScrollToolbarHandler, true);\n      }\n    },\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n      var $toolbarEl = page.$el.parents('.view').children('.toolbar');\n\n      if ($toolbarEl.length === 0) {\n        $toolbarEl = page.$el.parents('.views').children('.tabbar, .tabbar-labels');\n      }\n\n      if ($toolbarEl.length === 0) {\n        $toolbarEl = page.$el.find('.toolbar');\n      }\n\n      if ($toolbarEl.length === 0) {\n        return;\n      }\n\n      if (page.$el.hasClass('no-toolbar')) {\n        app.toolbar.hide($toolbarEl);\n      } else {\n        app.toolbar.show($toolbarEl);\n      }\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      page.$el.find('.tabbar, .tabbar-labels').each(function (tabbarEl) {\n        app.toolbar.init(tabbarEl);\n      });\n\n      if (app.params.toolbar.hideOnPageScroll || page.$el.find('.hide-toolbar-on-scroll').length || page.$el.hasClass('hide-toolbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {\n        if (page.$el.find('.keep-toolbar-on-scroll').length || page.$el.hasClass('keep-toolbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {\n          return;\n        }\n\n        app.toolbar.initToolbarOnScroll(page.el);\n      }\n    },\n    init: function init() {\n      var app = this;\n      app.$el.find('.tabbar, .tabbar-labels').each(function (tabbarEl) {\n        app.toolbar.init(tabbarEl);\n      });\n    }\n  },\n  vnode: {\n    tabbar: {\n      insert: function insert(vnode) {\n        var app = this;\n        app.toolbar.init(vnode.elm);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/toolbar/toolbar.js"],"names":["$","nextFrame","bindMethods","Toolbar","setHighlight","tabbarEl","app","theme","$tabbarEl","length","hasClass","$highlightEl","find","tabLinksCount","remove","children","append","next","$activeLink","highlightWidth","highlightTranslate","offsetWidth","offsetLeft","activeIndex","index","rtl","css","transform","init","toolbar","hide","el","animate","$el","className","transitionEnd","removeClass","addClass","trigger","emit","show","initToolbarOnScroll","pageEl","$pageEl","$toolbarEl","parents","previousScrollTop","currentScrollTop","scrollHeight","offsetHeight","reachEnd","action","toolbarHidden","handleScroll","e","scrollContent","target","scrollTop","params","showOnPageScrollEnd","showOnPageScrollTop","on","f7ScrollToolbarHandler","name","create","hideOnPageScroll","pageBeforeRemove","page","off","pageBeforeIn","pageInit","each","vnode","tabbar","insert","elm"],"mappings":"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","sourcesContent":["import $ from '../../shared/dom7';\nimport { nextFrame, bindMethods } from '../../shared/utils';\nvar Toolbar = {\n  setHighlight: function setHighlight(tabbarEl) {\n    var app = this;\n    if (app.theme === 'ios') return;\n    var $tabbarEl = $(tabbarEl);\n    if ($tabbarEl.length === 0 || !($tabbarEl.hasClass('tabbar') || $tabbarEl.hasClass('tabbar-labels'))) return;\n    var $highlightEl = $tabbarEl.find('.tab-link-highlight');\n    var tabLinksCount = $tabbarEl.find('.tab-link').length;\n\n    if (tabLinksCount === 0) {\n      $highlightEl.remove();\n      return;\n    }\n\n    if ($highlightEl.length === 0) {\n      $tabbarEl.children('.toolbar-inner').append('<span class=\"tab-link-highlight\"></span>');\n      $highlightEl = $tabbarEl.find('.tab-link-highlight');\n    } else if ($highlightEl.next().length) {\n      $tabbarEl.children('.toolbar-inner').append($highlightEl);\n    }\n\n    var $activeLink = $tabbarEl.find('.tab-link-active');\n    var highlightWidth;\n    var highlightTranslate;\n\n    if ($tabbarEl.hasClass('tabbar-scrollable') && $activeLink && $activeLink[0]) {\n      highlightWidth = $activeLink[0].offsetWidth + \"px\";\n      highlightTranslate = $activeLink[0].offsetLeft + \"px\";\n    } else {\n      var activeIndex = $activeLink.index();\n      highlightWidth = 100 / tabLinksCount + \"%\";\n      highlightTranslate = (app.rtl ? -activeIndex : activeIndex) * 100 + \"%\";\n    }\n\n    nextFrame(function () {\n      $highlightEl.css('width', highlightWidth).transform(\"translate3d(\" + highlightTranslate + \",0,0)\");\n    });\n  },\n  init: function init(tabbarEl) {\n    var app = this;\n    app.toolbar.setHighlight(tabbarEl);\n  },\n  hide: function hide(el, animate) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var $el = $(el);\n    if ($el.hasClass('toolbar-hidden')) return;\n    var className = \"toolbar-hidden\" + (animate ? ' toolbar-transitioning' : '');\n    $el.transitionEnd(function () {\n      $el.removeClass('toolbar-transitioning');\n    });\n    $el.addClass(className);\n    $el.trigger('toolbar:hide');\n    app.emit('toolbarHide', $el[0]);\n  },\n  show: function show(el, animate) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var $el = $(el);\n    if (!$el.hasClass('toolbar-hidden')) return;\n\n    if (animate) {\n      $el.addClass('toolbar-transitioning');\n      $el.transitionEnd(function () {\n        $el.removeClass('toolbar-transitioning');\n      });\n    }\n\n    $el.removeClass('toolbar-hidden');\n    $el.trigger('toolbar:show');\n    app.emit('toolbarShow', $el[0]);\n  },\n  initToolbarOnScroll: function initToolbarOnScroll(pageEl) {\n    var app = this;\n    var $pageEl = $(pageEl);\n    var $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n\n    if ($toolbarEl.length === 0) {\n      $toolbarEl = $pageEl.find('.toolbar');\n    }\n\n    if ($toolbarEl.length === 0) {\n      $toolbarEl = $pageEl.parents('.views').children('.tabbar, .tabbar-labels');\n    }\n\n    if ($toolbarEl.length === 0) {\n      return;\n    }\n\n    var previousScrollTop;\n    var currentScrollTop;\n    var scrollHeight;\n    var offsetHeight;\n    var reachEnd;\n    var action;\n    var toolbarHidden;\n\n    function handleScroll(e) {\n      if ($pageEl.hasClass('page-with-card-opened')) return;\n      if ($pageEl.hasClass('page-previous')) return;\n      var scrollContent = this;\n\n      if (e && e.target && e.target !== scrollContent) {\n        return;\n      }\n\n      currentScrollTop = scrollContent.scrollTop;\n      scrollHeight = scrollContent.scrollHeight;\n      offsetHeight = scrollContent.offsetHeight;\n      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;\n      toolbarHidden = $toolbarEl.hasClass('toolbar-hidden');\n\n      if (reachEnd) {\n        if (app.params.toolbar.showOnPageScrollEnd) {\n          action = 'show';\n        }\n      } else if (previousScrollTop > currentScrollTop) {\n        if (app.params.toolbar.showOnPageScrollTop || currentScrollTop <= 44) {\n          action = 'show';\n        } else {\n          action = 'hide';\n        }\n      } else if (currentScrollTop > 44) {\n        action = 'hide';\n      } else {\n        action = 'show';\n      }\n\n      if (action === 'show' && toolbarHidden) {\n        app.toolbar.show($toolbarEl);\n        toolbarHidden = false;\n      } else if (action === 'hide' && !toolbarHidden) {\n        app.toolbar.hide($toolbarEl);\n        toolbarHidden = true;\n      }\n\n      previousScrollTop = currentScrollTop;\n    }\n\n    $pageEl.on('scroll', '.page-content', handleScroll, true);\n    $pageEl[0].f7ScrollToolbarHandler = handleScroll;\n  }\n};\nexport default {\n  name: 'toolbar',\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      toolbar: Toolbar\n    });\n  },\n  params: {\n    toolbar: {\n      hideOnPageScroll: false,\n      showOnPageScrollEnd: true,\n      showOnPageScrollTop: true\n    }\n  },\n  on: {\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      if (page.$el[0].f7ScrollToolbarHandler) {\n        page.$el.off('scroll', '.page-content', page.$el[0].f7ScrollToolbarHandler, true);\n      }\n    },\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n      var $toolbarEl = page.$el.parents('.view').children('.toolbar');\n\n      if ($toolbarEl.length === 0) {\n        $toolbarEl = page.$el.parents('.views').children('.tabbar, .tabbar-labels');\n      }\n\n      if ($toolbarEl.length === 0) {\n        $toolbarEl = page.$el.find('.toolbar');\n      }\n\n      if ($toolbarEl.length === 0) {\n        return;\n      }\n\n      if (page.$el.hasClass('no-toolbar')) {\n        app.toolbar.hide($toolbarEl);\n      } else {\n        app.toolbar.show($toolbarEl);\n      }\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      page.$el.find('.tabbar, .tabbar-labels').each(function (tabbarEl) {\n        app.toolbar.init(tabbarEl);\n      });\n\n      if (app.params.toolbar.hideOnPageScroll || page.$el.find('.hide-toolbar-on-scroll').length || page.$el.hasClass('hide-toolbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {\n        if (page.$el.find('.keep-toolbar-on-scroll').length || page.$el.hasClass('keep-toolbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {\n          return;\n        }\n\n        app.toolbar.initToolbarOnScroll(page.el);\n      }\n    },\n    init: function init() {\n      var app = this;\n      app.$el.find('.tabbar, .tabbar-labels').each(function (tabbarEl) {\n        app.toolbar.init(tabbarEl);\n      });\n    }\n  },\n  vnode: {\n    tabbar: {\n      insert: function insert(vnode) {\n        var app = this;\n        app.toolbar.init(vnode.elm);\n      }\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}