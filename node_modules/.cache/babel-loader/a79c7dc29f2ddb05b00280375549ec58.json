{"ast":null,"code":"function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n/* eslint \"no-useless-escape\": \"off\" */\n\n\nimport $ from '../../shared/dom7';\nimport { extend, id, nextTick, deleteProps, iosPreloaderContent, mdPreloaderContent, auroraPreloaderContent } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Autocomplete = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Autocomplete, _Framework7Class);\n\n  function Autocomplete(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var ac = _assertThisInitialized(_this);\n\n    ac.app = app;\n    var device = getDevice();\n    var defaults = extend({\n      on: {}\n    }, app.params.autocomplete);\n\n    if (typeof defaults.searchbarDisableButton === 'undefined') {\n      defaults.searchbarDisableButton = app.theme !== 'aurora';\n    } // Extend defaults with modules params\n\n\n    ac.useModulesParams(defaults);\n    ac.params = extend(defaults, params);\n    var $openerEl;\n\n    if (ac.params.openerEl) {\n      $openerEl = $(ac.params.openerEl);\n      if ($openerEl.length) $openerEl[0].f7Autocomplete = ac;\n    }\n\n    var $inputEl;\n\n    if (ac.params.inputEl) {\n      $inputEl = $(ac.params.inputEl);\n      if ($inputEl.length) $inputEl[0].f7Autocomplete = ac;\n    }\n\n    var uniqueId = id();\n    var url = params.url;\n\n    if (!url && $openerEl && $openerEl.length) {\n      if ($openerEl.attr('href')) url = $openerEl.attr('href');else if ($openerEl.find('a').length > 0) {\n        url = $openerEl.find('a').attr('href');\n      }\n    }\n\n    if (!url || url === '#' || url === '') url = ac.params.url;\n    var inputType = ac.params.multiple ? 'checkbox' : 'radio';\n    extend(ac, {\n      $openerEl: $openerEl,\n      openerEl: $openerEl && $openerEl[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      id: uniqueId,\n      url: url,\n      value: ac.params.value || [],\n      inputType: inputType,\n      inputName: inputType + \"-\" + uniqueId,\n      $modalEl: undefined,\n      $dropdownEl: undefined\n    });\n    var previousQuery = '';\n\n    function onInputChange() {\n      var query = ac.$inputEl.val().trim();\n      if (!ac.params.source) return;\n      ac.params.source.call(ac, query, function (items) {\n        var itemsHTML = '';\n        var limit = ac.params.limit ? Math.min(ac.params.limit, items.length) : items.length;\n        ac.items = items;\n        var regExp;\n\n        if (ac.params.highlightMatches) {\n          query = query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n          regExp = new RegExp(\"(\" + query + \")\", 'i');\n        }\n\n        var firstValue;\n        var firstItem;\n\n        for (var i = 0; i < limit; i += 1) {\n          var itemValue = typeof items[i] === 'object' ? items[i][ac.params.valueProperty] : items[i];\n          var itemText = typeof items[i] === 'object' ? items[i][ac.params.textProperty] : items[i];\n\n          if (i === 0) {\n            firstValue = itemValue;\n            firstItem = ac.items[i];\n          }\n\n          itemsHTML += ac.renderItem({\n            value: itemValue,\n            text: ac.params.highlightMatches ? itemText.replace(regExp, '<b>$1</b>') : itemText\n          }, i);\n        }\n\n        if (itemsHTML === '' && query === '' && ac.params.dropdownPlaceholderText) {\n          itemsHTML += ac.renderItem({\n            placeholder: true,\n            text: ac.params.dropdownPlaceholderText\n          });\n        }\n\n        ac.$dropdownEl.find('ul').html(itemsHTML);\n\n        if (ac.params.typeahead) {\n          if (!firstValue || !firstItem) {\n            return;\n          }\n\n          if (firstValue.toLowerCase().indexOf(query.toLowerCase()) !== 0) {\n            return;\n          }\n\n          if (previousQuery.toLowerCase() === query.toLowerCase()) {\n            ac.value = [];\n            return;\n          }\n\n          if (previousQuery.toLowerCase().indexOf(query.toLowerCase()) === 0) {\n            previousQuery = query;\n            ac.value = [];\n            return;\n          }\n\n          $inputEl.val(firstValue);\n          $inputEl[0].setSelectionRange(query.length, firstValue.length);\n          var previousValue = typeof ac.value[0] === 'object' ? ac.value[0][ac.params.valueProperty] : ac.value[0];\n\n          if (!previousValue || firstValue.toLowerCase() !== previousValue.toLowerCase()) {\n            ac.value = [firstItem];\n            ac.emit('local::change autocompleteChange', [firstItem]);\n          }\n        }\n\n        previousQuery = query;\n      });\n    }\n\n    function onPageInputChange() {\n      var inputEl = this;\n      var value = inputEl.value;\n      var isValues = $(inputEl).parents('.autocomplete-values').length > 0;\n      var item;\n      var itemValue;\n      var aValue;\n\n      if (isValues) {\n        if (ac.inputType === 'checkbox' && !inputEl.checked) {\n          for (var i = 0; i < ac.value.length; i += 1) {\n            aValue = typeof ac.value[i] === 'string' ? ac.value[i] : ac.value[i][ac.params.valueProperty];\n\n            if (aValue === value || aValue * 1 === value * 1) {\n              ac.value.splice(i, 1);\n            }\n          }\n\n          ac.updateValues();\n          ac.emit('local::change autocompleteChange', ac.value);\n        }\n\n        return;\n      } // Find Related Item\n\n\n      for (var _i = 0; _i < ac.items.length; _i += 1) {\n        itemValue = typeof ac.items[_i] === 'object' ? ac.items[_i][ac.params.valueProperty] : ac.items[_i];\n        if (itemValue === value || itemValue * 1 === value * 1) item = ac.items[_i];\n      }\n\n      if (ac.inputType === 'radio') {\n        ac.value = [item];\n      } else if (inputEl.checked) {\n        ac.value.push(item);\n      } else {\n        for (var _i2 = 0; _i2 < ac.value.length; _i2 += 1) {\n          aValue = typeof ac.value[_i2] === 'object' ? ac.value[_i2][ac.params.valueProperty] : ac.value[_i2];\n\n          if (aValue === value || aValue * 1 === value * 1) {\n            ac.value.splice(_i2, 1);\n          }\n        }\n      } // Update Values Block\n\n\n      ac.updateValues(); // On Select Callback\n\n      if (ac.inputType === 'radio' && inputEl.checked || ac.inputType === 'checkbox') {\n        ac.emit('local::change autocompleteChange', ac.value);\n      }\n    }\n\n    function onHtmlClick(e) {\n      var $targetEl = $(e.target);\n      if ($targetEl.is(ac.$inputEl[0]) || ac.$dropdownEl && $targetEl.closest(ac.$dropdownEl[0]).length) return;\n      ac.close();\n    }\n\n    function onOpenerClick() {\n      ac.open();\n    }\n\n    function onInputFocus() {\n      ac.open();\n    }\n\n    function onInputBlur() {\n      if (ac.$dropdownEl.find('label.active-state').length > 0) return;\n      setTimeout(function () {\n        ac.close();\n      }, 0);\n    }\n\n    function onResize() {\n      ac.positionDropdown();\n    }\n\n    function onKeyDown(e) {\n      if (!ac.opened) return;\n\n      if (e.keyCode === 27) {\n        // ESC\n        e.preventDefault();\n        ac.$inputEl.blur();\n        return;\n      }\n\n      if (e.keyCode === 13) {\n        // Enter\n        var $selectedItemLabel = ac.$dropdownEl.find('.autocomplete-dropdown-selected label');\n\n        if ($selectedItemLabel.length) {\n          e.preventDefault();\n          $selectedItemLabel.trigger('click');\n          ac.$inputEl.blur();\n          return;\n        }\n\n        if (ac.params.typeahead) {\n          e.preventDefault();\n          ac.$inputEl.blur();\n        }\n\n        return;\n      }\n\n      if (e.keyCode !== 40 && e.keyCode !== 38) return;\n      e.preventDefault();\n      var $selectedItem = ac.$dropdownEl.find('.autocomplete-dropdown-selected');\n      var $newItem;\n\n      if ($selectedItem.length) {\n        $newItem = $selectedItem[e.keyCode === 40 ? 'next' : 'prev']('li');\n\n        if (!$newItem.length) {\n          $newItem = ac.$dropdownEl.find('li').eq(e.keyCode === 40 ? 0 : ac.$dropdownEl.find('li').length - 1);\n        }\n      } else {\n        $newItem = ac.$dropdownEl.find('li').eq(e.keyCode === 40 ? 0 : ac.$dropdownEl.find('li').length - 1);\n      }\n\n      if ($newItem.hasClass('autocomplete-dropdown-placeholder')) return;\n      $selectedItem.removeClass('autocomplete-dropdown-selected');\n      $newItem.addClass('autocomplete-dropdown-selected');\n    }\n\n    function onDropdownClick() {\n      var $clickedEl = $(this);\n      var clickedItem;\n\n      for (var i = 0; i < ac.items.length; i += 1) {\n        var itemValue = typeof ac.items[i] === 'object' ? ac.items[i][ac.params.valueProperty] : ac.items[i];\n        var value = $clickedEl.attr('data-value');\n\n        if (itemValue === value || itemValue * 1 === value * 1) {\n          clickedItem = ac.items[i];\n        }\n      }\n\n      if (ac.params.updateInputValueOnSelect) {\n        ac.$inputEl.val(typeof clickedItem === 'object' ? clickedItem[ac.params.valueProperty] : clickedItem);\n        ac.$inputEl.trigger('input change');\n      }\n\n      ac.value = [clickedItem];\n      ac.emit('local::change autocompleteChange', [clickedItem]);\n      ac.close();\n    }\n\n    ac.attachEvents = function attachEvents() {\n      if (ac.params.openIn !== 'dropdown' && ac.$openerEl) {\n        ac.$openerEl.on('click', onOpenerClick);\n      }\n\n      if (ac.params.openIn === 'dropdown' && ac.$inputEl) {\n        ac.$inputEl.on('focus', onInputFocus);\n        ac.$inputEl.on(ac.params.inputEvents, onInputChange);\n\n        if (device.android) {\n          $('html').on('click', onHtmlClick);\n        } else {\n          ac.$inputEl.on('blur', onInputBlur);\n        }\n\n        ac.$inputEl.on('keydown', onKeyDown);\n      }\n    };\n\n    ac.detachEvents = function attachEvents() {\n      if (ac.params.openIn !== 'dropdown' && ac.$openerEl) {\n        ac.$openerEl.off('click', onOpenerClick);\n      }\n\n      if (ac.params.openIn === 'dropdown' && ac.$inputEl) {\n        ac.$inputEl.off('focus', onInputFocus);\n        ac.$inputEl.off(ac.params.inputEvents, onInputChange);\n\n        if (device.android) {\n          $('html').off('click', onHtmlClick);\n        } else {\n          ac.$inputEl.off('blur', onInputBlur);\n        }\n\n        ac.$inputEl.off('keydown', onKeyDown);\n      }\n    };\n\n    ac.attachDropdownEvents = function attachDropdownEvents() {\n      ac.$dropdownEl.on('click', 'label', onDropdownClick);\n      app.on('resize', onResize);\n    };\n\n    ac.detachDropdownEvents = function detachDropdownEvents() {\n      ac.$dropdownEl.off('click', 'label', onDropdownClick);\n      app.off('resize', onResize);\n    };\n\n    ac.attachPageEvents = function attachPageEvents() {\n      ac.$el.on('change', 'input[type=\"radio\"], input[type=\"checkbox\"]', onPageInputChange);\n\n      if (ac.params.closeOnSelect && !ac.params.multiple) {\n        ac.$el.once('click', '.list label', function () {\n          nextTick(function () {\n            ac.close();\n          });\n        });\n      }\n    };\n\n    ac.detachPageEvents = function detachPageEvents() {\n      ac.$el.off('change', 'input[type=\"radio\"], input[type=\"checkbox\"]', onPageInputChange);\n    }; // Install Modules\n\n\n    ac.useModules(); // Init\n\n    ac.init();\n    return ac || _assertThisInitialized(_this);\n  }\n\n  var _proto = Autocomplete.prototype;\n\n  _proto.positionDropdown = function positionDropdown() {\n    var _$dropdownEl$children;\n\n    var ac = this;\n    var $inputEl = ac.$inputEl,\n        app = ac.app,\n        $dropdownEl = ac.$dropdownEl;\n    var $pageContentEl = $inputEl.parents('.page-content');\n    if ($pageContentEl.length === 0) return;\n    var inputOffset = $inputEl.offset();\n    var inputOffsetWidth = $inputEl[0].offsetWidth;\n    var inputOffsetHeight = $inputEl[0].offsetHeight;\n    var $listEl = $inputEl.parents('.list');\n    var $listParent;\n    $listEl.parents().each(function (parentEl) {\n      if ($listParent) return;\n      var $parentEl = $(parentEl);\n      if ($parentEl.parent($pageContentEl).length) $listParent = $parentEl;\n    });\n    var listOffset = $listEl.offset();\n    var paddingBottom = parseInt($pageContentEl.css('padding-bottom'), 10);\n    var listOffsetLeft = $listEl.length > 0 ? listOffset.left - $pageContentEl.offset().left : 0;\n    var inputOffsetLeft = inputOffset.left - ($listEl.length > 0 ? listOffset.left : 0) - (app.rtl ? 0 : 0);\n    var inputOffsetTop = inputOffset.top - ($pageContentEl.offset().top - $pageContentEl[0].scrollTop);\n    var maxHeight = $pageContentEl[0].scrollHeight - paddingBottom - (inputOffsetTop + $pageContentEl[0].scrollTop) - $inputEl[0].offsetHeight;\n    var paddingProp = app.rtl ? 'padding-right' : 'padding-left';\n    var paddingValue;\n\n    if ($listEl.length && !ac.params.expandInput) {\n      paddingValue = (app.rtl ? $listEl[0].offsetWidth - inputOffsetLeft - inputOffsetWidth : inputOffsetLeft) - (app.theme === 'md' ? 16 : 15);\n    }\n\n    $dropdownEl.css({\n      left: ($listEl.length > 0 ? listOffsetLeft : inputOffsetLeft) + \"px\",\n      top: inputOffsetTop + $pageContentEl[0].scrollTop + inputOffsetHeight + \"px\",\n      width: ($listEl.length > 0 ? $listEl[0].offsetWidth : inputOffsetWidth) + \"px\"\n    });\n    $dropdownEl.children('.autocomplete-dropdown-inner').css((_$dropdownEl$children = {\n      maxHeight: maxHeight + \"px\"\n    }, _$dropdownEl$children[paddingProp] = $listEl.length > 0 && !ac.params.expandInput ? paddingValue + \"px\" : '', _$dropdownEl$children));\n  };\n\n  _proto.focus = function focus() {\n    var ac = this;\n    ac.$el.find('input[type=search]').focus();\n  };\n\n  _proto.source = function source(query) {\n    var ac = this;\n    if (!ac.params.source) return;\n    var $el = ac.$el;\n    ac.params.source.call(ac, query, function (items) {\n      var itemsHTML = '';\n      var limit = ac.params.limit ? Math.min(ac.params.limit, items.length) : items.length;\n      ac.items = items;\n\n      for (var i = 0; i < limit; i += 1) {\n        var selected = false;\n        var itemValue = typeof items[i] === 'object' ? items[i][ac.params.valueProperty] : items[i];\n\n        for (var j = 0; j < ac.value.length; j += 1) {\n          var aValue = typeof ac.value[j] === 'object' ? ac.value[j][ac.params.valueProperty] : ac.value[j];\n          if (aValue === itemValue || aValue * 1 === itemValue * 1) selected = true;\n        }\n\n        itemsHTML += ac.renderItem({\n          value: itemValue,\n          text: typeof items[i] === 'object' ? items[i][ac.params.textProperty] : items[i],\n          inputType: ac.inputType,\n          id: ac.id,\n          inputName: ac.inputName,\n          selected: selected\n        }, i);\n      }\n\n      $el.find('.autocomplete-found ul').html(itemsHTML);\n\n      if (items.length === 0) {\n        if (query.length !== 0) {\n          $el.find('.autocomplete-not-found').show();\n          $el.find('.autocomplete-found, .autocomplete-values').hide();\n        } else {\n          $el.find('.autocomplete-values').show();\n          $el.find('.autocomplete-found, .autocomplete-not-found').hide();\n        }\n      } else {\n        $el.find('.autocomplete-found').show();\n        $el.find('.autocomplete-not-found, .autocomplete-values').hide();\n      }\n    });\n  };\n\n  _proto.updateValues = function updateValues() {\n    var ac = this;\n    var valuesHTML = '';\n\n    for (var i = 0; i < ac.value.length; i += 1) {\n      valuesHTML += ac.renderItem({\n        value: typeof ac.value[i] === 'object' ? ac.value[i][ac.params.valueProperty] : ac.value[i],\n        text: typeof ac.value[i] === 'object' ? ac.value[i][ac.params.textProperty] : ac.value[i],\n        inputType: ac.inputType,\n        id: ac.id,\n        inputName: ac.inputName + \"-checked}\",\n        selected: true\n      }, i);\n    }\n\n    ac.$el.find('.autocomplete-values ul').html(valuesHTML);\n  };\n\n  _proto.preloaderHide = function preloaderHide() {\n    var ac = this;\n\n    if (ac.params.openIn === 'dropdown' && ac.$dropdownEl) {\n      ac.$dropdownEl.find('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');\n    } else {\n      $('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');\n    }\n  };\n\n  _proto.preloaderShow = function preloaderShow() {\n    var ac = this;\n\n    if (ac.params.openIn === 'dropdown' && ac.$dropdownEl) {\n      ac.$dropdownEl.find('.autocomplete-preloader').addClass('autocomplete-preloader-visible');\n    } else {\n      $('.autocomplete-preloader').addClass('autocomplete-preloader-visible');\n    }\n  };\n\n  _proto.renderPreloader = function renderPreloader() {\n    var ac = this;\n    var preloaders = {\n      iosPreloaderContent: iosPreloaderContent,\n      mdPreloaderContent: mdPreloaderContent,\n      auroraPreloaderContent: auroraPreloaderContent\n    };\n    return $jsx(\"div\", {\n      class: \"autocomplete-preloader preloader \" + (ac.params.preloaderColor ? \"color-\" + ac.params.preloaderColor : '')\n    }, preloaders[ac.app.theme + \"PreloaderContent\"] || '');\n  };\n\n  _proto.renderSearchbar = function renderSearchbar() {\n    var ac = this;\n    if (ac.params.renderSearchbar) return ac.params.renderSearchbar.call(ac);\n    return $jsx(\"form\", {\n      class: \"searchbar\"\n    }, $jsx(\"div\", {\n      class: \"searchbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"searchbar-input-wrap\"\n    }, $jsx(\"input\", {\n      type: \"search\",\n      spellcheck: ac.params.searchbarSpellcheck || 'false',\n      placeholder: ac.params.searchbarPlaceholder\n    }), $jsx(\"i\", {\n      class: \"searchbar-icon\"\n    }), $jsx(\"span\", {\n      class: \"input-clear-button\"\n    })), ac.params.searchbarDisableButton && $jsx(\"span\", {\n      class: \"searchbar-disable-button\"\n    }, ac.params.searchbarDisableText)));\n  };\n\n  _proto.renderItem = function renderItem(item, index) {\n    var ac = this;\n    if (ac.params.renderItem) return ac.params.renderItem.call(ac, item, index);\n    var itemValue = item.value && typeof item.value === 'string' ? item.value.replace(/\"/g, '&quot;') : item.value;\n\n    if (ac.params.openIn !== 'dropdown') {\n      return $jsx(\"li\", null, $jsx(\"label\", {\n        class: \"item-\" + item.inputType + \" item-content\"\n      }, $jsx(\"input\", {\n        type: item.inputType,\n        name: item.inputName,\n        value: itemValue,\n        _checked: item.selected\n      }), $jsx(\"i\", {\n        class: \"icon icon-\" + item.inputType\n      }), $jsx(\"div\", {\n        class: \"item-inner\"\n      }, $jsx(\"div\", {\n        class: \"item-title\"\n      }, item.text))));\n    } // Dropdown\n\n\n    if (!item.placeholder) {\n      return $jsx(\"li\", null, $jsx(\"label\", {\n        class: \"item-radio item-content\",\n        \"data-value\": itemValue\n      }, $jsx(\"div\", {\n        class: \"item-inner\"\n      }, $jsx(\"div\", {\n        class: \"item-title\"\n      }, item.text))));\n    } // Dropwdown placeholder\n\n\n    return $jsx(\"li\", {\n      class: \"autocomplete-dropdown-placeholder\"\n    }, $jsx(\"label\", {\n      class: \"item-content\"\n    }, $jsx(\"div\", {\n      class: \"item-inner\"\n    }, $jsx(\"div\", {\n      class: \"item-title\"\n    }, item.text))));\n  };\n\n  _proto.renderNavbar = function renderNavbar() {\n    var ac = this;\n    if (ac.params.renderNavbar) return ac.params.renderNavbar.call(ac);\n    var pageTitle = ac.params.pageTitle;\n\n    if (typeof pageTitle === 'undefined' && ac.$openerEl && ac.$openerEl.length) {\n      pageTitle = ac.$openerEl.find('.item-title').text().trim();\n    }\n\n    var inPopup = ac.params.openIn === 'popup'; // eslint-disable-next-line\n\n    var navbarLeft = inPopup ? ac.params.preloader && $jsx(\"div\", {\n      class: \"left\"\n    }, ac.renderPreloader()) : $jsx(\"div\", {\n      class: \"left sliding\"\n    }, $jsx(\"a\", {\n      class: \"link back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back\"\n    }), $jsx(\"span\", {\n      class: \"if-not-md\"\n    }, ac.params.pageBackLinkText)));\n    var navbarRight = inPopup ? $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".autocomplete-popup\"\n    }, ac.params.popupCloseLinkText)) : ac.params.preloader && $jsx(\"div\", {\n      class: \"right\"\n    }, ac.renderPreloader());\n    return $jsx(\"div\", {\n      class: \"navbar \" + (ac.params.navbarColorTheme ? \"color-\" + ac.params.navbarColorTheme : '')\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner \" + (ac.params.navbarColorTheme ? \"color-\" + ac.params.navbarColorTheme : '')\n    }, navbarLeft, pageTitle && $jsx(\"div\", {\n      class: \"title sliding\"\n    }, pageTitle), navbarRight, $jsx(\"div\", {\n      class: \"subnavbar sliding\"\n    }, ac.renderSearchbar())));\n  };\n\n  _proto.renderDropdown = function renderDropdown() {\n    var ac = this;\n    if (ac.params.renderDropdown) return ac.params.renderDropdown.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"autocomplete-dropdown\"\n    }, $jsx(\"div\", {\n      class: \"autocomplete-dropdown-inner\"\n    }, $jsx(\"div\", {\n      class: \"list \" + (!ac.params.expandInput ? 'no-safe-areas' : '')\n    }, $jsx(\"ul\", null))), ac.params.preloader && ac.renderPreloader());\n  };\n\n  _proto.renderPage = function renderPage(inPopup) {\n    var ac = this;\n    if (ac.params.renderPage) return ac.params.renderPage.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"page page-with-subnavbar autocomplete-page\",\n      \"data-name\": \"autocomplete-page\"\n    }, ac.renderNavbar(inPopup), $jsx(\"div\", {\n      class: \"searchbar-backdrop\"\n    }), $jsx(\"div\", {\n      class: \"page-content\"\n    }, $jsx(\"div\", {\n      class: \"list autocomplete-list autocomplete-found autocomplete-list-\" + ac.id + \" \" + (ac.params.formColorTheme ? \"color-\" + ac.params.formColorTheme : '')\n    }, $jsx(\"ul\", null)), $jsx(\"div\", {\n      class: \"list autocomplete-not-found\"\n    }, $jsx(\"ul\", null, $jsx(\"li\", {\n      class: \"item-content\"\n    }, $jsx(\"div\", {\n      class: \"item-inner\"\n    }, $jsx(\"div\", {\n      class: \"item-title\"\n    }, ac.params.notFoundText))))), $jsx(\"div\", {\n      class: \"list autocomplete-values\"\n    }, $jsx(\"ul\", null))));\n  };\n\n  _proto.renderPopup = function renderPopup() {\n    var ac = this;\n    if (ac.params.renderPopup) return ac.params.renderPopup.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"popup autocomplete-popup\"\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, ac.renderPage(true), \";\"));\n  };\n\n  _proto.onOpen = function onOpen(type, el) {\n    var ac = this;\n    var app = ac.app;\n    var $el = $(el);\n    ac.$el = $el;\n    ac.el = $el[0];\n    ac.openedIn = type;\n    ac.opened = true;\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.attachDropdownEvents();\n      ac.$dropdownEl.addClass('autocomplete-dropdown-in');\n      ac.$inputEl.trigger('input');\n    } else {\n      // Init SB\n      var $searchbarEl = $el.find('.searchbar');\n\n      if (ac.params.openIn === 'page' && app.theme === 'ios' && $searchbarEl.length === 0) {\n        $searchbarEl = $(app.navbar.getElByPage($el)).find('.searchbar');\n      }\n\n      ac.searchbar = app.searchbar.create({\n        el: $searchbarEl,\n        backdropEl: $el.find('.searchbar-backdrop'),\n        customSearch: true,\n        on: {\n          search: function search(sb, query) {\n            if (query.length === 0 && ac.searchbar.enabled) {\n              ac.searchbar.backdropShow();\n            } else {\n              ac.searchbar.backdropHide();\n            }\n\n            ac.source(query);\n          }\n        }\n      }); // Attach page events\n\n      ac.attachPageEvents(); // Update Values On Page Init\n\n      ac.updateValues(); // Source on load\n\n      if (ac.params.requestSourceOnOpen) ac.source('');\n    }\n\n    ac.emit('local::open autocompleteOpen', ac);\n  };\n\n  _proto.autoFocus = function autoFocus() {\n    var ac = this;\n\n    if (ac.searchbar && ac.searchbar.$inputEl) {\n      ac.searchbar.$inputEl.focus();\n    }\n\n    return ac;\n  };\n\n  _proto.onOpened = function onOpened() {\n    var ac = this;\n\n    if (ac.params.openIn !== 'dropdown' && ac.params.autoFocus) {\n      ac.autoFocus();\n    }\n\n    ac.emit('local::opened autocompleteOpened', ac);\n  };\n\n  _proto.onClose = function onClose() {\n    var ac = this;\n    if (ac.destroyed) return; // Destroy SB\n\n    if (ac.searchbar && ac.searchbar.destroy) {\n      ac.searchbar.destroy();\n      ac.searchbar = null;\n      delete ac.searchbar;\n    }\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.detachDropdownEvents();\n      ac.$dropdownEl.removeClass('autocomplete-dropdown-in').remove();\n      ac.$inputEl.parents('.item-content-dropdown-expanded').removeClass('item-content-dropdown-expanded');\n    } else {\n      ac.detachPageEvents();\n    }\n\n    ac.emit('local::close autocompleteClose', ac);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var ac = this;\n    if (ac.destroyed) return;\n    ac.opened = false;\n    ac.$el = null;\n    ac.el = null;\n    delete ac.$el;\n    delete ac.el;\n    ac.emit('local::closed autocompleteClosed', ac);\n  };\n\n  _proto.openPage = function openPage() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var pageHtml = ac.renderPage();\n    ac.view.router.navigate({\n      url: ac.url,\n      route: {\n        content: pageHtml,\n        path: ac.url,\n        on: {\n          pageBeforeIn: function pageBeforeIn(e, page) {\n            ac.onOpen('page', page.el);\n          },\n          pageAfterIn: function pageAfterIn(e, page) {\n            ac.onOpened('page', page.el);\n          },\n          pageBeforeOut: function pageBeforeOut(e, page) {\n            ac.onClose('page', page.el);\n          },\n          pageAfterOut: function pageAfterOut(e, page) {\n            ac.onClosed('page', page.el);\n          }\n        },\n        options: {\n          animate: ac.params.animate\n        }\n      }\n    });\n    return ac;\n  };\n\n  _proto.openPopup = function openPopup() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var popupHtml = ac.renderPopup();\n    var popupParams = {\n      content: popupHtml,\n      animate: ac.params.animate,\n      push: ac.params.popupPush,\n      swipeToClose: ac.params.popupSwipeToClose,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          ac.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          ac.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          ac.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          ac.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (ac.params.routableModals && ac.view) {\n      ac.view.router.navigate({\n        url: ac.url,\n        route: {\n          path: ac.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      ac.modal = ac.app.popup.create(popupParams).open(ac.params.animate);\n    }\n\n    return ac;\n  };\n\n  _proto.openDropdown = function openDropdown() {\n    var ac = this;\n\n    if (!ac.$dropdownEl) {\n      ac.$dropdownEl = $(ac.renderDropdown());\n    }\n\n    var $listEl = ac.$inputEl.parents('.list');\n\n    if ($listEl.length && ac.$inputEl.parents('.item-content').length > 0 && ac.params.expandInput) {\n      ac.$inputEl.parents('.item-content').addClass('item-content-dropdown-expanded');\n    }\n\n    var $pageContentEl = ac.$inputEl.parents('.page-content');\n\n    if (ac.params.dropdownContainerEl) {\n      $(ac.params.dropdownContainerEl).append(ac.$dropdownEl);\n    } else if ($pageContentEl.length === 0) {\n      ac.$dropdownEl.insertAfter(ac.$inputEl);\n    } else {\n      ac.positionDropdown();\n      $pageContentEl.append(ac.$dropdownEl);\n    }\n\n    ac.onOpen('dropdown', ac.$dropdownEl);\n    ac.onOpened('dropdown', ac.$dropdownEl);\n  };\n\n  _proto.open = function open() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var openIn = ac.params.openIn;\n    ac[\"open\" + openIn.split('').map(function (el, index) {\n      if (index === 0) return el.toUpperCase();\n      return el;\n    }).join('')]();\n    return ac;\n  };\n\n  _proto.close = function close() {\n    var ac = this;\n    if (!ac.opened) return ac;\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.onClose();\n      ac.onClosed();\n    } else if (ac.params.routableModals && ac.view || ac.openedIn === 'page') {\n      ac.view.router.back({\n        animate: ac.params.animate\n      });\n    } else {\n      ac.modal.once('modalClosed', function () {\n        nextTick(function () {\n          if (ac.destroyed) return;\n          ac.modal.destroy();\n          delete ac.modal;\n        });\n      });\n      ac.modal.close();\n    }\n\n    return ac;\n  };\n\n  _proto.init = function init() {\n    var ac = this;\n    ac.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var ac = this;\n    ac.emit('local::beforeDestroy autocompleteBeforeDestroy', ac);\n    ac.detachEvents();\n\n    if (ac.$inputEl && ac.$inputEl[0]) {\n      delete ac.$inputEl[0].f7Autocomplete;\n    }\n\n    if (ac.$openerEl && ac.$openerEl[0]) {\n      delete ac.$openerEl[0].f7Autocomplete;\n    }\n\n    deleteProps(ac);\n    ac.destroyed = true;\n  };\n\n  _createClass(Autocomplete, [{\n    key: \"view\",\n    get: function get() {\n      var ac = this;\n      var $openerEl = ac.$openerEl,\n          $inputEl = ac.$inputEl,\n          app = ac.app;\n      var view;\n\n      if (ac.params.view) {\n        view = ac.params.view;\n      } else if ($openerEl || $inputEl) {\n        var $el = $openerEl || $inputEl;\n        view = $el.closest('.view').length && $el.closest('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Autocomplete;\n}(Framework7Class);\n\nexport default Autocomplete;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/autocomplete/autocomplete-class.js"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","$","extend","id","nextTick","deleteProps","iosPreloaderContent","mdPreloaderContent","auroraPreloaderContent","getDevice","Framework7Class","$jsx","Autocomplete","_Framework7Class","app","params","_this","call","ac","device","defaults","on","autocomplete","searchbarDisableButton","theme","useModulesParams","$openerEl","openerEl","f7Autocomplete","$inputEl","inputEl","uniqueId","url","attr","find","inputType","multiple","value","inputName","$modalEl","undefined","$dropdownEl","previousQuery","onInputChange","query","val","trim","source","items","itemsHTML","limit","Math","min","regExp","highlightMatches","replace","RegExp","firstValue","firstItem","itemValue","valueProperty","itemText","textProperty","renderItem","text","dropdownPlaceholderText","placeholder","html","typeahead","toLowerCase","indexOf","setSelectionRange","previousValue","emit","onPageInputChange","isValues","parents","item","aValue","checked","splice","updateValues","_i","push","_i2","onHtmlClick","e","$targetEl","is","closest","close","onOpenerClick","open","onInputFocus","onInputBlur","setTimeout","onResize","positionDropdown","onKeyDown","opened","keyCode","preventDefault","blur","$selectedItemLabel","trigger","$selectedItem","$newItem","eq","hasClass","removeClass","addClass","onDropdownClick","$clickedEl","clickedItem","updateInputValueOnSelect","attachEvents","openIn","inputEvents","android","detachEvents","off","attachDropdownEvents","detachDropdownEvents","attachPageEvents","$el","closeOnSelect","once","detachPageEvents","useModules","init","_proto","_$dropdownEl$children","$pageContentEl","inputOffset","offset","inputOffsetWidth","offsetWidth","inputOffsetHeight","offsetHeight","$listEl","$listParent","each","parentEl","$parentEl","parent","listOffset","paddingBottom","parseInt","css","listOffsetLeft","left","inputOffsetLeft","rtl","inputOffsetTop","top","scrollTop","maxHeight","scrollHeight","paddingProp","paddingValue","expandInput","width","children","focus","selected","j","show","hide","valuesHTML","preloaderHide","preloaderShow","renderPreloader","preloaders","class","preloaderColor","renderSearchbar","type","spellcheck","searchbarSpellcheck","searchbarPlaceholder","searchbarDisableText","index","name","_checked","renderNavbar","pageTitle","inPopup","navbarLeft","preloader","pageBackLinkText","navbarRight","popupCloseLinkText","navbarColorTheme","renderDropdown","renderPage","formColorTheme","notFoundText","renderPopup","onOpen","el","openedIn","$searchbarEl","navbar","getElByPage","searchbar","backdropEl","customSearch","search","sb","enabled","backdropShow","backdropHide","requestSourceOnOpen","autoFocus","onOpened","onClose","destroyed","destroy","remove","onClosed","openPage","pageHtml","view","router","navigate","route","content","path","pageBeforeIn","page","pageAfterIn","pageBeforeOut","pageAfterOut","options","animate","openPopup","popupHtml","popupParams","popupPush","swipeToClose","popupSwipeToClose","popupOpen","popup","popupOpened","popupClose","popupClosed","routableModals","modal","openDropdown","dropdownContainerEl","append","insertAfter","split","map","toUpperCase","join","back","get","f7View","views","main"],"mappings":"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","sourcesContent":["function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/* eslint \"no-useless-escape\": \"off\" */\nimport $ from '../../shared/dom7';\nimport { extend, id, nextTick, deleteProps, iosPreloaderContent, mdPreloaderContent, auroraPreloaderContent } from '../../shared/utils';\nimport { getDevice } from '../../shared/get-device';\nimport Framework7Class from '../../shared/class';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Autocomplete = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Autocomplete, _Framework7Class);\n\n  function Autocomplete(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var ac = _assertThisInitialized(_this);\n\n    ac.app = app;\n    var device = getDevice();\n    var defaults = extend({\n      on: {}\n    }, app.params.autocomplete);\n\n    if (typeof defaults.searchbarDisableButton === 'undefined') {\n      defaults.searchbarDisableButton = app.theme !== 'aurora';\n    } // Extend defaults with modules params\n\n\n    ac.useModulesParams(defaults);\n    ac.params = extend(defaults, params);\n    var $openerEl;\n\n    if (ac.params.openerEl) {\n      $openerEl = $(ac.params.openerEl);\n      if ($openerEl.length) $openerEl[0].f7Autocomplete = ac;\n    }\n\n    var $inputEl;\n\n    if (ac.params.inputEl) {\n      $inputEl = $(ac.params.inputEl);\n      if ($inputEl.length) $inputEl[0].f7Autocomplete = ac;\n    }\n\n    var uniqueId = id();\n    var url = params.url;\n\n    if (!url && $openerEl && $openerEl.length) {\n      if ($openerEl.attr('href')) url = $openerEl.attr('href');else if ($openerEl.find('a').length > 0) {\n        url = $openerEl.find('a').attr('href');\n      }\n    }\n\n    if (!url || url === '#' || url === '') url = ac.params.url;\n    var inputType = ac.params.multiple ? 'checkbox' : 'radio';\n    extend(ac, {\n      $openerEl: $openerEl,\n      openerEl: $openerEl && $openerEl[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      id: uniqueId,\n      url: url,\n      value: ac.params.value || [],\n      inputType: inputType,\n      inputName: inputType + \"-\" + uniqueId,\n      $modalEl: undefined,\n      $dropdownEl: undefined\n    });\n    var previousQuery = '';\n\n    function onInputChange() {\n      var query = ac.$inputEl.val().trim();\n      if (!ac.params.source) return;\n      ac.params.source.call(ac, query, function (items) {\n        var itemsHTML = '';\n        var limit = ac.params.limit ? Math.min(ac.params.limit, items.length) : items.length;\n        ac.items = items;\n        var regExp;\n\n        if (ac.params.highlightMatches) {\n          query = query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n          regExp = new RegExp(\"(\" + query + \")\", 'i');\n        }\n\n        var firstValue;\n        var firstItem;\n\n        for (var i = 0; i < limit; i += 1) {\n          var itemValue = typeof items[i] === 'object' ? items[i][ac.params.valueProperty] : items[i];\n          var itemText = typeof items[i] === 'object' ? items[i][ac.params.textProperty] : items[i];\n\n          if (i === 0) {\n            firstValue = itemValue;\n            firstItem = ac.items[i];\n          }\n\n          itemsHTML += ac.renderItem({\n            value: itemValue,\n            text: ac.params.highlightMatches ? itemText.replace(regExp, '<b>$1</b>') : itemText\n          }, i);\n        }\n\n        if (itemsHTML === '' && query === '' && ac.params.dropdownPlaceholderText) {\n          itemsHTML += ac.renderItem({\n            placeholder: true,\n            text: ac.params.dropdownPlaceholderText\n          });\n        }\n\n        ac.$dropdownEl.find('ul').html(itemsHTML);\n\n        if (ac.params.typeahead) {\n          if (!firstValue || !firstItem) {\n            return;\n          }\n\n          if (firstValue.toLowerCase().indexOf(query.toLowerCase()) !== 0) {\n            return;\n          }\n\n          if (previousQuery.toLowerCase() === query.toLowerCase()) {\n            ac.value = [];\n            return;\n          }\n\n          if (previousQuery.toLowerCase().indexOf(query.toLowerCase()) === 0) {\n            previousQuery = query;\n            ac.value = [];\n            return;\n          }\n\n          $inputEl.val(firstValue);\n          $inputEl[0].setSelectionRange(query.length, firstValue.length);\n          var previousValue = typeof ac.value[0] === 'object' ? ac.value[0][ac.params.valueProperty] : ac.value[0];\n\n          if (!previousValue || firstValue.toLowerCase() !== previousValue.toLowerCase()) {\n            ac.value = [firstItem];\n            ac.emit('local::change autocompleteChange', [firstItem]);\n          }\n        }\n\n        previousQuery = query;\n      });\n    }\n\n    function onPageInputChange() {\n      var inputEl = this;\n      var value = inputEl.value;\n      var isValues = $(inputEl).parents('.autocomplete-values').length > 0;\n      var item;\n      var itemValue;\n      var aValue;\n\n      if (isValues) {\n        if (ac.inputType === 'checkbox' && !inputEl.checked) {\n          for (var i = 0; i < ac.value.length; i += 1) {\n            aValue = typeof ac.value[i] === 'string' ? ac.value[i] : ac.value[i][ac.params.valueProperty];\n\n            if (aValue === value || aValue * 1 === value * 1) {\n              ac.value.splice(i, 1);\n            }\n          }\n\n          ac.updateValues();\n          ac.emit('local::change autocompleteChange', ac.value);\n        }\n\n        return;\n      } // Find Related Item\n\n\n      for (var _i = 0; _i < ac.items.length; _i += 1) {\n        itemValue = typeof ac.items[_i] === 'object' ? ac.items[_i][ac.params.valueProperty] : ac.items[_i];\n        if (itemValue === value || itemValue * 1 === value * 1) item = ac.items[_i];\n      }\n\n      if (ac.inputType === 'radio') {\n        ac.value = [item];\n      } else if (inputEl.checked) {\n        ac.value.push(item);\n      } else {\n        for (var _i2 = 0; _i2 < ac.value.length; _i2 += 1) {\n          aValue = typeof ac.value[_i2] === 'object' ? ac.value[_i2][ac.params.valueProperty] : ac.value[_i2];\n\n          if (aValue === value || aValue * 1 === value * 1) {\n            ac.value.splice(_i2, 1);\n          }\n        }\n      } // Update Values Block\n\n\n      ac.updateValues(); // On Select Callback\n\n      if (ac.inputType === 'radio' && inputEl.checked || ac.inputType === 'checkbox') {\n        ac.emit('local::change autocompleteChange', ac.value);\n      }\n    }\n\n    function onHtmlClick(e) {\n      var $targetEl = $(e.target);\n      if ($targetEl.is(ac.$inputEl[0]) || ac.$dropdownEl && $targetEl.closest(ac.$dropdownEl[0]).length) return;\n      ac.close();\n    }\n\n    function onOpenerClick() {\n      ac.open();\n    }\n\n    function onInputFocus() {\n      ac.open();\n    }\n\n    function onInputBlur() {\n      if (ac.$dropdownEl.find('label.active-state').length > 0) return;\n      setTimeout(function () {\n        ac.close();\n      }, 0);\n    }\n\n    function onResize() {\n      ac.positionDropdown();\n    }\n\n    function onKeyDown(e) {\n      if (!ac.opened) return;\n\n      if (e.keyCode === 27) {\n        // ESC\n        e.preventDefault();\n        ac.$inputEl.blur();\n        return;\n      }\n\n      if (e.keyCode === 13) {\n        // Enter\n        var $selectedItemLabel = ac.$dropdownEl.find('.autocomplete-dropdown-selected label');\n\n        if ($selectedItemLabel.length) {\n          e.preventDefault();\n          $selectedItemLabel.trigger('click');\n          ac.$inputEl.blur();\n          return;\n        }\n\n        if (ac.params.typeahead) {\n          e.preventDefault();\n          ac.$inputEl.blur();\n        }\n\n        return;\n      }\n\n      if (e.keyCode !== 40 && e.keyCode !== 38) return;\n      e.preventDefault();\n      var $selectedItem = ac.$dropdownEl.find('.autocomplete-dropdown-selected');\n      var $newItem;\n\n      if ($selectedItem.length) {\n        $newItem = $selectedItem[e.keyCode === 40 ? 'next' : 'prev']('li');\n\n        if (!$newItem.length) {\n          $newItem = ac.$dropdownEl.find('li').eq(e.keyCode === 40 ? 0 : ac.$dropdownEl.find('li').length - 1);\n        }\n      } else {\n        $newItem = ac.$dropdownEl.find('li').eq(e.keyCode === 40 ? 0 : ac.$dropdownEl.find('li').length - 1);\n      }\n\n      if ($newItem.hasClass('autocomplete-dropdown-placeholder')) return;\n      $selectedItem.removeClass('autocomplete-dropdown-selected');\n      $newItem.addClass('autocomplete-dropdown-selected');\n    }\n\n    function onDropdownClick() {\n      var $clickedEl = $(this);\n      var clickedItem;\n\n      for (var i = 0; i < ac.items.length; i += 1) {\n        var itemValue = typeof ac.items[i] === 'object' ? ac.items[i][ac.params.valueProperty] : ac.items[i];\n        var value = $clickedEl.attr('data-value');\n\n        if (itemValue === value || itemValue * 1 === value * 1) {\n          clickedItem = ac.items[i];\n        }\n      }\n\n      if (ac.params.updateInputValueOnSelect) {\n        ac.$inputEl.val(typeof clickedItem === 'object' ? clickedItem[ac.params.valueProperty] : clickedItem);\n        ac.$inputEl.trigger('input change');\n      }\n\n      ac.value = [clickedItem];\n      ac.emit('local::change autocompleteChange', [clickedItem]);\n      ac.close();\n    }\n\n    ac.attachEvents = function attachEvents() {\n      if (ac.params.openIn !== 'dropdown' && ac.$openerEl) {\n        ac.$openerEl.on('click', onOpenerClick);\n      }\n\n      if (ac.params.openIn === 'dropdown' && ac.$inputEl) {\n        ac.$inputEl.on('focus', onInputFocus);\n        ac.$inputEl.on(ac.params.inputEvents, onInputChange);\n\n        if (device.android) {\n          $('html').on('click', onHtmlClick);\n        } else {\n          ac.$inputEl.on('blur', onInputBlur);\n        }\n\n        ac.$inputEl.on('keydown', onKeyDown);\n      }\n    };\n\n    ac.detachEvents = function attachEvents() {\n      if (ac.params.openIn !== 'dropdown' && ac.$openerEl) {\n        ac.$openerEl.off('click', onOpenerClick);\n      }\n\n      if (ac.params.openIn === 'dropdown' && ac.$inputEl) {\n        ac.$inputEl.off('focus', onInputFocus);\n        ac.$inputEl.off(ac.params.inputEvents, onInputChange);\n\n        if (device.android) {\n          $('html').off('click', onHtmlClick);\n        } else {\n          ac.$inputEl.off('blur', onInputBlur);\n        }\n\n        ac.$inputEl.off('keydown', onKeyDown);\n      }\n    };\n\n    ac.attachDropdownEvents = function attachDropdownEvents() {\n      ac.$dropdownEl.on('click', 'label', onDropdownClick);\n      app.on('resize', onResize);\n    };\n\n    ac.detachDropdownEvents = function detachDropdownEvents() {\n      ac.$dropdownEl.off('click', 'label', onDropdownClick);\n      app.off('resize', onResize);\n    };\n\n    ac.attachPageEvents = function attachPageEvents() {\n      ac.$el.on('change', 'input[type=\"radio\"], input[type=\"checkbox\"]', onPageInputChange);\n\n      if (ac.params.closeOnSelect && !ac.params.multiple) {\n        ac.$el.once('click', '.list label', function () {\n          nextTick(function () {\n            ac.close();\n          });\n        });\n      }\n    };\n\n    ac.detachPageEvents = function detachPageEvents() {\n      ac.$el.off('change', 'input[type=\"radio\"], input[type=\"checkbox\"]', onPageInputChange);\n    }; // Install Modules\n\n\n    ac.useModules(); // Init\n\n    ac.init();\n    return ac || _assertThisInitialized(_this);\n  }\n\n  var _proto = Autocomplete.prototype;\n\n  _proto.positionDropdown = function positionDropdown() {\n    var _$dropdownEl$children;\n\n    var ac = this;\n    var $inputEl = ac.$inputEl,\n        app = ac.app,\n        $dropdownEl = ac.$dropdownEl;\n    var $pageContentEl = $inputEl.parents('.page-content');\n    if ($pageContentEl.length === 0) return;\n    var inputOffset = $inputEl.offset();\n    var inputOffsetWidth = $inputEl[0].offsetWidth;\n    var inputOffsetHeight = $inputEl[0].offsetHeight;\n    var $listEl = $inputEl.parents('.list');\n    var $listParent;\n    $listEl.parents().each(function (parentEl) {\n      if ($listParent) return;\n      var $parentEl = $(parentEl);\n      if ($parentEl.parent($pageContentEl).length) $listParent = $parentEl;\n    });\n    var listOffset = $listEl.offset();\n    var paddingBottom = parseInt($pageContentEl.css('padding-bottom'), 10);\n    var listOffsetLeft = $listEl.length > 0 ? listOffset.left - $pageContentEl.offset().left : 0;\n    var inputOffsetLeft = inputOffset.left - ($listEl.length > 0 ? listOffset.left : 0) - (app.rtl ? 0 : 0);\n    var inputOffsetTop = inputOffset.top - ($pageContentEl.offset().top - $pageContentEl[0].scrollTop);\n    var maxHeight = $pageContentEl[0].scrollHeight - paddingBottom - (inputOffsetTop + $pageContentEl[0].scrollTop) - $inputEl[0].offsetHeight;\n    var paddingProp = app.rtl ? 'padding-right' : 'padding-left';\n    var paddingValue;\n\n    if ($listEl.length && !ac.params.expandInput) {\n      paddingValue = (app.rtl ? $listEl[0].offsetWidth - inputOffsetLeft - inputOffsetWidth : inputOffsetLeft) - (app.theme === 'md' ? 16 : 15);\n    }\n\n    $dropdownEl.css({\n      left: ($listEl.length > 0 ? listOffsetLeft : inputOffsetLeft) + \"px\",\n      top: inputOffsetTop + $pageContentEl[0].scrollTop + inputOffsetHeight + \"px\",\n      width: ($listEl.length > 0 ? $listEl[0].offsetWidth : inputOffsetWidth) + \"px\"\n    });\n    $dropdownEl.children('.autocomplete-dropdown-inner').css((_$dropdownEl$children = {\n      maxHeight: maxHeight + \"px\"\n    }, _$dropdownEl$children[paddingProp] = $listEl.length > 0 && !ac.params.expandInput ? paddingValue + \"px\" : '', _$dropdownEl$children));\n  };\n\n  _proto.focus = function focus() {\n    var ac = this;\n    ac.$el.find('input[type=search]').focus();\n  };\n\n  _proto.source = function source(query) {\n    var ac = this;\n    if (!ac.params.source) return;\n    var $el = ac.$el;\n    ac.params.source.call(ac, query, function (items) {\n      var itemsHTML = '';\n      var limit = ac.params.limit ? Math.min(ac.params.limit, items.length) : items.length;\n      ac.items = items;\n\n      for (var i = 0; i < limit; i += 1) {\n        var selected = false;\n        var itemValue = typeof items[i] === 'object' ? items[i][ac.params.valueProperty] : items[i];\n\n        for (var j = 0; j < ac.value.length; j += 1) {\n          var aValue = typeof ac.value[j] === 'object' ? ac.value[j][ac.params.valueProperty] : ac.value[j];\n          if (aValue === itemValue || aValue * 1 === itemValue * 1) selected = true;\n        }\n\n        itemsHTML += ac.renderItem({\n          value: itemValue,\n          text: typeof items[i] === 'object' ? items[i][ac.params.textProperty] : items[i],\n          inputType: ac.inputType,\n          id: ac.id,\n          inputName: ac.inputName,\n          selected: selected\n        }, i);\n      }\n\n      $el.find('.autocomplete-found ul').html(itemsHTML);\n\n      if (items.length === 0) {\n        if (query.length !== 0) {\n          $el.find('.autocomplete-not-found').show();\n          $el.find('.autocomplete-found, .autocomplete-values').hide();\n        } else {\n          $el.find('.autocomplete-values').show();\n          $el.find('.autocomplete-found, .autocomplete-not-found').hide();\n        }\n      } else {\n        $el.find('.autocomplete-found').show();\n        $el.find('.autocomplete-not-found, .autocomplete-values').hide();\n      }\n    });\n  };\n\n  _proto.updateValues = function updateValues() {\n    var ac = this;\n    var valuesHTML = '';\n\n    for (var i = 0; i < ac.value.length; i += 1) {\n      valuesHTML += ac.renderItem({\n        value: typeof ac.value[i] === 'object' ? ac.value[i][ac.params.valueProperty] : ac.value[i],\n        text: typeof ac.value[i] === 'object' ? ac.value[i][ac.params.textProperty] : ac.value[i],\n        inputType: ac.inputType,\n        id: ac.id,\n        inputName: ac.inputName + \"-checked}\",\n        selected: true\n      }, i);\n    }\n\n    ac.$el.find('.autocomplete-values ul').html(valuesHTML);\n  };\n\n  _proto.preloaderHide = function preloaderHide() {\n    var ac = this;\n\n    if (ac.params.openIn === 'dropdown' && ac.$dropdownEl) {\n      ac.$dropdownEl.find('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');\n    } else {\n      $('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');\n    }\n  };\n\n  _proto.preloaderShow = function preloaderShow() {\n    var ac = this;\n\n    if (ac.params.openIn === 'dropdown' && ac.$dropdownEl) {\n      ac.$dropdownEl.find('.autocomplete-preloader').addClass('autocomplete-preloader-visible');\n    } else {\n      $('.autocomplete-preloader').addClass('autocomplete-preloader-visible');\n    }\n  };\n\n  _proto.renderPreloader = function renderPreloader() {\n    var ac = this;\n    var preloaders = {\n      iosPreloaderContent: iosPreloaderContent,\n      mdPreloaderContent: mdPreloaderContent,\n      auroraPreloaderContent: auroraPreloaderContent\n    };\n    return $jsx(\"div\", {\n      class: \"autocomplete-preloader preloader \" + (ac.params.preloaderColor ? \"color-\" + ac.params.preloaderColor : '')\n    }, preloaders[ac.app.theme + \"PreloaderContent\"] || '');\n  };\n\n  _proto.renderSearchbar = function renderSearchbar() {\n    var ac = this;\n    if (ac.params.renderSearchbar) return ac.params.renderSearchbar.call(ac);\n    return $jsx(\"form\", {\n      class: \"searchbar\"\n    }, $jsx(\"div\", {\n      class: \"searchbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"searchbar-input-wrap\"\n    }, $jsx(\"input\", {\n      type: \"search\",\n      spellcheck: ac.params.searchbarSpellcheck || 'false',\n      placeholder: ac.params.searchbarPlaceholder\n    }), $jsx(\"i\", {\n      class: \"searchbar-icon\"\n    }), $jsx(\"span\", {\n      class: \"input-clear-button\"\n    })), ac.params.searchbarDisableButton && $jsx(\"span\", {\n      class: \"searchbar-disable-button\"\n    }, ac.params.searchbarDisableText)));\n  };\n\n  _proto.renderItem = function renderItem(item, index) {\n    var ac = this;\n    if (ac.params.renderItem) return ac.params.renderItem.call(ac, item, index);\n    var itemValue = item.value && typeof item.value === 'string' ? item.value.replace(/\"/g, '&quot;') : item.value;\n\n    if (ac.params.openIn !== 'dropdown') {\n      return $jsx(\"li\", null, $jsx(\"label\", {\n        class: \"item-\" + item.inputType + \" item-content\"\n      }, $jsx(\"input\", {\n        type: item.inputType,\n        name: item.inputName,\n        value: itemValue,\n        _checked: item.selected\n      }), $jsx(\"i\", {\n        class: \"icon icon-\" + item.inputType\n      }), $jsx(\"div\", {\n        class: \"item-inner\"\n      }, $jsx(\"div\", {\n        class: \"item-title\"\n      }, item.text))));\n    } // Dropdown\n\n\n    if (!item.placeholder) {\n      return $jsx(\"li\", null, $jsx(\"label\", {\n        class: \"item-radio item-content\",\n        \"data-value\": itemValue\n      }, $jsx(\"div\", {\n        class: \"item-inner\"\n      }, $jsx(\"div\", {\n        class: \"item-title\"\n      }, item.text))));\n    } // Dropwdown placeholder\n\n\n    return $jsx(\"li\", {\n      class: \"autocomplete-dropdown-placeholder\"\n    }, $jsx(\"label\", {\n      class: \"item-content\"\n    }, $jsx(\"div\", {\n      class: \"item-inner\"\n    }, $jsx(\"div\", {\n      class: \"item-title\"\n    }, item.text))));\n  };\n\n  _proto.renderNavbar = function renderNavbar() {\n    var ac = this;\n    if (ac.params.renderNavbar) return ac.params.renderNavbar.call(ac);\n    var pageTitle = ac.params.pageTitle;\n\n    if (typeof pageTitle === 'undefined' && ac.$openerEl && ac.$openerEl.length) {\n      pageTitle = ac.$openerEl.find('.item-title').text().trim();\n    }\n\n    var inPopup = ac.params.openIn === 'popup'; // eslint-disable-next-line\n\n    var navbarLeft = inPopup ? ac.params.preloader && $jsx(\"div\", {\n      class: \"left\"\n    }, ac.renderPreloader()) : $jsx(\"div\", {\n      class: \"left sliding\"\n    }, $jsx(\"a\", {\n      class: \"link back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back\"\n    }), $jsx(\"span\", {\n      class: \"if-not-md\"\n    }, ac.params.pageBackLinkText)));\n    var navbarRight = inPopup ? $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".autocomplete-popup\"\n    }, ac.params.popupCloseLinkText)) : ac.params.preloader && $jsx(\"div\", {\n      class: \"right\"\n    }, ac.renderPreloader());\n    return $jsx(\"div\", {\n      class: \"navbar \" + (ac.params.navbarColorTheme ? \"color-\" + ac.params.navbarColorTheme : '')\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner \" + (ac.params.navbarColorTheme ? \"color-\" + ac.params.navbarColorTheme : '')\n    }, navbarLeft, pageTitle && $jsx(\"div\", {\n      class: \"title sliding\"\n    }, pageTitle), navbarRight, $jsx(\"div\", {\n      class: \"subnavbar sliding\"\n    }, ac.renderSearchbar())));\n  };\n\n  _proto.renderDropdown = function renderDropdown() {\n    var ac = this;\n    if (ac.params.renderDropdown) return ac.params.renderDropdown.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"autocomplete-dropdown\"\n    }, $jsx(\"div\", {\n      class: \"autocomplete-dropdown-inner\"\n    }, $jsx(\"div\", {\n      class: \"list \" + (!ac.params.expandInput ? 'no-safe-areas' : '')\n    }, $jsx(\"ul\", null))), ac.params.preloader && ac.renderPreloader());\n  };\n\n  _proto.renderPage = function renderPage(inPopup) {\n    var ac = this;\n    if (ac.params.renderPage) return ac.params.renderPage.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"page page-with-subnavbar autocomplete-page\",\n      \"data-name\": \"autocomplete-page\"\n    }, ac.renderNavbar(inPopup), $jsx(\"div\", {\n      class: \"searchbar-backdrop\"\n    }), $jsx(\"div\", {\n      class: \"page-content\"\n    }, $jsx(\"div\", {\n      class: \"list autocomplete-list autocomplete-found autocomplete-list-\" + ac.id + \" \" + (ac.params.formColorTheme ? \"color-\" + ac.params.formColorTheme : '')\n    }, $jsx(\"ul\", null)), $jsx(\"div\", {\n      class: \"list autocomplete-not-found\"\n    }, $jsx(\"ul\", null, $jsx(\"li\", {\n      class: \"item-content\"\n    }, $jsx(\"div\", {\n      class: \"item-inner\"\n    }, $jsx(\"div\", {\n      class: \"item-title\"\n    }, ac.params.notFoundText))))), $jsx(\"div\", {\n      class: \"list autocomplete-values\"\n    }, $jsx(\"ul\", null))));\n  };\n\n  _proto.renderPopup = function renderPopup() {\n    var ac = this;\n    if (ac.params.renderPopup) return ac.params.renderPopup.call(ac, ac.items);\n    return $jsx(\"div\", {\n      class: \"popup autocomplete-popup\"\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, ac.renderPage(true), \";\"));\n  };\n\n  _proto.onOpen = function onOpen(type, el) {\n    var ac = this;\n    var app = ac.app;\n    var $el = $(el);\n    ac.$el = $el;\n    ac.el = $el[0];\n    ac.openedIn = type;\n    ac.opened = true;\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.attachDropdownEvents();\n      ac.$dropdownEl.addClass('autocomplete-dropdown-in');\n      ac.$inputEl.trigger('input');\n    } else {\n      // Init SB\n      var $searchbarEl = $el.find('.searchbar');\n\n      if (ac.params.openIn === 'page' && app.theme === 'ios' && $searchbarEl.length === 0) {\n        $searchbarEl = $(app.navbar.getElByPage($el)).find('.searchbar');\n      }\n\n      ac.searchbar = app.searchbar.create({\n        el: $searchbarEl,\n        backdropEl: $el.find('.searchbar-backdrop'),\n        customSearch: true,\n        on: {\n          search: function search(sb, query) {\n            if (query.length === 0 && ac.searchbar.enabled) {\n              ac.searchbar.backdropShow();\n            } else {\n              ac.searchbar.backdropHide();\n            }\n\n            ac.source(query);\n          }\n        }\n      }); // Attach page events\n\n      ac.attachPageEvents(); // Update Values On Page Init\n\n      ac.updateValues(); // Source on load\n\n      if (ac.params.requestSourceOnOpen) ac.source('');\n    }\n\n    ac.emit('local::open autocompleteOpen', ac);\n  };\n\n  _proto.autoFocus = function autoFocus() {\n    var ac = this;\n\n    if (ac.searchbar && ac.searchbar.$inputEl) {\n      ac.searchbar.$inputEl.focus();\n    }\n\n    return ac;\n  };\n\n  _proto.onOpened = function onOpened() {\n    var ac = this;\n\n    if (ac.params.openIn !== 'dropdown' && ac.params.autoFocus) {\n      ac.autoFocus();\n    }\n\n    ac.emit('local::opened autocompleteOpened', ac);\n  };\n\n  _proto.onClose = function onClose() {\n    var ac = this;\n    if (ac.destroyed) return; // Destroy SB\n\n    if (ac.searchbar && ac.searchbar.destroy) {\n      ac.searchbar.destroy();\n      ac.searchbar = null;\n      delete ac.searchbar;\n    }\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.detachDropdownEvents();\n      ac.$dropdownEl.removeClass('autocomplete-dropdown-in').remove();\n      ac.$inputEl.parents('.item-content-dropdown-expanded').removeClass('item-content-dropdown-expanded');\n    } else {\n      ac.detachPageEvents();\n    }\n\n    ac.emit('local::close autocompleteClose', ac);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var ac = this;\n    if (ac.destroyed) return;\n    ac.opened = false;\n    ac.$el = null;\n    ac.el = null;\n    delete ac.$el;\n    delete ac.el;\n    ac.emit('local::closed autocompleteClosed', ac);\n  };\n\n  _proto.openPage = function openPage() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var pageHtml = ac.renderPage();\n    ac.view.router.navigate({\n      url: ac.url,\n      route: {\n        content: pageHtml,\n        path: ac.url,\n        on: {\n          pageBeforeIn: function pageBeforeIn(e, page) {\n            ac.onOpen('page', page.el);\n          },\n          pageAfterIn: function pageAfterIn(e, page) {\n            ac.onOpened('page', page.el);\n          },\n          pageBeforeOut: function pageBeforeOut(e, page) {\n            ac.onClose('page', page.el);\n          },\n          pageAfterOut: function pageAfterOut(e, page) {\n            ac.onClosed('page', page.el);\n          }\n        },\n        options: {\n          animate: ac.params.animate\n        }\n      }\n    });\n    return ac;\n  };\n\n  _proto.openPopup = function openPopup() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var popupHtml = ac.renderPopup();\n    var popupParams = {\n      content: popupHtml,\n      animate: ac.params.animate,\n      push: ac.params.popupPush,\n      swipeToClose: ac.params.popupSwipeToClose,\n      on: {\n        popupOpen: function popupOpen(popup) {\n          ac.onOpen('popup', popup.el);\n        },\n        popupOpened: function popupOpened(popup) {\n          ac.onOpened('popup', popup.el);\n        },\n        popupClose: function popupClose(popup) {\n          ac.onClose('popup', popup.el);\n        },\n        popupClosed: function popupClosed(popup) {\n          ac.onClosed('popup', popup.el);\n        }\n      }\n    };\n\n    if (ac.params.routableModals && ac.view) {\n      ac.view.router.navigate({\n        url: ac.url,\n        route: {\n          path: ac.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      ac.modal = ac.app.popup.create(popupParams).open(ac.params.animate);\n    }\n\n    return ac;\n  };\n\n  _proto.openDropdown = function openDropdown() {\n    var ac = this;\n\n    if (!ac.$dropdownEl) {\n      ac.$dropdownEl = $(ac.renderDropdown());\n    }\n\n    var $listEl = ac.$inputEl.parents('.list');\n\n    if ($listEl.length && ac.$inputEl.parents('.item-content').length > 0 && ac.params.expandInput) {\n      ac.$inputEl.parents('.item-content').addClass('item-content-dropdown-expanded');\n    }\n\n    var $pageContentEl = ac.$inputEl.parents('.page-content');\n\n    if (ac.params.dropdownContainerEl) {\n      $(ac.params.dropdownContainerEl).append(ac.$dropdownEl);\n    } else if ($pageContentEl.length === 0) {\n      ac.$dropdownEl.insertAfter(ac.$inputEl);\n    } else {\n      ac.positionDropdown();\n      $pageContentEl.append(ac.$dropdownEl);\n    }\n\n    ac.onOpen('dropdown', ac.$dropdownEl);\n    ac.onOpened('dropdown', ac.$dropdownEl);\n  };\n\n  _proto.open = function open() {\n    var ac = this;\n    if (ac.opened) return ac;\n    var openIn = ac.params.openIn;\n    ac[\"open\" + openIn.split('').map(function (el, index) {\n      if (index === 0) return el.toUpperCase();\n      return el;\n    }).join('')]();\n    return ac;\n  };\n\n  _proto.close = function close() {\n    var ac = this;\n    if (!ac.opened) return ac;\n\n    if (ac.params.openIn === 'dropdown') {\n      ac.onClose();\n      ac.onClosed();\n    } else if (ac.params.routableModals && ac.view || ac.openedIn === 'page') {\n      ac.view.router.back({\n        animate: ac.params.animate\n      });\n    } else {\n      ac.modal.once('modalClosed', function () {\n        nextTick(function () {\n          if (ac.destroyed) return;\n          ac.modal.destroy();\n          delete ac.modal;\n        });\n      });\n      ac.modal.close();\n    }\n\n    return ac;\n  };\n\n  _proto.init = function init() {\n    var ac = this;\n    ac.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var ac = this;\n    ac.emit('local::beforeDestroy autocompleteBeforeDestroy', ac);\n    ac.detachEvents();\n\n    if (ac.$inputEl && ac.$inputEl[0]) {\n      delete ac.$inputEl[0].f7Autocomplete;\n    }\n\n    if (ac.$openerEl && ac.$openerEl[0]) {\n      delete ac.$openerEl[0].f7Autocomplete;\n    }\n\n    deleteProps(ac);\n    ac.destroyed = true;\n  };\n\n  _createClass(Autocomplete, [{\n    key: \"view\",\n    get: function get() {\n      var ac = this;\n      var $openerEl = ac.$openerEl,\n          $inputEl = ac.$inputEl,\n          app = ac.app;\n      var view;\n\n      if (ac.params.view) {\n        view = ac.params.view;\n      } else if ($openerEl || $inputEl) {\n        var $el = $openerEl || $inputEl;\n        view = $el.closest('.view').length && $el.closest('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Autocomplete;\n}(Framework7Class);\n\nexport default Autocomplete;"]},"metadata":{},"sourceType":"module"}