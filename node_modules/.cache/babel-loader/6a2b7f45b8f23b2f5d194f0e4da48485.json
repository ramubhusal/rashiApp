{"ast":null,"code":"function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\nimport pickerColumn from './picker-column';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Picker = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Picker, _Framework7Class);\n\n  function Picker(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var picker = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var window = getWindow();\n    picker.params = extend({}, app.params.picker, params);\n    var $containerEl;\n\n    if (picker.params.containerEl) {\n      $containerEl = $(picker.params.containerEl);\n      if ($containerEl.length === 0) return picker || _assertThisInitialized(_this);\n    }\n\n    var $inputEl;\n\n    if (picker.params.inputEl) {\n      $inputEl = $(picker.params.inputEl);\n    }\n\n    var $scrollToEl = picker.params.scrollToInput ? $inputEl : undefined;\n\n    if (picker.params.scrollToEl) {\n      var scrollToEl = $(picker.params.scrollToEl);\n\n      if (scrollToEl.length > 0) {\n        $scrollToEl = scrollToEl;\n      }\n    }\n\n    extend(picker, {\n      app: app,\n      $containerEl: $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      needsOriginFix: device.ios || window.navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.navigator.userAgent.toLowerCase().indexOf('chrome') < 0 && !device.android,\n      cols: [],\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      $scrollToEl: $scrollToEl,\n      initialized: false,\n      opened: false,\n      url: picker.params.url\n    });\n\n    function onResize() {\n      picker.resizeCols();\n    }\n\n    function onInputClick() {\n      picker.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onHtmlClick(e) {\n      if (picker.destroyed || !picker.params) return;\n      var $targetEl = $(e.target);\n      if (picker.isPopover()) return;\n      if (!picker.opened || picker.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal').length === 0) {\n          picker.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal').length === 0) {\n        picker.close();\n      }\n    } // Events\n\n\n    extend(picker, {\n      attachResizeEvent: function attachResizeEvent() {\n        app.on('resize', onResize);\n      },\n      detachResizeEvent: function detachResizeEvent() {\n        app.off('resize', onResize);\n      },\n      attachInputEvents: function attachInputEvents() {\n        picker.$inputEl.on('click', onInputClick);\n\n        if (picker.params.inputReadOnly) {\n          picker.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (picker.$inputEl[0]) {\n            picker.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n      detachInputEvents: function detachInputEvents() {\n        picker.$inputEl.off('click', onInputClick);\n\n        if (picker.params.inputReadOnly) {\n          picker.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (picker.$inputEl[0]) {\n            delete picker.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n      attachHtmlEvents: function attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n      detachHtmlEvents: function detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n    });\n    picker.init();\n    return picker || _assertThisInitialized(_this);\n  }\n\n  var _proto = Picker.prototype;\n\n  _proto.initInput = function initInput() {\n    var picker = this;\n    if (!picker.$inputEl) return;\n    if (picker.params.inputReadOnly) picker.$inputEl.prop('readOnly', true);\n  };\n\n  _proto.resizeCols = function resizeCols() {\n    var picker = this;\n    if (!picker.opened) return;\n\n    for (var i = 0; i < picker.cols.length; i += 1) {\n      if (!picker.cols[i].divider) {\n        picker.cols[i].calcSize();\n        picker.cols[i].setValue(picker.cols[i].value, 0, false);\n      }\n    }\n  };\n\n  _proto.isPopover = function isPopover() {\n    var picker = this;\n    var app = picker.app,\n        modal = picker.modal,\n        params = picker.params;\n    var device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!picker.inline && picker.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.formatValue = function formatValue() {\n    var picker = this;\n    var value = picker.value,\n        displayValue = picker.displayValue;\n\n    if (picker.params.formatValue) {\n      return picker.params.formatValue.call(picker, value, displayValue);\n    }\n\n    return value.join(' ');\n  };\n\n  _proto.setValue = function setValue(values, transition) {\n    var picker = this;\n    var valueIndex = 0;\n\n    if (picker.cols.length === 0) {\n      picker.value = values;\n      picker.updateValue(values);\n      return;\n    }\n\n    for (var i = 0; i < picker.cols.length; i += 1) {\n      if (picker.cols[i] && !picker.cols[i].divider) {\n        picker.cols[i].setValue(values[valueIndex], transition);\n        valueIndex += 1;\n      }\n    }\n  };\n\n  _proto.getValue = function getValue() {\n    var picker = this;\n    return picker.value;\n  };\n\n  _proto.updateValue = function updateValue(forceValues) {\n    var picker = this;\n    var newValue = forceValues || [];\n    var newDisplayValue = [];\n    var column;\n\n    if (picker.cols.length === 0) {\n      var noDividerColumns = picker.params.cols.filter(function (c) {\n        return !c.divider;\n      });\n\n      for (var i = 0; i < noDividerColumns.length; i += 1) {\n        column = noDividerColumns[i];\n\n        if (column.displayValues !== undefined && column.values !== undefined && column.values.indexOf(newValue[i]) !== -1) {\n          newDisplayValue.push(column.displayValues[column.values.indexOf(newValue[i])]);\n        } else {\n          newDisplayValue.push(newValue[i]);\n        }\n      }\n    } else {\n      for (var _i = 0; _i < picker.cols.length; _i += 1) {\n        if (!picker.cols[_i].divider) {\n          newValue.push(picker.cols[_i].value);\n          newDisplayValue.push(picker.cols[_i].displayValue);\n        }\n      }\n    }\n\n    if (newValue.indexOf(undefined) >= 0) {\n      return;\n    }\n\n    picker.value = newValue;\n    picker.displayValue = newDisplayValue;\n    picker.emit('local::change pickerChange', picker, picker.value, picker.displayValue);\n\n    if (picker.inputEl) {\n      picker.$inputEl.val(picker.formatValue());\n      picker.$inputEl.trigger('change');\n    }\n  };\n\n  _proto.initColumn = function initColumn(colEl, updateItems) {\n    var picker = this;\n    pickerColumn.call(picker, colEl, updateItems);\n  } // eslint-disable-next-line\n  ;\n\n  _proto.destroyColumn = function destroyColumn(colEl) {\n    var picker = this;\n    var $colEl = $(colEl);\n    var index = $colEl.index();\n\n    if (picker.cols[index] && picker.cols[index].destroy) {\n      picker.cols[index].destroy();\n    }\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var picker = this;\n    if (picker.params.renderToolbar) return picker.params.renderToolbar.call(picker, picker);\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"left\"\n    }), $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link sheet-close popover-close\"\n    }, picker.params.toolbarCloseText))));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderColumn = function renderColumn(col, onlyItems) {\n    var colClasses = \"picker-column \" + (col.textAlign ? \"picker-column-\" + col.textAlign : '') + \" \" + (col.cssClass || '');\n    var columnHtml;\n    var columnItemsHtml;\n\n    if (col.divider) {\n      // prettier-ignore\n      columnHtml = \"\\n        <div class=\\\"\" + colClasses + \" picker-column-divider\\\">\" + col.content + \"</div>\\n      \";\n    } else {\n      // prettier-ignore\n      columnItemsHtml = col.values.map(function (value, index) {\n        return \"\\n        <div class=\\\"picker-item\\\" data-picker-value=\\\"\" + value + \"\\\">\\n          <span>\" + (col.displayValues ? col.displayValues[index] : value) + \"</span>\\n        </div>\\n      \";\n      }).join(''); // prettier-ignore\n\n      columnHtml = \"\\n        <div class=\\\"\" + colClasses + \"\\\">\\n          <div class=\\\"picker-items\\\">\" + columnItemsHtml + \"</div>\\n        </div>\\n      \";\n    }\n\n    return onlyItems ? columnItemsHtml.trim() : columnHtml.trim();\n  };\n\n  _proto.renderInline = function renderInline() {\n    var picker = this;\n    var _picker$params = picker.params,\n        rotateEffect = _picker$params.rotateEffect,\n        cssClass = _picker$params.cssClass,\n        toolbar = _picker$params.toolbar;\n    var inlineHtml = $jsx(\"div\", {\n      class: \"picker picker-inline \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })));\n    return inlineHtml;\n  };\n\n  _proto.renderSheet = function renderSheet() {\n    var picker = this;\n    var _picker$params2 = picker.params,\n        rotateEffect = _picker$params2.rotateEffect,\n        cssClass = _picker$params2.cssClass,\n        toolbar = _picker$params2.toolbar;\n    var sheetHtml = $jsx(\"div\", {\n      class: \"sheet-modal picker picker-sheet \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"sheet-modal-inner picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })));\n    return sheetHtml;\n  };\n\n  _proto.renderPopover = function renderPopover() {\n    var picker = this;\n    var _picker$params3 = picker.params,\n        rotateEffect = _picker$params3.rotateEffect,\n        cssClass = _picker$params3.cssClass,\n        toolbar = _picker$params3.toolbar;\n    var popoverHtml = $jsx(\"div\", {\n      class: \"popover picker-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: \"picker \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })))));\n    return popoverHtml;\n  };\n\n  _proto.render = function render() {\n    var picker = this;\n    if (picker.params.render) return picker.params.render.call(picker);\n\n    if (!picker.inline) {\n      if (picker.isPopover()) return picker.renderPopover();\n      return picker.renderSheet();\n    }\n\n    return picker.renderInline();\n  };\n\n  _proto.onOpen = function onOpen() {\n    var picker = this;\n    var initialized = picker.initialized,\n        $el = picker.$el,\n        app = picker.app,\n        $inputEl = picker.$inputEl,\n        inline = picker.inline,\n        value = picker.value,\n        params = picker.params;\n    picker.opened = true;\n    picker.closing = false;\n    picker.opening = true; // Init main events\n\n    picker.attachResizeEvent(); // Init cols\n\n    $el.find('.picker-column').each(function (colEl) {\n      var updateItems = true;\n\n      if (!initialized && params.value || initialized && value) {\n        updateItems = false;\n      }\n\n      picker.initColumn(colEl, updateItems);\n    }); // Set value\n\n    if (!initialized) {\n      if (value) picker.setValue(value, 0);else if (params.value) {\n        picker.setValue(params.value, 0);\n      }\n    } else if (value) {\n      picker.setValue(value, 0);\n    } // Extra focus\n\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    picker.initialized = true; // Trigger events\n\n    if ($el) {\n      $el.trigger('picker:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('picker:open');\n    }\n\n    picker.emit('local::open pickerOpen', picker);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var picker = this;\n    picker.opening = false;\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:opened');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:opened');\n    }\n\n    picker.emit('local::opened pickerOpened', picker);\n  };\n\n  _proto.onClose = function onClose() {\n    var picker = this;\n    var app = picker.app;\n    picker.opening = false;\n    picker.closing = true; // Detach events\n\n    picker.detachResizeEvent();\n    picker.cols.forEach(function (col) {\n      if (col.destroy) col.destroy();\n    });\n\n    if (picker.$inputEl) {\n      if (app.theme === 'md') {\n        picker.$inputEl.trigger('blur');\n      } else {\n        var validate = picker.$inputEl.attr('validate');\n        var required = picker.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(picker.$inputEl);\n        }\n      }\n    }\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:close');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:close');\n    }\n\n    picker.emit('local::close pickerClose', picker);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var picker = this;\n    picker.opened = false;\n    picker.closing = false;\n\n    if (!picker.inline) {\n      nextTick(function () {\n        if (picker.modal && picker.modal.el && picker.modal.destroy) {\n          if (!picker.params.routableModals) {\n            picker.modal.destroy();\n          }\n        }\n\n        delete picker.modal;\n      });\n    }\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:closed');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:closed');\n    }\n\n    picker.emit('local::closed pickerClosed', picker);\n  };\n\n  _proto.open = function open() {\n    var picker = this;\n    var app = picker.app,\n        opened = picker.opened,\n        inline = picker.inline,\n        $inputEl = picker.$inputEl,\n        $scrollToEl = picker.$scrollToEl,\n        params = picker.params;\n    if (opened) return;\n\n    if (picker.cols.length === 0 && params.cols.length) {\n      params.cols.forEach(function (col) {\n        picker.cols.push(col);\n      });\n    }\n\n    if (inline) {\n      picker.$el = $(picker.render());\n      picker.$el[0].f7Picker = picker;\n      picker.$containerEl.append(picker.$el);\n      picker.onOpen();\n      picker.onOpened();\n      return;\n    }\n\n    var isPopover = picker.isPopover();\n    var modalType = isPopover ? 'popover' : 'sheet';\n    var modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: $scrollToEl,\n      content: picker.render(),\n      backdrop: typeof params.backdrop !== 'undefined' ? params.backdrop : isPopover,\n      on: {\n        open: function open() {\n          var modal = this;\n          picker.modal = modal;\n          picker.$el = isPopover ? modal.$el.find('.picker') : modal.$el;\n          picker.$el[0].f7Picker = picker;\n          picker.onOpen();\n        },\n        opened: function opened() {\n          picker.onOpened();\n        },\n        close: function close() {\n          picker.onClose();\n        },\n        closed: function closed() {\n          picker.onClosed();\n        }\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && picker.view) {\n      var _route;\n\n      picker.view.router.navigate({\n        url: picker.url,\n        route: (_route = {\n          path: picker.url\n        }, _route[modalType] = modalParams, _route)\n      });\n    } else {\n      picker.modal = app[modalType].create(modalParams);\n      picker.modal.open();\n    }\n  };\n\n  _proto.close = function close() {\n    var picker = this;\n    var opened = picker.opened,\n        inline = picker.inline;\n    if (!opened) return;\n\n    if (inline) {\n      picker.onClose();\n      picker.onClosed();\n      return;\n    }\n\n    if (picker.params.routableModals && picker.view) {\n      picker.view.router.back();\n    } else {\n      picker.modal.close();\n    }\n  };\n\n  _proto.init = function init() {\n    var picker = this;\n    picker.initInput();\n\n    if (picker.inline) {\n      picker.open();\n      picker.emit('local::init pickerInit', picker);\n      return;\n    }\n\n    if (!picker.initialized && picker.params.value) {\n      picker.setValue(picker.params.value);\n    } // Attach input Events\n\n\n    if (picker.$inputEl) {\n      picker.attachInputEvents();\n    }\n\n    if (picker.params.closeByOutsideClick) {\n      picker.attachHtmlEvents();\n    }\n\n    picker.emit('local::init pickerInit', picker);\n  };\n\n  _proto.destroy = function destroy() {\n    var picker = this;\n    if (picker.destroyed) return;\n    var $el = picker.$el;\n    picker.emit('local::beforeDestroy pickerBeforeDestroy', picker);\n    if ($el) $el.trigger('picker:beforedestroy');\n    picker.close(); // Detach Events\n\n    if (picker.$inputEl) {\n      picker.detachInputEvents();\n    }\n\n    if (picker.params.closeByOutsideClick) {\n      picker.detachHtmlEvents();\n    }\n\n    if ($el && $el.length) delete picker.$el[0].f7Picker;\n    deleteProps(picker);\n    picker.destroyed = true;\n  };\n\n  _createClass(Picker, [{\n    key: \"view\",\n    get: function get() {\n      var app = this.app,\n          params = this.params,\n          $inputEl = this.$inputEl;\n      var view;\n\n      if (params.view) {\n        view = params.view;\n      } else if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Picker;\n}(Framework7Class);\n\nexport default Picker;","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/picker/picker-class.js"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","getWindow","$","extend","nextTick","deleteProps","Framework7Class","getDevice","pickerColumn","$jsx","Picker","_Framework7Class","app","params","_this","call","picker","device","window","$containerEl","containerEl","$inputEl","inputEl","$scrollToEl","scrollToInput","undefined","scrollToEl","inline","needsOriginFix","ios","navigator","userAgent","toLowerCase","indexOf","android","cols","initialized","opened","url","onResize","resizeCols","onInputClick","open","onInputFocus","e","preventDefault","onHtmlClick","destroyed","$targetEl","isPopover","closing","closest","close","attachResizeEvent","on","detachResizeEvent","off","attachInputEvents","inputReadOnly","f7ValidateReadonly","detachInputEvents","attachHtmlEvents","detachHtmlEvents","init","_proto","initInput","prop","divider","calcSize","setValue","value","modal","openIn","type","ipad","width","desktop","theme","formatValue","displayValue","join","values","transition","valueIndex","updateValue","getValue","forceValues","newValue","newDisplayValue","column","noDividerColumns","filter","c","displayValues","push","_i","emit","val","trigger","initColumn","colEl","updateItems","destroyColumn","$colEl","index","destroy","renderToolbar","class","toolbarCloseText","renderColumn","col","onlyItems","colClasses","textAlign","cssClass","columnHtml","columnItemsHtml","content","map","trim","renderInline","_picker$params","rotateEffect","toolbar","inlineHtml","renderSheet","_picker$params2","sheetHtml","renderPopover","_picker$params3","popoverHtml","render","onOpen","$el","opening","find","each","onOpened","onClose","forEach","validate","attr","required","input","onClosed","el","routableModals","f7Picker","append","modalType","modalParams","targetEl","backdrop","closed","sheetPush","swipeToClose","sheetSwipeToClose","view","_route","router","navigate","route","path","back","closeByOutsideClick","get","parents","f7View","views","main"],"mappings":"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","sourcesContent":["function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\nimport pickerColumn from './picker-column';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx';\n\nvar Picker = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Picker, _Framework7Class);\n\n  function Picker(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var picker = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var window = getWindow();\n    picker.params = extend({}, app.params.picker, params);\n    var $containerEl;\n\n    if (picker.params.containerEl) {\n      $containerEl = $(picker.params.containerEl);\n      if ($containerEl.length === 0) return picker || _assertThisInitialized(_this);\n    }\n\n    var $inputEl;\n\n    if (picker.params.inputEl) {\n      $inputEl = $(picker.params.inputEl);\n    }\n\n    var $scrollToEl = picker.params.scrollToInput ? $inputEl : undefined;\n\n    if (picker.params.scrollToEl) {\n      var scrollToEl = $(picker.params.scrollToEl);\n\n      if (scrollToEl.length > 0) {\n        $scrollToEl = scrollToEl;\n      }\n    }\n\n    extend(picker, {\n      app: app,\n      $containerEl: $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      needsOriginFix: device.ios || window.navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.navigator.userAgent.toLowerCase().indexOf('chrome') < 0 && !device.android,\n      cols: [],\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      $scrollToEl: $scrollToEl,\n      initialized: false,\n      opened: false,\n      url: picker.params.url\n    });\n\n    function onResize() {\n      picker.resizeCols();\n    }\n\n    function onInputClick() {\n      picker.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onHtmlClick(e) {\n      if (picker.destroyed || !picker.params) return;\n      var $targetEl = $(e.target);\n      if (picker.isPopover()) return;\n      if (!picker.opened || picker.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal').length === 0) {\n          picker.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal').length === 0) {\n        picker.close();\n      }\n    } // Events\n\n\n    extend(picker, {\n      attachResizeEvent: function attachResizeEvent() {\n        app.on('resize', onResize);\n      },\n      detachResizeEvent: function detachResizeEvent() {\n        app.off('resize', onResize);\n      },\n      attachInputEvents: function attachInputEvents() {\n        picker.$inputEl.on('click', onInputClick);\n\n        if (picker.params.inputReadOnly) {\n          picker.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (picker.$inputEl[0]) {\n            picker.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n      detachInputEvents: function detachInputEvents() {\n        picker.$inputEl.off('click', onInputClick);\n\n        if (picker.params.inputReadOnly) {\n          picker.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (picker.$inputEl[0]) {\n            delete picker.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n      attachHtmlEvents: function attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n      detachHtmlEvents: function detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n    });\n    picker.init();\n    return picker || _assertThisInitialized(_this);\n  }\n\n  var _proto = Picker.prototype;\n\n  _proto.initInput = function initInput() {\n    var picker = this;\n    if (!picker.$inputEl) return;\n    if (picker.params.inputReadOnly) picker.$inputEl.prop('readOnly', true);\n  };\n\n  _proto.resizeCols = function resizeCols() {\n    var picker = this;\n    if (!picker.opened) return;\n\n    for (var i = 0; i < picker.cols.length; i += 1) {\n      if (!picker.cols[i].divider) {\n        picker.cols[i].calcSize();\n        picker.cols[i].setValue(picker.cols[i].value, 0, false);\n      }\n    }\n  };\n\n  _proto.isPopover = function isPopover() {\n    var picker = this;\n    var app = picker.app,\n        modal = picker.modal,\n        params = picker.params;\n    var device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!picker.inline && picker.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.formatValue = function formatValue() {\n    var picker = this;\n    var value = picker.value,\n        displayValue = picker.displayValue;\n\n    if (picker.params.formatValue) {\n      return picker.params.formatValue.call(picker, value, displayValue);\n    }\n\n    return value.join(' ');\n  };\n\n  _proto.setValue = function setValue(values, transition) {\n    var picker = this;\n    var valueIndex = 0;\n\n    if (picker.cols.length === 0) {\n      picker.value = values;\n      picker.updateValue(values);\n      return;\n    }\n\n    for (var i = 0; i < picker.cols.length; i += 1) {\n      if (picker.cols[i] && !picker.cols[i].divider) {\n        picker.cols[i].setValue(values[valueIndex], transition);\n        valueIndex += 1;\n      }\n    }\n  };\n\n  _proto.getValue = function getValue() {\n    var picker = this;\n    return picker.value;\n  };\n\n  _proto.updateValue = function updateValue(forceValues) {\n    var picker = this;\n    var newValue = forceValues || [];\n    var newDisplayValue = [];\n    var column;\n\n    if (picker.cols.length === 0) {\n      var noDividerColumns = picker.params.cols.filter(function (c) {\n        return !c.divider;\n      });\n\n      for (var i = 0; i < noDividerColumns.length; i += 1) {\n        column = noDividerColumns[i];\n\n        if (column.displayValues !== undefined && column.values !== undefined && column.values.indexOf(newValue[i]) !== -1) {\n          newDisplayValue.push(column.displayValues[column.values.indexOf(newValue[i])]);\n        } else {\n          newDisplayValue.push(newValue[i]);\n        }\n      }\n    } else {\n      for (var _i = 0; _i < picker.cols.length; _i += 1) {\n        if (!picker.cols[_i].divider) {\n          newValue.push(picker.cols[_i].value);\n          newDisplayValue.push(picker.cols[_i].displayValue);\n        }\n      }\n    }\n\n    if (newValue.indexOf(undefined) >= 0) {\n      return;\n    }\n\n    picker.value = newValue;\n    picker.displayValue = newDisplayValue;\n    picker.emit('local::change pickerChange', picker, picker.value, picker.displayValue);\n\n    if (picker.inputEl) {\n      picker.$inputEl.val(picker.formatValue());\n      picker.$inputEl.trigger('change');\n    }\n  };\n\n  _proto.initColumn = function initColumn(colEl, updateItems) {\n    var picker = this;\n    pickerColumn.call(picker, colEl, updateItems);\n  } // eslint-disable-next-line\n  ;\n\n  _proto.destroyColumn = function destroyColumn(colEl) {\n    var picker = this;\n    var $colEl = $(colEl);\n    var index = $colEl.index();\n\n    if (picker.cols[index] && picker.cols[index].destroy) {\n      picker.cols[index].destroy();\n    }\n  };\n\n  _proto.renderToolbar = function renderToolbar() {\n    var picker = this;\n    if (picker.params.renderToolbar) return picker.params.renderToolbar.call(picker, picker);\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"left\"\n    }), $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link sheet-close popover-close\"\n    }, picker.params.toolbarCloseText))));\n  } // eslint-disable-next-line\n  ;\n\n  _proto.renderColumn = function renderColumn(col, onlyItems) {\n    var colClasses = \"picker-column \" + (col.textAlign ? \"picker-column-\" + col.textAlign : '') + \" \" + (col.cssClass || '');\n    var columnHtml;\n    var columnItemsHtml;\n\n    if (col.divider) {\n      // prettier-ignore\n      columnHtml = \"\\n        <div class=\\\"\" + colClasses + \" picker-column-divider\\\">\" + col.content + \"</div>\\n      \";\n    } else {\n      // prettier-ignore\n      columnItemsHtml = col.values.map(function (value, index) {\n        return \"\\n        <div class=\\\"picker-item\\\" data-picker-value=\\\"\" + value + \"\\\">\\n          <span>\" + (col.displayValues ? col.displayValues[index] : value) + \"</span>\\n        </div>\\n      \";\n      }).join(''); // prettier-ignore\n\n      columnHtml = \"\\n        <div class=\\\"\" + colClasses + \"\\\">\\n          <div class=\\\"picker-items\\\">\" + columnItemsHtml + \"</div>\\n        </div>\\n      \";\n    }\n\n    return onlyItems ? columnItemsHtml.trim() : columnHtml.trim();\n  };\n\n  _proto.renderInline = function renderInline() {\n    var picker = this;\n    var _picker$params = picker.params,\n        rotateEffect = _picker$params.rotateEffect,\n        cssClass = _picker$params.cssClass,\n        toolbar = _picker$params.toolbar;\n    var inlineHtml = $jsx(\"div\", {\n      class: \"picker picker-inline \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })));\n    return inlineHtml;\n  };\n\n  _proto.renderSheet = function renderSheet() {\n    var picker = this;\n    var _picker$params2 = picker.params,\n        rotateEffect = _picker$params2.rotateEffect,\n        cssClass = _picker$params2.cssClass,\n        toolbar = _picker$params2.toolbar;\n    var sheetHtml = $jsx(\"div\", {\n      class: \"sheet-modal picker picker-sheet \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"sheet-modal-inner picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })));\n    return sheetHtml;\n  };\n\n  _proto.renderPopover = function renderPopover() {\n    var picker = this;\n    var _picker$params3 = picker.params,\n        rotateEffect = _picker$params3.rotateEffect,\n        cssClass = _picker$params3.cssClass,\n        toolbar = _picker$params3.toolbar;\n    var popoverHtml = $jsx(\"div\", {\n      class: \"popover picker-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: \"picker \" + (rotateEffect ? 'picker-3d' : '') + \" \" + (cssClass || '')\n    }, toolbar && picker.renderToolbar(), $jsx(\"div\", {\n      class: \"picker-columns\"\n    }, picker.cols.map(function (col) {\n      return picker.renderColumn(col);\n    }), $jsx(\"div\", {\n      class: \"picker-center-highlight\"\n    })))));\n    return popoverHtml;\n  };\n\n  _proto.render = function render() {\n    var picker = this;\n    if (picker.params.render) return picker.params.render.call(picker);\n\n    if (!picker.inline) {\n      if (picker.isPopover()) return picker.renderPopover();\n      return picker.renderSheet();\n    }\n\n    return picker.renderInline();\n  };\n\n  _proto.onOpen = function onOpen() {\n    var picker = this;\n    var initialized = picker.initialized,\n        $el = picker.$el,\n        app = picker.app,\n        $inputEl = picker.$inputEl,\n        inline = picker.inline,\n        value = picker.value,\n        params = picker.params;\n    picker.opened = true;\n    picker.closing = false;\n    picker.opening = true; // Init main events\n\n    picker.attachResizeEvent(); // Init cols\n\n    $el.find('.picker-column').each(function (colEl) {\n      var updateItems = true;\n\n      if (!initialized && params.value || initialized && value) {\n        updateItems = false;\n      }\n\n      picker.initColumn(colEl, updateItems);\n    }); // Set value\n\n    if (!initialized) {\n      if (value) picker.setValue(value, 0);else if (params.value) {\n        picker.setValue(params.value, 0);\n      }\n    } else if (value) {\n      picker.setValue(value, 0);\n    } // Extra focus\n\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    picker.initialized = true; // Trigger events\n\n    if ($el) {\n      $el.trigger('picker:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('picker:open');\n    }\n\n    picker.emit('local::open pickerOpen', picker);\n  };\n\n  _proto.onOpened = function onOpened() {\n    var picker = this;\n    picker.opening = false;\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:opened');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:opened');\n    }\n\n    picker.emit('local::opened pickerOpened', picker);\n  };\n\n  _proto.onClose = function onClose() {\n    var picker = this;\n    var app = picker.app;\n    picker.opening = false;\n    picker.closing = true; // Detach events\n\n    picker.detachResizeEvent();\n    picker.cols.forEach(function (col) {\n      if (col.destroy) col.destroy();\n    });\n\n    if (picker.$inputEl) {\n      if (app.theme === 'md') {\n        picker.$inputEl.trigger('blur');\n      } else {\n        var validate = picker.$inputEl.attr('validate');\n        var required = picker.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(picker.$inputEl);\n        }\n      }\n    }\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:close');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:close');\n    }\n\n    picker.emit('local::close pickerClose', picker);\n  };\n\n  _proto.onClosed = function onClosed() {\n    var picker = this;\n    picker.opened = false;\n    picker.closing = false;\n\n    if (!picker.inline) {\n      nextTick(function () {\n        if (picker.modal && picker.modal.el && picker.modal.destroy) {\n          if (!picker.params.routableModals) {\n            picker.modal.destroy();\n          }\n        }\n\n        delete picker.modal;\n      });\n    }\n\n    if (picker.$el) {\n      picker.$el.trigger('picker:closed');\n    }\n\n    if (picker.$inputEl) {\n      picker.$inputEl.trigger('picker:closed');\n    }\n\n    picker.emit('local::closed pickerClosed', picker);\n  };\n\n  _proto.open = function open() {\n    var picker = this;\n    var app = picker.app,\n        opened = picker.opened,\n        inline = picker.inline,\n        $inputEl = picker.$inputEl,\n        $scrollToEl = picker.$scrollToEl,\n        params = picker.params;\n    if (opened) return;\n\n    if (picker.cols.length === 0 && params.cols.length) {\n      params.cols.forEach(function (col) {\n        picker.cols.push(col);\n      });\n    }\n\n    if (inline) {\n      picker.$el = $(picker.render());\n      picker.$el[0].f7Picker = picker;\n      picker.$containerEl.append(picker.$el);\n      picker.onOpen();\n      picker.onOpened();\n      return;\n    }\n\n    var isPopover = picker.isPopover();\n    var modalType = isPopover ? 'popover' : 'sheet';\n    var modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: $scrollToEl,\n      content: picker.render(),\n      backdrop: typeof params.backdrop !== 'undefined' ? params.backdrop : isPopover,\n      on: {\n        open: function open() {\n          var modal = this;\n          picker.modal = modal;\n          picker.$el = isPopover ? modal.$el.find('.picker') : modal.$el;\n          picker.$el[0].f7Picker = picker;\n          picker.onOpen();\n        },\n        opened: function opened() {\n          picker.onOpened();\n        },\n        close: function close() {\n          picker.onClose();\n        },\n        closed: function closed() {\n          picker.onClosed();\n        }\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && picker.view) {\n      var _route;\n\n      picker.view.router.navigate({\n        url: picker.url,\n        route: (_route = {\n          path: picker.url\n        }, _route[modalType] = modalParams, _route)\n      });\n    } else {\n      picker.modal = app[modalType].create(modalParams);\n      picker.modal.open();\n    }\n  };\n\n  _proto.close = function close() {\n    var picker = this;\n    var opened = picker.opened,\n        inline = picker.inline;\n    if (!opened) return;\n\n    if (inline) {\n      picker.onClose();\n      picker.onClosed();\n      return;\n    }\n\n    if (picker.params.routableModals && picker.view) {\n      picker.view.router.back();\n    } else {\n      picker.modal.close();\n    }\n  };\n\n  _proto.init = function init() {\n    var picker = this;\n    picker.initInput();\n\n    if (picker.inline) {\n      picker.open();\n      picker.emit('local::init pickerInit', picker);\n      return;\n    }\n\n    if (!picker.initialized && picker.params.value) {\n      picker.setValue(picker.params.value);\n    } // Attach input Events\n\n\n    if (picker.$inputEl) {\n      picker.attachInputEvents();\n    }\n\n    if (picker.params.closeByOutsideClick) {\n      picker.attachHtmlEvents();\n    }\n\n    picker.emit('local::init pickerInit', picker);\n  };\n\n  _proto.destroy = function destroy() {\n    var picker = this;\n    if (picker.destroyed) return;\n    var $el = picker.$el;\n    picker.emit('local::beforeDestroy pickerBeforeDestroy', picker);\n    if ($el) $el.trigger('picker:beforedestroy');\n    picker.close(); // Detach Events\n\n    if (picker.$inputEl) {\n      picker.detachInputEvents();\n    }\n\n    if (picker.params.closeByOutsideClick) {\n      picker.detachHtmlEvents();\n    }\n\n    if ($el && $el.length) delete picker.$el[0].f7Picker;\n    deleteProps(picker);\n    picker.destroyed = true;\n  };\n\n  _createClass(Picker, [{\n    key: \"view\",\n    get: function get() {\n      var app = this.app,\n          params = this.params,\n          $inputEl = this.$inputEl;\n      var view;\n\n      if (params.view) {\n        view = params.view;\n      } else if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }]);\n\n  return Picker;\n}(Framework7Class);\n\nexport default Picker;"]},"metadata":{},"sourceType":"module"}