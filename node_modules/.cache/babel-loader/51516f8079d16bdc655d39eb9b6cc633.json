{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\n\nvar VirtualList = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(VirtualList, _Framework7Class);\n\n  function VirtualList(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var vl = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var document = getDocument();\n    var defaultHeight;\n\n    if (app.theme === 'md') {\n      defaultHeight = 48;\n    } else if (app.theme === 'ios') {\n      defaultHeight = 44;\n    } else if (app.theme === 'aurora') {\n      defaultHeight = 38;\n    }\n\n    var defaults = {\n      cols: 1,\n      height: defaultHeight,\n      cache: true,\n      dynamicHeightBufferSize: 1,\n      showFilteredItemsOnly: false,\n      renderExternal: undefined,\n      setListHeight: true,\n      searchByItem: undefined,\n      searchAll: undefined,\n      ul: null,\n      createUl: true,\n      scrollableParentEl: undefined,\n      renderItem: function renderItem(item) {\n        return (\"\\n          <li>\\n            <div class=\\\"item-content\\\">\\n              <div class=\\\"item-inner\\\">\\n                <div class=\\\"item-title\\\">\" + item + \"</div>\\n              </div>\\n            </div>\\n          </li>\\n        \").trim();\n      },\n      on: {}\n    }; // Extend defaults with modules params\n\n    vl.useModulesParams(defaults);\n    vl.params = extend(defaults, params);\n\n    if (vl.params.height === undefined || !vl.params.height) {\n      vl.params.height = defaultHeight;\n    }\n\n    vl.$el = $(params.el);\n    vl.el = vl.$el[0];\n    if (vl.$el.length === 0) return undefined || _assertThisInitialized(_this);\n    vl.$el[0].f7VirtualList = vl;\n    vl.items = vl.params.items;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    }\n\n    if (vl.params.renderItem) {\n      vl.renderItem = vl.params.renderItem;\n    }\n\n    vl.$pageContentEl = vl.$el.parents('.page-content');\n    vl.pageContentEl = vl.$pageContentEl[0];\n    vl.$scrollableParentEl = vl.params.scrollableParentEl ? $(vl.params.scrollableParentEl).eq(0) : vl.$pageContentEl;\n\n    if (!vl.$scrollableParentEl.length && vl.$pageContentEl.length) {\n      vl.$scrollableParentEl = vl.$pageContentEl;\n    }\n\n    vl.scrollableParentEl = vl.$scrollableParentEl[0]; // Bad scroll\n\n    if (typeof vl.params.updatableScroll !== 'undefined') {\n      vl.updatableScroll = vl.params.updatableScroll;\n    } else {\n      vl.updatableScroll = true;\n\n      if (device.ios && device.osVersion.split('.')[0] < 8) {\n        vl.updatableScroll = false;\n      }\n    } // Append <ul>\n\n\n    var ul = vl.params.ul;\n    vl.$ul = ul ? $(vl.params.ul) : vl.$el.children('ul');\n\n    if (vl.$ul.length === 0 && vl.params.createUl) {\n      vl.$el.append('<ul></ul>');\n      vl.$ul = vl.$el.children('ul');\n    }\n\n    vl.ul = vl.$ul[0];\n    var $itemsWrapEl;\n    if (!vl.ul && !vl.params.createUl) $itemsWrapEl = vl.$el;else $itemsWrapEl = vl.$ul;\n    extend(vl, {\n      $itemsWrapEl: $itemsWrapEl,\n      itemsWrapEl: $itemsWrapEl[0],\n      // DOM cached items\n      domCache: {},\n      displayDomCache: {},\n      // Temporary DOM Element\n      tempDomElement: document.createElement('ul'),\n      // Last repain position\n      lastRepaintY: null,\n      // Fragment\n      fragment: document.createDocumentFragment(),\n      // Props\n      pageHeight: undefined,\n      rowsPerScreen: undefined,\n      rowsBefore: undefined,\n      rowsAfter: undefined,\n      rowsToRender: undefined,\n      maxBufferHeight: 0,\n      listHeight: undefined,\n      dynamicHeight: typeof vl.params.height === 'function'\n    }); // Install Modules\n\n    vl.useModules(); // Attach events\n\n    var handleScrollBound = vl.handleScroll.bind(vl);\n    var handleResizeBound = vl.handleResize.bind(vl);\n    var $pageEl;\n    var $tabEl;\n    var $panelEl;\n    var $popupEl;\n\n    vl.attachEvents = function attachEvents() {\n      $pageEl = vl.$el.parents('.page').eq(0);\n      $tabEl = vl.$el.parents('.tab').filter(function (tabEl) {\n        return $(tabEl).parent('.tabs').parent('.tabs-animated-wrap, .tabs-swipeable-wrap').length === 0;\n      }).eq(0);\n      $panelEl = vl.$el.parents('.panel').eq(0);\n      $popupEl = vl.$el.parents('.popup').eq(0);\n      vl.$scrollableParentEl.on('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.on('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.on('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.on('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.on('popup:open', handleResizeBound);\n      app.on('resize', handleResizeBound);\n    };\n\n    vl.detachEvents = function attachEvents() {\n      vl.$scrollableParentEl.off('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.off('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.off('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.off('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.off('popup:open', handleResizeBound);\n      app.off('resize', handleResizeBound);\n    }; // Init\n\n\n    vl.init();\n    return vl || _assertThisInitialized(_this);\n  }\n\n  var _proto = VirtualList.prototype;\n\n  _proto.setListSize = function setListSize() {\n    var vl = this;\n    var items = vl.filteredItems || vl.items;\n    vl.pageHeight = vl.$scrollableParentEl[0].offsetHeight;\n\n    if (vl.dynamicHeight) {\n      vl.listHeight = 0;\n      vl.heights = [];\n\n      for (var i = 0; i < items.length; i += 1) {\n        var itemHeight = vl.params.height(items[i]);\n        vl.listHeight += itemHeight;\n        vl.heights.push(itemHeight);\n      }\n    } else {\n      vl.listHeight = Math.ceil(items.length / vl.params.cols) * vl.params.height;\n      vl.rowsPerScreen = Math.ceil(vl.pageHeight / vl.params.height);\n      vl.rowsBefore = vl.params.rowsBefore || vl.rowsPerScreen * 2;\n      vl.rowsAfter = vl.params.rowsAfter || vl.rowsPerScreen;\n      vl.rowsToRender = vl.rowsPerScreen + vl.rowsBefore + vl.rowsAfter;\n      vl.maxBufferHeight = vl.rowsBefore / 2 * vl.params.height;\n    }\n\n    if (vl.updatableScroll || vl.params.setListHeight) {\n      vl.$itemsWrapEl.css({\n        height: vl.listHeight + \"px\"\n      });\n    }\n  };\n\n  _proto.render = function render(force, forceScrollTop) {\n    var vl = this;\n    if (force) vl.lastRepaintY = null;\n    var scrollTop = -(vl.$el[0].getBoundingClientRect().top - vl.$scrollableParentEl[0].getBoundingClientRect().top);\n    if (typeof forceScrollTop !== 'undefined') scrollTop = forceScrollTop;\n\n    if (vl.lastRepaintY === null || Math.abs(scrollTop - vl.lastRepaintY) > vl.maxBufferHeight || !vl.updatableScroll && vl.$scrollableParentEl[0].scrollTop + vl.pageHeight >= vl.$scrollableParentEl[0].scrollHeight) {\n      vl.lastRepaintY = scrollTop;\n    } else {\n      return;\n    }\n\n    var items = vl.filteredItems || vl.items;\n    var fromIndex;\n    var toIndex;\n    var heightBeforeFirstItem = 0;\n    var heightBeforeLastItem = 0;\n\n    if (vl.dynamicHeight) {\n      var itemTop = 0;\n      var itemHeight;\n      vl.maxBufferHeight = vl.pageHeight;\n\n      for (var j = 0; j < vl.heights.length; j += 1) {\n        itemHeight = vl.heights[j];\n\n        if (typeof fromIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop - vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize) fromIndex = j;else heightBeforeFirstItem += itemHeight;\n        }\n\n        if (typeof toIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop + vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize || j === vl.heights.length - 1) toIndex = j + 1;\n          heightBeforeLastItem += itemHeight;\n        }\n\n        itemTop += itemHeight;\n      }\n\n      toIndex = Math.min(toIndex, items.length);\n    } else {\n      fromIndex = (parseInt(scrollTop / vl.params.height, 10) - vl.rowsBefore) * vl.params.cols;\n\n      if (fromIndex < 0) {\n        fromIndex = 0;\n      }\n\n      toIndex = Math.min(fromIndex + vl.rowsToRender * vl.params.cols, items.length);\n    }\n\n    var topPosition;\n    var renderExternalItems = [];\n    vl.reachEnd = false;\n    var i;\n\n    for (i = fromIndex; i < toIndex; i += 1) {\n      var itemEl = void 0; // Define real item index\n\n      var index = vl.items.indexOf(items[i]);\n      if (i === fromIndex) vl.currentFromIndex = index;\n      if (i === toIndex - 1) vl.currentToIndex = index;\n\n      if (vl.filteredItems) {\n        if (vl.items[index] === vl.filteredItems[vl.filteredItems.length - 1]) vl.reachEnd = true;\n      } else if (index === vl.items.length - 1) vl.reachEnd = true; // Find items\n\n\n      if (vl.params.renderExternal) {\n        renderExternalItems.push(items[i]);\n      } else if (vl.domCache[index]) {\n        itemEl = vl.domCache[index];\n        itemEl.f7VirtualListIndex = index;\n      } else {\n        if (vl.renderItem) {\n          vl.tempDomElement.innerHTML = vl.renderItem(items[i], index).trim();\n        } else {\n          vl.tempDomElement.innerHTML = items[i].toString().trim();\n        }\n\n        itemEl = vl.tempDomElement.childNodes[0];\n        if (vl.params.cache) vl.domCache[index] = itemEl;\n        itemEl.f7VirtualListIndex = index;\n      } // Set item top position\n\n\n      if (i === fromIndex) {\n        if (vl.dynamicHeight) {\n          topPosition = heightBeforeFirstItem;\n        } else {\n          topPosition = i * vl.params.height / vl.params.cols;\n        }\n      }\n\n      if (!vl.params.renderExternal) {\n        itemEl.style.top = topPosition + \"px\"; // Before item insert\n\n        vl.emit('local::itemBeforeInsert vlItemBeforeInsert', vl, itemEl, items[i]); // Append item to fragment\n\n        vl.fragment.appendChild(itemEl);\n      }\n    } // Update list height with not updatable scroll\n\n\n    if (!vl.updatableScroll) {\n      if (vl.dynamicHeight) {\n        vl.itemsWrapEl.style.height = heightBeforeLastItem + \"px\";\n      } else {\n        vl.itemsWrapEl.style.height = i * vl.params.height / vl.params.cols + \"px\";\n      }\n    } // Update list html\n\n\n    if (vl.params.renderExternal) {\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n      }\n    } else {\n      vl.emit('local::beforeClear vlBeforeClear', vl, vl.fragment);\n      vl.itemsWrapEl.innerHTML = '';\n      vl.emit('local::itemsBeforeInsert vlItemsBeforeInsert', vl, vl.fragment);\n\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n        if (vl.params.emptyTemplate) vl.itemsWrapEl.innerHTML = vl.params.emptyTemplate;\n      } else {\n        vl.itemsWrapEl.appendChild(vl.fragment);\n      }\n\n      vl.emit('local::itemsAfterInsert vlItemsAfterInsert', vl, vl.fragment);\n    }\n\n    if (typeof forceScrollTop !== 'undefined' && force) {\n      vl.$scrollableParentEl.scrollTop(forceScrollTop, 0);\n    }\n\n    if (vl.params.renderExternal) {\n      vl.params.renderExternal(vl, {\n        fromIndex: fromIndex,\n        toIndex: toIndex,\n        listHeight: vl.listHeight,\n        topPosition: topPosition,\n        items: renderExternalItems\n      });\n    }\n  } // Filter\n  ;\n\n  _proto.filterItems = function filterItems(indexes, resetScrollTop) {\n    if (resetScrollTop === void 0) {\n      resetScrollTop = true;\n    }\n\n    var vl = this;\n    vl.filteredItems = [];\n\n    for (var i = 0; i < indexes.length; i += 1) {\n      vl.filteredItems.push(vl.items[indexes[i]]);\n    }\n\n    if (resetScrollTop) {\n      vl.$scrollableParentEl[0].scrollTop = 0;\n    }\n\n    vl.update();\n  };\n\n  _proto.resetFilter = function resetFilter() {\n    var vl = this;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    } else {\n      vl.filteredItems = null;\n      delete vl.filteredItems;\n    }\n\n    vl.update();\n  };\n\n  _proto.scrollToItem = function scrollToItem(index) {\n    var vl = this;\n    if (index > vl.items.length) return false;\n    var itemTop = 0;\n\n    if (vl.dynamicHeight) {\n      for (var i = 0; i < index; i += 1) {\n        itemTop += vl.heights[i];\n      }\n    } else {\n      itemTop = index * vl.params.height;\n    }\n\n    var listTop = vl.$el[0].offsetTop;\n    vl.render(true, listTop + itemTop - parseInt(vl.$scrollableParentEl.css('padding-top'), 10));\n    return true;\n  };\n\n  _proto.handleScroll = function handleScroll() {\n    var vl = this;\n    vl.render();\n  } // Handle resize event\n  ;\n\n  _proto.isVisible = function isVisible() {\n    var vl = this;\n    return !!(vl.el.offsetWidth || vl.el.offsetHeight || vl.el.getClientRects().length);\n  };\n\n  _proto.handleResize = function handleResize() {\n    var vl = this;\n\n    if (vl.isVisible()) {\n      vl.setListSize();\n      vl.render(true);\n    }\n  } // Append\n  ;\n\n  _proto.appendItems = function appendItems(items) {\n    var vl = this;\n\n    for (var i = 0; i < items.length; i += 1) {\n      vl.items.push(items[i]);\n    }\n\n    vl.update();\n  };\n\n  _proto.appendItem = function appendItem(item) {\n    var vl = this;\n    vl.appendItems([item]);\n  } // Replace\n  ;\n\n  _proto.replaceAllItems = function replaceAllItems(items) {\n    var vl = this;\n    vl.items = items;\n    delete vl.filteredItems;\n    vl.domCache = {};\n    vl.update();\n  };\n\n  _proto.replaceItem = function replaceItem(index, item) {\n    var vl = this;\n    vl.items[index] = item;\n    if (vl.params.cache) delete vl.domCache[index];\n    vl.update();\n  } // Prepend\n  ;\n\n  _proto.prependItems = function prependItems(items) {\n    var vl = this;\n\n    for (var i = items.length - 1; i >= 0; i -= 1) {\n      vl.items.unshift(items[i]);\n    }\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        newCache[parseInt(cached, 10) + items.length] = vl.domCache[cached];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  };\n\n  _proto.prependItem = function prependItem(item) {\n    var vl = this;\n    vl.prependItems([item]);\n  } // Move\n  ;\n\n  _proto.moveItem = function moveItem(from, to) {\n    var vl = this;\n    var fromIndex = from;\n    var toIndex = to;\n    if (fromIndex === toIndex) return; // remove item from array\n\n    var item = vl.items.splice(fromIndex, 1)[0];\n\n    if (toIndex >= vl.items.length) {\n      // Add item to the end\n      vl.items.push(item);\n      toIndex = vl.items.length - 1;\n    } else {\n      // Add item to new index\n      vl.items.splice(toIndex, 0, item);\n    } // Update cache\n\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        var cachedIndex = parseInt(cached, 10);\n        var leftIndex = fromIndex < toIndex ? fromIndex : toIndex;\n        var rightIndex = fromIndex < toIndex ? toIndex : fromIndex;\n        var indexShift = fromIndex < toIndex ? -1 : 1;\n        if (cachedIndex < leftIndex || cachedIndex > rightIndex) newCache[cachedIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex === leftIndex) newCache[rightIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex > leftIndex && cachedIndex <= rightIndex) newCache[cachedIndex + indexShift] = vl.domCache[cachedIndex];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Insert before\n  ;\n\n  _proto.insertItemBefore = function insertItemBefore(index, item) {\n    var vl = this;\n\n    if (index === 0) {\n      vl.prependItem(item);\n      return;\n    }\n\n    if (index >= vl.items.length) {\n      vl.appendItem(item);\n      return;\n    }\n\n    vl.items.splice(index, 0, item); // Update cache\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        var cachedIndex = parseInt(cached, 10);\n\n        if (cachedIndex >= index) {\n          newCache[cachedIndex + 1] = vl.domCache[cachedIndex];\n        }\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Delete\n  ;\n\n  _proto.deleteItems = function deleteItems(indexes) {\n    var vl = this;\n    var prevIndex;\n    var indexShift = 0;\n\n    var _loop = function _loop(i) {\n      var index = indexes[i];\n\n      if (typeof prevIndex !== 'undefined') {\n        if (index > prevIndex) {\n          indexShift = -i;\n        }\n      }\n\n      index += indexShift;\n      prevIndex = indexes[i]; // Delete item\n\n      var deletedItem = vl.items.splice(index, 1)[0]; // Delete from filtered\n\n      if (vl.filteredItems && vl.filteredItems.indexOf(deletedItem) >= 0) {\n        vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem), 1);\n      } // Update cache\n\n\n      if (vl.params.cache) {\n        var newCache = {};\n        Object.keys(vl.domCache).forEach(function (cached) {\n          var cachedIndex = parseInt(cached, 10);\n\n          if (cachedIndex === index) {\n            delete vl.domCache[index];\n          } else if (parseInt(cached, 10) > index) {\n            newCache[cachedIndex - 1] = vl.domCache[cached];\n          } else {\n            newCache[cachedIndex] = vl.domCache[cached];\n          }\n        });\n        vl.domCache = newCache;\n      }\n    };\n\n    for (var i = 0; i < indexes.length; i += 1) {\n      _loop(i);\n    }\n\n    vl.update();\n  };\n\n  _proto.deleteAllItems = function deleteAllItems() {\n    var vl = this;\n    vl.items = [];\n    delete vl.filteredItems;\n    if (vl.params.cache) vl.domCache = {};\n    vl.update();\n  };\n\n  _proto.deleteItem = function deleteItem(index) {\n    var vl = this;\n    vl.deleteItems([index]);\n  } // Clear cache\n  ;\n\n  _proto.clearCache = function clearCache() {\n    var vl = this;\n    vl.domCache = {};\n  } // Update Virtual List\n  ;\n\n  _proto.update = function update(deleteCache) {\n    var vl = this;\n\n    if (deleteCache && vl.params.cache) {\n      vl.domCache = {};\n    }\n\n    vl.setListSize();\n    vl.render(true);\n  };\n\n  _proto.init = function init() {\n    var vl = this;\n    vl.attachEvents();\n    vl.setListSize();\n    vl.render();\n  };\n\n  _proto.destroy = function destroy() {\n    var vl = this;\n    vl.detachEvents();\n    vl.$el[0].f7VirtualList = null;\n    delete vl.$el[0].f7VirtualList;\n    deleteProps(vl);\n    vl = null;\n  };\n\n  return VirtualList;\n}(Framework7Class);\n\nexport default VirtualList;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/virtual-list/virtual-list-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getDocument","$","extend","deleteProps","Framework7Class","getDevice","VirtualList","_Framework7Class","app","params","_this","call","vl","device","document","defaultHeight","theme","defaults","cols","height","cache","dynamicHeightBufferSize","showFilteredItemsOnly","renderExternal","undefined","setListHeight","searchByItem","searchAll","ul","createUl","scrollableParentEl","renderItem","item","trim","on","useModulesParams","$el","el","length","f7VirtualList","items","filteredItems","$pageContentEl","parents","pageContentEl","$scrollableParentEl","eq","updatableScroll","ios","osVersion","split","$ul","children","append","$itemsWrapEl","itemsWrapEl","domCache","displayDomCache","tempDomElement","createElement","lastRepaintY","fragment","createDocumentFragment","pageHeight","rowsPerScreen","rowsBefore","rowsAfter","rowsToRender","maxBufferHeight","listHeight","dynamicHeight","useModules","handleScrollBound","handleScroll","bind","handleResizeBound","handleResize","$pageEl","$tabEl","$panelEl","$popupEl","attachEvents","filter","tabEl","parent","detachEvents","off","init","_proto","setListSize","offsetHeight","heights","i","itemHeight","push","Math","ceil","css","render","force","forceScrollTop","scrollTop","getBoundingClientRect","top","abs","scrollHeight","fromIndex","toIndex","heightBeforeFirstItem","heightBeforeLastItem","itemTop","j","min","parseInt","topPosition","renderExternalItems","reachEnd","itemEl","index","indexOf","currentFromIndex","currentToIndex","f7VirtualListIndex","innerHTML","toString","childNodes","style","emit","appendChild","emptyTemplate","filterItems","indexes","resetScrollTop","update","resetFilter","scrollToItem","listTop","offsetTop","isVisible","offsetWidth","getClientRects","appendItems","appendItem","replaceAllItems","replaceItem","prependItems","unshift","newCache","keys","forEach","cached","prependItem","moveItem","from","to","splice","cachedIndex","leftIndex","rightIndex","indexShift","insertItemBefore","deleteItems","prevIndex","_loop","deletedItem","deleteAllItems","deleteItem","clearCache","deleteCache","destroy"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\n\nvar VirtualList = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(VirtualList, _Framework7Class);\n\n  function VirtualList(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var vl = _assertThisInitialized(_this);\n\n    var device = getDevice();\n    var document = getDocument();\n    var defaultHeight;\n\n    if (app.theme === 'md') {\n      defaultHeight = 48;\n    } else if (app.theme === 'ios') {\n      defaultHeight = 44;\n    } else if (app.theme === 'aurora') {\n      defaultHeight = 38;\n    }\n\n    var defaults = {\n      cols: 1,\n      height: defaultHeight,\n      cache: true,\n      dynamicHeightBufferSize: 1,\n      showFilteredItemsOnly: false,\n      renderExternal: undefined,\n      setListHeight: true,\n      searchByItem: undefined,\n      searchAll: undefined,\n      ul: null,\n      createUl: true,\n      scrollableParentEl: undefined,\n      renderItem: function renderItem(item) {\n        return (\"\\n          <li>\\n            <div class=\\\"item-content\\\">\\n              <div class=\\\"item-inner\\\">\\n                <div class=\\\"item-title\\\">\" + item + \"</div>\\n              </div>\\n            </div>\\n          </li>\\n        \").trim();\n      },\n      on: {}\n    }; // Extend defaults with modules params\n\n    vl.useModulesParams(defaults);\n    vl.params = extend(defaults, params);\n\n    if (vl.params.height === undefined || !vl.params.height) {\n      vl.params.height = defaultHeight;\n    }\n\n    vl.$el = $(params.el);\n    vl.el = vl.$el[0];\n    if (vl.$el.length === 0) return undefined || _assertThisInitialized(_this);\n    vl.$el[0].f7VirtualList = vl;\n    vl.items = vl.params.items;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    }\n\n    if (vl.params.renderItem) {\n      vl.renderItem = vl.params.renderItem;\n    }\n\n    vl.$pageContentEl = vl.$el.parents('.page-content');\n    vl.pageContentEl = vl.$pageContentEl[0];\n    vl.$scrollableParentEl = vl.params.scrollableParentEl ? $(vl.params.scrollableParentEl).eq(0) : vl.$pageContentEl;\n\n    if (!vl.$scrollableParentEl.length && vl.$pageContentEl.length) {\n      vl.$scrollableParentEl = vl.$pageContentEl;\n    }\n\n    vl.scrollableParentEl = vl.$scrollableParentEl[0]; // Bad scroll\n\n    if (typeof vl.params.updatableScroll !== 'undefined') {\n      vl.updatableScroll = vl.params.updatableScroll;\n    } else {\n      vl.updatableScroll = true;\n\n      if (device.ios && device.osVersion.split('.')[0] < 8) {\n        vl.updatableScroll = false;\n      }\n    } // Append <ul>\n\n\n    var ul = vl.params.ul;\n    vl.$ul = ul ? $(vl.params.ul) : vl.$el.children('ul');\n\n    if (vl.$ul.length === 0 && vl.params.createUl) {\n      vl.$el.append('<ul></ul>');\n      vl.$ul = vl.$el.children('ul');\n    }\n\n    vl.ul = vl.$ul[0];\n    var $itemsWrapEl;\n    if (!vl.ul && !vl.params.createUl) $itemsWrapEl = vl.$el;else $itemsWrapEl = vl.$ul;\n    extend(vl, {\n      $itemsWrapEl: $itemsWrapEl,\n      itemsWrapEl: $itemsWrapEl[0],\n      // DOM cached items\n      domCache: {},\n      displayDomCache: {},\n      // Temporary DOM Element\n      tempDomElement: document.createElement('ul'),\n      // Last repain position\n      lastRepaintY: null,\n      // Fragment\n      fragment: document.createDocumentFragment(),\n      // Props\n      pageHeight: undefined,\n      rowsPerScreen: undefined,\n      rowsBefore: undefined,\n      rowsAfter: undefined,\n      rowsToRender: undefined,\n      maxBufferHeight: 0,\n      listHeight: undefined,\n      dynamicHeight: typeof vl.params.height === 'function'\n    }); // Install Modules\n\n    vl.useModules(); // Attach events\n\n    var handleScrollBound = vl.handleScroll.bind(vl);\n    var handleResizeBound = vl.handleResize.bind(vl);\n    var $pageEl;\n    var $tabEl;\n    var $panelEl;\n    var $popupEl;\n\n    vl.attachEvents = function attachEvents() {\n      $pageEl = vl.$el.parents('.page').eq(0);\n      $tabEl = vl.$el.parents('.tab').filter(function (tabEl) {\n        return $(tabEl).parent('.tabs').parent('.tabs-animated-wrap, .tabs-swipeable-wrap').length === 0;\n      }).eq(0);\n      $panelEl = vl.$el.parents('.panel').eq(0);\n      $popupEl = vl.$el.parents('.popup').eq(0);\n      vl.$scrollableParentEl.on('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.on('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.on('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.on('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.on('popup:open', handleResizeBound);\n      app.on('resize', handleResizeBound);\n    };\n\n    vl.detachEvents = function attachEvents() {\n      vl.$scrollableParentEl.off('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.off('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.off('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.off('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.off('popup:open', handleResizeBound);\n      app.off('resize', handleResizeBound);\n    }; // Init\n\n\n    vl.init();\n    return vl || _assertThisInitialized(_this);\n  }\n\n  var _proto = VirtualList.prototype;\n\n  _proto.setListSize = function setListSize() {\n    var vl = this;\n    var items = vl.filteredItems || vl.items;\n    vl.pageHeight = vl.$scrollableParentEl[0].offsetHeight;\n\n    if (vl.dynamicHeight) {\n      vl.listHeight = 0;\n      vl.heights = [];\n\n      for (var i = 0; i < items.length; i += 1) {\n        var itemHeight = vl.params.height(items[i]);\n        vl.listHeight += itemHeight;\n        vl.heights.push(itemHeight);\n      }\n    } else {\n      vl.listHeight = Math.ceil(items.length / vl.params.cols) * vl.params.height;\n      vl.rowsPerScreen = Math.ceil(vl.pageHeight / vl.params.height);\n      vl.rowsBefore = vl.params.rowsBefore || vl.rowsPerScreen * 2;\n      vl.rowsAfter = vl.params.rowsAfter || vl.rowsPerScreen;\n      vl.rowsToRender = vl.rowsPerScreen + vl.rowsBefore + vl.rowsAfter;\n      vl.maxBufferHeight = vl.rowsBefore / 2 * vl.params.height;\n    }\n\n    if (vl.updatableScroll || vl.params.setListHeight) {\n      vl.$itemsWrapEl.css({\n        height: vl.listHeight + \"px\"\n      });\n    }\n  };\n\n  _proto.render = function render(force, forceScrollTop) {\n    var vl = this;\n    if (force) vl.lastRepaintY = null;\n    var scrollTop = -(vl.$el[0].getBoundingClientRect().top - vl.$scrollableParentEl[0].getBoundingClientRect().top);\n    if (typeof forceScrollTop !== 'undefined') scrollTop = forceScrollTop;\n\n    if (vl.lastRepaintY === null || Math.abs(scrollTop - vl.lastRepaintY) > vl.maxBufferHeight || !vl.updatableScroll && vl.$scrollableParentEl[0].scrollTop + vl.pageHeight >= vl.$scrollableParentEl[0].scrollHeight) {\n      vl.lastRepaintY = scrollTop;\n    } else {\n      return;\n    }\n\n    var items = vl.filteredItems || vl.items;\n    var fromIndex;\n    var toIndex;\n    var heightBeforeFirstItem = 0;\n    var heightBeforeLastItem = 0;\n\n    if (vl.dynamicHeight) {\n      var itemTop = 0;\n      var itemHeight;\n      vl.maxBufferHeight = vl.pageHeight;\n\n      for (var j = 0; j < vl.heights.length; j += 1) {\n        itemHeight = vl.heights[j];\n\n        if (typeof fromIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop - vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize) fromIndex = j;else heightBeforeFirstItem += itemHeight;\n        }\n\n        if (typeof toIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop + vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize || j === vl.heights.length - 1) toIndex = j + 1;\n          heightBeforeLastItem += itemHeight;\n        }\n\n        itemTop += itemHeight;\n      }\n\n      toIndex = Math.min(toIndex, items.length);\n    } else {\n      fromIndex = (parseInt(scrollTop / vl.params.height, 10) - vl.rowsBefore) * vl.params.cols;\n\n      if (fromIndex < 0) {\n        fromIndex = 0;\n      }\n\n      toIndex = Math.min(fromIndex + vl.rowsToRender * vl.params.cols, items.length);\n    }\n\n    var topPosition;\n    var renderExternalItems = [];\n    vl.reachEnd = false;\n    var i;\n\n    for (i = fromIndex; i < toIndex; i += 1) {\n      var itemEl = void 0; // Define real item index\n\n      var index = vl.items.indexOf(items[i]);\n      if (i === fromIndex) vl.currentFromIndex = index;\n      if (i === toIndex - 1) vl.currentToIndex = index;\n\n      if (vl.filteredItems) {\n        if (vl.items[index] === vl.filteredItems[vl.filteredItems.length - 1]) vl.reachEnd = true;\n      } else if (index === vl.items.length - 1) vl.reachEnd = true; // Find items\n\n\n      if (vl.params.renderExternal) {\n        renderExternalItems.push(items[i]);\n      } else if (vl.domCache[index]) {\n        itemEl = vl.domCache[index];\n        itemEl.f7VirtualListIndex = index;\n      } else {\n        if (vl.renderItem) {\n          vl.tempDomElement.innerHTML = vl.renderItem(items[i], index).trim();\n        } else {\n          vl.tempDomElement.innerHTML = items[i].toString().trim();\n        }\n\n        itemEl = vl.tempDomElement.childNodes[0];\n        if (vl.params.cache) vl.domCache[index] = itemEl;\n        itemEl.f7VirtualListIndex = index;\n      } // Set item top position\n\n\n      if (i === fromIndex) {\n        if (vl.dynamicHeight) {\n          topPosition = heightBeforeFirstItem;\n        } else {\n          topPosition = i * vl.params.height / vl.params.cols;\n        }\n      }\n\n      if (!vl.params.renderExternal) {\n        itemEl.style.top = topPosition + \"px\"; // Before item insert\n\n        vl.emit('local::itemBeforeInsert vlItemBeforeInsert', vl, itemEl, items[i]); // Append item to fragment\n\n        vl.fragment.appendChild(itemEl);\n      }\n    } // Update list height with not updatable scroll\n\n\n    if (!vl.updatableScroll) {\n      if (vl.dynamicHeight) {\n        vl.itemsWrapEl.style.height = heightBeforeLastItem + \"px\";\n      } else {\n        vl.itemsWrapEl.style.height = i * vl.params.height / vl.params.cols + \"px\";\n      }\n    } // Update list html\n\n\n    if (vl.params.renderExternal) {\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n      }\n    } else {\n      vl.emit('local::beforeClear vlBeforeClear', vl, vl.fragment);\n      vl.itemsWrapEl.innerHTML = '';\n      vl.emit('local::itemsBeforeInsert vlItemsBeforeInsert', vl, vl.fragment);\n\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n        if (vl.params.emptyTemplate) vl.itemsWrapEl.innerHTML = vl.params.emptyTemplate;\n      } else {\n        vl.itemsWrapEl.appendChild(vl.fragment);\n      }\n\n      vl.emit('local::itemsAfterInsert vlItemsAfterInsert', vl, vl.fragment);\n    }\n\n    if (typeof forceScrollTop !== 'undefined' && force) {\n      vl.$scrollableParentEl.scrollTop(forceScrollTop, 0);\n    }\n\n    if (vl.params.renderExternal) {\n      vl.params.renderExternal(vl, {\n        fromIndex: fromIndex,\n        toIndex: toIndex,\n        listHeight: vl.listHeight,\n        topPosition: topPosition,\n        items: renderExternalItems\n      });\n    }\n  } // Filter\n  ;\n\n  _proto.filterItems = function filterItems(indexes, resetScrollTop) {\n    if (resetScrollTop === void 0) {\n      resetScrollTop = true;\n    }\n\n    var vl = this;\n    vl.filteredItems = [];\n\n    for (var i = 0; i < indexes.length; i += 1) {\n      vl.filteredItems.push(vl.items[indexes[i]]);\n    }\n\n    if (resetScrollTop) {\n      vl.$scrollableParentEl[0].scrollTop = 0;\n    }\n\n    vl.update();\n  };\n\n  _proto.resetFilter = function resetFilter() {\n    var vl = this;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    } else {\n      vl.filteredItems = null;\n      delete vl.filteredItems;\n    }\n\n    vl.update();\n  };\n\n  _proto.scrollToItem = function scrollToItem(index) {\n    var vl = this;\n    if (index > vl.items.length) return false;\n    var itemTop = 0;\n\n    if (vl.dynamicHeight) {\n      for (var i = 0; i < index; i += 1) {\n        itemTop += vl.heights[i];\n      }\n    } else {\n      itemTop = index * vl.params.height;\n    }\n\n    var listTop = vl.$el[0].offsetTop;\n    vl.render(true, listTop + itemTop - parseInt(vl.$scrollableParentEl.css('padding-top'), 10));\n    return true;\n  };\n\n  _proto.handleScroll = function handleScroll() {\n    var vl = this;\n    vl.render();\n  } // Handle resize event\n  ;\n\n  _proto.isVisible = function isVisible() {\n    var vl = this;\n    return !!(vl.el.offsetWidth || vl.el.offsetHeight || vl.el.getClientRects().length);\n  };\n\n  _proto.handleResize = function handleResize() {\n    var vl = this;\n\n    if (vl.isVisible()) {\n      vl.setListSize();\n      vl.render(true);\n    }\n  } // Append\n  ;\n\n  _proto.appendItems = function appendItems(items) {\n    var vl = this;\n\n    for (var i = 0; i < items.length; i += 1) {\n      vl.items.push(items[i]);\n    }\n\n    vl.update();\n  };\n\n  _proto.appendItem = function appendItem(item) {\n    var vl = this;\n    vl.appendItems([item]);\n  } // Replace\n  ;\n\n  _proto.replaceAllItems = function replaceAllItems(items) {\n    var vl = this;\n    vl.items = items;\n    delete vl.filteredItems;\n    vl.domCache = {};\n    vl.update();\n  };\n\n  _proto.replaceItem = function replaceItem(index, item) {\n    var vl = this;\n    vl.items[index] = item;\n    if (vl.params.cache) delete vl.domCache[index];\n    vl.update();\n  } // Prepend\n  ;\n\n  _proto.prependItems = function prependItems(items) {\n    var vl = this;\n\n    for (var i = items.length - 1; i >= 0; i -= 1) {\n      vl.items.unshift(items[i]);\n    }\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        newCache[parseInt(cached, 10) + items.length] = vl.domCache[cached];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  };\n\n  _proto.prependItem = function prependItem(item) {\n    var vl = this;\n    vl.prependItems([item]);\n  } // Move\n  ;\n\n  _proto.moveItem = function moveItem(from, to) {\n    var vl = this;\n    var fromIndex = from;\n    var toIndex = to;\n    if (fromIndex === toIndex) return; // remove item from array\n\n    var item = vl.items.splice(fromIndex, 1)[0];\n\n    if (toIndex >= vl.items.length) {\n      // Add item to the end\n      vl.items.push(item);\n      toIndex = vl.items.length - 1;\n    } else {\n      // Add item to new index\n      vl.items.splice(toIndex, 0, item);\n    } // Update cache\n\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        var cachedIndex = parseInt(cached, 10);\n        var leftIndex = fromIndex < toIndex ? fromIndex : toIndex;\n        var rightIndex = fromIndex < toIndex ? toIndex : fromIndex;\n        var indexShift = fromIndex < toIndex ? -1 : 1;\n        if (cachedIndex < leftIndex || cachedIndex > rightIndex) newCache[cachedIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex === leftIndex) newCache[rightIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex > leftIndex && cachedIndex <= rightIndex) newCache[cachedIndex + indexShift] = vl.domCache[cachedIndex];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Insert before\n  ;\n\n  _proto.insertItemBefore = function insertItemBefore(index, item) {\n    var vl = this;\n\n    if (index === 0) {\n      vl.prependItem(item);\n      return;\n    }\n\n    if (index >= vl.items.length) {\n      vl.appendItem(item);\n      return;\n    }\n\n    vl.items.splice(index, 0, item); // Update cache\n\n    if (vl.params.cache) {\n      var newCache = {};\n      Object.keys(vl.domCache).forEach(function (cached) {\n        var cachedIndex = parseInt(cached, 10);\n\n        if (cachedIndex >= index) {\n          newCache[cachedIndex + 1] = vl.domCache[cachedIndex];\n        }\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Delete\n  ;\n\n  _proto.deleteItems = function deleteItems(indexes) {\n    var vl = this;\n    var prevIndex;\n    var indexShift = 0;\n\n    var _loop = function _loop(i) {\n      var index = indexes[i];\n\n      if (typeof prevIndex !== 'undefined') {\n        if (index > prevIndex) {\n          indexShift = -i;\n        }\n      }\n\n      index += indexShift;\n      prevIndex = indexes[i]; // Delete item\n\n      var deletedItem = vl.items.splice(index, 1)[0]; // Delete from filtered\n\n      if (vl.filteredItems && vl.filteredItems.indexOf(deletedItem) >= 0) {\n        vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem), 1);\n      } // Update cache\n\n\n      if (vl.params.cache) {\n        var newCache = {};\n        Object.keys(vl.domCache).forEach(function (cached) {\n          var cachedIndex = parseInt(cached, 10);\n\n          if (cachedIndex === index) {\n            delete vl.domCache[index];\n          } else if (parseInt(cached, 10) > index) {\n            newCache[cachedIndex - 1] = vl.domCache[cached];\n          } else {\n            newCache[cachedIndex] = vl.domCache[cached];\n          }\n        });\n        vl.domCache = newCache;\n      }\n    };\n\n    for (var i = 0; i < indexes.length; i += 1) {\n      _loop(i);\n    }\n\n    vl.update();\n  };\n\n  _proto.deleteAllItems = function deleteAllItems() {\n    var vl = this;\n    vl.items = [];\n    delete vl.filteredItems;\n    if (vl.params.cache) vl.domCache = {};\n    vl.update();\n  };\n\n  _proto.deleteItem = function deleteItem(index) {\n    var vl = this;\n    vl.deleteItems([index]);\n  } // Clear cache\n  ;\n\n  _proto.clearCache = function clearCache() {\n    var vl = this;\n    vl.domCache = {};\n  } // Update Virtual List\n  ;\n\n  _proto.update = function update(deleteCache) {\n    var vl = this;\n\n    if (deleteCache && vl.params.cache) {\n      vl.domCache = {};\n    }\n\n    vl.setListSize();\n    vl.render(true);\n  };\n\n  _proto.init = function init() {\n    var vl = this;\n    vl.attachEvents();\n    vl.setListSize();\n    vl.render();\n  };\n\n  _proto.destroy = function destroy() {\n    var vl = this;\n    vl.detachEvents();\n    vl.$el[0].f7VirtualList = null;\n    delete vl.$el[0].f7VirtualList;\n    deleteProps(vl);\n    vl = null;\n  };\n\n  return VirtualList;\n}(Framework7Class);\n\nexport default VirtualList;"]},"metadata":{},"sourceType":"module"}