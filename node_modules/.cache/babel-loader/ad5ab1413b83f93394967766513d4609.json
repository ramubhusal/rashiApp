{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getSupport } from '../../shared/get-support';\n\nvar Range = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Range, _Framework7Class);\n\n  function Range(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var range = _assertThisInitialized(_this);\n\n    var support = getSupport();\n    var defaults = {\n      el: null,\n      inputEl: null,\n      dual: false,\n      step: 1,\n      label: false,\n      min: 0,\n      max: 100,\n      value: 0,\n      draggableBar: true,\n      vertical: false,\n      verticalReversed: false,\n      formatLabel: null,\n      scale: false,\n      scaleSteps: 5,\n      scaleSubSteps: 0,\n      formatScaleLabel: null,\n      limitKnobPosition: app.theme === 'ios'\n    }; // Extend defaults with modules params\n\n    range.useModulesParams(defaults);\n    range.params = extend(defaults, params);\n    var el = range.params.el;\n    if (!el) return range || _assertThisInitialized(_this);\n    var $el = $(el);\n    if ($el.length === 0) return range || _assertThisInitialized(_this);\n    if ($el[0].f7Range) return $el[0].f7Range || _assertThisInitialized(_this);\n    var dataset = $el.dataset();\n    'step min max value scaleSteps scaleSubSteps'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = parseFloat(dataset[paramName]);\n      }\n    });\n    'dual label vertical verticalReversed scale'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = dataset[paramName];\n      }\n    });\n\n    if (!range.params.value) {\n      if (typeof dataset.value !== 'undefined') range.params.value = dataset.value;\n\n      if (typeof dataset.valueLeft !== 'undefined' && typeof dataset.valueRight !== 'undefined') {\n        range.params.value = [parseFloat(dataset.valueLeft), parseFloat(dataset.valueRight)];\n      }\n    }\n\n    var $inputEl;\n\n    if (!range.params.dual) {\n      if (range.params.inputEl) {\n        $inputEl = $(range.params.inputEl);\n      } else if ($el.find('input[type=\"range\"]').length) {\n        $inputEl = $el.find('input[type=\"range\"]').eq(0);\n      }\n    }\n\n    var _range$params = range.params,\n        dual = _range$params.dual,\n        step = _range$params.step,\n        label = _range$params.label,\n        min = _range$params.min,\n        max = _range$params.max,\n        value = _range$params.value,\n        vertical = _range$params.vertical,\n        verticalReversed = _range$params.verticalReversed,\n        scale = _range$params.scale,\n        scaleSteps = _range$params.scaleSteps,\n        scaleSubSteps = _range$params.scaleSubSteps,\n        limitKnobPosition = _range$params.limitKnobPosition;\n    extend(range, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      dual: dual,\n      step: step,\n      label: label,\n      min: min,\n      max: max,\n      value: value,\n      previousValue: value,\n      vertical: vertical,\n      verticalReversed: verticalReversed,\n      scale: scale,\n      scaleSteps: scaleSteps,\n      scaleSubSteps: scaleSubSteps,\n      limitKnobPosition: limitKnobPosition\n    });\n\n    if ($inputEl) {\n      'step min max'.split(' ').forEach(function (paramName) {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          range.params[paramName] = parseFloat($inputEl.attr(paramName));\n          range[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      if (typeof $inputEl.val() !== 'undefined') {\n        range.params.value = parseFloat($inputEl.val());\n        range.value = parseFloat($inputEl.val());\n      }\n    } // Dual\n\n\n    if (range.dual) {\n      $el.addClass('range-slider-dual');\n    }\n\n    if (range.label) {\n      $el.addClass('range-slider-label');\n    } // Vertical\n\n\n    if (range.vertical) {\n      $el.addClass('range-slider-vertical');\n\n      if (range.verticalReversed) {\n        $el.addClass('range-slider-vertical-reversed');\n      }\n    } else {\n      $el.addClass('range-slider-horizontal');\n    } // Check for layout\n\n\n    var $barEl = $('<div class=\"range-bar\"></div>');\n    var $barActiveEl = $('<div class=\"range-bar-active\"></div>');\n    $barEl.append($barActiveEl); // Create Knobs\n    // prettier-ignore\n\n    var knobHTML = \"\\n      <div class=\\\"range-knob-wrap\\\">\\n        <div class=\\\"range-knob\\\"></div>\\n        \" + (range.label ? '<div class=\"range-knob-label\"></div>' : '') + \"\\n      </div>\\n    \";\n    var knobs = [$(knobHTML)];\n\n    if (range.dual) {\n      knobs.push($(knobHTML));\n    }\n\n    $el.append($barEl);\n    knobs.forEach(function ($knobEl) {\n      $el.append($knobEl);\n    }); // Labels\n\n    var labels = [];\n\n    if (range.label) {\n      labels.push(knobs[0].find('.range-knob-label'));\n\n      if (range.dual) {\n        labels.push(knobs[1].find('.range-knob-label'));\n      }\n    } // Scale\n\n\n    var $scaleEl;\n\n    if (range.scale && range.scaleSteps >= 1) {\n      $scaleEl = $(\"\\n        <div class=\\\"range-scale\\\">\\n          \" + range.renderScale() + \"\\n        </div>\\n      \");\n      $el.append($scaleEl);\n    }\n\n    extend(range, {\n      knobs: knobs,\n      labels: labels,\n      $barEl: $barEl,\n      $barActiveEl: $barActiveEl,\n      $scaleEl: $scaleEl\n    });\n    $el[0].f7Range = range; // Touch Events\n\n    var isTouched;\n    var touchesStart = {};\n    var isScrolling;\n    var rangeOffset;\n    var rangeOffsetLeft;\n    var rangeOffsetTop;\n    var $touchedKnobEl;\n    var dualValueIndex;\n    var valueChangedByTouch;\n    var targetTouchIdentifier;\n\n    function onTouchChange() {\n      valueChangedByTouch = true;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) return;\n\n      if (!range.params.draggableBar) {\n        if ($(e.target).closest('.range-knob').length === 0) {\n          return;\n        }\n      }\n\n      valueChangedByTouch = false;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (e.type === 'touchstart') {\n        targetTouchIdentifier = e.targetTouches[0].identifier;\n      }\n\n      isTouched = true;\n      isScrolling = undefined;\n      rangeOffset = $el.offset();\n      rangeOffsetLeft = rangeOffset.left;\n      rangeOffsetTop = rangeOffset.top;\n      var progress;\n\n      if (range.vertical) {\n        progress = (touchesStart.y - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - touchesStart.x) / range.rangeWidth;\n      } else {\n        progress = (touchesStart.x - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        if (Math.abs(range.value[0] - newValue) < Math.abs(range.value[1] - newValue)) {\n          dualValueIndex = 0;\n          $touchedKnobEl = range.knobs[0];\n          newValue = [newValue, range.value[1]];\n        } else {\n          dualValueIndex = 1;\n          $touchedKnobEl = range.knobs[1];\n          newValue = [range.value[0], newValue];\n        }\n      } else {\n        $touchedKnobEl = range.knobs[0];\n        newValue = progress * (range.max - range.min) + range.min;\n      }\n\n      nextTick(function () {\n        if (isTouched) $touchedKnobEl.addClass('range-knob-active-state');\n      }, 70);\n      range.on('change', onTouchChange);\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      var pageX;\n      var pageY;\n\n      if (e.type === 'touchmove') {\n        for (var i = 0; i < e.targetTouches.length; i += 1) {\n          if (e.targetTouches[i].identifier === targetTouchIdentifier) {\n            pageX = e.targetTouches[i].pageX;\n            pageY = e.targetTouches[i].pageY;\n          }\n        }\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (typeof pageX === 'undefined' && typeof pageY === 'undefined') return;\n\n      if (typeof isScrolling === 'undefined' && !range.vertical) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      e.preventDefault();\n      var progress;\n\n      if (range.vertical) {\n        progress = (pageY - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - pageX) / range.rangeWidth;\n      } else {\n        progress = (pageX - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        var leftValue;\n        var rightValue;\n\n        if (dualValueIndex === 0) {\n          leftValue = newValue;\n          rightValue = range.value[1];\n\n          if (leftValue > rightValue) {\n            rightValue = leftValue;\n          }\n        } else {\n          leftValue = range.value[0];\n          rightValue = newValue;\n\n          if (rightValue < leftValue) {\n            leftValue = rightValue;\n          }\n        }\n\n        newValue = [leftValue, rightValue];\n      }\n\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend') {\n        var touchEnded;\n\n        for (var i = 0; i < e.changedTouches.length; i += 1) {\n          if (e.changedTouches[i].identifier === targetTouchIdentifier) touchEnded = true;\n        }\n\n        if (!touchEnded) return;\n      }\n\n      if (!isTouched) {\n        if (isScrolling) $touchedKnobEl.removeClass('range-knob-active-state');\n        isTouched = false;\n        return;\n      }\n\n      range.off('change', onTouchChange);\n      isTouched = false;\n      $touchedKnobEl.removeClass('range-knob-active-state');\n\n      if (valueChangedByTouch && range.$inputEl && !range.dual) {\n        range.$inputEl.trigger('change');\n      }\n\n      valueChangedByTouch = false;\n\n      if (typeof range.previousValue !== 'undefined') {\n        if (range.dual && (range.previousValue[0] !== range.value[0] || range.previousValue[1] !== range.value[1]) || !range.dual && range.previousValue !== range.value) {\n          range.$el.trigger('range:changed', range.value);\n          range.emit('local::changed rangeChanged', range, range.value);\n        }\n      }\n    }\n\n    function handleResize() {\n      range.calcSize();\n      range.layout();\n    }\n\n    var parentModals;\n    var parentPanel;\n    var parentPage;\n\n    range.attachEvents = function attachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      app.on('tabShow', handleResize);\n      app.on('resize', handleResize);\n      parentModals = range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast');\n      parentModals.on('modal:open', handleResize);\n      parentPanel = range.$el.parents('.panel');\n      parentPanel.on('panel:open panel:resize', handleResize);\n      parentPage = range.$el.parents('.page').eq(0);\n      parentPage.on('page:reinit', handleResize);\n    };\n\n    range.detachEvents = function detachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('tabShow', handleResize);\n      app.off('resize', handleResize);\n\n      if (parentModals) {\n        parentModals.off('modal:open', handleResize);\n      }\n\n      if (parentPanel) {\n        parentPanel.off('panel:open panel:resize', handleResize);\n      }\n\n      if (parentPage) {\n        parentPage.off('page:reinit', handleResize);\n      }\n\n      parentModals = null;\n      parentPanel = null;\n      parentPage = null;\n    }; // Install Modules\n\n\n    range.useModules(); // Init\n\n    range.init();\n    return range || _assertThisInitialized(_this);\n  }\n\n  var _proto = Range.prototype;\n\n  _proto.calcSize = function calcSize() {\n    var range = this;\n\n    if (range.vertical) {\n      var height = range.$el.outerHeight();\n      if (height === 0) return;\n      range.rangeHeight = height;\n      range.knobHeight = range.knobs[0].outerHeight();\n    } else {\n      var width = range.$el.outerWidth();\n      if (width === 0) return;\n      range.rangeWidth = width;\n      range.knobWidth = range.knobs[0].outerWidth();\n    }\n  };\n\n  _proto.layout = function layout() {\n    var range = this;\n    var app = range.app,\n        knobWidth = range.knobWidth,\n        knobHeight = range.knobHeight,\n        rangeWidth = range.rangeWidth,\n        rangeHeight = range.rangeHeight,\n        min = range.min,\n        max = range.max,\n        knobs = range.knobs,\n        $barActiveEl = range.$barActiveEl,\n        value = range.value,\n        label = range.label,\n        labels = range.labels,\n        vertical = range.vertical,\n        verticalReversed = range.verticalReversed,\n        limitKnobPosition = range.limitKnobPosition;\n    var knobSize = vertical ? knobHeight : knobWidth;\n    var rangeSize = vertical ? rangeHeight : rangeWidth; // eslint-disable-next-line\n\n    var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n\n    if (range.dual) {\n      var _$barActiveEl$css;\n\n      var progress = [(value[0] - min) / (max - min), (value[1] - min) / (max - min)];\n      $barActiveEl.css((_$barActiveEl$css = {}, _$barActiveEl$css[positionProperty] = progress[0] * 100 + \"%\", _$barActiveEl$css[vertical ? 'height' : 'width'] = (progress[1] - progress[0]) * 100 + \"%\", _$barActiveEl$css));\n      knobs.forEach(function ($knobEl, knobIndex) {\n        var startPos = rangeSize * progress[knobIndex];\n\n        if (limitKnobPosition) {\n          var realStartPos = rangeSize * progress[knobIndex] - knobSize / 2;\n          if (realStartPos < 0) startPos = knobSize / 2;\n          if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n        }\n\n        $knobEl.css(positionProperty, startPos + \"px\");\n        if (label) labels[knobIndex].text(range.formatLabel(value[knobIndex], labels[knobIndex][0]));\n      });\n    } else {\n      var _progress = (value - min) / (max - min);\n\n      $barActiveEl.css(vertical ? 'height' : 'width', _progress * 100 + \"%\");\n      var startPos = rangeSize * _progress;\n\n      if (limitKnobPosition) {\n        var realStartPos = rangeSize * _progress - knobSize / 2;\n        if (realStartPos < 0) startPos = knobSize / 2;\n        if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n      }\n\n      knobs[0].css(positionProperty, startPos + \"px\");\n      if (label) labels[0].text(range.formatLabel(value, labels[0][0]));\n    }\n\n    if (range.dual && value.indexOf(min) >= 0 || !range.dual && value === min) {\n      range.$el.addClass('range-slider-min');\n    } else {\n      range.$el.removeClass('range-slider-min');\n    }\n\n    if (range.dual && value.indexOf(max) >= 0 || !range.dual && value === max) {\n      range.$el.addClass('range-slider-max');\n    } else {\n      range.$el.removeClass('range-slider-max');\n    }\n  };\n\n  _proto.setValue = function setValue(newValue, byTouchMove) {\n    var range = this;\n    var step = range.step,\n        min = range.min,\n        max = range.max;\n    var valueChanged;\n    var oldValue;\n\n    if (range.dual) {\n      oldValue = [range.value[0], range.value[1]];\n      var newValues = newValue;\n      if (!Array.isArray(newValues)) newValues = [newValue, newValue];\n\n      if (newValue[0] > newValue[1]) {\n        newValues = [newValues[0], newValues[0]];\n      }\n\n      newValues = newValues.map(function (value) {\n        return Math.max(Math.min(Math.round(value / step) * step, max), min);\n      });\n\n      if (newValues[0] === range.value[0] && newValues[1] === range.value[1]) {\n        return range;\n      }\n\n      newValues.forEach(function (value, valueIndex) {\n        range.value[valueIndex] = value;\n      });\n      valueChanged = oldValue[0] !== newValues[0] || oldValue[1] !== newValues[1];\n      range.layout();\n    } else {\n      oldValue = range.value;\n      var value = Math.max(Math.min(Math.round(newValue / step) * step, max), min);\n      range.value = value;\n      range.layout();\n      valueChanged = oldValue !== value;\n    }\n\n    if (valueChanged) {\n      range.previousValue = oldValue;\n    } // Events\n\n\n    if (!valueChanged) return range;\n    range.$el.trigger('range:change', range.value);\n\n    if (range.$inputEl && !range.dual) {\n      range.$inputEl.val(range.value);\n\n      if (!byTouchMove) {\n        range.$inputEl.trigger('input change');\n      } else {\n        range.$inputEl.trigger('input');\n      }\n    }\n\n    if (!byTouchMove) {\n      range.$el.trigger('range:changed', range.value);\n      range.emit('local::changed rangeChanged', range, range.value);\n    }\n\n    range.emit('local::change rangeChange', range, range.value);\n    return range;\n  };\n\n  _proto.getValue = function getValue() {\n    return this.value;\n  };\n\n  _proto.formatLabel = function formatLabel(value, labelEl) {\n    var range = this;\n    if (range.params.formatLabel) return range.params.formatLabel.call(range, value, labelEl);\n    return value;\n  };\n\n  _proto.formatScaleLabel = function formatScaleLabel(value) {\n    var range = this;\n    if (range.params.formatScaleLabel) return range.params.formatScaleLabel.call(range, value);\n    return value;\n  };\n\n  _proto.renderScale = function renderScale() {\n    var range = this;\n    var app = range.app,\n        verticalReversed = range.verticalReversed,\n        vertical = range.vertical; // eslint-disable-next-line\n\n    var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n    var html = '';\n    Array.from({\n      length: range.scaleSteps + 1\n    }).forEach(function (scaleEl, index) {\n      var scaleStepValue = (range.max - range.min) / range.scaleSteps;\n      var scaleValue = range.min + scaleStepValue * index;\n      var progress = (scaleValue - range.min) / (range.max - range.min);\n      html += \"<div class=\\\"range-scale-step\\\" style=\\\"\" + positionProperty + \": \" + progress * 100 + \"%\\\">\" + range.formatScaleLabel(scaleValue) + \"</div>\";\n\n      if (range.scaleSubSteps && range.scaleSubSteps > 1 && index < range.scaleSteps) {\n        Array.from({\n          length: range.scaleSubSteps - 1\n        }).forEach(function (subStepEl, subIndex) {\n          var subStep = scaleStepValue / range.scaleSubSteps;\n          var scaleSubValue = scaleValue + subStep * (subIndex + 1);\n          var subProgress = (scaleSubValue - range.min) / (range.max - range.min);\n          html += \"<div class=\\\"range-scale-step range-scale-substep\\\" style=\\\"\" + positionProperty + \": \" + subProgress * 100 + \"%\\\"></div>\";\n        });\n      }\n    });\n    return html;\n  };\n\n  _proto.updateScale = function updateScale() {\n    var range = this;\n\n    if (!range.scale || range.scaleSteps < 1) {\n      if (range.$scaleEl) range.$scaleEl.remove();\n      delete range.$scaleEl;\n      return;\n    }\n\n    if (!range.$scaleEl) {\n      range.$scaleEl = $('<div class=\"range-scale\"></div>');\n      range.$el.append(range.$scaleEl);\n    }\n\n    range.$scaleEl.html(range.renderScale());\n  };\n\n  _proto.init = function init() {\n    var range = this;\n    range.calcSize();\n    range.layout();\n    range.attachEvents();\n    return range;\n  };\n\n  _proto.destroy = function destroy() {\n    var range = this;\n    range.$el.trigger('range:beforedestroy');\n    range.emit('local::beforeDestroy rangeBeforeDestroy', range);\n    delete range.$el[0].f7Range;\n    range.detachEvents();\n    deleteProps(range);\n    range = null;\n  };\n\n  return Range;\n}(Framework7Class);\n\nexport default Range;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/range/range-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","$","extend","nextTick","deleteProps","Framework7Class","getSupport","Range","_Framework7Class","app","params","_this","call","range","support","defaults","el","inputEl","dual","step","label","min","max","value","draggableBar","vertical","verticalReversed","formatLabel","scale","scaleSteps","scaleSubSteps","formatScaleLabel","limitKnobPosition","theme","useModulesParams","$el","length","f7Range","dataset","split","forEach","paramName","parseFloat","valueLeft","valueRight","$inputEl","find","eq","_range$params","undefined","previousValue","attr","val","addClass","$barEl","$barActiveEl","append","knobHTML","knobs","push","$knobEl","labels","$scaleEl","renderScale","isTouched","touchesStart","isScrolling","rangeOffset","rangeOffsetLeft","rangeOffsetTop","$touchedKnobEl","dualValueIndex","valueChangedByTouch","targetTouchIdentifier","onTouchChange","handleTouchStart","e","target","closest","x","type","targetTouches","pageX","y","pageY","identifier","offset","left","top","progress","rangeHeight","rtl","rangeWidth","newValue","Math","abs","on","setValue","handleTouchMove","i","preventDefault","leftValue","rightValue","handleTouchEnd","touchEnded","changedTouches","removeClass","off","trigger","emit","handleResize","calcSize","layout","parentModals","parentPanel","parentPage","attachEvents","passive","passiveListener","touchEvents","start","parents","detachEvents","useModules","init","_proto","height","outerHeight","knobHeight","width","outerWidth","knobWidth","knobSize","rangeSize","positionProperty","_$barActiveEl$css","css","knobIndex","startPos","realStartPos","text","_progress","indexOf","byTouchMove","valueChanged","oldValue","newValues","Array","isArray","map","round","valueIndex","getValue","labelEl","html","from","scaleEl","index","scaleStepValue","scaleValue","subStepEl","subIndex","subStep","scaleSubValue","subProgress","updateScale","remove","destroy"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport Framework7Class from '../../shared/class';\nimport { getSupport } from '../../shared/get-support';\n\nvar Range = /*#__PURE__*/function (_Framework7Class) {\n  _inheritsLoose(Range, _Framework7Class);\n\n  function Range(app, params) {\n    var _this;\n\n    _this = _Framework7Class.call(this, params, [app]) || this;\n\n    var range = _assertThisInitialized(_this);\n\n    var support = getSupport();\n    var defaults = {\n      el: null,\n      inputEl: null,\n      dual: false,\n      step: 1,\n      label: false,\n      min: 0,\n      max: 100,\n      value: 0,\n      draggableBar: true,\n      vertical: false,\n      verticalReversed: false,\n      formatLabel: null,\n      scale: false,\n      scaleSteps: 5,\n      scaleSubSteps: 0,\n      formatScaleLabel: null,\n      limitKnobPosition: app.theme === 'ios'\n    }; // Extend defaults with modules params\n\n    range.useModulesParams(defaults);\n    range.params = extend(defaults, params);\n    var el = range.params.el;\n    if (!el) return range || _assertThisInitialized(_this);\n    var $el = $(el);\n    if ($el.length === 0) return range || _assertThisInitialized(_this);\n    if ($el[0].f7Range) return $el[0].f7Range || _assertThisInitialized(_this);\n    var dataset = $el.dataset();\n    'step min max value scaleSteps scaleSubSteps'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = parseFloat(dataset[paramName]);\n      }\n    });\n    'dual label vertical verticalReversed scale'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = dataset[paramName];\n      }\n    });\n\n    if (!range.params.value) {\n      if (typeof dataset.value !== 'undefined') range.params.value = dataset.value;\n\n      if (typeof dataset.valueLeft !== 'undefined' && typeof dataset.valueRight !== 'undefined') {\n        range.params.value = [parseFloat(dataset.valueLeft), parseFloat(dataset.valueRight)];\n      }\n    }\n\n    var $inputEl;\n\n    if (!range.params.dual) {\n      if (range.params.inputEl) {\n        $inputEl = $(range.params.inputEl);\n      } else if ($el.find('input[type=\"range\"]').length) {\n        $inputEl = $el.find('input[type=\"range\"]').eq(0);\n      }\n    }\n\n    var _range$params = range.params,\n        dual = _range$params.dual,\n        step = _range$params.step,\n        label = _range$params.label,\n        min = _range$params.min,\n        max = _range$params.max,\n        value = _range$params.value,\n        vertical = _range$params.vertical,\n        verticalReversed = _range$params.verticalReversed,\n        scale = _range$params.scale,\n        scaleSteps = _range$params.scaleSteps,\n        scaleSubSteps = _range$params.scaleSubSteps,\n        limitKnobPosition = _range$params.limitKnobPosition;\n    extend(range, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      dual: dual,\n      step: step,\n      label: label,\n      min: min,\n      max: max,\n      value: value,\n      previousValue: value,\n      vertical: vertical,\n      verticalReversed: verticalReversed,\n      scale: scale,\n      scaleSteps: scaleSteps,\n      scaleSubSteps: scaleSubSteps,\n      limitKnobPosition: limitKnobPosition\n    });\n\n    if ($inputEl) {\n      'step min max'.split(' ').forEach(function (paramName) {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          range.params[paramName] = parseFloat($inputEl.attr(paramName));\n          range[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      if (typeof $inputEl.val() !== 'undefined') {\n        range.params.value = parseFloat($inputEl.val());\n        range.value = parseFloat($inputEl.val());\n      }\n    } // Dual\n\n\n    if (range.dual) {\n      $el.addClass('range-slider-dual');\n    }\n\n    if (range.label) {\n      $el.addClass('range-slider-label');\n    } // Vertical\n\n\n    if (range.vertical) {\n      $el.addClass('range-slider-vertical');\n\n      if (range.verticalReversed) {\n        $el.addClass('range-slider-vertical-reversed');\n      }\n    } else {\n      $el.addClass('range-slider-horizontal');\n    } // Check for layout\n\n\n    var $barEl = $('<div class=\"range-bar\"></div>');\n    var $barActiveEl = $('<div class=\"range-bar-active\"></div>');\n    $barEl.append($barActiveEl); // Create Knobs\n    // prettier-ignore\n\n    var knobHTML = \"\\n      <div class=\\\"range-knob-wrap\\\">\\n        <div class=\\\"range-knob\\\"></div>\\n        \" + (range.label ? '<div class=\"range-knob-label\"></div>' : '') + \"\\n      </div>\\n    \";\n    var knobs = [$(knobHTML)];\n\n    if (range.dual) {\n      knobs.push($(knobHTML));\n    }\n\n    $el.append($barEl);\n    knobs.forEach(function ($knobEl) {\n      $el.append($knobEl);\n    }); // Labels\n\n    var labels = [];\n\n    if (range.label) {\n      labels.push(knobs[0].find('.range-knob-label'));\n\n      if (range.dual) {\n        labels.push(knobs[1].find('.range-knob-label'));\n      }\n    } // Scale\n\n\n    var $scaleEl;\n\n    if (range.scale && range.scaleSteps >= 1) {\n      $scaleEl = $(\"\\n        <div class=\\\"range-scale\\\">\\n          \" + range.renderScale() + \"\\n        </div>\\n      \");\n      $el.append($scaleEl);\n    }\n\n    extend(range, {\n      knobs: knobs,\n      labels: labels,\n      $barEl: $barEl,\n      $barActiveEl: $barActiveEl,\n      $scaleEl: $scaleEl\n    });\n    $el[0].f7Range = range; // Touch Events\n\n    var isTouched;\n    var touchesStart = {};\n    var isScrolling;\n    var rangeOffset;\n    var rangeOffsetLeft;\n    var rangeOffsetTop;\n    var $touchedKnobEl;\n    var dualValueIndex;\n    var valueChangedByTouch;\n    var targetTouchIdentifier;\n\n    function onTouchChange() {\n      valueChangedByTouch = true;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) return;\n\n      if (!range.params.draggableBar) {\n        if ($(e.target).closest('.range-knob').length === 0) {\n          return;\n        }\n      }\n\n      valueChangedByTouch = false;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (e.type === 'touchstart') {\n        targetTouchIdentifier = e.targetTouches[0].identifier;\n      }\n\n      isTouched = true;\n      isScrolling = undefined;\n      rangeOffset = $el.offset();\n      rangeOffsetLeft = rangeOffset.left;\n      rangeOffsetTop = rangeOffset.top;\n      var progress;\n\n      if (range.vertical) {\n        progress = (touchesStart.y - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - touchesStart.x) / range.rangeWidth;\n      } else {\n        progress = (touchesStart.x - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        if (Math.abs(range.value[0] - newValue) < Math.abs(range.value[1] - newValue)) {\n          dualValueIndex = 0;\n          $touchedKnobEl = range.knobs[0];\n          newValue = [newValue, range.value[1]];\n        } else {\n          dualValueIndex = 1;\n          $touchedKnobEl = range.knobs[1];\n          newValue = [range.value[0], newValue];\n        }\n      } else {\n        $touchedKnobEl = range.knobs[0];\n        newValue = progress * (range.max - range.min) + range.min;\n      }\n\n      nextTick(function () {\n        if (isTouched) $touchedKnobEl.addClass('range-knob-active-state');\n      }, 70);\n      range.on('change', onTouchChange);\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      var pageX;\n      var pageY;\n\n      if (e.type === 'touchmove') {\n        for (var i = 0; i < e.targetTouches.length; i += 1) {\n          if (e.targetTouches[i].identifier === targetTouchIdentifier) {\n            pageX = e.targetTouches[i].pageX;\n            pageY = e.targetTouches[i].pageY;\n          }\n        }\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (typeof pageX === 'undefined' && typeof pageY === 'undefined') return;\n\n      if (typeof isScrolling === 'undefined' && !range.vertical) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      e.preventDefault();\n      var progress;\n\n      if (range.vertical) {\n        progress = (pageY - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - pageX) / range.rangeWidth;\n      } else {\n        progress = (pageX - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        var leftValue;\n        var rightValue;\n\n        if (dualValueIndex === 0) {\n          leftValue = newValue;\n          rightValue = range.value[1];\n\n          if (leftValue > rightValue) {\n            rightValue = leftValue;\n          }\n        } else {\n          leftValue = range.value[0];\n          rightValue = newValue;\n\n          if (rightValue < leftValue) {\n            leftValue = rightValue;\n          }\n        }\n\n        newValue = [leftValue, rightValue];\n      }\n\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend') {\n        var touchEnded;\n\n        for (var i = 0; i < e.changedTouches.length; i += 1) {\n          if (e.changedTouches[i].identifier === targetTouchIdentifier) touchEnded = true;\n        }\n\n        if (!touchEnded) return;\n      }\n\n      if (!isTouched) {\n        if (isScrolling) $touchedKnobEl.removeClass('range-knob-active-state');\n        isTouched = false;\n        return;\n      }\n\n      range.off('change', onTouchChange);\n      isTouched = false;\n      $touchedKnobEl.removeClass('range-knob-active-state');\n\n      if (valueChangedByTouch && range.$inputEl && !range.dual) {\n        range.$inputEl.trigger('change');\n      }\n\n      valueChangedByTouch = false;\n\n      if (typeof range.previousValue !== 'undefined') {\n        if (range.dual && (range.previousValue[0] !== range.value[0] || range.previousValue[1] !== range.value[1]) || !range.dual && range.previousValue !== range.value) {\n          range.$el.trigger('range:changed', range.value);\n          range.emit('local::changed rangeChanged', range, range.value);\n        }\n      }\n    }\n\n    function handleResize() {\n      range.calcSize();\n      range.layout();\n    }\n\n    var parentModals;\n    var parentPanel;\n    var parentPage;\n\n    range.attachEvents = function attachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      app.on('tabShow', handleResize);\n      app.on('resize', handleResize);\n      parentModals = range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast');\n      parentModals.on('modal:open', handleResize);\n      parentPanel = range.$el.parents('.panel');\n      parentPanel.on('panel:open panel:resize', handleResize);\n      parentPage = range.$el.parents('.page').eq(0);\n      parentPage.on('page:reinit', handleResize);\n    };\n\n    range.detachEvents = function detachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('tabShow', handleResize);\n      app.off('resize', handleResize);\n\n      if (parentModals) {\n        parentModals.off('modal:open', handleResize);\n      }\n\n      if (parentPanel) {\n        parentPanel.off('panel:open panel:resize', handleResize);\n      }\n\n      if (parentPage) {\n        parentPage.off('page:reinit', handleResize);\n      }\n\n      parentModals = null;\n      parentPanel = null;\n      parentPage = null;\n    }; // Install Modules\n\n\n    range.useModules(); // Init\n\n    range.init();\n    return range || _assertThisInitialized(_this);\n  }\n\n  var _proto = Range.prototype;\n\n  _proto.calcSize = function calcSize() {\n    var range = this;\n\n    if (range.vertical) {\n      var height = range.$el.outerHeight();\n      if (height === 0) return;\n      range.rangeHeight = height;\n      range.knobHeight = range.knobs[0].outerHeight();\n    } else {\n      var width = range.$el.outerWidth();\n      if (width === 0) return;\n      range.rangeWidth = width;\n      range.knobWidth = range.knobs[0].outerWidth();\n    }\n  };\n\n  _proto.layout = function layout() {\n    var range = this;\n    var app = range.app,\n        knobWidth = range.knobWidth,\n        knobHeight = range.knobHeight,\n        rangeWidth = range.rangeWidth,\n        rangeHeight = range.rangeHeight,\n        min = range.min,\n        max = range.max,\n        knobs = range.knobs,\n        $barActiveEl = range.$barActiveEl,\n        value = range.value,\n        label = range.label,\n        labels = range.labels,\n        vertical = range.vertical,\n        verticalReversed = range.verticalReversed,\n        limitKnobPosition = range.limitKnobPosition;\n    var knobSize = vertical ? knobHeight : knobWidth;\n    var rangeSize = vertical ? rangeHeight : rangeWidth; // eslint-disable-next-line\n\n    var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n\n    if (range.dual) {\n      var _$barActiveEl$css;\n\n      var progress = [(value[0] - min) / (max - min), (value[1] - min) / (max - min)];\n      $barActiveEl.css((_$barActiveEl$css = {}, _$barActiveEl$css[positionProperty] = progress[0] * 100 + \"%\", _$barActiveEl$css[vertical ? 'height' : 'width'] = (progress[1] - progress[0]) * 100 + \"%\", _$barActiveEl$css));\n      knobs.forEach(function ($knobEl, knobIndex) {\n        var startPos = rangeSize * progress[knobIndex];\n\n        if (limitKnobPosition) {\n          var realStartPos = rangeSize * progress[knobIndex] - knobSize / 2;\n          if (realStartPos < 0) startPos = knobSize / 2;\n          if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n        }\n\n        $knobEl.css(positionProperty, startPos + \"px\");\n        if (label) labels[knobIndex].text(range.formatLabel(value[knobIndex], labels[knobIndex][0]));\n      });\n    } else {\n      var _progress = (value - min) / (max - min);\n\n      $barActiveEl.css(vertical ? 'height' : 'width', _progress * 100 + \"%\");\n      var startPos = rangeSize * _progress;\n\n      if (limitKnobPosition) {\n        var realStartPos = rangeSize * _progress - knobSize / 2;\n        if (realStartPos < 0) startPos = knobSize / 2;\n        if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n      }\n\n      knobs[0].css(positionProperty, startPos + \"px\");\n      if (label) labels[0].text(range.formatLabel(value, labels[0][0]));\n    }\n\n    if (range.dual && value.indexOf(min) >= 0 || !range.dual && value === min) {\n      range.$el.addClass('range-slider-min');\n    } else {\n      range.$el.removeClass('range-slider-min');\n    }\n\n    if (range.dual && value.indexOf(max) >= 0 || !range.dual && value === max) {\n      range.$el.addClass('range-slider-max');\n    } else {\n      range.$el.removeClass('range-slider-max');\n    }\n  };\n\n  _proto.setValue = function setValue(newValue, byTouchMove) {\n    var range = this;\n    var step = range.step,\n        min = range.min,\n        max = range.max;\n    var valueChanged;\n    var oldValue;\n\n    if (range.dual) {\n      oldValue = [range.value[0], range.value[1]];\n      var newValues = newValue;\n      if (!Array.isArray(newValues)) newValues = [newValue, newValue];\n\n      if (newValue[0] > newValue[1]) {\n        newValues = [newValues[0], newValues[0]];\n      }\n\n      newValues = newValues.map(function (value) {\n        return Math.max(Math.min(Math.round(value / step) * step, max), min);\n      });\n\n      if (newValues[0] === range.value[0] && newValues[1] === range.value[1]) {\n        return range;\n      }\n\n      newValues.forEach(function (value, valueIndex) {\n        range.value[valueIndex] = value;\n      });\n      valueChanged = oldValue[0] !== newValues[0] || oldValue[1] !== newValues[1];\n      range.layout();\n    } else {\n      oldValue = range.value;\n      var value = Math.max(Math.min(Math.round(newValue / step) * step, max), min);\n      range.value = value;\n      range.layout();\n      valueChanged = oldValue !== value;\n    }\n\n    if (valueChanged) {\n      range.previousValue = oldValue;\n    } // Events\n\n\n    if (!valueChanged) return range;\n    range.$el.trigger('range:change', range.value);\n\n    if (range.$inputEl && !range.dual) {\n      range.$inputEl.val(range.value);\n\n      if (!byTouchMove) {\n        range.$inputEl.trigger('input change');\n      } else {\n        range.$inputEl.trigger('input');\n      }\n    }\n\n    if (!byTouchMove) {\n      range.$el.trigger('range:changed', range.value);\n      range.emit('local::changed rangeChanged', range, range.value);\n    }\n\n    range.emit('local::change rangeChange', range, range.value);\n    return range;\n  };\n\n  _proto.getValue = function getValue() {\n    return this.value;\n  };\n\n  _proto.formatLabel = function formatLabel(value, labelEl) {\n    var range = this;\n    if (range.params.formatLabel) return range.params.formatLabel.call(range, value, labelEl);\n    return value;\n  };\n\n  _proto.formatScaleLabel = function formatScaleLabel(value) {\n    var range = this;\n    if (range.params.formatScaleLabel) return range.params.formatScaleLabel.call(range, value);\n    return value;\n  };\n\n  _proto.renderScale = function renderScale() {\n    var range = this;\n    var app = range.app,\n        verticalReversed = range.verticalReversed,\n        vertical = range.vertical; // eslint-disable-next-line\n\n    var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n    var html = '';\n    Array.from({\n      length: range.scaleSteps + 1\n    }).forEach(function (scaleEl, index) {\n      var scaleStepValue = (range.max - range.min) / range.scaleSteps;\n      var scaleValue = range.min + scaleStepValue * index;\n      var progress = (scaleValue - range.min) / (range.max - range.min);\n      html += \"<div class=\\\"range-scale-step\\\" style=\\\"\" + positionProperty + \": \" + progress * 100 + \"%\\\">\" + range.formatScaleLabel(scaleValue) + \"</div>\";\n\n      if (range.scaleSubSteps && range.scaleSubSteps > 1 && index < range.scaleSteps) {\n        Array.from({\n          length: range.scaleSubSteps - 1\n        }).forEach(function (subStepEl, subIndex) {\n          var subStep = scaleStepValue / range.scaleSubSteps;\n          var scaleSubValue = scaleValue + subStep * (subIndex + 1);\n          var subProgress = (scaleSubValue - range.min) / (range.max - range.min);\n          html += \"<div class=\\\"range-scale-step range-scale-substep\\\" style=\\\"\" + positionProperty + \": \" + subProgress * 100 + \"%\\\"></div>\";\n        });\n      }\n    });\n    return html;\n  };\n\n  _proto.updateScale = function updateScale() {\n    var range = this;\n\n    if (!range.scale || range.scaleSteps < 1) {\n      if (range.$scaleEl) range.$scaleEl.remove();\n      delete range.$scaleEl;\n      return;\n    }\n\n    if (!range.$scaleEl) {\n      range.$scaleEl = $('<div class=\"range-scale\"></div>');\n      range.$el.append(range.$scaleEl);\n    }\n\n    range.$scaleEl.html(range.renderScale());\n  };\n\n  _proto.init = function init() {\n    var range = this;\n    range.calcSize();\n    range.layout();\n    range.attachEvents();\n    return range;\n  };\n\n  _proto.destroy = function destroy() {\n    var range = this;\n    range.$el.trigger('range:beforedestroy');\n    range.emit('local::beforeDestroy rangeBeforeDestroy', range);\n    delete range.$el[0].f7Range;\n    range.detachEvents();\n    deleteProps(range);\n    range = null;\n  };\n\n  return Range;\n}(Framework7Class);\n\nexport default Range;"]},"metadata":{},"sourceType":"module"}