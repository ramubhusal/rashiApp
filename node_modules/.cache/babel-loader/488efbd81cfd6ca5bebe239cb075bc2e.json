{"ast":null,"code":"/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport { bindMethods } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport $ from '../../shared/dom7';\nvar CardExpandable = {\n  open: function open(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var device = getDevice();\n    var document = getDocument();\n    var support = getSupport();\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if ($cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    var $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n\n    if ($pageEl.find('.card-opened').length) {\n      return;\n    }\n\n    var prevented;\n\n    function prevent() {\n      prevented = true;\n    }\n\n    $cardEl.trigger('card:beforeopen', {\n      prevent: prevent\n    });\n    app.emit('cardBeforeOpen', $cardEl[0], prevent);\n    if (prevented) return;\n    var cardParams = Object.assign({\n      animate: animate\n    }, app.params.card, $cardEl.dataset());\n    var $pageContentEl = $cardEl.parents('.page-content');\n    var $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (!$backdropEl && cardParams.backdrop) {\n      $backdropEl = $pageContentEl.find('.card-backdrop');\n\n      if (!$backdropEl.length) {\n        $backdropEl = $('<div class=\"card-backdrop\"></div>');\n        $pageContentEl.append($backdropEl);\n      }\n    }\n\n    var $navbarEl;\n    var $toolbarEl;\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n    }\n\n    var currTransform = $cardEl.css('transform');\n    var hasTransform;\n\n    if (currTransform && currTransform.match(/[2-9]/)) {\n      hasTransform = true;\n    }\n\n    var $cardContentEl = $cardEl.children('.card-content');\n    var $cardSizeEl = $(document.createElement('div')).addClass('card-expandable-size');\n    $cardEl.append($cardSizeEl);\n    var cardWidth = $cardEl[0].offsetWidth;\n    var cardHeight = $cardEl[0].offsetHeight;\n    var pageWidth = $pageEl[0].offsetWidth;\n    var pageHeight = $pageEl[0].offsetHeight;\n    var maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n    var maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n    var statusbarHeight;\n\n    if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n      statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n      if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n    }\n\n    if (statusbarHeight) {\n      maxHeight -= statusbarHeight;\n    }\n\n    var scaleX = maxWidth / cardWidth;\n    var scaleY = maxHeight / cardHeight;\n    var offset = $cardEl.offset();\n    var pageOffset = $pageEl.offset();\n\n    if (statusbarHeight) {\n      pageOffset.top += statusbarHeight / 2;\n    }\n\n    offset.left -= pageOffset.left;\n    var cardLeftOffset;\n    var cardTopOffset;\n\n    if (hasTransform) {\n      var transformValues = currTransform.replace(/matrix\\(|\\)/g, '').split(',').map(function (el) {\n        return el.trim();\n      });\n\n      if (transformValues && transformValues.length > 1) {\n        var scale = parseFloat(transformValues[0]);\n        cardLeftOffset = offset.left - cardWidth * (1 - scale) / 2;\n        cardTopOffset = offset.top - pageOffset.top - cardHeight * (1 - scale) / 2;\n        if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      } else {\n        cardLeftOffset = $cardEl[0].offsetLeft;\n        cardTopOffset = $cardEl[0].offsetTop - ($pageContentEl.length ? $pageContentEl[0].scrollTop : 0);\n      }\n    } else {\n      cardLeftOffset = offset.left;\n      cardTopOffset = offset.top - pageOffset.top;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n    }\n\n    cardLeftOffset -= (pageWidth - maxWidth) / 2;\n    cardTopOffset -= (pageHeight - maxHeight) / 2;\n    var cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n\n    if (app.rtl) {\n      var _ref = [cardRightOffset, cardLeftOffset];\n      cardLeftOffset = _ref[0];\n      cardRightOffset = _ref[1];\n    }\n\n    var cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n    var translateX = (cardRightOffset - cardLeftOffset) / 2;\n    var translateY = (cardBottomOffset - cardTopOffset) / 2;\n\n    if (cardParams.hideNavbarOnOpen && $navbarEl && $navbarEl.length) {\n      if ($navbarEl.closest('.navbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepNavbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepNavbarOnClose;\n        app.navbar.hide($navbarEl, cardParams.animate, cardParams.hideStatusbarOnOpen, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen && $toolbarEl && $toolbarEl.length) {\n      if ($toolbarEl.closest('.toolbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepToolbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepToolbarOnClose;\n        app.toolbar.hide($toolbarEl, cardParams.animate);\n      }\n    }\n\n    if ($backdropEl) {\n      $backdropEl.removeClass('card-backdrop-out').addClass('card-backdrop-in');\n    }\n\n    $cardEl.removeClass('card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-opening');\n    }\n\n    $cardEl.trigger('card:open');\n    app.emit('cardOpen', $cardEl[0]);\n\n    function transitionEnd() {\n      $pageEl.addClass('page-with-card-opened');\n\n      if (device.ios && $pageContentEl.length) {\n        $pageContentEl.css('height', $pageContentEl[0].offsetHeight + 1 + \"px\");\n        setTimeout(function () {\n          $pageContentEl.css('height', '');\n        });\n      }\n\n      $cardEl.addClass('card-opened');\n      $cardEl.removeClass('card-opening');\n      $cardEl.trigger('card:opened');\n      app.emit('cardOpened', $cardEl[0], $pageEl[0]);\n    }\n\n    $cardContentEl.css({\n      width: maxWidth + \"px\",\n      height: maxHeight + \"px\"\n    }).transform(\"translate3d(\" + (app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX) + \"px, 0px, 0) scale(\" + 1 / scaleX + \", \" + 1 / scaleY + \")\");\n    $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n\n    if (cardParams.animate) {\n      $cardEl.transitionEnd(function () {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    function onResize() {\n      $cardEl.removeClass('card-transitioning');\n      cardWidth = $cardEl[0].offsetWidth;\n      cardHeight = $cardEl[0].offsetHeight;\n      pageWidth = $pageEl[0].offsetWidth;\n      pageHeight = $pageEl[0].offsetHeight;\n      maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n      maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n      statusbarHeight = 0;\n\n      if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n        statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n        if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n      }\n\n      if (statusbarHeight) {\n        maxHeight -= statusbarHeight;\n      }\n\n      scaleX = maxWidth / cardWidth;\n      scaleY = maxHeight / cardHeight;\n      $cardEl.transform('translate3d(0px, 0px, 0) scale(1)');\n      offset = $cardEl.offset();\n      pageOffset = $pageEl.offset();\n\n      if (statusbarHeight) {\n        pageOffset.top += statusbarHeight / 2;\n      }\n\n      offset.left -= pageOffset.left;\n      offset.top -= pageOffset.top;\n      cardLeftOffset = offset.left - (pageWidth - maxWidth) / 2;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      cardTopOffset = offset.top - (pageHeight - maxHeight) / 2;\n      cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n      cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n\n      if (app.rtl) {\n        var _ref2 = [cardRightOffset, cardLeftOffset];\n        cardLeftOffset = _ref2[0];\n        cardRightOffset = _ref2[1];\n      }\n\n      translateX = (cardRightOffset - cardLeftOffset) / 2;\n      translateY = (cardBottomOffset - cardTopOffset) / 2;\n      $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n      $cardContentEl.css({\n        width: maxWidth + \"px\",\n        height: maxHeight + \"px\"\n      }).transform(\"translate3d(\" + (app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX) + \"px, 0px, 0) scale(\" + 1 / scaleX + \", \" + 1 / scaleY + \")\");\n    }\n\n    var cardScrollTop;\n    var isTouched;\n    var isMoved;\n    var touchStartX;\n    var touchStartY;\n    var touchEndX;\n    var touchEndY;\n    var isScrolling;\n    var progress;\n    var isV;\n    var isH;\n    var $cardScrollableEl;\n\n    function onTouchStart(e) {\n      if (!$(e.target).closest($cardEl).length) return;\n      if (!$cardEl.hasClass('card-opened')) return;\n      $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n\n      if ($cardScrollableEl[0] && $cardScrollableEl[0] !== $cardContentEl[0] && !$cardScrollableEl[0].contains(e.target)) {\n        cardScrollTop = 0;\n      } else {\n        cardScrollTop = $cardScrollableEl.scrollTop();\n      }\n\n      isTouched = true;\n      touchStartX = e.targetTouches[0].pageX;\n      touchStartY = e.targetTouches[0].pageY;\n      isScrolling = undefined;\n      isV = false;\n      isH = false;\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n      touchEndX = e.targetTouches[0].pageX;\n      touchEndY = e.targetTouches[0].pageY;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(touchEndY - touchStartY) > Math.abs(touchEndX - touchStartX));\n      }\n\n      if (!isH && !isV) {\n        if (!isScrolling && e.targetTouches[0].clientX <= 50) {\n          isH = true;\n        } else {\n          isV = true;\n        }\n      }\n\n      if (!(isH || isV) || isV && cardScrollTop !== 0) {\n        isTouched = true;\n        isMoved = true;\n        return;\n      }\n\n      if (!isMoved) {\n        $cardEl.removeClass('card-transitioning');\n      }\n\n      isMoved = true;\n      progress = isV ? Math.max((touchEndY - touchStartY) / 150, 0) : Math.max((touchEndX - touchStartX) / (cardWidth / 2), 0);\n\n      if (progress > 0 && isV || isH) {\n        if (isV && device.ios && $cardScrollableEl[0] === $cardContentEl[0]) {\n          $cardScrollableEl.css('-webkit-overflow-scrolling', 'auto');\n          $cardScrollableEl.scrollTop(0);\n        }\n\n        e.preventDefault();\n      }\n\n      if (progress > 1) progress = Math.pow(progress, 0.3);\n\n      if (progress > (isV ? 1.3 : 1.1)) {\n        isTouched = false;\n        isMoved = false;\n        app.card.close($cardEl);\n      } else {\n        $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX * (1 - progress * 0.2) + \", \" + scaleY * (1 - progress * 0.2) + \")\");\n      }\n    }\n\n    function onTouchEnd() {\n      if (!isTouched || !isMoved) return;\n      isTouched = false;\n      isMoved = false;\n\n      if (device.ios) {\n        $cardScrollableEl.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (progress >= 0.8) {\n        app.card.close($cardEl);\n      } else {\n        $cardEl.addClass('card-transitioning').transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n      }\n    }\n\n    $cardEl[0].detachEventHandlers = function detachEventHandlers() {\n      app.off('resize', onResize);\n\n      if (support.touch && cardParams.swipeToClose) {\n        app.off('touchstart:passive', onTouchStart);\n        app.off('touchmove:active', onTouchMove);\n        app.off('touchend:passive', onTouchEnd);\n      }\n    };\n\n    app.on('resize', onResize);\n\n    if (support.touch && cardParams.swipeToClose) {\n      app.on('touchstart:passive', onTouchStart);\n      app.on('touchmove:active', onTouchMove);\n      app.on('touchend:passive', onTouchEnd);\n    }\n  },\n  close: function close(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable.card-opened';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var device = getDevice();\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if (!$cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    var $cardContentEl = $cardEl.children('.card-content');\n    var $pageContentEl = $cardEl.parents('.page-content');\n    var $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n    var cardParams = Object.assign({\n      animate: animate\n    }, app.params.card, $cardEl.dataset());\n    var $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n    var $navbarEl;\n    var $toolbarEl;\n    var $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (cardParams.backdrop) {\n      $backdropEl = $cardEl.parents('.page-content').find('.card-backdrop');\n    }\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n\n      if ($navbarEl && $navbarEl.length && !$cardEl[0].f7KeepNavbarOnClose) {\n        app.navbar.show($navbarEl, cardParams.animate, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n\n      if ($toolbarEl && $toolbarEl.length && !$cardEl[0].f7KeepToolbarOnClose) {\n        app.toolbar.show($toolbarEl, cardParams.animate);\n      }\n    }\n\n    $pageEl.removeClass('page-with-card-opened');\n\n    if (device.ios && $pageContentEl.length) {\n      $pageContentEl.css('height', $pageContentEl[0].offsetHeight + 1 + \"px\");\n      setTimeout(function () {\n        $pageContentEl.css('height', '');\n      });\n    }\n\n    if ($backdropEl && $backdropEl.length) {\n      $backdropEl.removeClass('card-backdrop-in').addClass('card-backdrop-out');\n    }\n\n    $cardEl.removeClass('card-opened card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-closing');\n    } else {\n      $cardEl.addClass('card-no-transition');\n    }\n\n    $cardEl.transform('');\n    $cardEl.trigger('card:close');\n    app.emit('cardClose', $cardEl[0], $pageEl[0]);\n    var animateWidth = $cardEl.hasClass('card-expandable-animate-width');\n\n    function transitionEnd() {\n      if (!animateWidth) {\n        $cardContentEl.css({\n          width: '',\n          height: ''\n        });\n      }\n\n      if ($backdropEl && $backdropEl.length) {\n        $backdropEl.removeClass('card-backdrop-in card-backdrop-out');\n      }\n\n      $cardEl.removeClass('card-closing card-no-transition');\n      $cardEl.trigger('card:closed');\n      $cardEl.find('.card-expandable-size').remove();\n      app.emit('cardClosed', $cardEl[0], $pageEl[0]);\n    }\n\n    if (animateWidth) {\n      $cardContentEl.css({\n        width: '',\n        height: ''\n      });\n    }\n\n    $cardContentEl.transform('').scrollTop(0, animate ? 300 : 0);\n\n    if ($cardScrollableEl.length && $cardScrollableEl[0] !== $cardContentEl[0]) {\n      $cardScrollableEl.scrollTop(0, animate ? 300 : 0);\n    }\n\n    if (animate) {\n      $cardContentEl.transitionEnd(function () {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    if ($cardEl[0].detachEventHandlers) {\n      $cardEl[0].detachEventHandlers();\n      delete $cardEl[0].detachEventHandlers;\n    }\n  },\n  toggle: function toggle(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    var app = this;\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl.length) return;\n\n    if ($cardEl.hasClass('card-opened')) {\n      app.card.close($cardEl, animate);\n    } else {\n      app.card.open($cardEl, animate);\n    }\n  }\n};\nexport default {\n  name: 'card',\n  params: {\n    card: {\n      hideNavbarOnOpen: true,\n      hideStatusbarOnOpen: true,\n      hideToolbarOnOpen: true,\n      scrollableEl: '.card-content',\n      swipeToClose: true,\n      closeByBackdropClick: true,\n      backdrop: true\n    }\n  },\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      card: CardExpandable\n    });\n  },\n  on: {\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n\n      if (app.params.card.hideNavbarOnOpen && page.navbarEl && page.$el.find('.card-opened.card-expandable').length) {\n        app.navbar.hide(page.navbarEl, true, app.params.card.hideStatusbarOnOpen, true);\n      }\n\n      if (app.params.card.hideToolbarOnOpen && page.$el.find('.card-opened.card-expandable').length) {\n        var $toolbarEl = page.$el.children('.toolbar');\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.view').children('.toolbar');\n        }\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.views').children('.toolbar');\n        }\n\n        if ($toolbarEl && $toolbarEl.length) {\n          app.toolbar.hide($toolbarEl);\n        }\n      }\n    }\n  },\n  clicks: {\n    '.card-close': function closeCard($clickedEl, data) {\n      var app = this;\n      app.card.close(data.card, data.animate);\n    },\n    '.card-open': function closeCard($clickedEl, data) {\n      var app = this;\n      app.card.open(data.card, data.animate);\n    },\n    '.card-expandable': function toggleExpandableCard($clickedEl, data, e) {\n      var app = this;\n      if ($clickedEl.hasClass('card-opened') || $clickedEl.hasClass('card-opening') || $clickedEl.hasClass('card-closing')) return;\n      if ($(e.target).closest('.card-prevent-open, .card-close').length) return;\n      app.card.open($clickedEl);\n    },\n    '.card-backdrop-in': function onBackdropClick() {\n      var app = this;\n      var needToClose = false;\n      if (app.params.card.closeByBackdropClick) needToClose = true;\n      var $openedCardEl = $('.card-opened');\n      if (!$openedCardEl.length) return;\n\n      if ($openedCardEl.attr('data-close-by-backdrop-click') === 'true') {\n        needToClose = true;\n      } else if ($openedCardEl.attr('data-close-by-backdrop-click') === 'false') {\n        needToClose = false;\n      }\n\n      if (needToClose) app.card.close($openedCardEl);\n    }\n  }\n};","map":{"version":3,"sources":["E:/Programming/React/rashi-app/node_modules/framework7/esm/components/card/card.js"],"names":["getDocument","bindMethods","getSupport","getDevice","$","CardExpandable","open","cardEl","animate","app","device","document","support","$cardEl","eq","length","hasClass","$pageEl","parents","find","prevented","prevent","trigger","emit","cardParams","Object","assign","params","card","dataset","$pageContentEl","$backdropEl","attr","backdrop","append","$navbarEl","$toolbarEl","hideNavbarOnOpen","children","f7Page","hideToolbarOnOpen","currTransform","css","hasTransform","match","$cardContentEl","$cardSizeEl","createElement","addClass","cardWidth","offsetWidth","cardHeight","offsetHeight","pageWidth","pageHeight","maxWidth","maxHeight","statusbarHeight","hideStatusbarOnOpen","parseInt","Number","isNaN","scaleX","scaleY","offset","pageOffset","top","left","cardLeftOffset","cardTopOffset","transformValues","replace","split","map","el","trim","scale","parseFloat","rtl","scrollLeft","offsetLeft","offsetTop","scrollTop","cardRightOffset","_ref","cardBottomOffset","translateX","translateY","closest","f7KeepNavbarOnClose","navbar","hide","f7KeepToolbarOnClose","toolbar","removeClass","transitionEnd","ios","setTimeout","width","height","transform","onResize","_ref2","cardScrollTop","isTouched","isMoved","touchStartX","touchStartY","touchEndX","touchEndY","isScrolling","progress","isV","isH","$cardScrollableEl","onTouchStart","e","target","scrollableEl","contains","targetTouches","pageX","pageY","undefined","onTouchMove","Math","abs","clientX","max","preventDefault","pow","close","onTouchEnd","detachEventHandlers","off","touch","swipeToClose","on","show","animateWidth","remove","toggle","name","closeByBackdropClick","create","pageBeforeIn","page","navbarEl","$el","clicks","closeCard","$clickedEl","data","toggleExpandableCard","onBackdropClick","needToClose","$openedCardEl"],"mappings":"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","sourcesContent":["/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport { bindMethods } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nimport { getDevice } from '../../shared/get-device';\nimport $ from '../../shared/dom7';\nvar CardExpandable = {\n  open: function open(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var device = getDevice();\n    var document = getDocument();\n    var support = getSupport();\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if ($cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    var $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n\n    if ($pageEl.find('.card-opened').length) {\n      return;\n    }\n\n    var prevented;\n\n    function prevent() {\n      prevented = true;\n    }\n\n    $cardEl.trigger('card:beforeopen', {\n      prevent: prevent\n    });\n    app.emit('cardBeforeOpen', $cardEl[0], prevent);\n    if (prevented) return;\n    var cardParams = Object.assign({\n      animate: animate\n    }, app.params.card, $cardEl.dataset());\n    var $pageContentEl = $cardEl.parents('.page-content');\n    var $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (!$backdropEl && cardParams.backdrop) {\n      $backdropEl = $pageContentEl.find('.card-backdrop');\n\n      if (!$backdropEl.length) {\n        $backdropEl = $('<div class=\"card-backdrop\"></div>');\n        $pageContentEl.append($backdropEl);\n      }\n    }\n\n    var $navbarEl;\n    var $toolbarEl;\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n    }\n\n    var currTransform = $cardEl.css('transform');\n    var hasTransform;\n\n    if (currTransform && currTransform.match(/[2-9]/)) {\n      hasTransform = true;\n    }\n\n    var $cardContentEl = $cardEl.children('.card-content');\n    var $cardSizeEl = $(document.createElement('div')).addClass('card-expandable-size');\n    $cardEl.append($cardSizeEl);\n    var cardWidth = $cardEl[0].offsetWidth;\n    var cardHeight = $cardEl[0].offsetHeight;\n    var pageWidth = $pageEl[0].offsetWidth;\n    var pageHeight = $pageEl[0].offsetHeight;\n    var maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n    var maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n    var statusbarHeight;\n\n    if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n      statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n      if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n    }\n\n    if (statusbarHeight) {\n      maxHeight -= statusbarHeight;\n    }\n\n    var scaleX = maxWidth / cardWidth;\n    var scaleY = maxHeight / cardHeight;\n    var offset = $cardEl.offset();\n    var pageOffset = $pageEl.offset();\n\n    if (statusbarHeight) {\n      pageOffset.top += statusbarHeight / 2;\n    }\n\n    offset.left -= pageOffset.left;\n    var cardLeftOffset;\n    var cardTopOffset;\n\n    if (hasTransform) {\n      var transformValues = currTransform.replace(/matrix\\(|\\)/g, '').split(',').map(function (el) {\n        return el.trim();\n      });\n\n      if (transformValues && transformValues.length > 1) {\n        var scale = parseFloat(transformValues[0]);\n        cardLeftOffset = offset.left - cardWidth * (1 - scale) / 2;\n        cardTopOffset = offset.top - pageOffset.top - cardHeight * (1 - scale) / 2;\n        if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      } else {\n        cardLeftOffset = $cardEl[0].offsetLeft;\n        cardTopOffset = $cardEl[0].offsetTop - ($pageContentEl.length ? $pageContentEl[0].scrollTop : 0);\n      }\n    } else {\n      cardLeftOffset = offset.left;\n      cardTopOffset = offset.top - pageOffset.top;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n    }\n\n    cardLeftOffset -= (pageWidth - maxWidth) / 2;\n    cardTopOffset -= (pageHeight - maxHeight) / 2;\n    var cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n\n    if (app.rtl) {\n      var _ref = [cardRightOffset, cardLeftOffset];\n      cardLeftOffset = _ref[0];\n      cardRightOffset = _ref[1];\n    }\n\n    var cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n    var translateX = (cardRightOffset - cardLeftOffset) / 2;\n    var translateY = (cardBottomOffset - cardTopOffset) / 2;\n\n    if (cardParams.hideNavbarOnOpen && $navbarEl && $navbarEl.length) {\n      if ($navbarEl.closest('.navbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepNavbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepNavbarOnClose;\n        app.navbar.hide($navbarEl, cardParams.animate, cardParams.hideStatusbarOnOpen, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen && $toolbarEl && $toolbarEl.length) {\n      if ($toolbarEl.closest('.toolbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepToolbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepToolbarOnClose;\n        app.toolbar.hide($toolbarEl, cardParams.animate);\n      }\n    }\n\n    if ($backdropEl) {\n      $backdropEl.removeClass('card-backdrop-out').addClass('card-backdrop-in');\n    }\n\n    $cardEl.removeClass('card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-opening');\n    }\n\n    $cardEl.trigger('card:open');\n    app.emit('cardOpen', $cardEl[0]);\n\n    function transitionEnd() {\n      $pageEl.addClass('page-with-card-opened');\n\n      if (device.ios && $pageContentEl.length) {\n        $pageContentEl.css('height', $pageContentEl[0].offsetHeight + 1 + \"px\");\n        setTimeout(function () {\n          $pageContentEl.css('height', '');\n        });\n      }\n\n      $cardEl.addClass('card-opened');\n      $cardEl.removeClass('card-opening');\n      $cardEl.trigger('card:opened');\n      app.emit('cardOpened', $cardEl[0], $pageEl[0]);\n    }\n\n    $cardContentEl.css({\n      width: maxWidth + \"px\",\n      height: maxHeight + \"px\"\n    }).transform(\"translate3d(\" + (app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX) + \"px, 0px, 0) scale(\" + 1 / scaleX + \", \" + 1 / scaleY + \")\");\n    $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n\n    if (cardParams.animate) {\n      $cardEl.transitionEnd(function () {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    function onResize() {\n      $cardEl.removeClass('card-transitioning');\n      cardWidth = $cardEl[0].offsetWidth;\n      cardHeight = $cardEl[0].offsetHeight;\n      pageWidth = $pageEl[0].offsetWidth;\n      pageHeight = $pageEl[0].offsetHeight;\n      maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n      maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n      statusbarHeight = 0;\n\n      if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n        statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n        if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n      }\n\n      if (statusbarHeight) {\n        maxHeight -= statusbarHeight;\n      }\n\n      scaleX = maxWidth / cardWidth;\n      scaleY = maxHeight / cardHeight;\n      $cardEl.transform('translate3d(0px, 0px, 0) scale(1)');\n      offset = $cardEl.offset();\n      pageOffset = $pageEl.offset();\n\n      if (statusbarHeight) {\n        pageOffset.top += statusbarHeight / 2;\n      }\n\n      offset.left -= pageOffset.left;\n      offset.top -= pageOffset.top;\n      cardLeftOffset = offset.left - (pageWidth - maxWidth) / 2;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      cardTopOffset = offset.top - (pageHeight - maxHeight) / 2;\n      cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n      cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n\n      if (app.rtl) {\n        var _ref2 = [cardRightOffset, cardLeftOffset];\n        cardLeftOffset = _ref2[0];\n        cardRightOffset = _ref2[1];\n      }\n\n      translateX = (cardRightOffset - cardLeftOffset) / 2;\n      translateY = (cardBottomOffset - cardTopOffset) / 2;\n      $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n      $cardContentEl.css({\n        width: maxWidth + \"px\",\n        height: maxHeight + \"px\"\n      }).transform(\"translate3d(\" + (app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX) + \"px, 0px, 0) scale(\" + 1 / scaleX + \", \" + 1 / scaleY + \")\");\n    }\n\n    var cardScrollTop;\n    var isTouched;\n    var isMoved;\n    var touchStartX;\n    var touchStartY;\n    var touchEndX;\n    var touchEndY;\n    var isScrolling;\n    var progress;\n    var isV;\n    var isH;\n    var $cardScrollableEl;\n\n    function onTouchStart(e) {\n      if (!$(e.target).closest($cardEl).length) return;\n      if (!$cardEl.hasClass('card-opened')) return;\n      $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n\n      if ($cardScrollableEl[0] && $cardScrollableEl[0] !== $cardContentEl[0] && !$cardScrollableEl[0].contains(e.target)) {\n        cardScrollTop = 0;\n      } else {\n        cardScrollTop = $cardScrollableEl.scrollTop();\n      }\n\n      isTouched = true;\n      touchStartX = e.targetTouches[0].pageX;\n      touchStartY = e.targetTouches[0].pageY;\n      isScrolling = undefined;\n      isV = false;\n      isH = false;\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n      touchEndX = e.targetTouches[0].pageX;\n      touchEndY = e.targetTouches[0].pageY;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(touchEndY - touchStartY) > Math.abs(touchEndX - touchStartX));\n      }\n\n      if (!isH && !isV) {\n        if (!isScrolling && e.targetTouches[0].clientX <= 50) {\n          isH = true;\n        } else {\n          isV = true;\n        }\n      }\n\n      if (!(isH || isV) || isV && cardScrollTop !== 0) {\n        isTouched = true;\n        isMoved = true;\n        return;\n      }\n\n      if (!isMoved) {\n        $cardEl.removeClass('card-transitioning');\n      }\n\n      isMoved = true;\n      progress = isV ? Math.max((touchEndY - touchStartY) / 150, 0) : Math.max((touchEndX - touchStartX) / (cardWidth / 2), 0);\n\n      if (progress > 0 && isV || isH) {\n        if (isV && device.ios && $cardScrollableEl[0] === $cardContentEl[0]) {\n          $cardScrollableEl.css('-webkit-overflow-scrolling', 'auto');\n          $cardScrollableEl.scrollTop(0);\n        }\n\n        e.preventDefault();\n      }\n\n      if (progress > 1) progress = Math.pow(progress, 0.3);\n\n      if (progress > (isV ? 1.3 : 1.1)) {\n        isTouched = false;\n        isMoved = false;\n        app.card.close($cardEl);\n      } else {\n        $cardEl.transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX * (1 - progress * 0.2) + \", \" + scaleY * (1 - progress * 0.2) + \")\");\n      }\n    }\n\n    function onTouchEnd() {\n      if (!isTouched || !isMoved) return;\n      isTouched = false;\n      isMoved = false;\n\n      if (device.ios) {\n        $cardScrollableEl.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (progress >= 0.8) {\n        app.card.close($cardEl);\n      } else {\n        $cardEl.addClass('card-transitioning').transform(\"translate3d(\" + (app.rtl ? -translateX : translateX) + \"px, \" + translateY + \"px, 0) scale(\" + scaleX + \", \" + scaleY + \")\");\n      }\n    }\n\n    $cardEl[0].detachEventHandlers = function detachEventHandlers() {\n      app.off('resize', onResize);\n\n      if (support.touch && cardParams.swipeToClose) {\n        app.off('touchstart:passive', onTouchStart);\n        app.off('touchmove:active', onTouchMove);\n        app.off('touchend:passive', onTouchEnd);\n      }\n    };\n\n    app.on('resize', onResize);\n\n    if (support.touch && cardParams.swipeToClose) {\n      app.on('touchstart:passive', onTouchStart);\n      app.on('touchmove:active', onTouchMove);\n      app.on('touchend:passive', onTouchEnd);\n    }\n  },\n  close: function close(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable.card-opened';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var app = this;\n    var device = getDevice();\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if (!$cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    var $cardContentEl = $cardEl.children('.card-content');\n    var $pageContentEl = $cardEl.parents('.page-content');\n    var $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n    var cardParams = Object.assign({\n      animate: animate\n    }, app.params.card, $cardEl.dataset());\n    var $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n    var $navbarEl;\n    var $toolbarEl;\n    var $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (cardParams.backdrop) {\n      $backdropEl = $cardEl.parents('.page-content').find('.card-backdrop');\n    }\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n\n      if ($navbarEl && $navbarEl.length && !$cardEl[0].f7KeepNavbarOnClose) {\n        app.navbar.show($navbarEl, cardParams.animate, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n\n      if ($toolbarEl && $toolbarEl.length && !$cardEl[0].f7KeepToolbarOnClose) {\n        app.toolbar.show($toolbarEl, cardParams.animate);\n      }\n    }\n\n    $pageEl.removeClass('page-with-card-opened');\n\n    if (device.ios && $pageContentEl.length) {\n      $pageContentEl.css('height', $pageContentEl[0].offsetHeight + 1 + \"px\");\n      setTimeout(function () {\n        $pageContentEl.css('height', '');\n      });\n    }\n\n    if ($backdropEl && $backdropEl.length) {\n      $backdropEl.removeClass('card-backdrop-in').addClass('card-backdrop-out');\n    }\n\n    $cardEl.removeClass('card-opened card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-closing');\n    } else {\n      $cardEl.addClass('card-no-transition');\n    }\n\n    $cardEl.transform('');\n    $cardEl.trigger('card:close');\n    app.emit('cardClose', $cardEl[0], $pageEl[0]);\n    var animateWidth = $cardEl.hasClass('card-expandable-animate-width');\n\n    function transitionEnd() {\n      if (!animateWidth) {\n        $cardContentEl.css({\n          width: '',\n          height: ''\n        });\n      }\n\n      if ($backdropEl && $backdropEl.length) {\n        $backdropEl.removeClass('card-backdrop-in card-backdrop-out');\n      }\n\n      $cardEl.removeClass('card-closing card-no-transition');\n      $cardEl.trigger('card:closed');\n      $cardEl.find('.card-expandable-size').remove();\n      app.emit('cardClosed', $cardEl[0], $pageEl[0]);\n    }\n\n    if (animateWidth) {\n      $cardContentEl.css({\n        width: '',\n        height: ''\n      });\n    }\n\n    $cardContentEl.transform('').scrollTop(0, animate ? 300 : 0);\n\n    if ($cardScrollableEl.length && $cardScrollableEl[0] !== $cardContentEl[0]) {\n      $cardScrollableEl.scrollTop(0, animate ? 300 : 0);\n    }\n\n    if (animate) {\n      $cardContentEl.transitionEnd(function () {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    if ($cardEl[0].detachEventHandlers) {\n      $cardEl[0].detachEventHandlers();\n      delete $cardEl[0].detachEventHandlers;\n    }\n  },\n  toggle: function toggle(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    var app = this;\n    var $cardEl = $(cardEl).eq(0);\n    if (!$cardEl.length) return;\n\n    if ($cardEl.hasClass('card-opened')) {\n      app.card.close($cardEl, animate);\n    } else {\n      app.card.open($cardEl, animate);\n    }\n  }\n};\nexport default {\n  name: 'card',\n  params: {\n    card: {\n      hideNavbarOnOpen: true,\n      hideStatusbarOnOpen: true,\n      hideToolbarOnOpen: true,\n      scrollableEl: '.card-content',\n      swipeToClose: true,\n      closeByBackdropClick: true,\n      backdrop: true\n    }\n  },\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      card: CardExpandable\n    });\n  },\n  on: {\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n\n      if (app.params.card.hideNavbarOnOpen && page.navbarEl && page.$el.find('.card-opened.card-expandable').length) {\n        app.navbar.hide(page.navbarEl, true, app.params.card.hideStatusbarOnOpen, true);\n      }\n\n      if (app.params.card.hideToolbarOnOpen && page.$el.find('.card-opened.card-expandable').length) {\n        var $toolbarEl = page.$el.children('.toolbar');\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.view').children('.toolbar');\n        }\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.views').children('.toolbar');\n        }\n\n        if ($toolbarEl && $toolbarEl.length) {\n          app.toolbar.hide($toolbarEl);\n        }\n      }\n    }\n  },\n  clicks: {\n    '.card-close': function closeCard($clickedEl, data) {\n      var app = this;\n      app.card.close(data.card, data.animate);\n    },\n    '.card-open': function closeCard($clickedEl, data) {\n      var app = this;\n      app.card.open(data.card, data.animate);\n    },\n    '.card-expandable': function toggleExpandableCard($clickedEl, data, e) {\n      var app = this;\n      if ($clickedEl.hasClass('card-opened') || $clickedEl.hasClass('card-opening') || $clickedEl.hasClass('card-closing')) return;\n      if ($(e.target).closest('.card-prevent-open, .card-close').length) return;\n      app.card.open($clickedEl);\n    },\n    '.card-backdrop-in': function onBackdropClick() {\n      var app = this;\n      var needToClose = false;\n      if (app.params.card.closeByBackdropClick) needToClose = true;\n      var $openedCardEl = $('.card-opened');\n      if (!$openedCardEl.length) return;\n\n      if ($openedCardEl.attr('data-close-by-backdrop-click') === 'true') {\n        needToClose = true;\n      } else if ($openedCardEl.attr('data-close-by-backdrop-click') === 'false') {\n        needToClose = false;\n      }\n\n      if (needToClose) app.card.close($openedCardEl);\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}