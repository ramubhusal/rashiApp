{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport FrameworkClass from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\nimport removeDiacritics from './remove-diacritics';\n\nvar Searchbar = /*#__PURE__*/function (_FrameworkClass) {\n  _inheritsLoose(Searchbar, _FrameworkClass);\n\n  function Searchbar(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _FrameworkClass.call(this, params, [app]) || this;\n\n    var sb = _assertThisInitialized(_this);\n\n    var defaults = {\n      el: undefined,\n      inputEl: undefined,\n      inputEvents: 'change input compositionend',\n      disableButton: true,\n      disableButtonEl: undefined,\n      backdropEl: undefined,\n      searchContainer: undefined,\n      // container to search, HTMLElement or CSS selector\n      searchItem: 'li',\n      // single item selector, CSS selector\n      searchIn: undefined,\n      // where to search in item, CSS selector\n      searchGroup: '.list-group',\n      searchGroupTitle: '.item-divider, .list-group-title',\n      ignore: '.searchbar-ignore',\n      foundEl: '.searchbar-found',\n      notFoundEl: '.searchbar-not-found',\n      hideOnEnableEl: '.searchbar-hide-on-enable',\n      hideOnSearchEl: '.searchbar-hide-on-search',\n      backdrop: undefined,\n      removeDiacritics: true,\n      customSearch: false,\n      hideDividers: true,\n      hideGroups: true,\n      disableOnBackdropClick: true,\n      expandable: false,\n      inline: false\n    }; // Extend defaults with modules params\n\n    sb.useModulesParams(defaults);\n    sb.params = extend(defaults, params);\n    var $el = $(sb.params.el);\n    if ($el.length === 0) return sb || _assertThisInitialized(_this);\n    if ($el[0].f7Searchbar) return $el[0].f7Searchbar || _assertThisInitialized(_this);\n    $el[0].f7Searchbar = sb;\n    var $pageEl;\n    var $navbarEl = $el.parents('.navbar');\n\n    if ($el.parents('.page').length > 0) {\n      $pageEl = $el.parents('.page');\n    } else if ($navbarEl.length > 0) {\n      $pageEl = $(app.navbar.getPageByEl($navbarEl[0]));\n\n      if (!$pageEl.length) {\n        var $currentPageEl = $el.parents('.view').find('.page-current');\n\n        if ($currentPageEl[0] && $currentPageEl[0].f7Page && $currentPageEl[0].f7Page.navbarEl === $navbarEl[0]) {\n          $pageEl = $currentPageEl;\n        }\n      }\n    }\n\n    var $foundEl;\n\n    if (params.foundEl) {\n      $foundEl = $(params.foundEl);\n    } else if (typeof sb.params.foundEl === 'string' && $pageEl) {\n      $foundEl = $pageEl.find(sb.params.foundEl);\n    }\n\n    var $notFoundEl;\n\n    if (params.notFoundEl) {\n      $notFoundEl = $(params.notFoundEl);\n    } else if (typeof sb.params.notFoundEl === 'string' && $pageEl) {\n      $notFoundEl = $pageEl.find(sb.params.notFoundEl);\n    }\n\n    var $hideOnEnableEl;\n\n    if (params.hideOnEnableEl) {\n      $hideOnEnableEl = $(params.hideOnEnableEl);\n    } else if (typeof sb.params.hideOnEnableEl === 'string' && $pageEl) {\n      $hideOnEnableEl = $pageEl.find(sb.params.hideOnEnableEl);\n    }\n\n    var $hideOnSearchEl;\n\n    if (params.hideOnSearchEl) {\n      $hideOnSearchEl = $(params.hideOnSearchEl);\n    } else if (typeof sb.params.hideOnSearchEl === 'string' && $pageEl) {\n      $hideOnSearchEl = $pageEl.find(sb.params.hideOnSearchEl);\n    }\n\n    var expandable = sb.params.expandable || $el.hasClass('searchbar-expandable');\n    var inline = sb.params.inline || $el.hasClass('searchbar-inline');\n\n    if (typeof sb.params.backdrop === 'undefined') {\n      if (!inline) sb.params.backdrop = app.theme !== 'aurora';else sb.params.backdrop = false;\n    }\n\n    var $backdropEl;\n\n    if (sb.params.backdrop) {\n      if (sb.params.backdropEl) {\n        $backdropEl = $(sb.params.backdropEl);\n      } else if ($pageEl && $pageEl.length > 0) {\n        $backdropEl = $pageEl.find('.searchbar-backdrop');\n      } else {\n        $backdropEl = $el.siblings('.searchbar-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"searchbar-backdrop\"></div>');\n\n        if ($pageEl && $pageEl.length) {\n          if ($el.parents($pageEl).length > 0 && $navbarEl && $el.parents($navbarEl).length === 0) {\n            $backdropEl.insertBefore($el);\n          } else {\n            $backdropEl.insertBefore($pageEl.find('.page-content').eq(0));\n          }\n        } else {\n          $backdropEl.insertBefore($el);\n        }\n      }\n    }\n\n    var $searchContainer;\n\n    if (sb.params.searchContainer) {\n      $searchContainer = $(sb.params.searchContainer);\n    }\n\n    var $inputEl;\n\n    if (sb.params.inputEl) {\n      $inputEl = $(sb.params.inputEl);\n    } else {\n      $inputEl = $el.find('input[type=\"search\"]').eq(0);\n    }\n\n    var $disableButtonEl;\n\n    if (sb.params.disableButton) {\n      if (sb.params.disableButtonEl) {\n        $disableButtonEl = $(sb.params.disableButtonEl);\n      } else {\n        $disableButtonEl = $el.find('.searchbar-disable-button');\n      }\n    }\n\n    extend(sb, {\n      app: app,\n      view: app.views.get($el.parents('.view')),\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      $searchContainer: $searchContainer,\n      searchContainer: $searchContainer && $searchContainer[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl[0],\n      $disableButtonEl: $disableButtonEl,\n      disableButtonEl: $disableButtonEl && $disableButtonEl[0],\n      disableButtonHasMargin: false,\n      $pageEl: $pageEl,\n      pageEl: $pageEl && $pageEl[0],\n      $navbarEl: $navbarEl,\n      navbarEl: $navbarEl && $navbarEl[0],\n      $foundEl: $foundEl,\n      foundEl: $foundEl && $foundEl[0],\n      $notFoundEl: $notFoundEl,\n      notFoundEl: $notFoundEl && $notFoundEl[0],\n      $hideOnEnableEl: $hideOnEnableEl,\n      hideOnEnableEl: $hideOnEnableEl && $hideOnEnableEl[0],\n      $hideOnSearchEl: $hideOnSearchEl,\n      hideOnSearchEl: $hideOnSearchEl && $hideOnSearchEl[0],\n      previousQuery: '',\n      query: '',\n      isVirtualList: $searchContainer && $searchContainer.hasClass('virtual-list'),\n      virtualList: undefined,\n      enabled: false,\n      expandable: expandable,\n      inline: inline\n    }); // Events\n\n    function preventSubmit(e) {\n      e.preventDefault();\n    }\n\n    function onInputFocus(e) {\n      sb.enable(e);\n      sb.$el.addClass('searchbar-focused');\n    }\n\n    function onInputBlur() {\n      sb.$el.removeClass('searchbar-focused');\n\n      if (app.theme === 'aurora' && (!$disableButtonEl || !$disableButtonEl.length || !sb.params.disableButton) && !sb.query) {\n        sb.disable();\n      }\n    }\n\n    function onInputChange() {\n      var value = sb.$inputEl.val().trim();\n\n      if (sb.$searchContainer && sb.$searchContainer.length > 0 && (sb.params.searchIn || sb.isVirtualList || sb.params.searchIn === sb.params.searchItem) || sb.params.customSearch) {\n        sb.search(value, true);\n      }\n    }\n\n    function onInputClear(e, previousValue) {\n      sb.$el.trigger('searchbar:clear', previousValue);\n      sb.emit('local::clear searchbarClear', sb, previousValue);\n    }\n\n    function disableOnClick(e) {\n      sb.disable(e);\n    }\n\n    function onPageBeforeOut() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.removeClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    function onPageBeforeIn() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.addClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').addClass('with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    sb.attachEvents = function attachEvents() {\n      $el.on('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.on('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.on('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.on('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.on('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.on('focus', onInputFocus);\n      sb.$inputEl.on('blur', onInputBlur);\n      sb.$inputEl.on(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.on('input:clear', onInputClear);\n    };\n\n    sb.detachEvents = function detachEvents() {\n      $el.off('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.off('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.off('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.off('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.off('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.off('focus', onInputFocus);\n      sb.$inputEl.off('blur', onInputBlur);\n      sb.$inputEl.off(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.off('input:clear', onInputClear);\n    }; // Install Modules\n\n\n    sb.useModules(); // Init\n\n    sb.init();\n    return sb || _assertThisInitialized(_this);\n  }\n\n  var _proto = Searchbar.prototype;\n\n  _proto.clear = function clear(e) {\n    var sb = this;\n\n    if (!sb.query && e && $(e.target).hasClass('searchbar-clear')) {\n      sb.disable();\n      return sb;\n    }\n\n    var previousQuery = sb.value;\n    sb.$inputEl.val('').trigger('change').focus();\n    sb.$el.trigger('searchbar:clear', previousQuery);\n    sb.emit('local::clear searchbarClear', sb, previousQuery);\n    return sb;\n  };\n\n  _proto.setDisableButtonMargin = function setDisableButtonMargin() {\n    var sb = this;\n    if (sb.expandable) return;\n    var app = sb.app;\n    sb.$disableButtonEl.transition(0).show();\n    sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), -sb.disableButtonEl.offsetWidth + \"px\");\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    sb._clientLeft = sb.$disableButtonEl[0].clientLeft;\n    sb.$disableButtonEl.transition('');\n    sb.disableButtonHasMargin = true;\n  };\n\n  _proto.enable = function enable(setFocus) {\n    var sb = this;\n    if (sb.enabled) return sb;\n    var app = sb.app;\n    var document = getDocument();\n    var device = getDevice();\n    sb.enabled = true;\n\n    function enable() {\n      if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch) && !sb.$el.hasClass('searchbar-enabled') && !sb.query) {\n        sb.backdropShow();\n      }\n\n      sb.$el.addClass('searchbar-enabled');\n\n      if (!sb.$disableButtonEl || sb.$disableButtonEl && sb.$disableButtonEl.length === 0) {\n        sb.$el.addClass('searchbar-enabled-no-disable-button');\n      }\n\n      if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n        if (!sb.disableButtonHasMargin) {\n          sb.setDisableButtonMargin();\n        }\n\n        sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), '0px');\n      }\n\n      if (sb.expandable) {\n        var $navbarEl = sb.$el.parents('.navbar');\n\n        if ($navbarEl.hasClass('navbar-large') && sb.$pageEl) {\n          var $pageContentEl = sb.$pageEl.find('.page-content');\n          var $titleLargeEl = $navbarEl.find('.title-large');\n          $pageContentEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length && $pageContentEl.length) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop -= $titleLargeEl[0].offsetHeight;\n            setTimeout(function () {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        if (app.theme === 'md' && $navbarEl.length) {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n        } else {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large')) {\n            $navbarEl.addClass('navbar-large-collapsed');\n          }\n        }\n      }\n\n      if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.addClass('hidden-by-searchbar');\n      sb.$el.trigger('searchbar:enable');\n      sb.emit('local::enable searchbarEnable', sb);\n    }\n\n    var needsFocus = false;\n\n    if (setFocus === true) {\n      if (document.activeElement !== sb.inputEl) {\n        needsFocus = true;\n      }\n    }\n\n    var isIos = device.ios && app.theme === 'ios';\n\n    if (isIos) {\n      if (sb.expandable) {\n        if (needsFocus) sb.$inputEl.focus();\n        enable();\n      } else {\n        if (needsFocus) sb.$inputEl.focus();\n\n        if (setFocus && (setFocus.type === 'focus' || setFocus === true)) {\n          nextTick(function () {\n            enable();\n          }, 400);\n        } else {\n          enable();\n        }\n      }\n    } else {\n      if (needsFocus) sb.$inputEl.focus();\n\n      if (app.theme === 'md' && sb.expandable) {\n        sb.$el.parents('.page, .view, .navbar-inner, .navbar').scrollLeft(app.rtl ? 100 : 0);\n      }\n\n      enable();\n    }\n\n    return sb;\n  };\n\n  _proto.disable = function disable() {\n    var sb = this;\n    if (!sb.enabled) return sb;\n    var app = sb.app;\n    sb.$inputEl.val('').trigger('change');\n    sb.$el.removeClass('searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button');\n\n    if (sb.expandable) {\n      var $navbarEl = sb.$el.parents('.navbar');\n      var $pageContentEl = sb.$pageEl && sb.$pageEl.find('.page-content');\n\n      if ($navbarEl.hasClass('navbar-large') && $pageContentEl.length) {\n        var $titleLargeEl = $navbarEl.find('.title-large');\n        sb.$el.transitionEnd(function () {\n          $pageContentEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length) {\n          var scrollTop = $pageContentEl[0].scrollTop;\n          var titleLargeHeight = $titleLargeEl[0].offsetHeight;\n\n          if (scrollTop > titleLargeHeight) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop = scrollTop + titleLargeHeight;\n            setTimeout(function () {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        $pageContentEl.removeClass('with-searchbar-expandable-enabled').addClass('with-searchbar-expandable-closing');\n      }\n\n      if (app.theme === 'md' && $navbarEl.length) {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(function () {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n      } else {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(function () {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if (sb.$pageEl) {\n          sb.$pageEl.find('.page-content').trigger('scroll');\n        }\n      }\n    }\n\n    if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n      sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), -sb.disableButtonEl.offsetWidth + \"px\");\n    }\n\n    if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch)) {\n      sb.backdropHide();\n    }\n\n    sb.enabled = false;\n    sb.$inputEl.blur();\n    if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.removeClass('hidden-by-searchbar');\n    sb.$el.trigger('searchbar:disable');\n    sb.emit('local::disable searchbarDisable', sb);\n    return sb;\n  };\n\n  _proto.toggle = function toggle() {\n    var sb = this;\n    if (sb.enabled) sb.disable();else sb.enable(true);\n    return sb;\n  };\n\n  _proto.backdropShow = function backdropShow() {\n    var sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.addClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  };\n\n  _proto.backdropHide = function backdropHide() {\n    var sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.removeClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  };\n\n  _proto.search = function search(query, internal) {\n    var sb = this;\n    sb.previousQuery = sb.query || '';\n    if (query === sb.previousQuery) return sb;\n\n    if (!internal) {\n      if (!sb.enabled) {\n        sb.enable();\n      }\n\n      sb.$inputEl.val(query);\n      sb.$inputEl.trigger('input');\n    }\n\n    sb.query = query;\n    sb.value = query;\n    var $searchContainer = sb.$searchContainer,\n        $el = sb.$el,\n        $foundEl = sb.$foundEl,\n        $notFoundEl = sb.$notFoundEl,\n        $hideOnSearchEl = sb.$hideOnSearchEl,\n        isVirtualList = sb.isVirtualList; // Hide on search element\n\n    if (query.length > 0 && $hideOnSearchEl) {\n      $hideOnSearchEl.addClass('hidden-by-searchbar');\n    } else if ($hideOnSearchEl) {\n      $hideOnSearchEl.removeClass('hidden-by-searchbar');\n    } // Add active/inactive classes on overlay\n\n\n    if ($searchContainer && $searchContainer.length && $el.hasClass('searchbar-enabled') || sb.params.customSearch && $el.hasClass('searchbar-enabled')) {\n      if (query.length === 0) {\n        sb.backdropShow();\n      } else {\n        sb.backdropHide();\n      }\n    }\n\n    if (sb.params.customSearch) {\n      $el.trigger('searchbar:search', {\n        query: query,\n        previousQuery: sb.previousQuery\n      });\n      sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n      return sb;\n    }\n\n    var foundItems = [];\n    var vlQuery;\n\n    if (isVirtualList) {\n      sb.virtualList = $searchContainer[0].f7VirtualList;\n\n      if (query.trim() === '') {\n        sb.virtualList.resetFilter();\n        if ($notFoundEl) $notFoundEl.hide();\n        if ($foundEl) $foundEl.show();\n        $el.trigger('searchbar:search', {\n          query: query,\n          previousQuery: sb.previousQuery\n        });\n        sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n        return sb;\n      }\n\n      vlQuery = sb.params.removeDiacritics ? removeDiacritics(query) : query;\n\n      if (sb.virtualList.params.searchAll) {\n        foundItems = sb.virtualList.params.searchAll(vlQuery, sb.virtualList.items) || [];\n      } else if (sb.virtualList.params.searchByItem) {\n        for (var i = 0; i < sb.virtualList.items.length; i += 1) {\n          if (sb.virtualList.params.searchByItem(vlQuery, sb.virtualList.params.items[i], i)) {\n            foundItems.push(i);\n          }\n        }\n      }\n    } else {\n      var values;\n      if (sb.params.removeDiacritics) values = removeDiacritics(query.trim().toLowerCase()).split(' ');else {\n        values = query.trim().toLowerCase().split(' ');\n      }\n      $searchContainer.find(sb.params.searchItem).removeClass('hidden-by-searchbar').each(function (itemEl) {\n        var $itemEl = $(itemEl);\n        var compareWithText = [];\n        var $searchIn = sb.params.searchIn ? $itemEl.find(sb.params.searchIn) : $itemEl;\n\n        if (sb.params.searchIn === sb.params.searchItem) {\n          $searchIn = $itemEl;\n        }\n\n        $searchIn.each(function (searchInEl) {\n          var itemText = $(searchInEl).text().trim().toLowerCase();\n          if (sb.params.removeDiacritics) itemText = removeDiacritics(itemText);\n          compareWithText.push(itemText);\n        });\n        compareWithText = compareWithText.join(' ');\n        var wordsMatch = 0;\n\n        for (var _i = 0; _i < values.length; _i += 1) {\n          if (compareWithText.indexOf(values[_i]) >= 0) wordsMatch += 1;\n        }\n\n        if (wordsMatch !== values.length && !(sb.params.ignore && $itemEl.is(sb.params.ignore))) {\n          $itemEl.addClass('hidden-by-searchbar');\n        } else {\n          foundItems.push($itemEl[0]);\n        }\n      });\n\n      if (sb.params.hideDividers) {\n        $searchContainer.find(sb.params.searchGroupTitle).each(function (titleEl) {\n          var $titleEl = $(titleEl);\n          var $nextElements = $titleEl.nextAll(sb.params.searchItem);\n          var hide = true;\n\n          for (var _i2 = 0; _i2 < $nextElements.length; _i2 += 1) {\n            var $nextEl = $nextElements.eq(_i2);\n            if ($nextEl.is(sb.params.searchGroupTitle)) break;\n\n            if (!$nextEl.hasClass('hidden-by-searchbar')) {\n              hide = false;\n            }\n          }\n\n          var ignore = sb.params.ignore && $titleEl.is(sb.params.ignore);\n          if (hide && !ignore) $titleEl.addClass('hidden-by-searchbar');else $titleEl.removeClass('hidden-by-searchbar');\n        });\n      }\n\n      if (sb.params.hideGroups) {\n        $searchContainer.find(sb.params.searchGroup).each(function (groupEl) {\n          var $groupEl = $(groupEl);\n          var ignore = sb.params.ignore && $groupEl.is(sb.params.ignore); // eslint-disable-next-line\n\n          var notHidden = $groupEl.find(sb.params.searchItem).filter(function (el) {\n            return !$(el).hasClass('hidden-by-searchbar');\n          });\n\n          if (notHidden.length === 0 && !ignore) {\n            $groupEl.addClass('hidden-by-searchbar');\n          } else {\n            $groupEl.removeClass('hidden-by-searchbar');\n          }\n        });\n      }\n    }\n\n    if (foundItems.length === 0) {\n      if ($notFoundEl) $notFoundEl.show();\n      if ($foundEl) $foundEl.hide();\n    } else {\n      if ($notFoundEl) $notFoundEl.hide();\n      if ($foundEl) $foundEl.show();\n    }\n\n    if (isVirtualList && sb.virtualList) {\n      sb.virtualList.filterItems(foundItems);\n    }\n\n    $el.trigger('searchbar:search', {\n      query: query,\n      previousQuery: sb.previousQuery,\n      foundItems: foundItems\n    });\n    sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery, foundItems);\n    return sb;\n  };\n\n  _proto.init = function init() {\n    var sb = this;\n    if (sb.expandable && sb.$el) sb.$el.addClass('searchbar-expandable');\n    if (sb.inline && sb.$el) sb.$el.addClass('searchbar-inline');\n    sb.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var sb = this;\n    sb.emit('local::beforeDestroy searchbarBeforeDestroy', sb);\n    sb.$el.trigger('searchbar:beforedestroy');\n    sb.detachEvents();\n\n    if (sb.$el[0]) {\n      sb.$el[0].f7Searchbar = null;\n      delete sb.$el[0].f7Searchbar;\n    }\n\n    deleteProps(sb);\n  };\n\n  return Searchbar;\n}(FrameworkClass);\n\nexport default Searchbar;","map":{"version":3,"sources":["E:/Programming/React/rashiApp/node_modules/framework7/esm/components/searchbar/searchbar-class.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","getDocument","$","extend","nextTick","deleteProps","FrameworkClass","getDevice","removeDiacritics","Searchbar","_FrameworkClass","app","params","_this","call","sb","defaults","el","undefined","inputEl","inputEvents","disableButton","disableButtonEl","backdropEl","searchContainer","searchItem","searchIn","searchGroup","searchGroupTitle","ignore","foundEl","notFoundEl","hideOnEnableEl","hideOnSearchEl","backdrop","customSearch","hideDividers","hideGroups","disableOnBackdropClick","expandable","inline","useModulesParams","$el","length","f7Searchbar","$pageEl","$navbarEl","parents","navbar","getPageByEl","$currentPageEl","find","f7Page","navbarEl","$foundEl","$notFoundEl","$hideOnEnableEl","$hideOnSearchEl","hasClass","theme","$backdropEl","siblings","insertBefore","eq","$searchContainer","$inputEl","$disableButtonEl","view","views","get","disableButtonHasMargin","pageEl","previousQuery","query","isVirtualList","virtualList","enabled","preventSubmit","e","preventDefault","onInputFocus","enable","addClass","onInputBlur","removeClass","disable","onInputChange","value","val","trim","search","onInputClear","previousValue","trigger","emit","disableOnClick","onPageBeforeOut","onPageBeforeIn","attachEvents","on","detachEvents","off","useModules","init","_proto","clear","target","focus","setDisableButtonMargin","transition","show","css","rtl","offsetWidth","_clientLeft","clientLeft","setFocus","document","device","backdropShow","$pageContentEl","$titleLargeEl","scrollTop","offsetHeight","setTimeout","needsFocus","activeElement","isIos","ios","type","scrollLeft","transitionEnd","titleLargeHeight","backdropHide","blur","toggle","internal","foundItems","vlQuery","f7VirtualList","resetFilter","hide","searchAll","items","searchByItem","i","push","values","toLowerCase","split","each","itemEl","$itemEl","compareWithText","$searchIn","searchInEl","itemText","text","join","wordsMatch","_i","indexOf","is","titleEl","$titleEl","$nextElements","nextAll","_i2","$nextEl","groupEl","$groupEl","notHidden","filter","filterItems","destroy"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7';\nimport { extend, nextTick, deleteProps } from '../../shared/utils';\nimport FrameworkClass from '../../shared/class';\nimport { getDevice } from '../../shared/get-device';\nimport removeDiacritics from './remove-diacritics';\n\nvar Searchbar = /*#__PURE__*/function (_FrameworkClass) {\n  _inheritsLoose(Searchbar, _FrameworkClass);\n\n  function Searchbar(app, params) {\n    var _this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _FrameworkClass.call(this, params, [app]) || this;\n\n    var sb = _assertThisInitialized(_this);\n\n    var defaults = {\n      el: undefined,\n      inputEl: undefined,\n      inputEvents: 'change input compositionend',\n      disableButton: true,\n      disableButtonEl: undefined,\n      backdropEl: undefined,\n      searchContainer: undefined,\n      // container to search, HTMLElement or CSS selector\n      searchItem: 'li',\n      // single item selector, CSS selector\n      searchIn: undefined,\n      // where to search in item, CSS selector\n      searchGroup: '.list-group',\n      searchGroupTitle: '.item-divider, .list-group-title',\n      ignore: '.searchbar-ignore',\n      foundEl: '.searchbar-found',\n      notFoundEl: '.searchbar-not-found',\n      hideOnEnableEl: '.searchbar-hide-on-enable',\n      hideOnSearchEl: '.searchbar-hide-on-search',\n      backdrop: undefined,\n      removeDiacritics: true,\n      customSearch: false,\n      hideDividers: true,\n      hideGroups: true,\n      disableOnBackdropClick: true,\n      expandable: false,\n      inline: false\n    }; // Extend defaults with modules params\n\n    sb.useModulesParams(defaults);\n    sb.params = extend(defaults, params);\n    var $el = $(sb.params.el);\n    if ($el.length === 0) return sb || _assertThisInitialized(_this);\n    if ($el[0].f7Searchbar) return $el[0].f7Searchbar || _assertThisInitialized(_this);\n    $el[0].f7Searchbar = sb;\n    var $pageEl;\n    var $navbarEl = $el.parents('.navbar');\n\n    if ($el.parents('.page').length > 0) {\n      $pageEl = $el.parents('.page');\n    } else if ($navbarEl.length > 0) {\n      $pageEl = $(app.navbar.getPageByEl($navbarEl[0]));\n\n      if (!$pageEl.length) {\n        var $currentPageEl = $el.parents('.view').find('.page-current');\n\n        if ($currentPageEl[0] && $currentPageEl[0].f7Page && $currentPageEl[0].f7Page.navbarEl === $navbarEl[0]) {\n          $pageEl = $currentPageEl;\n        }\n      }\n    }\n\n    var $foundEl;\n\n    if (params.foundEl) {\n      $foundEl = $(params.foundEl);\n    } else if (typeof sb.params.foundEl === 'string' && $pageEl) {\n      $foundEl = $pageEl.find(sb.params.foundEl);\n    }\n\n    var $notFoundEl;\n\n    if (params.notFoundEl) {\n      $notFoundEl = $(params.notFoundEl);\n    } else if (typeof sb.params.notFoundEl === 'string' && $pageEl) {\n      $notFoundEl = $pageEl.find(sb.params.notFoundEl);\n    }\n\n    var $hideOnEnableEl;\n\n    if (params.hideOnEnableEl) {\n      $hideOnEnableEl = $(params.hideOnEnableEl);\n    } else if (typeof sb.params.hideOnEnableEl === 'string' && $pageEl) {\n      $hideOnEnableEl = $pageEl.find(sb.params.hideOnEnableEl);\n    }\n\n    var $hideOnSearchEl;\n\n    if (params.hideOnSearchEl) {\n      $hideOnSearchEl = $(params.hideOnSearchEl);\n    } else if (typeof sb.params.hideOnSearchEl === 'string' && $pageEl) {\n      $hideOnSearchEl = $pageEl.find(sb.params.hideOnSearchEl);\n    }\n\n    var expandable = sb.params.expandable || $el.hasClass('searchbar-expandable');\n    var inline = sb.params.inline || $el.hasClass('searchbar-inline');\n\n    if (typeof sb.params.backdrop === 'undefined') {\n      if (!inline) sb.params.backdrop = app.theme !== 'aurora';else sb.params.backdrop = false;\n    }\n\n    var $backdropEl;\n\n    if (sb.params.backdrop) {\n      if (sb.params.backdropEl) {\n        $backdropEl = $(sb.params.backdropEl);\n      } else if ($pageEl && $pageEl.length > 0) {\n        $backdropEl = $pageEl.find('.searchbar-backdrop');\n      } else {\n        $backdropEl = $el.siblings('.searchbar-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"searchbar-backdrop\"></div>');\n\n        if ($pageEl && $pageEl.length) {\n          if ($el.parents($pageEl).length > 0 && $navbarEl && $el.parents($navbarEl).length === 0) {\n            $backdropEl.insertBefore($el);\n          } else {\n            $backdropEl.insertBefore($pageEl.find('.page-content').eq(0));\n          }\n        } else {\n          $backdropEl.insertBefore($el);\n        }\n      }\n    }\n\n    var $searchContainer;\n\n    if (sb.params.searchContainer) {\n      $searchContainer = $(sb.params.searchContainer);\n    }\n\n    var $inputEl;\n\n    if (sb.params.inputEl) {\n      $inputEl = $(sb.params.inputEl);\n    } else {\n      $inputEl = $el.find('input[type=\"search\"]').eq(0);\n    }\n\n    var $disableButtonEl;\n\n    if (sb.params.disableButton) {\n      if (sb.params.disableButtonEl) {\n        $disableButtonEl = $(sb.params.disableButtonEl);\n      } else {\n        $disableButtonEl = $el.find('.searchbar-disable-button');\n      }\n    }\n\n    extend(sb, {\n      app: app,\n      view: app.views.get($el.parents('.view')),\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      $searchContainer: $searchContainer,\n      searchContainer: $searchContainer && $searchContainer[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl[0],\n      $disableButtonEl: $disableButtonEl,\n      disableButtonEl: $disableButtonEl && $disableButtonEl[0],\n      disableButtonHasMargin: false,\n      $pageEl: $pageEl,\n      pageEl: $pageEl && $pageEl[0],\n      $navbarEl: $navbarEl,\n      navbarEl: $navbarEl && $navbarEl[0],\n      $foundEl: $foundEl,\n      foundEl: $foundEl && $foundEl[0],\n      $notFoundEl: $notFoundEl,\n      notFoundEl: $notFoundEl && $notFoundEl[0],\n      $hideOnEnableEl: $hideOnEnableEl,\n      hideOnEnableEl: $hideOnEnableEl && $hideOnEnableEl[0],\n      $hideOnSearchEl: $hideOnSearchEl,\n      hideOnSearchEl: $hideOnSearchEl && $hideOnSearchEl[0],\n      previousQuery: '',\n      query: '',\n      isVirtualList: $searchContainer && $searchContainer.hasClass('virtual-list'),\n      virtualList: undefined,\n      enabled: false,\n      expandable: expandable,\n      inline: inline\n    }); // Events\n\n    function preventSubmit(e) {\n      e.preventDefault();\n    }\n\n    function onInputFocus(e) {\n      sb.enable(e);\n      sb.$el.addClass('searchbar-focused');\n    }\n\n    function onInputBlur() {\n      sb.$el.removeClass('searchbar-focused');\n\n      if (app.theme === 'aurora' && (!$disableButtonEl || !$disableButtonEl.length || !sb.params.disableButton) && !sb.query) {\n        sb.disable();\n      }\n    }\n\n    function onInputChange() {\n      var value = sb.$inputEl.val().trim();\n\n      if (sb.$searchContainer && sb.$searchContainer.length > 0 && (sb.params.searchIn || sb.isVirtualList || sb.params.searchIn === sb.params.searchItem) || sb.params.customSearch) {\n        sb.search(value, true);\n      }\n    }\n\n    function onInputClear(e, previousValue) {\n      sb.$el.trigger('searchbar:clear', previousValue);\n      sb.emit('local::clear searchbarClear', sb, previousValue);\n    }\n\n    function disableOnClick(e) {\n      sb.disable(e);\n    }\n\n    function onPageBeforeOut() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.removeClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    function onPageBeforeIn() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.addClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').addClass('with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    sb.attachEvents = function attachEvents() {\n      $el.on('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.on('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.on('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.on('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.on('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.on('focus', onInputFocus);\n      sb.$inputEl.on('blur', onInputBlur);\n      sb.$inputEl.on(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.on('input:clear', onInputClear);\n    };\n\n    sb.detachEvents = function detachEvents() {\n      $el.off('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.off('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.off('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.off('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.off('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.off('focus', onInputFocus);\n      sb.$inputEl.off('blur', onInputBlur);\n      sb.$inputEl.off(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.off('input:clear', onInputClear);\n    }; // Install Modules\n\n\n    sb.useModules(); // Init\n\n    sb.init();\n    return sb || _assertThisInitialized(_this);\n  }\n\n  var _proto = Searchbar.prototype;\n\n  _proto.clear = function clear(e) {\n    var sb = this;\n\n    if (!sb.query && e && $(e.target).hasClass('searchbar-clear')) {\n      sb.disable();\n      return sb;\n    }\n\n    var previousQuery = sb.value;\n    sb.$inputEl.val('').trigger('change').focus();\n    sb.$el.trigger('searchbar:clear', previousQuery);\n    sb.emit('local::clear searchbarClear', sb, previousQuery);\n    return sb;\n  };\n\n  _proto.setDisableButtonMargin = function setDisableButtonMargin() {\n    var sb = this;\n    if (sb.expandable) return;\n    var app = sb.app;\n    sb.$disableButtonEl.transition(0).show();\n    sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), -sb.disableButtonEl.offsetWidth + \"px\");\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    sb._clientLeft = sb.$disableButtonEl[0].clientLeft;\n    sb.$disableButtonEl.transition('');\n    sb.disableButtonHasMargin = true;\n  };\n\n  _proto.enable = function enable(setFocus) {\n    var sb = this;\n    if (sb.enabled) return sb;\n    var app = sb.app;\n    var document = getDocument();\n    var device = getDevice();\n    sb.enabled = true;\n\n    function enable() {\n      if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch) && !sb.$el.hasClass('searchbar-enabled') && !sb.query) {\n        sb.backdropShow();\n      }\n\n      sb.$el.addClass('searchbar-enabled');\n\n      if (!sb.$disableButtonEl || sb.$disableButtonEl && sb.$disableButtonEl.length === 0) {\n        sb.$el.addClass('searchbar-enabled-no-disable-button');\n      }\n\n      if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n        if (!sb.disableButtonHasMargin) {\n          sb.setDisableButtonMargin();\n        }\n\n        sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), '0px');\n      }\n\n      if (sb.expandable) {\n        var $navbarEl = sb.$el.parents('.navbar');\n\n        if ($navbarEl.hasClass('navbar-large') && sb.$pageEl) {\n          var $pageContentEl = sb.$pageEl.find('.page-content');\n          var $titleLargeEl = $navbarEl.find('.title-large');\n          $pageContentEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length && $pageContentEl.length) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop -= $titleLargeEl[0].offsetHeight;\n            setTimeout(function () {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        if (app.theme === 'md' && $navbarEl.length) {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n        } else {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large')) {\n            $navbarEl.addClass('navbar-large-collapsed');\n          }\n        }\n      }\n\n      if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.addClass('hidden-by-searchbar');\n      sb.$el.trigger('searchbar:enable');\n      sb.emit('local::enable searchbarEnable', sb);\n    }\n\n    var needsFocus = false;\n\n    if (setFocus === true) {\n      if (document.activeElement !== sb.inputEl) {\n        needsFocus = true;\n      }\n    }\n\n    var isIos = device.ios && app.theme === 'ios';\n\n    if (isIos) {\n      if (sb.expandable) {\n        if (needsFocus) sb.$inputEl.focus();\n        enable();\n      } else {\n        if (needsFocus) sb.$inputEl.focus();\n\n        if (setFocus && (setFocus.type === 'focus' || setFocus === true)) {\n          nextTick(function () {\n            enable();\n          }, 400);\n        } else {\n          enable();\n        }\n      }\n    } else {\n      if (needsFocus) sb.$inputEl.focus();\n\n      if (app.theme === 'md' && sb.expandable) {\n        sb.$el.parents('.page, .view, .navbar-inner, .navbar').scrollLeft(app.rtl ? 100 : 0);\n      }\n\n      enable();\n    }\n\n    return sb;\n  };\n\n  _proto.disable = function disable() {\n    var sb = this;\n    if (!sb.enabled) return sb;\n    var app = sb.app;\n    sb.$inputEl.val('').trigger('change');\n    sb.$el.removeClass('searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button');\n\n    if (sb.expandable) {\n      var $navbarEl = sb.$el.parents('.navbar');\n      var $pageContentEl = sb.$pageEl && sb.$pageEl.find('.page-content');\n\n      if ($navbarEl.hasClass('navbar-large') && $pageContentEl.length) {\n        var $titleLargeEl = $navbarEl.find('.title-large');\n        sb.$el.transitionEnd(function () {\n          $pageContentEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length) {\n          var scrollTop = $pageContentEl[0].scrollTop;\n          var titleLargeHeight = $titleLargeEl[0].offsetHeight;\n\n          if (scrollTop > titleLargeHeight) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop = scrollTop + titleLargeHeight;\n            setTimeout(function () {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        $pageContentEl.removeClass('with-searchbar-expandable-enabled').addClass('with-searchbar-expandable-closing');\n      }\n\n      if (app.theme === 'md' && $navbarEl.length) {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(function () {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n      } else {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(function () {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if (sb.$pageEl) {\n          sb.$pageEl.find('.page-content').trigger('scroll');\n        }\n      }\n    }\n\n    if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n      sb.$disableButtonEl.css(\"margin-\" + (app.rtl ? 'left' : 'right'), -sb.disableButtonEl.offsetWidth + \"px\");\n    }\n\n    if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch)) {\n      sb.backdropHide();\n    }\n\n    sb.enabled = false;\n    sb.$inputEl.blur();\n    if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.removeClass('hidden-by-searchbar');\n    sb.$el.trigger('searchbar:disable');\n    sb.emit('local::disable searchbarDisable', sb);\n    return sb;\n  };\n\n  _proto.toggle = function toggle() {\n    var sb = this;\n    if (sb.enabled) sb.disable();else sb.enable(true);\n    return sb;\n  };\n\n  _proto.backdropShow = function backdropShow() {\n    var sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.addClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  };\n\n  _proto.backdropHide = function backdropHide() {\n    var sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.removeClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  };\n\n  _proto.search = function search(query, internal) {\n    var sb = this;\n    sb.previousQuery = sb.query || '';\n    if (query === sb.previousQuery) return sb;\n\n    if (!internal) {\n      if (!sb.enabled) {\n        sb.enable();\n      }\n\n      sb.$inputEl.val(query);\n      sb.$inputEl.trigger('input');\n    }\n\n    sb.query = query;\n    sb.value = query;\n    var $searchContainer = sb.$searchContainer,\n        $el = sb.$el,\n        $foundEl = sb.$foundEl,\n        $notFoundEl = sb.$notFoundEl,\n        $hideOnSearchEl = sb.$hideOnSearchEl,\n        isVirtualList = sb.isVirtualList; // Hide on search element\n\n    if (query.length > 0 && $hideOnSearchEl) {\n      $hideOnSearchEl.addClass('hidden-by-searchbar');\n    } else if ($hideOnSearchEl) {\n      $hideOnSearchEl.removeClass('hidden-by-searchbar');\n    } // Add active/inactive classes on overlay\n\n\n    if ($searchContainer && $searchContainer.length && $el.hasClass('searchbar-enabled') || sb.params.customSearch && $el.hasClass('searchbar-enabled')) {\n      if (query.length === 0) {\n        sb.backdropShow();\n      } else {\n        sb.backdropHide();\n      }\n    }\n\n    if (sb.params.customSearch) {\n      $el.trigger('searchbar:search', {\n        query: query,\n        previousQuery: sb.previousQuery\n      });\n      sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n      return sb;\n    }\n\n    var foundItems = [];\n    var vlQuery;\n\n    if (isVirtualList) {\n      sb.virtualList = $searchContainer[0].f7VirtualList;\n\n      if (query.trim() === '') {\n        sb.virtualList.resetFilter();\n        if ($notFoundEl) $notFoundEl.hide();\n        if ($foundEl) $foundEl.show();\n        $el.trigger('searchbar:search', {\n          query: query,\n          previousQuery: sb.previousQuery\n        });\n        sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n        return sb;\n      }\n\n      vlQuery = sb.params.removeDiacritics ? removeDiacritics(query) : query;\n\n      if (sb.virtualList.params.searchAll) {\n        foundItems = sb.virtualList.params.searchAll(vlQuery, sb.virtualList.items) || [];\n      } else if (sb.virtualList.params.searchByItem) {\n        for (var i = 0; i < sb.virtualList.items.length; i += 1) {\n          if (sb.virtualList.params.searchByItem(vlQuery, sb.virtualList.params.items[i], i)) {\n            foundItems.push(i);\n          }\n        }\n      }\n    } else {\n      var values;\n      if (sb.params.removeDiacritics) values = removeDiacritics(query.trim().toLowerCase()).split(' ');else {\n        values = query.trim().toLowerCase().split(' ');\n      }\n      $searchContainer.find(sb.params.searchItem).removeClass('hidden-by-searchbar').each(function (itemEl) {\n        var $itemEl = $(itemEl);\n        var compareWithText = [];\n        var $searchIn = sb.params.searchIn ? $itemEl.find(sb.params.searchIn) : $itemEl;\n\n        if (sb.params.searchIn === sb.params.searchItem) {\n          $searchIn = $itemEl;\n        }\n\n        $searchIn.each(function (searchInEl) {\n          var itemText = $(searchInEl).text().trim().toLowerCase();\n          if (sb.params.removeDiacritics) itemText = removeDiacritics(itemText);\n          compareWithText.push(itemText);\n        });\n        compareWithText = compareWithText.join(' ');\n        var wordsMatch = 0;\n\n        for (var _i = 0; _i < values.length; _i += 1) {\n          if (compareWithText.indexOf(values[_i]) >= 0) wordsMatch += 1;\n        }\n\n        if (wordsMatch !== values.length && !(sb.params.ignore && $itemEl.is(sb.params.ignore))) {\n          $itemEl.addClass('hidden-by-searchbar');\n        } else {\n          foundItems.push($itemEl[0]);\n        }\n      });\n\n      if (sb.params.hideDividers) {\n        $searchContainer.find(sb.params.searchGroupTitle).each(function (titleEl) {\n          var $titleEl = $(titleEl);\n          var $nextElements = $titleEl.nextAll(sb.params.searchItem);\n          var hide = true;\n\n          for (var _i2 = 0; _i2 < $nextElements.length; _i2 += 1) {\n            var $nextEl = $nextElements.eq(_i2);\n            if ($nextEl.is(sb.params.searchGroupTitle)) break;\n\n            if (!$nextEl.hasClass('hidden-by-searchbar')) {\n              hide = false;\n            }\n          }\n\n          var ignore = sb.params.ignore && $titleEl.is(sb.params.ignore);\n          if (hide && !ignore) $titleEl.addClass('hidden-by-searchbar');else $titleEl.removeClass('hidden-by-searchbar');\n        });\n      }\n\n      if (sb.params.hideGroups) {\n        $searchContainer.find(sb.params.searchGroup).each(function (groupEl) {\n          var $groupEl = $(groupEl);\n          var ignore = sb.params.ignore && $groupEl.is(sb.params.ignore); // eslint-disable-next-line\n\n          var notHidden = $groupEl.find(sb.params.searchItem).filter(function (el) {\n            return !$(el).hasClass('hidden-by-searchbar');\n          });\n\n          if (notHidden.length === 0 && !ignore) {\n            $groupEl.addClass('hidden-by-searchbar');\n          } else {\n            $groupEl.removeClass('hidden-by-searchbar');\n          }\n        });\n      }\n    }\n\n    if (foundItems.length === 0) {\n      if ($notFoundEl) $notFoundEl.show();\n      if ($foundEl) $foundEl.hide();\n    } else {\n      if ($notFoundEl) $notFoundEl.hide();\n      if ($foundEl) $foundEl.show();\n    }\n\n    if (isVirtualList && sb.virtualList) {\n      sb.virtualList.filterItems(foundItems);\n    }\n\n    $el.trigger('searchbar:search', {\n      query: query,\n      previousQuery: sb.previousQuery,\n      foundItems: foundItems\n    });\n    sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery, foundItems);\n    return sb;\n  };\n\n  _proto.init = function init() {\n    var sb = this;\n    if (sb.expandable && sb.$el) sb.$el.addClass('searchbar-expandable');\n    if (sb.inline && sb.$el) sb.$el.addClass('searchbar-inline');\n    sb.attachEvents();\n  };\n\n  _proto.destroy = function destroy() {\n    var sb = this;\n    sb.emit('local::beforeDestroy searchbarBeforeDestroy', sb);\n    sb.$el.trigger('searchbar:beforedestroy');\n    sb.detachEvents();\n\n    if (sb.$el[0]) {\n      sb.$el[0].f7Searchbar = null;\n      delete sb.$el[0].f7Searchbar;\n    }\n\n    deleteProps(sb);\n  };\n\n  return Searchbar;\n}(FrameworkClass);\n\nexport default Searchbar;"]},"metadata":{},"sourceType":"module"}